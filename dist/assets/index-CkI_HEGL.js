(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();var p0={exports:{}},Ah={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $I=Symbol.for("react.transitional.element"),GI=Symbol.for("react.fragment");function _0(t,e,n){var s=null;if(n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),"key"in e){n={};for(var i in e)i!=="key"&&(n[i]=e[i])}else n=e;return e=n.ref,{$$typeof:$I,type:t,key:s,ref:e!==void 0?e:null,props:n}}Ah.Fragment=GI;Ah.jsx=_0;Ah.jsxs=_0;p0.exports=Ah;var B=p0.exports,y0={exports:{}},re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Og=Symbol.for("react.transitional.element"),KI=Symbol.for("react.portal"),QI=Symbol.for("react.fragment"),YI=Symbol.for("react.strict_mode"),XI=Symbol.for("react.profiler"),JI=Symbol.for("react.consumer"),WI=Symbol.for("react.context"),ZI=Symbol.for("react.forward_ref"),eC=Symbol.for("react.suspense"),tC=Symbol.for("react.memo"),v0=Symbol.for("react.lazy"),nC=Symbol.for("react.activity"),Fy=Symbol.iterator;function sC(t){return t===null||typeof t!="object"?null:(t=Fy&&t[Fy]||t["@@iterator"],typeof t=="function"?t:null)}var E0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T0=Object.assign,S0={};function ba(t,e,n){this.props=t,this.context=e,this.refs=S0,this.updater=n||E0}ba.prototype.isReactComponent={};ba.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ba.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function b0(){}b0.prototype=ba.prototype;function Dg(t,e,n){this.props=t,this.context=e,this.refs=S0,this.updater=n||E0}var Ng=Dg.prototype=new b0;Ng.constructor=Dg;T0(Ng,ba.prototype);Ng.isPureReactComponent=!0;var $y=Array.isArray;function Yd(){}var xe={H:null,A:null,T:null,S:null},A0=Object.prototype.hasOwnProperty;function Mg(t,e,n){var s=n.ref;return{$$typeof:Og,type:t,key:e,ref:s!==void 0?s:null,props:n}}function iC(t,e){return Mg(t.type,e,t.props)}function xg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Og}function rC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Gy=/\/+/g;function Bf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?rC(""+t.key):e.toString(36)}function aC(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(Yd,Yd):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function br(t,e,n,s,i){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(r){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Og:case KI:a=!0;break;case v0:return a=t._init,br(a(t._payload),e,n,s,i)}}if(a)return i=i(t),a=s===""?"."+Bf(t,0):s,$y(i)?(n="",a!=null&&(n=a.replace(Gy,"$&/")+"/"),br(i,e,n,"",function(c){return c})):i!=null&&(xg(i)&&(i=iC(i,n+(i.key==null||t&&t.key===i.key?"":(""+i.key).replace(Gy,"$&/")+"/")+a)),e.push(i)),1;a=0;var l=s===""?".":s+":";if($y(t))for(var u=0;u<t.length;u++)s=t[u],r=l+Bf(s,u),a+=br(s,e,n,r,i);else if(u=sC(t),typeof u=="function")for(t=u.call(t),u=0;!(s=t.next()).done;)s=s.value,r=l+Bf(s,u++),a+=br(s,e,n,r,i);else if(r==="object"){if(typeof t.then=="function")return br(aC(t),e,n,s,i);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function cu(t,e,n){if(t==null)return t;var s=[],i=0;return br(t,s,"","",function(r){return e.call(n,r,i++)}),s}function oC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ky=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},lC={map:cu,forEach:function(t,e,n){cu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return cu(t,function(){e++}),e},toArray:function(t){return cu(t,function(e){return e})||[]},only:function(t){if(!xg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Activity=nC;re.Children=lC;re.Component=ba;re.Fragment=QI;re.Profiler=XI;re.PureComponent=Dg;re.StrictMode=YI;re.Suspense=eC;re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=xe;re.__COMPILER_RUNTIME={__proto__:null,c:function(t){return xe.H.useMemoCache(t)}};re.cache=function(t){return function(){return t.apply(null,arguments)}};re.cacheSignal=function(){return null};re.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var s=T0({},t.props),i=t.key;if(e!=null)for(r in e.key!==void 0&&(i=""+e.key),e)!A0.call(e,r)||r==="key"||r==="__self"||r==="__source"||r==="ref"&&e.ref===void 0||(s[r]=e[r]);var r=arguments.length-2;if(r===1)s.children=n;else if(1<r){for(var a=Array(r),l=0;l<r;l++)a[l]=arguments[l+2];s.children=a}return Mg(t.type,i,s)};re.createContext=function(t){return t={$$typeof:WI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:JI,_context:t},t};re.createElement=function(t,e,n){var s,i={},r=null;if(e!=null)for(s in e.key!==void 0&&(r=""+e.key),e)A0.call(e,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(i[s]=e[s]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)i[s]===void 0&&(i[s]=a[s]);return Mg(t,r,i)};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:ZI,render:t}};re.isValidElement=xg;re.lazy=function(t){return{$$typeof:v0,_payload:{_status:-1,_result:t},_init:oC}};re.memo=function(t,e){return{$$typeof:tC,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=xe.T,n={};xe.T=n;try{var s=t(),i=xe.S;i!==null&&i(n,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(Yd,Ky)}catch(r){Ky(r)}finally{e!==null&&n.types!==null&&(e.types=n.types),xe.T=e}};re.unstable_useCacheRefresh=function(){return xe.H.useCacheRefresh()};re.use=function(t){return xe.H.use(t)};re.useActionState=function(t,e,n){return xe.H.useActionState(t,e,n)};re.useCallback=function(t,e){return xe.H.useCallback(t,e)};re.useContext=function(t){return xe.H.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t,e){return xe.H.useDeferredValue(t,e)};re.useEffect=function(t,e){return xe.H.useEffect(t,e)};re.useEffectEvent=function(t){return xe.H.useEffectEvent(t)};re.useId=function(){return xe.H.useId()};re.useImperativeHandle=function(t,e,n){return xe.H.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return xe.H.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return xe.H.useLayoutEffect(t,e)};re.useMemo=function(t,e){return xe.H.useMemo(t,e)};re.useOptimistic=function(t,e){return xe.H.useOptimistic(t,e)};re.useReducer=function(t,e,n){return xe.H.useReducer(t,e,n)};re.useRef=function(t){return xe.H.useRef(t)};re.useState=function(t){return xe.H.useState(t)};re.useSyncExternalStore=function(t,e,n){return xe.H.useSyncExternalStore(t,e,n)};re.useTransition=function(){return xe.H.useTransition()};re.version="19.2.4";y0.exports=re;var ut=y0.exports,w0={exports:{}},wh={},R0={exports:{}},I0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,oe){var ne=F.length;F.push(oe);e:for(;0<ne;){var ye=ne-1>>>1,H=F[ye];if(0<i(H,oe))F[ye]=oe,F[ne]=H,ne=ye;else break e}}function n(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var oe=F[0],ne=F.pop();if(ne!==oe){F[0]=ne;e:for(var ye=0,H=F.length,J=H>>>1;ye<J;){var Pe=2*(ye+1)-1,at=F[Pe],ot=Pe+1,Mn=F[ot];if(0>i(at,ne))ot<H&&0>i(Mn,at)?(F[ye]=Mn,F[ot]=ne,ye=ot):(F[ye]=at,F[Pe]=ne,ye=Pe);else if(ot<H&&0>i(Mn,ne))F[ye]=Mn,F[ot]=ne,ye=ot;else break e}}return oe}function i(F,oe){var ne=F.sortIndex-oe.sortIndex;return ne!==0?ne:F.id-oe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],d=1,m=null,g=3,p=!1,C=!1,O=!1,x=!1,S=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function I(F){for(var oe=n(c);oe!==null;){if(oe.callback===null)s(c);else if(oe.startTime<=F)s(c),oe.sortIndex=oe.expirationTime,e(u,oe);else break;oe=n(c)}}function U(F){if(O=!1,I(F),!C)if(n(u)!==null)C=!0,j||(j=!0,D());else{var oe=n(c);oe!==null&&It(U,oe.startTime-F)}}var j=!1,E=-1,v=5,T=-1;function b(){return x?!0:!(t.unstable_now()-T<v)}function w(){if(x=!1,j){var F=t.unstable_now();T=F;var oe=!0;try{e:{C=!1,O&&(O=!1,y(E),E=-1),p=!0;var ne=g;try{t:{for(I(F),m=n(u);m!==null&&!(m.expirationTime>F&&b());){var ye=m.callback;if(typeof ye=="function"){m.callback=null,g=m.priorityLevel;var H=ye(m.expirationTime<=F);if(F=t.unstable_now(),typeof H=="function"){m.callback=H,I(F),oe=!0;break t}m===n(u)&&s(u),I(F)}else s(u);m=n(u)}if(m!==null)oe=!0;else{var J=n(c);J!==null&&It(U,J.startTime-F),oe=!1}}break e}finally{m=null,g=ne,p=!1}oe=void 0}}finally{oe?D():j=!1}}}var D;if(typeof A=="function")D=function(){A(w)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Ge=R.port2;R.port1.onmessage=w,D=function(){Ge.postMessage(null)}}else D=function(){S(w,0)};function It(F,oe){E=S(function(){F(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(F){switch(g){case 1:case 2:case 3:var oe=3;break;default:oe=g}var ne=g;g=oe;try{return F()}finally{g=ne}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(F,oe){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ne=g;g=F;try{return oe()}finally{g=ne}},t.unstable_scheduleCallback=function(F,oe,ne){var ye=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?ye+ne:ye):ne=ye,F){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=ne+H,F={id:d++,callback:oe,priorityLevel:F,startTime:ne,expirationTime:H,sortIndex:-1},ne>ye?(F.sortIndex=ne,e(c,F),n(u)===null&&F===n(c)&&(O?(y(E),E=-1):O=!0,It(U,ne-ye))):(F.sortIndex=H,e(u,F),C||p||(C=!0,j||(j=!0,D()))),F},t.unstable_shouldYield=b,t.unstable_wrapCallback=function(F){var oe=g;return function(){var ne=g;g=oe;try{return F.apply(this,arguments)}finally{g=ne}}}})(I0);R0.exports=I0;var uC=R0.exports,C0={exports:{}},Ut={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cC=ut;function O0(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Vs(){}var Lt={d:{f:Vs,r:function(){throw Error(O0(522))},D:Vs,C:Vs,L:Vs,m:Vs,X:Vs,S:Vs,M:Vs},p:0,findDOMNode:null},hC=Symbol.for("react.portal");function fC(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hC,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}var Do=cC.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Rh(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Ut.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Lt;Ut.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(O0(299));return fC(t,e,null,n)};Ut.flushSync=function(t){var e=Do.T,n=Lt.p;try{if(Do.T=null,Lt.p=2,t)return t()}finally{Do.T=e,Lt.p=n,Lt.d.f()}};Ut.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Lt.d.C(t,e))};Ut.prefetchDNS=function(t){typeof t=="string"&&Lt.d.D(t)};Ut.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,s=Rh(n,e.crossOrigin),i=typeof e.integrity=="string"?e.integrity:void 0,r=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?Lt.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:s,integrity:i,fetchPriority:r}):n==="script"&&Lt.d.X(t,{crossOrigin:s,integrity:i,fetchPriority:r,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Ut.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Rh(e.as,e.crossOrigin);Lt.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Lt.d.M(t)};Ut.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,s=Rh(n,e.crossOrigin);Lt.d.L(t,n,{crossOrigin:s,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Ut.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Rh(e.as,e.crossOrigin);Lt.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Lt.d.m(t)};Ut.requestFormReset=function(t){Lt.d.r(t)};Ut.unstable_batchedUpdates=function(t,e){return t(e)};Ut.useFormState=function(t,e,n){return Do.H.useFormState(t,e,n)};Ut.useFormStatus=function(){return Do.H.useHostTransitionStatus()};Ut.version="19.2.4";function D0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(D0)}catch(t){console.error(t)}}D0(),C0.exports=Ut;var dC=C0.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rt=uC,N0=ut,mC=dC;function k(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function M0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Il(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function x0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function V0(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qy(t){if(Il(t)!==t)throw Error(k(188))}function gC(t){var e=t.alternate;if(!e){if(e=Il(t),e===null)throw Error(k(188));return e!==t?null:t}for(var n=t,s=e;;){var i=n.return;if(i===null)break;var r=i.alternate;if(r===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===n)return Qy(i),t;if(r===s)return Qy(i),e;r=r.sibling}throw Error(k(188))}if(n.return!==s.return)n=i,s=r;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,s=r;break}if(l===s){a=!0,s=i,n=r;break}l=l.sibling}if(!a){for(l=r.child;l;){if(l===n){a=!0,n=r,s=i;break}if(l===s){a=!0,s=r,n=i;break}l=l.sibling}if(!a)throw Error(k(189))}}if(n.alternate!==s)throw Error(k(190))}if(n.tag!==3)throw Error(k(188));return n.stateNode.current===n?t:e}function k0(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=k0(t),e!==null)return e;t=t.sibling}return null}var Ve=Object.assign,pC=Symbol.for("react.element"),hu=Symbol.for("react.transitional.element"),ho=Symbol.for("react.portal"),xr=Symbol.for("react.fragment"),P0=Symbol.for("react.strict_mode"),Xd=Symbol.for("react.profiler"),L0=Symbol.for("react.consumer"),ls=Symbol.for("react.context"),Vg=Symbol.for("react.forward_ref"),Jd=Symbol.for("react.suspense"),Wd=Symbol.for("react.suspense_list"),kg=Symbol.for("react.memo"),Us=Symbol.for("react.lazy"),Zd=Symbol.for("react.activity"),_C=Symbol.for("react.memo_cache_sentinel"),Yy=Symbol.iterator;function no(t){return t===null||typeof t!="object"?null:(t=Yy&&t[Yy]||t["@@iterator"],typeof t=="function"?t:null)}var yC=Symbol.for("react.client.reference");function em(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===yC?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xr:return"Fragment";case Xd:return"Profiler";case P0:return"StrictMode";case Jd:return"Suspense";case Wd:return"SuspenseList";case Zd:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case ho:return"Portal";case ls:return t.displayName||"Context";case L0:return(t._context.displayName||"Context")+".Consumer";case Vg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kg:return e=t.displayName||null,e!==null?e:em(t.type)||"Memo";case Us:e=t._payload,t=t._init;try{return em(t(e))}catch{}}return null}var fo=Array.isArray,ee=N0.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee=mC.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,qi={pending:!1,data:null,method:null,action:null},tm=[],Vr=-1;function Xn(t){return{current:t}}function gt(t){0>Vr||(t.current=tm[Vr],tm[Vr]=null,Vr--)}function Ce(t,e){Vr++,tm[Vr]=t.current,t.current=e}var qn=Xn(null),el=Xn(null),Zs=Xn(null),Tc=Xn(null);function Sc(t,e){switch(Ce(Zs,e),Ce(el,t),Ce(qn,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?tE(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=tE(e),t=sA(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}gt(qn),Ce(qn,t)}function ia(){gt(qn),gt(el),gt(Zs)}function nm(t){t.memoizedState!==null&&Ce(Tc,t);var e=qn.current,n=sA(e,t.type);e!==n&&(Ce(el,t),Ce(qn,n))}function bc(t){el.current===t&&(gt(qn),gt(el)),Tc.current===t&&(gt(Tc),hl._currentValue=qi)}var jf,Xy;function Ni(t){if(jf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);jf=e&&e[1]||"",Xy=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+jf+t+Xy}var qf=!1;function Hf(t,e){if(!t||qf)return"";qf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(e){var m=function(){throw Error()};if(Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(p){var g=p}Reflect.construct(t,[],m)}else{try{m.call()}catch(p){g=p}t.call(m.prototype)}}else{try{throw Error()}catch(p){g=p}(m=t())&&typeof m.catch=="function"&&m.catch(function(){})}}catch(p){if(p&&g&&typeof p.stack=="string")return[p.stack,g.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=s.DetermineComponentFrameRoot(),a=r[0],l=r[1];if(a&&l){var u=a.split(`
`),c=l.split(`
`);for(i=s=0;s<u.length&&!u[s].includes("DetermineComponentFrameRoot");)s++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(s===u.length||i===c.length)for(s=u.length-1,i=c.length-1;1<=s&&0<=i&&u[s]!==c[i];)i--;for(;1<=s&&0<=i;s--,i--)if(u[s]!==c[i]){if(s!==1||i!==1)do if(s--,i--,0>i||u[s]!==c[i]){var d=`
`+u[s].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=s&&0<=i);break}}}finally{qf=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Ni(n):""}function vC(t,e){switch(t.tag){case 26:case 27:case 5:return Ni(t.type);case 16:return Ni("Lazy");case 13:return t.child!==e&&e!==null?Ni("Suspense Fallback"):Ni("Suspense");case 19:return Ni("SuspenseList");case 0:case 15:return Hf(t.type,!1);case 11:return Hf(t.type.render,!1);case 1:return Hf(t.type,!0);case 31:return Ni("Activity");default:return""}}function Jy(t){try{var e="",n=null;do e+=vC(t,n),n=t,t=t.return;while(t);return e}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var sm=Object.prototype.hasOwnProperty,Pg=rt.unstable_scheduleCallback,Ff=rt.unstable_cancelCallback,EC=rt.unstable_shouldYield,TC=rt.unstable_requestPaint,nn=rt.unstable_now,SC=rt.unstable_getCurrentPriorityLevel,U0=rt.unstable_ImmediatePriority,z0=rt.unstable_UserBlockingPriority,Ac=rt.unstable_NormalPriority,bC=rt.unstable_LowPriority,B0=rt.unstable_IdlePriority,AC=rt.log,wC=rt.unstable_setDisableYieldValue,Cl=null,sn=null;function Ks(t){if(typeof AC=="function"&&wC(t),sn&&typeof sn.setStrictMode=="function")try{sn.setStrictMode(Cl,t)}catch{}}var rn=Math.clz32?Math.clz32:CC,RC=Math.log,IC=Math.LN2;function CC(t){return t>>>=0,t===0?32:31-(RC(t)/IC|0)|0}var fu=256,du=262144,mu=4194304;function Mi(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ih(t,e,n){var s=t.pendingLanes;if(s===0)return 0;var i=0,r=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var l=s&134217727;return l!==0?(s=l&~r,s!==0?i=Mi(s):(a&=l,a!==0?i=Mi(a):n||(n=l&~t,n!==0&&(i=Mi(n))))):(l=s&~r,l!==0?i=Mi(l):a!==0?i=Mi(a):n||(n=s&~t,n!==0&&(i=Mi(n)))),i===0?0:e!==0&&e!==i&&!(e&r)&&(r=i&-i,n=e&-e,r>=n||r===32&&(n&4194048)!==0)?e:i}function Ol(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function OC(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function j0(){var t=mu;return mu<<=1,!(mu&62914560)&&(mu=4194304),t}function $f(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Dl(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function DC(t,e,n,s,i,r){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,u=t.expirationTimes,c=t.hiddenUpdates;for(n=a&~n;0<n;){var d=31-rn(n),m=1<<d;l[d]=0,u[d]=-1;var g=c[d];if(g!==null)for(c[d]=null,d=0;d<g.length;d++){var p=g[d];p!==null&&(p.lane&=-536870913)}n&=~m}s!==0&&q0(t,s,0),r!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=r&~(a&~e))}function q0(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var s=31-rn(e);t.entangledLanes|=e,t.entanglements[s]=t.entanglements[s]|1073741824|n&261930}function H0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-rn(n),i=1<<s;i&e|t[s]&e&&(t[s]|=e),n&=~i}}function F0(t,e){var n=e&-e;return n=n&42?1:Lg(n),n&(t.suspendedLanes|e)?0:n}function Lg(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ug(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function $0(){var t=Ee.p;return t!==0?t:(t=window.event,t===void 0?32:mA(t.type))}function Wy(t,e){var n=Ee.p;try{return Ee.p=t,e()}finally{Ee.p=n}}var bi=Math.random().toString(36).slice(2),Et="__reactFiber$"+bi,Gt="__reactProps$"+bi,Aa="__reactContainer$"+bi,im="__reactEvents$"+bi,NC="__reactListeners$"+bi,MC="__reactHandles$"+bi,Zy="__reactResources$"+bi,Nl="__reactMarker$"+bi;function zg(t){delete t[Et],delete t[Gt],delete t[im],delete t[NC],delete t[MC]}function kr(t){var e=t[Et];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Aa]||n[Et]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=aE(t);t!==null;){if(n=t[Et])return n;t=aE(t)}return e}t=n,n=t.parentNode}return null}function wa(t){if(t=t[Et]||t[Aa]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function mo(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(k(33))}function Gr(t){var e=t[Zy];return e||(e=t[Zy]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function dt(t){t[Nl]=!0}var G0=new Set,K0={};function ar(t,e){ra(t,e),ra(t+"Capture",e)}function ra(t,e){for(K0[t]=e,t=0;t<e.length;t++)G0.add(e[t])}var xC=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ev={},tv={};function VC(t){return sm.call(tv,t)?!0:sm.call(ev,t)?!1:xC.test(t)?tv[t]=!0:(ev[t]=!0,!1)}function Bu(t,e,n){if(VC(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var s=e.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function gu(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Wn(t,e,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+s)}}function cn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Q0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function kC(t,e,n){var s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,r=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,r.call(this,a)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function rm(t){if(!t._valueTracker){var e=Q0(t)?"checked":"value";t._valueTracker=kC(t,e,""+t[e])}}function Y0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=Q0(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function wc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var PC=/[\n"\\]/g;function dn(t){return t.replace(PC,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function am(t,e,n,s,i,r,a,l){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+cn(e)):t.value!==""+cn(e)&&(t.value=""+cn(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?om(t,a,cn(e)):n!=null?om(t,a,cn(n)):s!=null&&t.removeAttribute("value"),i==null&&r!=null&&(t.defaultChecked=!!r),i!=null&&(t.checked=i&&typeof i!="function"&&typeof i!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+cn(l):t.removeAttribute("name")}function X0(t,e,n,s,i,r,a,l){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.type=r),e!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||e!=null)){rm(t);return}n=n!=null?""+cn(n):"",e=e!=null?""+cn(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}s=s??i,s=typeof s!="function"&&typeof s!="symbol"&&!!s,t.checked=l?t.checked:!!s,t.defaultChecked=!!s,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a),rm(t)}function om(t,e,n){e==="number"&&wc(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Kr(t,e,n,s){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&s&&(t[n].defaultSelected=!0)}else{for(n=""+cn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,s&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function J0(t,e,n){if(e!=null&&(e=""+cn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+cn(n):""}function W0(t,e,n,s){if(e==null){if(s!=null){if(n!=null)throw Error(k(92));if(fo(s)){if(1<s.length)throw Error(k(93));s=s[0]}n=s}n==null&&(n=""),e=n}n=cn(e),t.defaultValue=n,s=t.textContent,s===n&&s!==""&&s!==null&&(t.value=s),rm(t)}function aa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var LC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nv(t,e,n){var s=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":s?t.setProperty(e,n):typeof n!="number"||n===0||LC.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function Z0(t,e,n){if(e!=null&&typeof e!="object")throw Error(k(62));if(t=t.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||e!=null&&e.hasOwnProperty(s)||(s.indexOf("--")===0?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="");for(var i in e)s=e[i],e.hasOwnProperty(i)&&n[i]!==s&&nv(t,i,s)}else for(var r in e)e.hasOwnProperty(r)&&nv(t,r,e[r])}function Bg(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var UC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ju(t){return zC.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function us(){}var lm=null;function jg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pr=null,Qr=null;function sv(t){var e=wa(t);if(e&&(t=e.stateNode)){var n=t[Gt]||null;e:switch(t=e.stateNode,e.type){case"input":if(am(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+dn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var i=s[Gt]||null;if(!i)throw Error(k(90));am(s,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(e=0;e<n.length;e++)s=n[e],s.form===t.form&&Y0(s)}break e;case"textarea":J0(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Kr(t,!!n.multiple,e,!1)}}}var Gf=!1;function eS(t,e,n){if(Gf)return t(e,n);Gf=!0;try{var s=t(e);return s}finally{if(Gf=!1,(Pr!==null||Qr!==null)&&(zh(),Pr&&(e=Pr,t=Qr,Qr=Pr=null,sv(e),t)))for(e=0;e<t.length;e++)sv(t[e])}}function tl(t,e){var n=t.stateNode;if(n===null)return null;var s=n[Gt]||null;if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(k(231,e,typeof n));return n}var _s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),um=!1;if(_s)try{var so={};Object.defineProperty(so,"passive",{get:function(){um=!0}}),window.addEventListener("test",so,so),window.removeEventListener("test",so,so)}catch{um=!1}var Qs=null,qg=null,qu=null;function tS(){if(qu)return qu;var t,e=qg,n=e.length,s,i="value"in Qs?Qs.value:Qs.textContent,r=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(s=1;s<=a&&e[n-s]===i[r-s];s++);return qu=i.slice(t,1<s?1-s:void 0)}function Hu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pu(){return!0}function iv(){return!1}function Kt(t){function e(n,s,i,r,a){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?pu:iv,this.isPropagationStopped=iv,this}return Ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=pu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=pu)},persist:function(){},isPersistent:pu}),e}var or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ch=Kt(or),Ml=Ve({},or,{view:0,detail:0}),BC=Kt(Ml),Kf,Qf,io,Oh=Ve({},Ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==io&&(io&&t.type==="mousemove"?(Kf=t.screenX-io.screenX,Qf=t.screenY-io.screenY):Qf=Kf=0,io=t),Kf)},movementY:function(t){return"movementY"in t?t.movementY:Qf}}),rv=Kt(Oh),jC=Ve({},Oh,{dataTransfer:0}),qC=Kt(jC),HC=Ve({},Ml,{relatedTarget:0}),Yf=Kt(HC),FC=Ve({},or,{animationName:0,elapsedTime:0,pseudoElement:0}),$C=Kt(FC),GC=Ve({},or,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),KC=Kt(GC),QC=Ve({},or,{data:0}),av=Kt(QC),YC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},JC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=JC[t])?!!e[t]:!1}function Hg(){return WC}var ZC=Ve({},Ml,{key:function(t){if(t.key){var e=YC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Hu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?XC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hg,charCode:function(t){return t.type==="keypress"?Hu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),e2=Kt(ZC),t2=Ve({},Oh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ov=Kt(t2),n2=Ve({},Ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hg}),s2=Kt(n2),i2=Ve({},or,{propertyName:0,elapsedTime:0,pseudoElement:0}),r2=Kt(i2),a2=Ve({},Oh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),o2=Kt(a2),l2=Ve({},or,{newState:0,oldState:0}),u2=Kt(l2),c2=[9,13,27,32],Fg=_s&&"CompositionEvent"in window,No=null;_s&&"documentMode"in document&&(No=document.documentMode);var h2=_s&&"TextEvent"in window&&!No,nS=_s&&(!Fg||No&&8<No&&11>=No),lv=" ",uv=!1;function sS(t,e){switch(t){case"keyup":return c2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Lr=!1;function f2(t,e){switch(t){case"compositionend":return iS(e);case"keypress":return e.which!==32?null:(uv=!0,lv);case"textInput":return t=e.data,t===lv&&uv?null:t;default:return null}}function d2(t,e){if(Lr)return t==="compositionend"||!Fg&&sS(t,e)?(t=tS(),qu=qg=Qs=null,Lr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return nS&&e.locale!=="ko"?null:e.data;default:return null}}var m2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!m2[t.type]:e==="textarea"}function rS(t,e,n,s){Pr?Qr?Qr.push(s):Qr=[s]:Pr=s,e=Hc(e,"onChange"),0<e.length&&(n=new Ch("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var Mo=null,nl=null;function g2(t){eA(t,0)}function Dh(t){var e=mo(t);if(Y0(e))return t}function hv(t,e){if(t==="change")return e}var aS=!1;if(_s){var Xf;if(_s){var Jf="oninput"in document;if(!Jf){var fv=document.createElement("div");fv.setAttribute("oninput","return;"),Jf=typeof fv.oninput=="function"}Xf=Jf}else Xf=!1;aS=Xf&&(!document.documentMode||9<document.documentMode)}function dv(){Mo&&(Mo.detachEvent("onpropertychange",oS),nl=Mo=null)}function oS(t){if(t.propertyName==="value"&&Dh(nl)){var e=[];rS(e,nl,t,jg(t)),eS(g2,e)}}function p2(t,e,n){t==="focusin"?(dv(),Mo=e,nl=n,Mo.attachEvent("onpropertychange",oS)):t==="focusout"&&dv()}function _2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Dh(nl)}function y2(t,e){if(t==="click")return Dh(e)}function v2(t,e){if(t==="input"||t==="change")return Dh(e)}function E2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var on=typeof Object.is=="function"?Object.is:E2;function sl(t,e){if(on(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!sm.call(e,i)||!on(t[i],e[i]))return!1}return!0}function mv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gv(t,e){var n=mv(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mv(n)}}function lS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?lS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function uS(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=wc(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=wc(t.document)}return e}function $g(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var T2=_s&&"documentMode"in document&&11>=document.documentMode,Ur=null,cm=null,xo=null,hm=!1;function pv(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hm||Ur==null||Ur!==wc(s)||(s=Ur,"selectionStart"in s&&$g(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),xo&&sl(xo,s)||(xo=s,s=Hc(cm,"onSelect"),0<s.length&&(e=new Ch("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Ur)))}function Di(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var zr={animationend:Di("Animation","AnimationEnd"),animationiteration:Di("Animation","AnimationIteration"),animationstart:Di("Animation","AnimationStart"),transitionrun:Di("Transition","TransitionRun"),transitionstart:Di("Transition","TransitionStart"),transitioncancel:Di("Transition","TransitionCancel"),transitionend:Di("Transition","TransitionEnd")},Wf={},cS={};_s&&(cS=document.createElement("div").style,"AnimationEvent"in window||(delete zr.animationend.animation,delete zr.animationiteration.animation,delete zr.animationstart.animation),"TransitionEvent"in window||delete zr.transitionend.transition);function lr(t){if(Wf[t])return Wf[t];if(!zr[t])return t;var e=zr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in cS)return Wf[t]=e[n];return t}var hS=lr("animationend"),fS=lr("animationiteration"),dS=lr("animationstart"),S2=lr("transitionrun"),b2=lr("transitionstart"),A2=lr("transitioncancel"),mS=lr("transitionend"),gS=new Map,fm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");fm.push("scrollEnd");function Nn(t,e){gS.set(t,e),ar(e,[t])}var Rc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},un=[],Br=0,Gg=0;function Nh(){for(var t=Br,e=Gg=Br=0;e<t;){var n=un[e];un[e++]=null;var s=un[e];un[e++]=null;var i=un[e];un[e++]=null;var r=un[e];if(un[e++]=null,s!==null&&i!==null){var a=s.pending;a===null?i.next=i:(i.next=a.next,a.next=i),s.pending=i}r!==0&&pS(n,i,r)}}function Mh(t,e,n,s){un[Br++]=t,un[Br++]=e,un[Br++]=n,un[Br++]=s,Gg|=s,t.lanes|=s,t=t.alternate,t!==null&&(t.lanes|=s)}function Kg(t,e,n,s){return Mh(t,e,n,s),Ic(t)}function ur(t,e){return Mh(t,null,null,e),Ic(t)}function pS(t,e,n){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n);for(var i=!1,r=t.return;r!==null;)r.childLanes|=n,s=r.alternate,s!==null&&(s.childLanes|=n),r.tag===22&&(t=r.stateNode,t===null||t._visibility&1||(i=!0)),t=r,r=r.return;return t.tag===3?(r=t.stateNode,i&&e!==null&&(i=31-rn(n),t=r.hiddenUpdates,s=t[i],s===null?t[i]=[e]:s.push(e),e.lane=n|536870912),r):null}function Ic(t){if(50<qo)throw qo=0,xm=null,Error(k(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var jr={};function w2(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(t,e,n,s){return new w2(t,e,n,s)}function Qg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ds(t,e){var n=t.alternate;return n===null?(n=en(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function _S(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Fu(t,e,n,s,i,r){var a=0;if(s=t,typeof t=="function")Qg(t)&&(a=1);else if(typeof t=="string")a=DO(t,n,qn.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Zd:return t=en(31,n,e,i),t.elementType=Zd,t.lanes=r,t;case xr:return Hi(n.children,i,r,e);case P0:a=8,i|=24;break;case Xd:return t=en(12,n,e,i|2),t.elementType=Xd,t.lanes=r,t;case Jd:return t=en(13,n,e,i),t.elementType=Jd,t.lanes=r,t;case Wd:return t=en(19,n,e,i),t.elementType=Wd,t.lanes=r,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ls:a=10;break e;case L0:a=9;break e;case Vg:a=11;break e;case kg:a=14;break e;case Us:a=16,s=null;break e}a=29,n=Error(k(130,t===null?"null":typeof t,"")),s=null}return e=en(a,n,e,i),e.elementType=t,e.type=s,e.lanes=r,e}function Hi(t,e,n,s){return t=en(7,t,s,e),t.lanes=n,t}function Zf(t,e,n){return t=en(6,t,null,e),t.lanes=n,t}function yS(t){var e=en(18,null,null,0);return e.stateNode=t,e}function ed(t,e,n){return e=en(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var _v=new WeakMap;function mn(t,e){if(typeof t=="object"&&t!==null){var n=_v.get(t);return n!==void 0?n:(e={value:t,source:e,stack:Jy(e)},_v.set(t,e),e)}return{value:t,source:e,stack:Jy(e)}}var qr=[],Hr=0,Cc=null,il=0,hn=[],fn=0,di=null,Un=1,zn="";function rs(t,e){qr[Hr++]=il,qr[Hr++]=Cc,Cc=t,il=e}function vS(t,e,n){hn[fn++]=Un,hn[fn++]=zn,hn[fn++]=di,di=t;var s=Un;t=zn;var i=32-rn(s)-1;s&=~(1<<i),n+=1;var r=32-rn(e)+i;if(30<r){var a=i-i%5;r=(s&(1<<a)-1).toString(32),s>>=a,i-=a,Un=1<<32-rn(e)+i|n<<i|s,zn=r+t}else Un=1<<r|n<<i|s,zn=t}function Yg(t){t.return!==null&&(rs(t,1),vS(t,1,0))}function Xg(t){for(;t===Cc;)Cc=qr[--Hr],qr[Hr]=null,il=qr[--Hr],qr[Hr]=null;for(;t===di;)di=hn[--fn],hn[fn]=null,zn=hn[--fn],hn[fn]=null,Un=hn[--fn],hn[fn]=null}function ES(t,e){hn[fn++]=Un,hn[fn++]=zn,hn[fn++]=di,Un=e.id,zn=e.overflow,di=t}var Tt=null,Ne=null,pe=!1,ei=null,gn=!1,dm=Error(k(519));function mi(t){var e=Error(k(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw rl(mn(e,t)),dm}function yv(t){var e=t.stateNode,n=t.type,s=t.memoizedProps;switch(e[Et]=t,e[Gt]=s,n){case"dialog":ce("cancel",e),ce("close",e);break;case"iframe":case"object":case"embed":ce("load",e);break;case"video":case"audio":for(n=0;n<ul.length;n++)ce(ul[n],e);break;case"source":ce("error",e);break;case"img":case"image":case"link":ce("error",e),ce("load",e);break;case"details":ce("toggle",e);break;case"input":ce("invalid",e),X0(e,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":ce("invalid",e);break;case"textarea":ce("invalid",e),W0(e,s.value,s.defaultValue,s.children)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||s.suppressHydrationWarning===!0||nA(e.textContent,n)?(s.popover!=null&&(ce("beforetoggle",e),ce("toggle",e)),s.onScroll!=null&&ce("scroll",e),s.onScrollEnd!=null&&ce("scrollend",e),s.onClick!=null&&(e.onclick=us),e=!0):e=!1,e||mi(t,!0)}function vv(t){for(Tt=t.return;Tt;)switch(Tt.tag){case 5:case 31:case 13:gn=!1;return;case 27:case 3:gn=!0;return;default:Tt=Tt.return}}function yr(t){if(t!==Tt)return!1;if(!pe)return vv(t),pe=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Um(t.type,t.memoizedProps)),n=!n),n&&Ne&&mi(t),vv(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(k(317));Ne=rE(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(k(317));Ne=rE(t)}else e===27?(e=Ne,Ai(t.type)?(t=qm,qm=null,Ne=t):Ne=e):Ne=Tt?En(t.stateNode.nextSibling):null;return!0}function Yi(){Ne=Tt=null,pe=!1}function td(){var t=ei;return t!==null&&(qt===null?qt=t:qt.push.apply(qt,t),ei=null),t}function rl(t){ei===null?ei=[t]:ei.push(t)}var mm=Xn(null),cr=null,cs=null;function Bs(t,e,n){Ce(mm,e._currentValue),e._currentValue=n}function ms(t){t._currentValue=mm.current,gt(mm)}function gm(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function pm(t,e,n,s){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var r=i.dependencies;if(r!==null){var a=i.child;r=r.firstContext;e:for(;r!==null;){var l=r;r=i;for(var u=0;u<e.length;u++)if(l.context===e[u]){r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),gm(r.return,n,t),s||(a=null);break e}r=l.next}}else if(i.tag===18){if(a=i.return,a===null)throw Error(k(341));a.lanes|=n,r=a.alternate,r!==null&&(r.lanes|=n),gm(a,n,t),a=null}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}}function Ra(t,e,n,s){t=null;for(var i=e,r=!1;i!==null;){if(!r){if(i.flags&524288)r=!0;else if(i.flags&262144)break}if(i.tag===10){var a=i.alternate;if(a===null)throw Error(k(387));if(a=a.memoizedProps,a!==null){var l=i.type;on(i.pendingProps.value,a.value)||(t!==null?t.push(l):t=[l])}}else if(i===Tc.current){if(a=i.alternate,a===null)throw Error(k(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push(hl):t=[hl])}i=i.return}t!==null&&pm(e,t,n,s),e.flags|=262144}function Oc(t){for(t=t.firstContext;t!==null;){if(!on(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Xi(t){cr=t,cs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function bt(t){return TS(cr,t)}function _u(t,e){return cr===null&&Xi(t),TS(t,e)}function TS(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},cs===null){if(t===null)throw Error(k(308));cs=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else cs=cs.next=e;return n}var R2=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,s){t.push(s)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},I2=rt.unstable_scheduleCallback,C2=rt.unstable_NormalPriority,Xe={$$typeof:ls,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jg(){return{controller:new R2,data:new Map,refCount:0}}function xl(t){t.refCount--,t.refCount===0&&I2(C2,function(){t.controller.abort()})}var Vo=null,_m=0,oa=0,Yr=null;function O2(t,e){if(Vo===null){var n=Vo=[];_m=0,oa=Sp(),Yr={status:"pending",value:void 0,then:function(s){n.push(s)}}}return _m++,e.then(Ev,Ev),e}function Ev(){if(--_m===0&&Vo!==null){Yr!==null&&(Yr.status="fulfilled");var t=Vo;Vo=null,oa=0,Yr=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function D2(t,e){var n=[],s={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return t.then(function(){s.status="fulfilled",s.value=e;for(var i=0;i<n.length;i++)(0,n[i])(e)},function(i){for(s.status="rejected",s.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),s}var Tv=ee.S;ee.S=function(t,e){kb=nn(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&O2(t,e),Tv!==null&&Tv(t,e)};var Fi=Xn(null);function Wg(){var t=Fi.current;return t!==null?t:Ie.pooledCache}function $u(t,e){e===null?Ce(Fi,Fi.current):Ce(Fi,e.pool)}function SS(){var t=Wg();return t===null?null:{parent:Xe._currentValue,pool:t}}var Ia=Error(k(460)),Zg=Error(k(474)),xh=Error(k(542)),Dc={then:function(){}};function Sv(t){return t=t.status,t==="fulfilled"||t==="rejected"}function bS(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(us,us),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Av(t),t;default:if(typeof e.status=="string")e.then(us,us);else{if(t=Ie,t!==null&&100<t.shellSuspendCounter)throw Error(k(482));t=e,t.status="pending",t.then(function(s){if(e.status==="pending"){var i=e;i.status="fulfilled",i.value=s}},function(s){if(e.status==="pending"){var i=e;i.status="rejected",i.reason=s}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Av(t),t}throw $i=e,Ia}}function xi(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?($i=n,Ia):n}}var $i=null;function bv(){if($i===null)throw Error(k(459));var t=$i;return $i=null,t}function Av(t){if(t===Ia||t===xh)throw Error(k(483))}var Xr=null,al=0;function yu(t){var e=al;return al+=1,Xr===null&&(Xr=[]),bS(Xr,t,e)}function ro(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function vu(t,e){throw e.$$typeof===pC?Error(k(525)):(t=Object.prototype.toString.call(e),Error(k(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function AS(t){function e(S,y){if(t){var A=S.deletions;A===null?(S.deletions=[y],S.flags|=16):A.push(y)}}function n(S,y){if(!t)return null;for(;y!==null;)e(S,y),y=y.sibling;return null}function s(S){for(var y=new Map;S!==null;)S.key!==null?y.set(S.key,S):y.set(S.index,S),S=S.sibling;return y}function i(S,y){return S=ds(S,y),S.index=0,S.sibling=null,S}function r(S,y,A){return S.index=A,t?(A=S.alternate,A!==null?(A=A.index,A<y?(S.flags|=67108866,y):A):(S.flags|=67108866,y)):(S.flags|=1048576,y)}function a(S){return t&&S.alternate===null&&(S.flags|=67108866),S}function l(S,y,A,I){return y===null||y.tag!==6?(y=Zf(A,S.mode,I),y.return=S,y):(y=i(y,A),y.return=S,y)}function u(S,y,A,I){var U=A.type;return U===xr?d(S,y,A.props.children,I,A.key):y!==null&&(y.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Us&&xi(U)===y.type)?(y=i(y,A.props),ro(y,A),y.return=S,y):(y=Fu(A.type,A.key,A.props,null,S.mode,I),ro(y,A),y.return=S,y)}function c(S,y,A,I){return y===null||y.tag!==4||y.stateNode.containerInfo!==A.containerInfo||y.stateNode.implementation!==A.implementation?(y=ed(A,S.mode,I),y.return=S,y):(y=i(y,A.children||[]),y.return=S,y)}function d(S,y,A,I,U){return y===null||y.tag!==7?(y=Hi(A,S.mode,I,U),y.return=S,y):(y=i(y,A),y.return=S,y)}function m(S,y,A){if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return y=Zf(""+y,S.mode,A),y.return=S,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case hu:return A=Fu(y.type,y.key,y.props,null,S.mode,A),ro(A,y),A.return=S,A;case ho:return y=ed(y,S.mode,A),y.return=S,y;case Us:return y=xi(y),m(S,y,A)}if(fo(y)||no(y))return y=Hi(y,S.mode,A,null),y.return=S,y;if(typeof y.then=="function")return m(S,yu(y),A);if(y.$$typeof===ls)return m(S,_u(S,y),A);vu(S,y)}return null}function g(S,y,A,I){var U=y!==null?y.key:null;if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return U!==null?null:l(S,y,""+A,I);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case hu:return A.key===U?u(S,y,A,I):null;case ho:return A.key===U?c(S,y,A,I):null;case Us:return A=xi(A),g(S,y,A,I)}if(fo(A)||no(A))return U!==null?null:d(S,y,A,I,null);if(typeof A.then=="function")return g(S,y,yu(A),I);if(A.$$typeof===ls)return g(S,y,_u(S,A),I);vu(S,A)}return null}function p(S,y,A,I,U){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return S=S.get(A)||null,l(y,S,""+I,U);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case hu:return S=S.get(I.key===null?A:I.key)||null,u(y,S,I,U);case ho:return S=S.get(I.key===null?A:I.key)||null,c(y,S,I,U);case Us:return I=xi(I),p(S,y,A,I,U)}if(fo(I)||no(I))return S=S.get(A)||null,d(y,S,I,U,null);if(typeof I.then=="function")return p(S,y,A,yu(I),U);if(I.$$typeof===ls)return p(S,y,A,_u(y,I),U);vu(y,I)}return null}function C(S,y,A,I){for(var U=null,j=null,E=y,v=y=0,T=null;E!==null&&v<A.length;v++){E.index>v?(T=E,E=null):T=E.sibling;var b=g(S,E,A[v],I);if(b===null){E===null&&(E=T);break}t&&E&&b.alternate===null&&e(S,E),y=r(b,y,v),j===null?U=b:j.sibling=b,j=b,E=T}if(v===A.length)return n(S,E),pe&&rs(S,v),U;if(E===null){for(;v<A.length;v++)E=m(S,A[v],I),E!==null&&(y=r(E,y,v),j===null?U=E:j.sibling=E,j=E);return pe&&rs(S,v),U}for(E=s(E);v<A.length;v++)T=p(E,S,v,A[v],I),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?v:T.key),y=r(T,y,v),j===null?U=T:j.sibling=T,j=T);return t&&E.forEach(function(w){return e(S,w)}),pe&&rs(S,v),U}function O(S,y,A,I){if(A==null)throw Error(k(151));for(var U=null,j=null,E=y,v=y=0,T=null,b=A.next();E!==null&&!b.done;v++,b=A.next()){E.index>v?(T=E,E=null):T=E.sibling;var w=g(S,E,b.value,I);if(w===null){E===null&&(E=T);break}t&&E&&w.alternate===null&&e(S,E),y=r(w,y,v),j===null?U=w:j.sibling=w,j=w,E=T}if(b.done)return n(S,E),pe&&rs(S,v),U;if(E===null){for(;!b.done;v++,b=A.next())b=m(S,b.value,I),b!==null&&(y=r(b,y,v),j===null?U=b:j.sibling=b,j=b);return pe&&rs(S,v),U}for(E=s(E);!b.done;v++,b=A.next())b=p(E,S,v,b.value,I),b!==null&&(t&&b.alternate!==null&&E.delete(b.key===null?v:b.key),y=r(b,y,v),j===null?U=b:j.sibling=b,j=b);return t&&E.forEach(function(D){return e(S,D)}),pe&&rs(S,v),U}function x(S,y,A,I){if(typeof A=="object"&&A!==null&&A.type===xr&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case hu:e:{for(var U=A.key;y!==null;){if(y.key===U){if(U=A.type,U===xr){if(y.tag===7){n(S,y.sibling),I=i(y,A.props.children),I.return=S,S=I;break e}}else if(y.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Us&&xi(U)===y.type){n(S,y.sibling),I=i(y,A.props),ro(I,A),I.return=S,S=I;break e}n(S,y);break}else e(S,y);y=y.sibling}A.type===xr?(I=Hi(A.props.children,S.mode,I,A.key),I.return=S,S=I):(I=Fu(A.type,A.key,A.props,null,S.mode,I),ro(I,A),I.return=S,S=I)}return a(S);case ho:e:{for(U=A.key;y!==null;){if(y.key===U)if(y.tag===4&&y.stateNode.containerInfo===A.containerInfo&&y.stateNode.implementation===A.implementation){n(S,y.sibling),I=i(y,A.children||[]),I.return=S,S=I;break e}else{n(S,y);break}else e(S,y);y=y.sibling}I=ed(A,S.mode,I),I.return=S,S=I}return a(S);case Us:return A=xi(A),x(S,y,A,I)}if(fo(A))return C(S,y,A,I);if(no(A)){if(U=no(A),typeof U!="function")throw Error(k(150));return A=U.call(A),O(S,y,A,I)}if(typeof A.then=="function")return x(S,y,yu(A),I);if(A.$$typeof===ls)return x(S,y,_u(S,A),I);vu(S,A)}return typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint"?(A=""+A,y!==null&&y.tag===6?(n(S,y.sibling),I=i(y,A),I.return=S,S=I):(n(S,y),I=Zf(A,S.mode,I),I.return=S,S=I),a(S)):n(S,y)}return function(S,y,A,I){try{al=0;var U=x(S,y,A,I);return Xr=null,U}catch(E){if(E===Ia||E===xh)throw E;var j=en(29,E,null,S.mode);return j.lanes=I,j.return=S,j}finally{}}}var Ji=AS(!0),wS=AS(!1),zs=!1;function ep(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ym(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ti(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ni(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,ve&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,e=Ic(t),pS(t,null,n),e}return Mh(t,s,e,n),Ic(t)}function ko(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,H0(t,n)}}function nd(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?i=r=a:r=r.next=a,n=n.next}while(n!==null);r===null?i=r=e:r=r.next=e}else i=r=e;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:s.shared,callbacks:s.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var vm=!1;function Po(){if(vm){var t=Yr;if(t!==null)throw t}}function Lo(t,e,n,s){vm=!1;var i=t.updateQueue;zs=!1;var r=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,a===null?r=c:a.next=c,a=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=u))}if(r!==null){var m=i.baseState;a=0,d=c=u=null,l=r;do{var g=l.lane&-536870913,p=g!==l.lane;if(p?(ge&g)===g:(s&g)===g){g!==0&&g===oa&&(vm=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var C=t,O=l;g=e;var x=n;switch(O.tag){case 1:if(C=O.payload,typeof C=="function"){m=C.call(x,m,g);break e}m=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=O.payload,g=typeof C=="function"?C.call(x,m,g):C,g==null)break e;m=Ve({},m,g);break e;case 2:zs=!0}}g=l.callback,g!==null&&(t.flags|=64,p&&(t.flags|=8192),p=i.callbacks,p===null?i.callbacks=[g]:p.push(g))}else p={lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=p,u=m):d=d.next=p,a|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;p=l,l=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);d===null&&(u=m),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,r===null&&(i.shared.lanes=0),pi|=a,t.lanes=a,t.memoizedState=m}}function RS(t,e){if(typeof t!="function")throw Error(k(191,t));t.call(e)}function IS(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)RS(n[t],e)}var la=Xn(null),Nc=Xn(0);function wv(t,e){t=Ts,Ce(Nc,t),Ce(la,e),Ts=t|e.baseLanes}function Em(){Ce(Nc,Ts),Ce(la,la.current)}function tp(){Ts=Nc.current,gt(la),gt(Nc)}var ln=Xn(null),vn=null;function js(t){var e=t.alternate;Ce(Fe,Fe.current&1),Ce(ln,t),vn===null&&(e===null||la.current!==null||e.memoizedState!==null)&&(vn=t)}function Tm(t){Ce(Fe,Fe.current),Ce(ln,t),vn===null&&(vn=t)}function CS(t){t.tag===22?(Ce(Fe,Fe.current),Ce(ln,t),vn===null&&(vn=t)):qs()}function qs(){Ce(Fe,Fe.current),Ce(ln,ln.current)}function Zt(t){gt(ln),vn===t&&(vn=null),gt(Fe)}var Fe=Xn(0);function Mc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Bm(n)||jm(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ys=0,ae=null,we=null,Qe=null,xc=!1,Jr=!1,Wi=!1,Vc=0,ol=0,Wr=null,N2=0;function Be(){throw Error(k(321))}function np(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!on(t[n],e[n]))return!1;return!0}function sp(t,e,n,s,i,r){return ys=r,ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ee.H=t===null||t.memoizedState===null?rb:mp,Wi=!1,r=n(s,i),Wi=!1,Jr&&(r=DS(e,n,s,i)),OS(t),r}function OS(t){ee.H=ll;var e=we!==null&&we.next!==null;if(ys=0,Qe=we=ae=null,xc=!1,ol=0,Wr=null,e)throw Error(k(300));t===null||Je||(t=t.dependencies,t!==null&&Oc(t)&&(Je=!0))}function DS(t,e,n,s){ae=t;var i=0;do{if(Jr&&(Wr=null),ol=0,Jr=!1,25<=i)throw Error(k(301));if(i+=1,Qe=we=null,t.updateQueue!=null){var r=t.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}ee.H=ab,r=e(n,s)}while(Jr);return r}function M2(){var t=ee.H,e=t.useState()[0];return e=typeof e.then=="function"?Vl(e):e,t=t.useState()[0],(we!==null?we.memoizedState:null)!==t&&(ae.flags|=1024),e}function ip(){var t=Vc!==0;return Vc=0,t}function rp(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function ap(t){if(xc){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}xc=!1}ys=0,Qe=we=ae=null,Jr=!1,ol=Vc=0,Wr=null}function Pt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?ae.memoizedState=Qe=t:Qe=Qe.next=t,Qe}function $e(){if(we===null){var t=ae.alternate;t=t!==null?t.memoizedState:null}else t=we.next;var e=Qe===null?ae.memoizedState:Qe.next;if(e!==null)Qe=e,we=t;else{if(t===null)throw ae.alternate===null?Error(k(467)):Error(k(310));we=t,t={memoizedState:we.memoizedState,baseState:we.baseState,baseQueue:we.baseQueue,queue:we.queue,next:null},Qe===null?ae.memoizedState=Qe=t:Qe=Qe.next=t}return Qe}function Vh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vl(t){var e=ol;return ol+=1,Wr===null&&(Wr=[]),t=bS(Wr,t,e),e=ae,(Qe===null?e.memoizedState:Qe.next)===null&&(e=e.alternate,ee.H=e===null||e.memoizedState===null?rb:mp),t}function kh(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Vl(t);if(t.$$typeof===ls)return bt(t)}throw Error(k(438,String(t)))}function op(t){var e=null,n=ae.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var s=ae.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(e={data:s.data.map(function(i){return i.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=Vh(),ae.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),s=0;s<t;s++)n[s]=_C;return e.index++,n}function vs(t,e){return typeof e=="function"?e(t):e}function Gu(t){var e=$e();return lp(e,we,t)}function lp(t,e,n){var s=t.queue;if(s===null)throw Error(k(311));s.lastRenderedReducer=n;var i=t.baseQueue,r=s.pending;if(r!==null){if(i!==null){var a=i.next;i.next=r.next,r.next=a}e.baseQueue=i=r,s.pending=null}if(r=t.baseState,i===null)t.memoizedState=r;else{e=i.next;var l=a=null,u=null,c=e,d=!1;do{var m=c.lane&-536870913;if(m!==c.lane?(ge&m)===m:(ys&m)===m){var g=c.revertLane;if(g===0)u!==null&&(u=u.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),m===oa&&(d=!0);else if((ys&g)===g){c=c.next,g===oa&&(d=!0);continue}else m={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},u===null?(l=u=m,a=r):u=u.next=m,ae.lanes|=g,pi|=g;m=c.action,Wi&&n(r,m),r=c.hasEagerState?c.eagerState:n(r,m)}else g={lane:m,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},u===null?(l=u=g,a=r):u=u.next=g,ae.lanes|=m,pi|=m;c=c.next}while(c!==null&&c!==e);if(u===null?a=r:u.next=l,!on(r,t.memoizedState)&&(Je=!0,d&&(n=Yr,n!==null)))throw n;t.memoizedState=r,t.baseState=a,t.baseQueue=u,s.lastRenderedState=r}return i===null&&(s.lanes=0),[t.memoizedState,s.dispatch]}function sd(t){var e=$e(),n=e.queue;if(n===null)throw Error(k(311));n.lastRenderedReducer=t;var s=n.dispatch,i=n.pending,r=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do r=t(r,a.action),a=a.next;while(a!==i);on(r,e.memoizedState)||(Je=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,s]}function NS(t,e,n){var s=ae,i=$e(),r=pe;if(r){if(n===void 0)throw Error(k(407));n=n()}else n=e();var a=!on((we||i).memoizedState,n);if(a&&(i.memoizedState=n,Je=!0),i=i.queue,up(VS.bind(null,s,i,t),[t]),i.getSnapshot!==e||a||Qe!==null&&Qe.memoizedState.tag&1){if(s.flags|=2048,ua(9,{destroy:void 0},xS.bind(null,s,i,n,e),null),Ie===null)throw Error(k(349));r||ys&127||MS(s,e,n)}return n}function MS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ae.updateQueue,e===null?(e=Vh(),ae.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function xS(t,e,n,s){e.value=n,e.getSnapshot=s,kS(e)&&PS(t)}function VS(t,e,n){return n(function(){kS(e)&&PS(t)})}function kS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!on(t,n)}catch{return!0}}function PS(t){var e=ur(t,2);e!==null&&$t(e,t,2)}function Sm(t){var e=Pt();if(typeof t=="function"){var n=t;if(t=n(),Wi){Ks(!0);try{n()}finally{Ks(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:t},e}function LS(t,e,n,s){return t.baseState=n,lp(t,we,typeof s=="function"?s:vs)}function x2(t,e,n,s,i){if(Lh(t))throw Error(k(485));if(t=e.action,t!==null){var r={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){r.listeners.push(a)}};ee.T!==null?n(!0):r.isTransition=!1,s(r),n=e.pending,n===null?(r.next=e.pending=r,US(e,r)):(r.next=n.next,e.pending=n.next=r)}}function US(t,e){var n=e.action,s=e.payload,i=t.state;if(e.isTransition){var r=ee.T,a={};ee.T=a;try{var l=n(i,s),u=ee.S;u!==null&&u(a,l),Rv(t,e,l)}catch(c){bm(t,e,c)}finally{r!==null&&a.types!==null&&(r.types=a.types),ee.T=r}}else try{r=n(i,s),Rv(t,e,r)}catch(c){bm(t,e,c)}}function Rv(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){Iv(t,e,s)},function(s){return bm(t,e,s)}):Iv(t,e,n)}function Iv(t,e,n){e.status="fulfilled",e.value=n,zS(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,US(t,n)))}function bm(t,e,n){var s=t.pending;if(t.pending=null,s!==null){s=s.next;do e.status="rejected",e.reason=n,zS(e),e=e.next;while(e!==s)}t.action=null}function zS(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function BS(t,e){return e}function Cv(t,e){if(pe){var n=Ie.formState;if(n!==null){e:{var s=ae;if(pe){if(Ne){t:{for(var i=Ne,r=gn;i.nodeType!==8;){if(!r){i=null;break t}if(i=En(i.nextSibling),i===null){i=null;break t}}r=i.data,i=r==="F!"||r==="F"?i:null}if(i){Ne=En(i.nextSibling),s=i.data==="F!";break e}}mi(s)}s=!1}s&&(e=n[0])}}return n=Pt(),n.memoizedState=n.baseState=e,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:BS,lastRenderedState:e},n.queue=s,n=nb.bind(null,ae,s),s.dispatch=n,s=Sm(!1),r=dp.bind(null,ae,!1,s.queue),s=Pt(),i={state:e,dispatch:null,action:t,pending:null},s.queue=i,n=x2.bind(null,ae,i,r,n),i.dispatch=n,s.memoizedState=t,[e,n,!1]}function Ov(t){var e=$e();return jS(e,we,t)}function jS(t,e,n){if(e=lp(t,e,BS)[0],t=Gu(vs)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var s=Vl(e)}catch(a){throw a===Ia?xh:a}else s=e;e=$e();var i=e.queue,r=i.dispatch;return n!==e.memoizedState&&(ae.flags|=2048,ua(9,{destroy:void 0},V2.bind(null,i,n),null)),[s,r,t]}function V2(t,e){t.action=e}function Dv(t){var e=$e(),n=we;if(n!==null)return jS(e,n,t);$e(),e=e.memoizedState,n=$e();var s=n.queue.dispatch;return n.memoizedState=t,[e,s,!1]}function ua(t,e,n,s){return t={tag:t,create:n,deps:s,inst:e,next:null},e=ae.updateQueue,e===null&&(e=Vh(),ae.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t),t}function qS(){return $e().memoizedState}function Ku(t,e,n,s){var i=Pt();ae.flags|=t,i.memoizedState=ua(1|e,{destroy:void 0},n,s===void 0?null:s)}function Ph(t,e,n,s){var i=$e();s=s===void 0?null:s;var r=i.memoizedState.inst;we!==null&&s!==null&&np(s,we.memoizedState.deps)?i.memoizedState=ua(e,r,n,s):(ae.flags|=t,i.memoizedState=ua(1|e,r,n,s))}function Nv(t,e){Ku(8390656,8,t,e)}function up(t,e){Ph(2048,8,t,e)}function k2(t){ae.flags|=4;var e=ae.updateQueue;if(e===null)e=Vh(),ae.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function HS(t){var e=$e().memoizedState;return k2({ref:e,nextImpl:t}),function(){if(ve&2)throw Error(k(440));return e.impl.apply(void 0,arguments)}}function FS(t,e){return Ph(4,2,t,e)}function $S(t,e){return Ph(4,4,t,e)}function GS(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function KS(t,e,n){n=n!=null?n.concat([t]):null,Ph(4,4,GS.bind(null,e,t),n)}function cp(){}function QS(t,e){var n=$e();e=e===void 0?null:e;var s=n.memoizedState;return e!==null&&np(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function YS(t,e){var n=$e();e=e===void 0?null:e;var s=n.memoizedState;if(e!==null&&np(e,s[1]))return s[0];if(s=t(),Wi){Ks(!0);try{t()}finally{Ks(!1)}}return n.memoizedState=[s,e],s}function hp(t,e,n){return n===void 0||ys&1073741824&&!(ge&261930)?t.memoizedState=e:(t.memoizedState=n,t=Lb(),ae.lanes|=t,pi|=t,n)}function XS(t,e,n,s){return on(n,e)?n:la.current!==null?(t=hp(t,n,s),on(t,e)||(Je=!0),t):!(ys&42)||ys&1073741824&&!(ge&261930)?(Je=!0,t.memoizedState=n):(t=Lb(),ae.lanes|=t,pi|=t,e)}function JS(t,e,n,s,i){var r=Ee.p;Ee.p=r!==0&&8>r?r:8;var a=ee.T,l={};ee.T=l,dp(t,!1,e,n);try{var u=i(),c=ee.S;if(c!==null&&c(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=D2(u,s);Uo(t,e,d,an(t))}else Uo(t,e,s,an(t))}catch(m){Uo(t,e,{then:function(){},status:"rejected",reason:m},an())}finally{Ee.p=r,a!==null&&l.types!==null&&(a.types=l.types),ee.T=a}}function P2(){}function Am(t,e,n,s){if(t.tag!==5)throw Error(k(476));var i=WS(t).queue;JS(t,i,e,qi,n===null?P2:function(){return ZS(t),n(s)})}function WS(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:qi,baseState:qi,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:qi},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function ZS(t){var e=WS(t);e.next===null&&(e=t.alternate.memoizedState),Uo(t,e.next.queue,{},an())}function fp(){return bt(hl)}function eb(){return $e().memoizedState}function tb(){return $e().memoizedState}function L2(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=an();t=ti(n);var s=ni(e,t,n);s!==null&&($t(s,e,n),ko(s,e,n)),e={cache:Jg()},t.payload=e;return}e=e.return}}function U2(t,e,n){var s=an();n={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Lh(t)?sb(e,n):(n=Kg(t,e,n,s),n!==null&&($t(n,t,s),ib(n,e,s)))}function nb(t,e,n){var s=an();Uo(t,e,n,s)}function Uo(t,e,n,s){var i={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lh(t))sb(e,i);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var a=e.lastRenderedState,l=r(a,n);if(i.hasEagerState=!0,i.eagerState=l,on(l,a))return Mh(t,e,i,0),Ie===null&&Nh(),!1}catch{}finally{}if(n=Kg(t,e,i,s),n!==null)return $t(n,t,s),ib(n,e,s),!0}return!1}function dp(t,e,n,s){if(s={lane:2,revertLane:Sp(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Lh(t)){if(e)throw Error(k(479))}else e=Kg(t,n,s,2),e!==null&&$t(e,t,2)}function Lh(t){var e=t.alternate;return t===ae||e!==null&&e===ae}function sb(t,e){Jr=xc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ib(t,e,n){if(n&4194048){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,H0(t,n)}}var ll={readContext:bt,use:kh,useCallback:Be,useContext:Be,useEffect:Be,useImperativeHandle:Be,useLayoutEffect:Be,useInsertionEffect:Be,useMemo:Be,useReducer:Be,useRef:Be,useState:Be,useDebugValue:Be,useDeferredValue:Be,useTransition:Be,useSyncExternalStore:Be,useId:Be,useHostTransitionStatus:Be,useFormState:Be,useActionState:Be,useOptimistic:Be,useMemoCache:Be,useCacheRefresh:Be};ll.useEffectEvent=Be;var rb={readContext:bt,use:kh,useCallback:function(t,e){return Pt().memoizedState=[t,e===void 0?null:e],t},useContext:bt,useEffect:Nv,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Ku(4194308,4,GS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ku(4194308,4,t,e)},useInsertionEffect:function(t,e){Ku(4,2,t,e)},useMemo:function(t,e){var n=Pt();e=e===void 0?null:e;var s=t();if(Wi){Ks(!0);try{t()}finally{Ks(!1)}}return n.memoizedState=[s,e],s},useReducer:function(t,e,n){var s=Pt();if(n!==void 0){var i=n(e);if(Wi){Ks(!0);try{n(e)}finally{Ks(!1)}}}else i=e;return s.memoizedState=s.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},s.queue=t,t=t.dispatch=U2.bind(null,ae,t),[s.memoizedState,t]},useRef:function(t){var e=Pt();return t={current:t},e.memoizedState=t},useState:function(t){t=Sm(t);var e=t.queue,n=nb.bind(null,ae,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:cp,useDeferredValue:function(t,e){var n=Pt();return hp(n,t,e)},useTransition:function(){var t=Sm(!1);return t=JS.bind(null,ae,t.queue,!0,!1),Pt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var s=ae,i=Pt();if(pe){if(n===void 0)throw Error(k(407));n=n()}else{if(n=e(),Ie===null)throw Error(k(349));ge&127||MS(s,e,n)}i.memoizedState=n;var r={value:n,getSnapshot:e};return i.queue=r,Nv(VS.bind(null,s,r,t),[t]),s.flags|=2048,ua(9,{destroy:void 0},xS.bind(null,s,r,n,e),null),n},useId:function(){var t=Pt(),e=Ie.identifierPrefix;if(pe){var n=zn,s=Un;n=(s&~(1<<32-rn(s)-1)).toString(32)+n,e="_"+e+"R_"+n,n=Vc++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=N2++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:fp,useFormState:Cv,useActionState:Cv,useOptimistic:function(t){var e=Pt();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=dp.bind(null,ae,!0,n),n.dispatch=e,[t,e]},useMemoCache:op,useCacheRefresh:function(){return Pt().memoizedState=L2.bind(null,ae)},useEffectEvent:function(t){var e=Pt(),n={impl:t};return e.memoizedState=n,function(){if(ve&2)throw Error(k(440));return n.impl.apply(void 0,arguments)}}},mp={readContext:bt,use:kh,useCallback:QS,useContext:bt,useEffect:up,useImperativeHandle:KS,useInsertionEffect:FS,useLayoutEffect:$S,useMemo:YS,useReducer:Gu,useRef:qS,useState:function(){return Gu(vs)},useDebugValue:cp,useDeferredValue:function(t,e){var n=$e();return XS(n,we.memoizedState,t,e)},useTransition:function(){var t=Gu(vs)[0],e=$e().memoizedState;return[typeof t=="boolean"?t:Vl(t),e]},useSyncExternalStore:NS,useId:eb,useHostTransitionStatus:fp,useFormState:Ov,useActionState:Ov,useOptimistic:function(t,e){var n=$e();return LS(n,we,t,e)},useMemoCache:op,useCacheRefresh:tb};mp.useEffectEvent=HS;var ab={readContext:bt,use:kh,useCallback:QS,useContext:bt,useEffect:up,useImperativeHandle:KS,useInsertionEffect:FS,useLayoutEffect:$S,useMemo:YS,useReducer:sd,useRef:qS,useState:function(){return sd(vs)},useDebugValue:cp,useDeferredValue:function(t,e){var n=$e();return we===null?hp(n,t,e):XS(n,we.memoizedState,t,e)},useTransition:function(){var t=sd(vs)[0],e=$e().memoizedState;return[typeof t=="boolean"?t:Vl(t),e]},useSyncExternalStore:NS,useId:eb,useHostTransitionStatus:fp,useFormState:Dv,useActionState:Dv,useOptimistic:function(t,e){var n=$e();return we!==null?LS(n,we,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:op,useCacheRefresh:tb};ab.useEffectEvent=HS;function id(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:Ve({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wm={enqueueSetState:function(t,e,n){t=t._reactInternals;var s=an(),i=ti(s);i.payload=e,n!=null&&(i.callback=n),e=ni(t,i,s),e!==null&&($t(e,t,s),ko(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=an(),i=ti(s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ni(t,i,s),e!==null&&($t(e,t,s),ko(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=an(),s=ti(n);s.tag=2,e!=null&&(s.callback=e),e=ni(t,s,n),e!==null&&($t(e,t,n),ko(e,t,n))}};function Mv(t,e,n,s,i,r,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,r,a):e.prototype&&e.prototype.isPureReactComponent?!sl(n,s)||!sl(i,r):!0}function xv(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&wm.enqueueReplaceState(e,e.state,null)}function Zi(t,e){var n=e;if("ref"in e){n={};for(var s in e)s!=="ref"&&(n[s]=e[s])}if(t=t.defaultProps){n===e&&(n=Ve({},n));for(var i in t)n[i]===void 0&&(n[i]=t[i])}return n}function ob(t){Rc(t)}function lb(t){console.error(t)}function ub(t){Rc(t)}function kc(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(s){setTimeout(function(){throw s})}}function Vv(t,e,n){try{var s=t.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Rm(t,e,n){return n=ti(n),n.tag=3,n.payload={element:null},n.callback=function(){kc(t,e)},n}function cb(t){return t=ti(t),t.tag=3,t}function hb(t,e,n,s){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=s.value;t.payload=function(){return i(r)},t.callback=function(){Vv(e,n,s)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){Vv(e,n,s),typeof i!="function"&&(si===null?si=new Set([this]):si.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})})}function z2(t,e,n,s,i){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(e=n.alternate,e!==null&&Ra(e,n,i,!0),n=ln.current,n!==null){switch(n.tag){case 31:case 13:return vn===null?Bc():n.alternate===null&&je===0&&(je=3),n.flags&=-257,n.flags|=65536,n.lanes=i,s===Dc?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([s]):e.add(s),gd(t,s,i)),!1;case 22:return n.flags|=65536,s===Dc?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([s]):n.add(s)),gd(t,s,i)),!1}throw Error(k(435,n.tag))}return gd(t,s,i),Bc(),!1}if(pe)return e=ln.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=i,s!==dm&&(t=Error(k(422),{cause:s}),rl(mn(t,n)))):(s!==dm&&(e=Error(k(423),{cause:s}),rl(mn(e,n))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,s=mn(s,n),i=Rm(t.stateNode,s,i),nd(t,i),je!==4&&(je=2)),!1;var r=Error(k(520),{cause:s});if(r=mn(r,n),jo===null?jo=[r]:jo.push(r),je!==4&&(je=2),e===null)return!0;s=mn(s,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=i&-i,n.lanes|=t,t=Rm(n.stateNode,s,t),nd(n,t),!1;case 1:if(e=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(si===null||!si.has(r))))return n.flags|=65536,i&=-i,n.lanes|=i,i=cb(i),hb(i,t,n,s),nd(n,i),!1}n=n.return}while(n!==null);return!1}var gp=Error(k(461)),Je=!1;function _t(t,e,n,s){e.child=t===null?wS(e,null,n,s):Ji(e,t.child,n,s)}function kv(t,e,n,s,i){n=n.render;var r=e.ref;if("ref"in s){var a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}else a=s;return Xi(e),s=sp(t,e,n,a,r,i),l=ip(),t!==null&&!Je?(rp(t,e,i),Es(t,e,i)):(pe&&l&&Yg(e),e.flags|=1,_t(t,e,s,i),e.child)}function Pv(t,e,n,s,i){if(t===null){var r=n.type;return typeof r=="function"&&!Qg(r)&&r.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=r,fb(t,e,r,s,i)):(t=Fu(n.type,null,s,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!pp(t,i)){var a=r.memoizedProps;if(n=n.compare,n=n!==null?n:sl,n(a,s)&&t.ref===e.ref)return Es(t,e,i)}return e.flags|=1,t=ds(r,s),t.ref=e.ref,t.return=e,e.child=t}function fb(t,e,n,s,i){if(t!==null){var r=t.memoizedProps;if(sl(r,s)&&t.ref===e.ref)if(Je=!1,e.pendingProps=s=r,pp(t,i))t.flags&131072&&(Je=!0);else return e.lanes=t.lanes,Es(t,e,i)}return Im(t,e,n,s,i)}function db(t,e,n,s){var i=s.children,r=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if(e.flags&128){if(r=r!==null?r.baseLanes|n:n,t!==null){for(s=e.child=t.child,i=0;s!==null;)i=i|s.lanes|s.childLanes,s=s.sibling;s=i&~r}else s=0,e.child=null;return Lv(t,e,r,n,s)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&$u(e,r!==null?r.cachePool:null),r!==null?wv(e,r):Em(),CS(e);else return s=e.lanes=536870912,Lv(t,e,r!==null?r.baseLanes|n:n,n,s)}else r!==null?($u(e,r.cachePool),wv(e,r),qs(),e.memoizedState=null):(t!==null&&$u(e,null),Em(),qs());return _t(t,e,i,n),e.child}function go(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function Lv(t,e,n,s,i){var r=Wg();return r=r===null?null:{parent:Xe._currentValue,pool:r},e.memoizedState={baseLanes:n,cachePool:r},t!==null&&$u(e,null),Em(),CS(e),t!==null&&Ra(t,e,s,!0),e.childLanes=i,null}function Qu(t,e){return e=Pc({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function Uv(t,e,n){return Ji(e,t.child,null,n),t=Qu(e,e.pendingProps),t.flags|=2,Zt(e),e.memoizedState=null,t}function B2(t,e,n){var s=e.pendingProps,i=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(pe){if(s.mode==="hidden")return t=Qu(e,s),e.lanes=536870912,go(null,t);if(Tm(e),(t=Ne)?(t=rA(t,gn),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:di!==null?{id:Un,overflow:zn}:null,retryLane:536870912,hydrationErrors:null},n=yS(t),n.return=e,e.child=n,Tt=e,Ne=null)):t=null,t===null)throw mi(e);return e.lanes=536870912,null}return Qu(e,s)}var r=t.memoizedState;if(r!==null){var a=r.dehydrated;if(Tm(e),i)if(e.flags&256)e.flags&=-257,e=Uv(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(k(558));else if(Je||Ra(t,e,n,!1),i=(n&t.childLanes)!==0,Je||i){if(s=Ie,s!==null&&(a=F0(s,n),a!==0&&a!==r.retryLane))throw r.retryLane=a,ur(t,a),$t(s,t,a),gp;Bc(),e=Uv(t,e,n)}else t=r.treeContext,Ne=En(a.nextSibling),Tt=e,pe=!0,ei=null,gn=!1,t!==null&&ES(e,t),e=Qu(e,s),e.flags|=4096;return e}return t=ds(t.child,{mode:s.mode,children:s.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Yu(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(k(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Im(t,e,n,s,i){return Xi(e),n=sp(t,e,n,s,void 0,i),s=ip(),t!==null&&!Je?(rp(t,e,i),Es(t,e,i)):(pe&&s&&Yg(e),e.flags|=1,_t(t,e,n,i),e.child)}function zv(t,e,n,s,i,r){return Xi(e),e.updateQueue=null,n=DS(e,s,n,i),OS(t),s=ip(),t!==null&&!Je?(rp(t,e,r),Es(t,e,r)):(pe&&s&&Yg(e),e.flags|=1,_t(t,e,n,r),e.child)}function Bv(t,e,n,s,i){if(Xi(e),e.stateNode===null){var r=jr,a=n.contextType;typeof a=="object"&&a!==null&&(r=bt(a)),r=new n(s,r),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=wm,e.stateNode=r,r._reactInternals=e,r=e.stateNode,r.props=s,r.state=e.memoizedState,r.refs={},ep(e),a=n.contextType,r.context=typeof a=="object"&&a!==null?bt(a):jr,r.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(id(e,n,a,s),r.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(a=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),a!==r.state&&wm.enqueueReplaceState(r,r.state,null),Lo(e,s,r,i),Po(),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308),s=!0}else if(t===null){r=e.stateNode;var l=e.memoizedProps,u=Zi(n,l);r.props=u;var c=r.context,d=n.contextType;a=jr,typeof d=="object"&&d!==null&&(a=bt(d));var m=n.getDerivedStateFromProps;d=typeof m=="function"||typeof r.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,d||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(l||c!==a)&&xv(e,r,s,a),zs=!1;var g=e.memoizedState;r.state=g,Lo(e,s,r,i),Po(),c=e.memoizedState,l||g!==c||zs?(typeof m=="function"&&(id(e,n,m,s),c=e.memoizedState),(u=zs||Mv(e,n,u,s,g,c,a))?(d||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(e.flags|=4194308)):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),r.props=s,r.state=c,r.context=a,s=u):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{r=e.stateNode,ym(t,e),a=e.memoizedProps,d=Zi(n,a),r.props=d,m=e.pendingProps,g=r.context,c=n.contextType,u=jr,typeof c=="object"&&c!==null&&(u=bt(c)),l=n.getDerivedStateFromProps,(c=typeof l=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==m||g!==u)&&xv(e,r,s,u),zs=!1,g=e.memoizedState,r.state=g,Lo(e,s,r,i),Po();var p=e.memoizedState;a!==m||g!==p||zs||t!==null&&t.dependencies!==null&&Oc(t.dependencies)?(typeof l=="function"&&(id(e,n,l,s),p=e.memoizedState),(d=zs||Mv(e,n,d,s,g,p,u)||t!==null&&t.dependencies!==null&&Oc(t.dependencies))?(c||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(s,p,u),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(s,p,u)),typeof r.componentDidUpdate=="function"&&(e.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=p),r.props=s,r.state=p,r.context=u,s=d):(typeof r.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),s=!1)}return r=s,Yu(t,e),s=(e.flags&128)!==0,r||s?(r=e.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:r.render(),e.flags|=1,t!==null&&s?(e.child=Ji(e,t.child,null,i),e.child=Ji(e,null,n,i)):_t(t,e,n,i),e.memoizedState=r.state,t=e.child):t=Es(t,e,i),t}function jv(t,e,n,s){return Yi(),e.flags|=256,_t(t,e,n,s),e.child}var rd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ad(t){return{baseLanes:t,cachePool:SS()}}function od(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=tn),t}function mb(t,e,n){var s=e.pendingProps,i=!1,r=(e.flags&128)!==0,a;if((a=r)||(a=t!==null&&t.memoizedState===null?!1:(Fe.current&2)!==0),a&&(i=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(pe){if(i?js(e):qs(),(t=Ne)?(t=rA(t,gn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:di!==null?{id:Un,overflow:zn}:null,retryLane:536870912,hydrationErrors:null},n=yS(t),n.return=e,e.child=n,Tt=e,Ne=null)):t=null,t===null)throw mi(e);return jm(t)?e.lanes=32:e.lanes=536870912,null}var l=s.children;return s=s.fallback,i?(qs(),i=e.mode,l=Pc({mode:"hidden",children:l},i),s=Hi(s,i,n,null),l.return=e,s.return=e,l.sibling=s,e.child=l,s=e.child,s.memoizedState=ad(n),s.childLanes=od(t,a,n),e.memoizedState=rd,go(null,s)):(js(e),Cm(e,l))}var u=t.memoizedState;if(u!==null&&(l=u.dehydrated,l!==null)){if(r)e.flags&256?(js(e),e.flags&=-257,e=ld(t,e,n)):e.memoizedState!==null?(qs(),e.child=t.child,e.flags|=128,e=null):(qs(),l=s.fallback,i=e.mode,s=Pc({mode:"visible",children:s.children},i),l=Hi(l,i,n,null),l.flags|=2,s.return=e,l.return=e,s.sibling=l,e.child=s,Ji(e,t.child,null,n),s=e.child,s.memoizedState=ad(n),s.childLanes=od(t,a,n),e.memoizedState=rd,e=go(null,s));else if(js(e),jm(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var c=a.dgst;a=c,s=Error(k(419)),s.stack="",s.digest=a,rl({value:s,source:null,stack:null}),e=ld(t,e,n)}else if(Je||Ra(t,e,n,!1),a=(n&t.childLanes)!==0,Je||a){if(a=Ie,a!==null&&(s=F0(a,n),s!==0&&s!==u.retryLane))throw u.retryLane=s,ur(t,s),$t(a,t,s),gp;Bm(l)||Bc(),e=ld(t,e,n)}else Bm(l)?(e.flags|=192,e.child=t.child,e=null):(t=u.treeContext,Ne=En(l.nextSibling),Tt=e,pe=!0,ei=null,gn=!1,t!==null&&ES(e,t),e=Cm(e,s.children),e.flags|=4096);return e}return i?(qs(),l=s.fallback,i=e.mode,u=t.child,c=u.sibling,s=ds(u,{mode:"hidden",children:s.children}),s.subtreeFlags=u.subtreeFlags&65011712,c!==null?l=ds(c,l):(l=Hi(l,i,n,null),l.flags|=2),l.return=e,s.return=e,s.sibling=l,e.child=s,go(null,s),s=e.child,l=t.child.memoizedState,l===null?l=ad(n):(i=l.cachePool,i!==null?(u=Xe._currentValue,i=i.parent!==u?{parent:u,pool:u}:i):i=SS(),l={baseLanes:l.baseLanes|n,cachePool:i}),s.memoizedState=l,s.childLanes=od(t,a,n),e.memoizedState=rd,go(t.child,s)):(js(e),n=t.child,t=n.sibling,n=ds(n,{mode:"visible",children:s.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function Cm(t,e){return e=Pc({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Pc(t,e){return t=en(22,t,null,e),t.lanes=0,t}function ld(t,e,n){return Ji(e,t.child,null,n),t=Cm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function qv(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),gm(t.return,e,n)}function ud(t,e,n,s,i,r){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i,treeForkCount:r}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=i,a.treeForkCount=r)}function gb(t,e,n){var s=e.pendingProps,i=s.revealOrder,r=s.tail;s=s.children;var a=Fe.current,l=(a&2)!==0;if(l?(a=a&1|2,e.flags|=128):a&=1,Ce(Fe,a),_t(t,e,s,n),s=pe?il:0,!l&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qv(t,n,e);else if(t.tag===19)qv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Mc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ud(e,!1,i,n,r,s);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Mc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ud(e,!0,n,null,r,s);break;case"together":ud(e,!1,null,null,void 0,s);break;default:e.memoizedState=null}return e.child}function Es(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),pi|=e.lanes,!(n&e.childLanes))if(t!==null){if(Ra(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(k(153));if(e.child!==null){for(t=e.child,n=ds(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ds(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pp(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Oc(t)))}function j2(t,e,n){switch(e.tag){case 3:Sc(e,e.stateNode.containerInfo),Bs(e,Xe,t.memoizedState.cache),Yi();break;case 27:case 5:nm(e);break;case 4:Sc(e,e.stateNode.containerInfo);break;case 10:Bs(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Tm(e),null;break;case 13:var s=e.memoizedState;if(s!==null)return s.dehydrated!==null?(js(e),e.flags|=128,null):n&e.child.childLanes?mb(t,e,n):(js(e),t=Es(t,e,n),t!==null?t.sibling:null);js(e);break;case 19:var i=(t.flags&128)!==0;if(s=(n&e.childLanes)!==0,s||(Ra(t,e,n,!1),s=(n&e.childLanes)!==0),i){if(s)return gb(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ce(Fe,Fe.current),s)break;return null;case 22:return e.lanes=0,db(t,e,n,e.pendingProps);case 24:Bs(e,Xe,t.memoizedState.cache)}return Es(t,e,n)}function pb(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Je=!0;else{if(!pp(t,n)&&!(e.flags&128))return Je=!1,j2(t,e,n);Je=!!(t.flags&131072)}else Je=!1,pe&&e.flags&1048576&&vS(e,il,e.index);switch(e.lanes=0,e.tag){case 16:e:{var s=e.pendingProps;if(t=xi(e.elementType),e.type=t,typeof t=="function")Qg(t)?(s=Zi(t,s),e.tag=1,e=Bv(null,e,t,s,n)):(e.tag=0,e=Im(null,e,t,s,n));else{if(t!=null){var i=t.$$typeof;if(i===Vg){e.tag=11,e=kv(null,e,t,s,n);break e}else if(i===kg){e.tag=14,e=Pv(null,e,t,s,n);break e}}throw e=em(t)||t,Error(k(306,e,""))}}return e;case 0:return Im(t,e,e.type,e.pendingProps,n);case 1:return s=e.type,i=Zi(s,e.pendingProps),Bv(t,e,s,i,n);case 3:e:{if(Sc(e,e.stateNode.containerInfo),t===null)throw Error(k(387));s=e.pendingProps;var r=e.memoizedState;i=r.element,ym(t,e),Lo(e,s,null,n);var a=e.memoizedState;if(s=a.cache,Bs(e,Xe,s),s!==r.cache&&pm(e,[Xe],n,!0),Po(),s=a.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){e=jv(t,e,s,n);break e}else if(s!==i){i=mn(Error(k(424)),e),rl(i),e=jv(t,e,s,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ne=En(t.firstChild),Tt=e,pe=!0,ei=null,gn=!0,n=wS(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Yi(),s===i){e=Es(t,e,n);break e}_t(t,e,s,n)}e=e.child}return e;case 26:return Yu(t,e),t===null?(n=lE(e.type,null,e.pendingProps,null))?e.memoizedState=n:pe||(n=e.type,t=e.pendingProps,s=Fc(Zs.current).createElement(n),s[Et]=e,s[Gt]=t,At(s,n,t),dt(s),e.stateNode=s):e.memoizedState=lE(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return nm(e),t===null&&pe&&(s=e.stateNode=aA(e.type,e.pendingProps,Zs.current),Tt=e,gn=!0,i=Ne,Ai(e.type)?(qm=i,Ne=En(s.firstChild)):Ne=i),_t(t,e,e.pendingProps.children,n),Yu(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&pe&&((i=s=Ne)&&(s=_O(s,e.type,e.pendingProps,gn),s!==null?(e.stateNode=s,Tt=e,Ne=En(s.firstChild),gn=!1,i=!0):i=!1),i||mi(e)),nm(e),i=e.type,r=e.pendingProps,a=t!==null?t.memoizedProps:null,s=r.children,Um(i,r)?s=null:a!==null&&Um(i,a)&&(e.flags|=32),e.memoizedState!==null&&(i=sp(t,e,M2,null,null,n),hl._currentValue=i),Yu(t,e),_t(t,e,s,n),e.child;case 6:return t===null&&pe&&((t=n=Ne)&&(n=yO(n,e.pendingProps,gn),n!==null?(e.stateNode=n,Tt=e,Ne=null,t=!0):t=!1),t||mi(e)),null;case 13:return mb(t,e,n);case 4:return Sc(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Ji(e,null,s,n):_t(t,e,s,n),e.child;case 11:return kv(t,e,e.type,e.pendingProps,n);case 7:return _t(t,e,e.pendingProps,n),e.child;case 8:return _t(t,e,e.pendingProps.children,n),e.child;case 12:return _t(t,e,e.pendingProps.children,n),e.child;case 10:return s=e.pendingProps,Bs(e,e.type,s.value),_t(t,e,s.children,n),e.child;case 9:return i=e.type._context,s=e.pendingProps.children,Xi(e),i=bt(i),s=s(i),e.flags|=1,_t(t,e,s,n),e.child;case 14:return Pv(t,e,e.type,e.pendingProps,n);case 15:return fb(t,e,e.type,e.pendingProps,n);case 19:return gb(t,e,n);case 31:return B2(t,e,n);case 22:return db(t,e,n,e.pendingProps);case 24:return Xi(e),s=bt(Xe),t===null?(i=Wg(),i===null&&(i=Ie,r=Jg(),i.pooledCache=r,r.refCount++,r!==null&&(i.pooledCacheLanes|=n),i=r),e.memoizedState={parent:s,cache:i},ep(e),Bs(e,Xe,i)):(t.lanes&n&&(ym(t,e),Lo(e,null,null,n),Po()),i=t.memoizedState,r=e.memoizedState,i.parent!==s?(i={parent:s,cache:s},e.memoizedState=i,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=i),Bs(e,Xe,s)):(s=r.cache,Bs(e,Xe,s),s!==i.cache&&pm(e,[Xe],n,!0))),_t(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(k(156,e.tag))}function Zn(t){t.flags|=4}function cd(t,e,n,s,i){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(i&335544128)===i)if(t.stateNode.complete)t.flags|=8192;else if(Bb())t.flags|=8192;else throw $i=Dc,Zg}else t.flags&=-16777217}function Hv(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!uA(e))if(Bb())t.flags|=8192;else throw $i=Dc,Zg}function Eu(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?j0():536870912,t.lanes|=e,ca|=e)}function ao(t,e){if(!pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function De(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&65011712,s|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function q2(t,e,n){var s=e.pendingProps;switch(Xg(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return De(e),null;case 1:return De(e),null;case 3:return n=e.stateNode,s=null,t!==null&&(s=t.memoizedState.cache),e.memoizedState.cache!==s&&(e.flags|=2048),ms(Xe),ia(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(yr(e)?Zn(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,td())),De(e),null;case 26:var i=e.type,r=e.memoizedState;return t===null?(Zn(e),r!==null?(De(e),Hv(e,r)):(De(e),cd(e,i,null,s,n))):r?r!==t.memoizedState?(Zn(e),De(e),Hv(e,r)):(De(e),e.flags&=-16777217):(t=t.memoizedProps,t!==s&&Zn(e),De(e),cd(e,i,t,s,n)),null;case 27:if(bc(e),n=Zs.current,i=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&Zn(e);else{if(!s){if(e.stateNode===null)throw Error(k(166));return De(e),null}t=qn.current,yr(e)?yv(e):(t=aA(i,s,n),e.stateNode=t,Zn(e))}return De(e),null;case 5:if(bc(e),i=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&Zn(e);else{if(!s){if(e.stateNode===null)throw Error(k(166));return De(e),null}if(r=qn.current,yr(e))yv(e);else{var a=Fc(Zs.current);switch(r){case 1:r=a.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:r=a.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":r=a.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":r=a.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":r=a.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof s.is=="string"?a.createElement("select",{is:s.is}):a.createElement("select"),s.multiple?r.multiple=!0:s.size&&(r.size=s.size);break;default:r=typeof s.is=="string"?a.createElement(i,{is:s.is}):a.createElement(i)}}r[Et]=e,r[Gt]=s;e:for(a=e.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}e.stateNode=r;e:switch(At(r,i,s),i){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Zn(e)}}return De(e),cd(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==s&&Zn(e);else{if(typeof s!="string"&&e.stateNode===null)throw Error(k(166));if(t=Zs.current,yr(e)){if(t=e.stateNode,n=e.memoizedProps,s=null,i=Tt,i!==null)switch(i.tag){case 27:case 5:s=i.memoizedProps}t[Et]=e,t=!!(t.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||nA(t.nodeValue,n)),t||mi(e,!0)}else t=Fc(t).createTextNode(s),t[Et]=e,e.stateNode=t}return De(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(s=yr(e),n!==null){if(t===null){if(!s)throw Error(k(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(k(557));t[Et]=e}else Yi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;De(e),t=!1}else n=td(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(Zt(e),e):(Zt(e),null);if(e.flags&128)throw Error(k(558))}return De(e),null;case 13:if(s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=yr(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(k(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(k(317));i[Et]=e}else Yi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;De(e),i=!1}else i=td(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return e.flags&256?(Zt(e),e):(Zt(e),null)}return Zt(e),e.flags&128?(e.lanes=n,e):(n=s!==null,t=t!==null&&t.memoizedState!==null,n&&(s=e.child,i=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(i=s.alternate.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==i&&(s.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),Eu(e,e.updateQueue),De(e),null);case 4:return ia(),t===null&&bp(e.stateNode.containerInfo),De(e),null;case 10:return ms(e.type),De(e),null;case 19:if(gt(Fe),s=e.memoizedState,s===null)return De(e),null;if(i=(e.flags&128)!==0,r=s.rendering,r===null)if(i)ao(s,!1);else{if(je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(r=Mc(t),r!==null){for(e.flags|=128,ao(s,!1),t=r.updateQueue,e.updateQueue=t,Eu(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)_S(n,t),n=n.sibling;return Ce(Fe,Fe.current&1|2),pe&&rs(e,s.treeForkCount),e.child}t=t.sibling}s.tail!==null&&nn()>Uc&&(e.flags|=128,i=!0,ao(s,!1),e.lanes=4194304)}else{if(!i)if(t=Mc(r),t!==null){if(e.flags|=128,i=!0,t=t.updateQueue,e.updateQueue=t,Eu(e,t),ao(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!pe)return De(e),null}else 2*nn()-s.renderingStartTime>Uc&&n!==536870912&&(e.flags|=128,i=!0,ao(s,!1),e.lanes=4194304);s.isBackwards?(r.sibling=e.child,e.child=r):(t=s.last,t!==null?t.sibling=r:e.child=r,s.last=r)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=nn(),t.sibling=null,n=Fe.current,Ce(Fe,i?n&1|2:n&1),pe&&rs(e,s.treeForkCount),t):(De(e),null);case 22:case 23:return Zt(e),tp(),s=e.memoizedState!==null,t!==null?t.memoizedState!==null!==s&&(e.flags|=8192):s&&(e.flags|=8192),s?n&536870912&&!(e.flags&128)&&(De(e),e.subtreeFlags&6&&(e.flags|=8192)):De(e),n=e.updateQueue,n!==null&&Eu(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),s=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),s!==n&&(e.flags|=2048),t!==null&&gt(Fi),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),ms(Xe),De(e),null;case 25:return null;case 30:return null}throw Error(k(156,e.tag))}function H2(t,e){switch(Xg(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ms(Xe),ia(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return bc(e),null;case 31:if(e.memoizedState!==null){if(Zt(e),e.alternate===null)throw Error(k(340));Yi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Zt(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(k(340));Yi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return gt(Fe),null;case 4:return ia(),null;case 10:return ms(e.type),null;case 22:case 23:return Zt(e),tp(),t!==null&&gt(Fi),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return ms(Xe),null;case 25:return null;default:return null}}function _b(t,e){switch(Xg(e),e.tag){case 3:ms(Xe),ia();break;case 26:case 27:case 5:bc(e);break;case 4:ia();break;case 31:e.memoizedState!==null&&Zt(e);break;case 13:Zt(e);break;case 19:gt(Fe);break;case 10:ms(e.type);break;case 22:case 23:Zt(e),tp(),t!==null&&gt(Fi);break;case 24:ms(Xe)}}function kl(t,e){try{var n=e.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var i=s.next;n=i;do{if((n.tag&t)===t){s=void 0;var r=n.create,a=n.inst;s=r(),a.destroy=s}n=n.next}while(n!==i)}}catch(l){be(e,e.return,l)}}function gi(t,e,n){try{var s=e.updateQueue,i=s!==null?s.lastEffect:null;if(i!==null){var r=i.next;s=r;do{if((s.tag&t)===t){var a=s.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,i=e;var u=n,c=l;try{c()}catch(d){be(i,u,d)}}}s=s.next}while(s!==r)}}catch(d){be(e,e.return,d)}}function yb(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{IS(e,n)}catch(s){be(t,t.return,s)}}}function vb(t,e,n){n.props=Zi(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(s){be(t,e,s)}}function zo(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var s=t.stateNode;break;case 30:s=t.stateNode;break;default:s=t.stateNode}typeof n=="function"?t.refCleanup=n(s):n.current=s}}catch(i){be(t,e,i)}}function Bn(t,e){var n=t.ref,s=t.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(i){be(t,e,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){be(t,e,i)}else n.current=null}function Eb(t){var e=t.type,n=t.memoizedProps,s=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(i){be(t,t.return,i)}}function hd(t,e,n){try{var s=t.stateNode;hO(s,t.type,n,e),s[Gt]=e}catch(i){be(t,t.return,i)}}function Tb(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ai(t.type)||t.tag===4}function fd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Tb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ai(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Om(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=us));else if(s!==4&&(s===27&&Ai(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Om(t,e,n),t=t.sibling;t!==null;)Om(t,e,n),t=t.sibling}function Lc(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(s===27&&Ai(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Lc(t,e,n),t=t.sibling;t!==null;)Lc(t,e,n),t=t.sibling}function Sb(t){var e=t.stateNode,n=t.memoizedProps;try{for(var s=t.type,i=e.attributes;i.length;)e.removeAttributeNode(i[0]);At(e,s,n),e[Et]=t,e[Gt]=n}catch(r){be(t,t.return,r)}}var as=!1,Ye=!1,dd=!1,Fv=typeof WeakSet=="function"?WeakSet:Set,ft=null;function F2(t,e){if(t=t.containerInfo,Pm=Qc,t=uS(t),$g(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,c=0,d=0,m=t,g=null;t:for(;;){for(var p;m!==n||i!==0&&m.nodeType!==3||(l=a+i),m!==r||s!==0&&m.nodeType!==3||(u=a+s),m.nodeType===3&&(a+=m.nodeValue.length),(p=m.firstChild)!==null;)g=m,m=p;for(;;){if(m===t)break t;if(g===n&&++c===i&&(l=a),g===r&&++d===s&&(u=a),(p=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=p}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Lm={focusedElem:t,selectionRange:n},Qc=!1,ft=e;ft!==null;)if(e=ft,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ft=t;else for(;ft!==null;){switch(e=ft,r=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)i=t[n],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&r!==null){t=void 0,n=e,i=r.memoizedProps,r=r.memoizedState,s=n.stateNode;try{var C=Zi(n.type,i);t=s.getSnapshotBeforeUpdate(C,r),s.__reactInternalSnapshotBeforeUpdate=t}catch(O){be(n,n.return,O)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)zm(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":zm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(k(163))}if(t=e.sibling,t!==null){t.return=e.return,ft=t;break}ft=e.return}}function bb(t,e,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:ts(t,n),s&4&&kl(5,n);break;case 1:if(ts(t,n),s&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){be(n,n.return,a)}else{var i=Zi(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){be(n,n.return,a)}}s&64&&yb(n),s&512&&zo(n,n.return);break;case 3:if(ts(t,n),s&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{IS(t,e)}catch(a){be(n,n.return,a)}}break;case 27:e===null&&s&4&&Sb(n);case 26:case 5:ts(t,n),e===null&&s&4&&Eb(n),s&512&&zo(n,n.return);break;case 12:ts(t,n);break;case 31:ts(t,n),s&4&&Rb(t,n);break;case 13:ts(t,n),s&4&&Ib(t,n),s&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=Z2.bind(null,n),vO(t,n))));break;case 22:if(s=n.memoizedState!==null||as,!s){e=e!==null&&e.memoizedState!==null||Ye,i=as;var r=Ye;as=s,(Ye=e)&&!r?ss(t,n,(n.subtreeFlags&8772)!==0):ts(t,n),as=i,Ye=r}break;case 30:break;default:ts(t,n)}}function Ab(t){var e=t.alternate;e!==null&&(t.alternate=null,Ab(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&zg(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ke=null,jt=!1;function es(t,e,n){for(n=n.child;n!==null;)wb(t,e,n),n=n.sibling}function wb(t,e,n){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(Cl,n)}catch{}switch(n.tag){case 26:Ye||Bn(n,e),es(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ye||Bn(n,e);var s=ke,i=jt;Ai(n.type)&&(ke=n.stateNode,jt=!1),es(t,e,n),Ho(n.stateNode),ke=s,jt=i;break;case 5:Ye||Bn(n,e);case 6:if(s=ke,i=jt,ke=null,es(t,e,n),ke=s,jt=i,ke!==null)if(jt)try{(ke.nodeType===9?ke.body:ke.nodeName==="HTML"?ke.ownerDocument.body:ke).removeChild(n.stateNode)}catch(r){be(n,e,r)}else try{ke.removeChild(n.stateNode)}catch(r){be(n,e,r)}break;case 18:ke!==null&&(jt?(t=ke,sE(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),ma(t)):sE(ke,n.stateNode));break;case 4:s=ke,i=jt,ke=n.stateNode.containerInfo,jt=!0,es(t,e,n),ke=s,jt=i;break;case 0:case 11:case 14:case 15:gi(2,n,e),Ye||gi(4,n,e),es(t,e,n);break;case 1:Ye||(Bn(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"&&vb(n,e,s)),es(t,e,n);break;case 21:es(t,e,n);break;case 22:Ye=(s=Ye)||n.memoizedState!==null,es(t,e,n),Ye=s;break;default:es(t,e,n)}}function Rb(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ma(t)}catch(n){be(e,e.return,n)}}}function Ib(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ma(t)}catch(n){be(e,e.return,n)}}function $2(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Fv),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Fv),e;default:throw Error(k(435,t.tag))}}function Tu(t,e){var n=$2(t);e.forEach(function(s){if(!n.has(s)){n.add(s);var i=eO.bind(null,t,s);s.then(i,i)}})}function zt(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s],r=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 27:if(Ai(l.type)){ke=l.stateNode,jt=!1;break e}break;case 5:ke=l.stateNode,jt=!1;break e;case 3:case 4:ke=l.stateNode.containerInfo,jt=!0;break e}l=l.return}if(ke===null)throw Error(k(160));wb(r,a,i),ke=null,jt=!1,r=i.alternate,r!==null&&(r.return=null),i.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)Cb(e,t),e=e.sibling}var wn=null;function Cb(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:zt(e,t),Bt(t),s&4&&(gi(3,t,t.return),kl(3,t),gi(5,t,t.return));break;case 1:zt(e,t),Bt(t),s&512&&(Ye||n===null||Bn(n,n.return)),s&64&&as&&(t=t.updateQueue,t!==null&&(s=t.callbacks,s!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var i=wn;if(zt(e,t),Bt(t),s&512&&(Ye||n===null||Bn(n,n.return)),s&4){var r=n!==null?n.memoizedState:null;if(s=t.memoizedState,n===null)if(s===null)if(t.stateNode===null){e:{s=t.type,n=t.memoizedProps,i=i.ownerDocument||i;t:switch(s){case"title":r=i.getElementsByTagName("title")[0],(!r||r[Nl]||r[Et]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=i.createElement(s),i.head.insertBefore(r,i.querySelector("head > title"))),At(r,s,n),r[Et]=t,dt(r),s=r;break e;case"link":var a=cE("link","href",i).get(s+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(r=a[l],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break t}}r=i.createElement(s),At(r,s,n),i.head.appendChild(r);break;case"meta":if(a=cE("meta","content",i).get(s+(n.content||""))){for(l=0;l<a.length;l++)if(r=a[l],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break t}}r=i.createElement(s),At(r,s,n),i.head.appendChild(r);break;default:throw Error(k(468,s))}r[Et]=t,dt(r),s=r}t.stateNode=s}else hE(i,t.type,t.stateNode);else t.stateNode=uE(i,s,t.memoizedProps);else r!==s?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,s===null?hE(i,t.type,t.stateNode):uE(i,s,t.memoizedProps)):s===null&&t.stateNode!==null&&hd(t,t.memoizedProps,n.memoizedProps)}break;case 27:zt(e,t),Bt(t),s&512&&(Ye||n===null||Bn(n,n.return)),n!==null&&s&4&&hd(t,t.memoizedProps,n.memoizedProps);break;case 5:if(zt(e,t),Bt(t),s&512&&(Ye||n===null||Bn(n,n.return)),t.flags&32){i=t.stateNode;try{aa(i,"")}catch(C){be(t,t.return,C)}}s&4&&t.stateNode!=null&&(i=t.memoizedProps,hd(t,i,n!==null?n.memoizedProps:i)),s&1024&&(dd=!0);break;case 6:if(zt(e,t),Bt(t),s&4){if(t.stateNode===null)throw Error(k(162));s=t.memoizedProps,n=t.stateNode;try{n.nodeValue=s}catch(C){be(t,t.return,C)}}break;case 3:if(Wu=null,i=wn,wn=$c(e.containerInfo),zt(e,t),wn=i,Bt(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{ma(e.containerInfo)}catch(C){be(t,t.return,C)}dd&&(dd=!1,Ob(t));break;case 4:s=wn,wn=$c(t.stateNode.containerInfo),zt(e,t),Bt(t),wn=s;break;case 12:zt(e,t),Bt(t);break;case 31:zt(e,t),Bt(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Tu(t,s)));break;case 13:zt(e,t),Bt(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Uh=nn()),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Tu(t,s)));break;case 22:i=t.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,c=as,d=Ye;if(as=c||i,Ye=d||u,zt(e,t),Ye=d,as=c,Bt(t),s&8192)e:for(e=t.stateNode,e._visibility=i?e._visibility&-2:e._visibility|1,i&&(n===null||u||as||Ye||Vi(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){u=n=e;try{if(r=u.stateNode,i)a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var m=u.memoizedProps.style,g=m!=null&&m.hasOwnProperty("display")?m.display:null;l.style.display=g==null||typeof g=="boolean"?"":(""+g).trim()}}catch(C){be(u,u.return,C)}}}else if(e.tag===6){if(n===null){u=e;try{u.stateNode.nodeValue=i?"":u.memoizedProps}catch(C){be(u,u.return,C)}}}else if(e.tag===18){if(n===null){u=e;try{var p=u.stateNode;i?iE(p,!0):iE(u.stateNode,!1)}catch(C){be(u,u.return,C)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}s&4&&(s=t.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,Tu(t,n))));break;case 19:zt(e,t),Bt(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Tu(t,s)));break;case 30:break;case 21:break;default:zt(e,t),Bt(t)}}function Bt(t){var e=t.flags;if(e&2){try{for(var n,s=t.return;s!==null;){if(Tb(s)){n=s;break}s=s.return}if(n==null)throw Error(k(160));switch(n.tag){case 27:var i=n.stateNode,r=fd(t);Lc(t,r,i);break;case 5:var a=n.stateNode;n.flags&32&&(aa(a,""),n.flags&=-33);var l=fd(t);Lc(t,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,c=fd(t);Om(t,c,u);break;default:throw Error(k(161))}}catch(d){be(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ob(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Ob(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function ts(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)bb(t,e.alternate,e),e=e.sibling}function Vi(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:gi(4,e,e.return),Vi(e);break;case 1:Bn(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&vb(e,e.return,n),Vi(e);break;case 27:Ho(e.stateNode);case 26:case 5:Bn(e,e.return),Vi(e);break;case 22:e.memoizedState===null&&Vi(e);break;case 30:Vi(e);break;default:Vi(e)}t=t.sibling}}function ss(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var s=e.alternate,i=t,r=e,a=r.flags;switch(r.tag){case 0:case 11:case 15:ss(i,r,n),kl(4,r);break;case 1:if(ss(i,r,n),s=r,i=s.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(c){be(s,s.return,c)}if(s=r,i=s.updateQueue,i!==null){var l=s.stateNode;try{var u=i.shared.hiddenCallbacks;if(u!==null)for(i.shared.hiddenCallbacks=null,i=0;i<u.length;i++)RS(u[i],l)}catch(c){be(s,s.return,c)}}n&&a&64&&yb(r),zo(r,r.return);break;case 27:Sb(r);case 26:case 5:ss(i,r,n),n&&s===null&&a&4&&Eb(r),zo(r,r.return);break;case 12:ss(i,r,n);break;case 31:ss(i,r,n),n&&a&4&&Rb(i,r);break;case 13:ss(i,r,n),n&&a&4&&Ib(i,r);break;case 22:r.memoizedState===null&&ss(i,r,n),zo(r,r.return);break;case 30:break;default:ss(i,r,n)}e=e.sibling}}function _p(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&xl(n))}function yp(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&xl(t))}function bn(t,e,n,s){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Db(t,e,n,s),e=e.sibling}function Db(t,e,n,s){var i=e.flags;switch(e.tag){case 0:case 11:case 15:bn(t,e,n,s),i&2048&&kl(9,e);break;case 1:bn(t,e,n,s);break;case 3:bn(t,e,n,s),i&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&xl(t)));break;case 12:if(i&2048){bn(t,e,n,s),t=e.stateNode;try{var r=e.memoizedProps,a=r.id,l=r.onPostCommit;typeof l=="function"&&l(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(u){be(e,e.return,u)}}else bn(t,e,n,s);break;case 31:bn(t,e,n,s);break;case 13:bn(t,e,n,s);break;case 23:break;case 22:r=e.stateNode,a=e.alternate,e.memoizedState!==null?r._visibility&2?bn(t,e,n,s):Bo(t,e):r._visibility&2?bn(t,e,n,s):(r._visibility|=2,Ar(t,e,n,s,(e.subtreeFlags&10256)!==0||!1)),i&2048&&_p(a,e);break;case 24:bn(t,e,n,s),i&2048&&yp(e.alternate,e);break;default:bn(t,e,n,s)}}function Ar(t,e,n,s,i){for(i=i&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var r=t,a=e,l=n,u=s,c=a.flags;switch(a.tag){case 0:case 11:case 15:Ar(r,a,l,u,i),kl(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&2?Ar(r,a,l,u,i):Bo(r,a):(d._visibility|=2,Ar(r,a,l,u,i)),i&&c&2048&&_p(a.alternate,a);break;case 24:Ar(r,a,l,u,i),i&&c&2048&&yp(a.alternate,a);break;default:Ar(r,a,l,u,i)}e=e.sibling}}function Bo(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,s=e,i=s.flags;switch(s.tag){case 22:Bo(n,s),i&2048&&_p(s.alternate,s);break;case 24:Bo(n,s),i&2048&&yp(s.alternate,s);break;default:Bo(n,s)}e=e.sibling}}var po=8192;function vr(t,e,n){if(t.subtreeFlags&po)for(t=t.child;t!==null;)Nb(t,e,n),t=t.sibling}function Nb(t,e,n){switch(t.tag){case 26:vr(t,e,n),t.flags&po&&t.memoizedState!==null&&NO(n,wn,t.memoizedState,t.memoizedProps);break;case 5:vr(t,e,n);break;case 3:case 4:var s=wn;wn=$c(t.stateNode.containerInfo),vr(t,e,n),wn=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=po,po=16777216,vr(t,e,n),po=s):vr(t,e,n));break;default:vr(t,e,n)}}function Mb(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function oo(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];ft=s,Vb(s,t)}Mb(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)xb(t),t=t.sibling}function xb(t){switch(t.tag){case 0:case 11:case 15:oo(t),t.flags&2048&&gi(9,t,t.return);break;case 3:oo(t);break;case 12:oo(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Xu(t)):oo(t);break;default:oo(t)}}function Xu(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];ft=s,Vb(s,t)}Mb(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:gi(8,e,e.return),Xu(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Xu(e));break;default:Xu(e)}t=t.sibling}}function Vb(t,e){for(;ft!==null;){var n=ft;switch(n.tag){case 0:case 11:case 15:gi(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:xl(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,ft=s;else e:for(n=t;ft!==null;){s=ft;var i=s.sibling,r=s.return;if(Ab(s),s===n){ft=null;break e}if(i!==null){i.return=r,ft=i;break e}ft=r}}}var G2={getCacheForType:function(t){var e=bt(Xe),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return bt(Xe).controller.signal}},K2=typeof WeakMap=="function"?WeakMap:Map,ve=0,Ie=null,he=null,ge=0,Se=0,Wt=null,Ys=!1,Ca=!1,vp=!1,Ts=0,je=0,pi=0,Gi=0,Ep=0,tn=0,ca=0,jo=null,qt=null,Dm=!1,Uh=0,kb=0,Uc=1/0,zc=null,si=null,nt=0,ii=null,ha=null,gs=0,Nm=0,Mm=null,Pb=null,qo=0,xm=null;function an(){return ve&2&&ge!==0?ge&-ge:ee.T!==null?Sp():$0()}function Lb(){if(tn===0)if(!(ge&536870912)||pe){var t=du;du<<=1,!(du&3932160)&&(du=262144),tn=t}else tn=536870912;return t=ln.current,t!==null&&(t.flags|=32),tn}function $t(t,e,n){(t===Ie&&(Se===2||Se===9)||t.cancelPendingCommit!==null)&&(fa(t,0),Xs(t,ge,tn,!1)),Dl(t,n),(!(ve&2)||t!==Ie)&&(t===Ie&&(!(ve&2)&&(Gi|=n),je===4&&Xs(t,ge,tn,!1)),Jn(t))}function Ub(t,e,n){if(ve&6)throw Error(k(327));var s=!n&&(e&127)===0&&(e&t.expiredLanes)===0||Ol(t,e),i=s?X2(t,e):md(t,e,!0),r=s;do{if(i===0){Ca&&!s&&Xs(t,e,0,!1);break}else{if(n=t.current.alternate,r&&!Q2(n)){i=md(t,e,!1),r=!1;continue}if(i===2){if(r=e,t.errorRecoveryDisabledLanes&r)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var l=t;i=jo;var u=l.current.memoizedState.isDehydrated;if(u&&(fa(l,a).flags|=256),a=md(l,a,!1),a!==2){if(vp&&!u){l.errorRecoveryDisabledLanes|=r,Gi|=r,i=4;break e}r=qt,qt=i,r!==null&&(qt===null?qt=r:qt.push.apply(qt,r))}i=a}if(r=!1,i!==2)continue}}if(i===1){fa(t,0),Xs(t,e,0,!0);break}e:{switch(s=t,r=i,r){case 0:case 1:throw Error(k(345));case 4:if((e&4194048)!==e)break;case 6:Xs(s,e,tn,!Ys);break e;case 2:qt=null;break;case 3:case 5:break;default:throw Error(k(329))}if((e&62914560)===e&&(i=Uh+300-nn(),10<i)){if(Xs(s,e,tn,!Ys),Ih(s,0,!0)!==0)break e;gs=e,s.timeoutHandle=iA($v.bind(null,s,n,qt,zc,Dm,e,tn,Gi,ca,Ys,r,"Throttled",-0,0),i);break e}$v(s,n,qt,zc,Dm,e,tn,Gi,ca,Ys,r,null,-0,0)}}break}while(!0);Jn(t)}function $v(t,e,n,s,i,r,a,l,u,c,d,m,g,p){if(t.timeoutHandle=-1,m=e.subtreeFlags,m&8192||(m&16785408)===16785408){m={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:us},Nb(e,r,m);var C=(r&62914560)===r?Uh-nn():(r&4194048)===r?kb-nn():0;if(C=MO(m,C),C!==null){gs=r,t.cancelPendingCommit=C(Kv.bind(null,t,e,r,n,s,i,a,l,u,d,m,null,g,p)),Xs(t,r,a,!c);return}}Kv(t,e,r,n,s,i,a,l,u)}function Q2(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var i=n[s],r=i.getSnapshot;i=i.value;try{if(!on(r(),i))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xs(t,e,n,s){e&=~Ep,e&=~Gi,t.suspendedLanes|=e,t.pingedLanes&=~e,s&&(t.warmLanes|=e),s=t.expirationTimes;for(var i=e;0<i;){var r=31-rn(i),a=1<<r;s[r]=-1,i&=~a}n!==0&&q0(t,n,e)}function zh(){return ve&6?!0:(Pl(0),!1)}function Tp(){if(he!==null){if(Se===0)var t=he.return;else t=he,cs=cr=null,ap(t),Xr=null,al=0,t=he;for(;t!==null;)_b(t.alternate,t),t=t.return;he=null}}function fa(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,mO(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),gs=0,Tp(),Ie=t,he=n=ds(t.current,null),ge=e,Se=0,Wt=null,Ys=!1,Ca=Ol(t,e),vp=!1,ca=tn=Ep=Gi=pi=je=0,qt=jo=null,Dm=!1,e&8&&(e|=e&32);var s=t.entangledLanes;if(s!==0)for(t=t.entanglements,s&=e;0<s;){var i=31-rn(s),r=1<<i;e|=t[i],s&=~r}return Ts=e,Nh(),n}function zb(t,e){ae=null,ee.H=ll,e===Ia||e===xh?(e=bv(),Se=3):e===Zg?(e=bv(),Se=4):Se=e===gp?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Wt=e,he===null&&(je=1,kc(t,mn(e,t.current)))}function Bb(){var t=ln.current;return t===null?!0:(ge&4194048)===ge?vn===null:(ge&62914560)===ge||ge&536870912?t===vn:!1}function jb(){var t=ee.H;return ee.H=ll,t===null?ll:t}function qb(){var t=ee.A;return ee.A=G2,t}function Bc(){je=4,Ys||(ge&4194048)!==ge&&ln.current!==null||(Ca=!0),!(pi&134217727)&&!(Gi&134217727)||Ie===null||Xs(Ie,ge,tn,!1)}function md(t,e,n){var s=ve;ve|=2;var i=jb(),r=qb();(Ie!==t||ge!==e)&&(zc=null,fa(t,e)),e=!1;var a=je;e:do try{if(Se!==0&&he!==null){var l=he,u=Wt;switch(Se){case 8:Tp(),a=6;break e;case 3:case 2:case 9:case 6:ln.current===null&&(e=!0);var c=Se;if(Se=0,Wt=null,Fr(t,l,u,c),n&&Ca){a=0;break e}break;default:c=Se,Se=0,Wt=null,Fr(t,l,u,c)}}Y2(),a=je;break}catch(d){zb(t,d)}while(!0);return e&&t.shellSuspendCounter++,cs=cr=null,ve=s,ee.H=i,ee.A=r,he===null&&(Ie=null,ge=0,Nh()),a}function Y2(){for(;he!==null;)Hb(he)}function X2(t,e){var n=ve;ve|=2;var s=jb(),i=qb();Ie!==t||ge!==e?(zc=null,Uc=nn()+500,fa(t,e)):Ca=Ol(t,e);e:do try{if(Se!==0&&he!==null){e=he;var r=Wt;t:switch(Se){case 1:Se=0,Wt=null,Fr(t,e,r,1);break;case 2:case 9:if(Sv(r)){Se=0,Wt=null,Gv(e);break}e=function(){Se!==2&&Se!==9||Ie!==t||(Se=7),Jn(t)},r.then(e,e);break e;case 3:Se=7;break e;case 4:Se=5;break e;case 7:Sv(r)?(Se=0,Wt=null,Gv(e)):(Se=0,Wt=null,Fr(t,e,r,7));break;case 5:var a=null;switch(he.tag){case 26:a=he.memoizedState;case 5:case 27:var l=he;if(a?uA(a):l.stateNode.complete){Se=0,Wt=null;var u=l.sibling;if(u!==null)he=u;else{var c=l.return;c!==null?(he=c,Bh(c)):he=null}break t}}Se=0,Wt=null,Fr(t,e,r,5);break;case 6:Se=0,Wt=null,Fr(t,e,r,6);break;case 8:Tp(),je=6;break e;default:throw Error(k(462))}}J2();break}catch(d){zb(t,d)}while(!0);return cs=cr=null,ee.H=s,ee.A=i,ve=n,he!==null?0:(Ie=null,ge=0,Nh(),je)}function J2(){for(;he!==null&&!EC();)Hb(he)}function Hb(t){var e=pb(t.alternate,t,Ts);t.memoizedProps=t.pendingProps,e===null?Bh(t):he=e}function Gv(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=zv(n,e,e.pendingProps,e.type,void 0,ge);break;case 11:e=zv(n,e,e.pendingProps,e.type.render,e.ref,ge);break;case 5:ap(e);default:_b(n,e),e=he=_S(e,Ts),e=pb(n,e,Ts)}t.memoizedProps=t.pendingProps,e===null?Bh(t):he=e}function Fr(t,e,n,s){cs=cr=null,ap(e),Xr=null,al=0;var i=e.return;try{if(z2(t,i,e,n,ge)){je=1,kc(t,mn(n,t.current)),he=null;return}}catch(r){if(i!==null)throw he=i,r;je=1,kc(t,mn(n,t.current)),he=null;return}e.flags&32768?(pe||s===1?t=!0:Ca||ge&536870912?t=!1:(Ys=t=!0,(s===2||s===9||s===3||s===6)&&(s=ln.current,s!==null&&s.tag===13&&(s.flags|=16384))),Fb(e,t)):Bh(e)}function Bh(t){var e=t;do{if(e.flags&32768){Fb(e,Ys);return}t=e.return;var n=q2(e.alternate,e,Ts);if(n!==null){he=n;return}if(e=e.sibling,e!==null){he=e;return}he=e=t}while(e!==null);je===0&&(je=5)}function Fb(t,e){do{var n=H2(t.alternate,t);if(n!==null){n.flags&=32767,he=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){he=t;return}he=t=n}while(t!==null);je=6,he=null}function Kv(t,e,n,s,i,r,a,l,u){t.cancelPendingCommit=null;do jh();while(nt!==0);if(ve&6)throw Error(k(327));if(e!==null){if(e===t.current)throw Error(k(177));if(r=e.lanes|e.childLanes,r|=Gg,DC(t,n,r,a,l,u),t===Ie&&(he=Ie=null,ge=0),ha=e,ii=t,gs=n,Nm=r,Mm=i,Pb=s,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,tO(Ac,function(){return Yb(),null})):(t.callbackNode=null,t.callbackPriority=0),s=(e.flags&13878)!==0,e.subtreeFlags&13878||s){s=ee.T,ee.T=null,i=Ee.p,Ee.p=2,a=ve,ve|=4;try{F2(t,e,n)}finally{ve=a,Ee.p=i,ee.T=s}}nt=1,$b(),Gb(),Kb()}}function $b(){if(nt===1){nt=0;var t=ii,e=ha,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=ee.T,ee.T=null;var s=Ee.p;Ee.p=2;var i=ve;ve|=4;try{Cb(e,t);var r=Lm,a=uS(t.containerInfo),l=r.focusedElem,u=r.selectionRange;if(a!==l&&l&&l.ownerDocument&&lS(l.ownerDocument.documentElement,l)){if(u!==null&&$g(l)){var c=u.start,d=u.end;if(d===void 0&&(d=c),"selectionStart"in l)l.selectionStart=c,l.selectionEnd=Math.min(d,l.value.length);else{var m=l.ownerDocument||document,g=m&&m.defaultView||window;if(g.getSelection){var p=g.getSelection(),C=l.textContent.length,O=Math.min(u.start,C),x=u.end===void 0?O:Math.min(u.end,C);!p.extend&&O>x&&(a=x,x=O,O=a);var S=gv(l,O),y=gv(l,x);if(S&&y&&(p.rangeCount!==1||p.anchorNode!==S.node||p.anchorOffset!==S.offset||p.focusNode!==y.node||p.focusOffset!==y.offset)){var A=m.createRange();A.setStart(S.node,S.offset),p.removeAllRanges(),O>x?(p.addRange(A),p.extend(y.node,y.offset)):(A.setEnd(y.node,y.offset),p.addRange(A))}}}}for(m=[],p=l;p=p.parentNode;)p.nodeType===1&&m.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<m.length;l++){var I=m[l];I.element.scrollLeft=I.left,I.element.scrollTop=I.top}}Qc=!!Pm,Lm=Pm=null}finally{ve=i,Ee.p=s,ee.T=n}}t.current=e,nt=2}}function Gb(){if(nt===2){nt=0;var t=ii,e=ha,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=ee.T,ee.T=null;var s=Ee.p;Ee.p=2;var i=ve;ve|=4;try{bb(t,e.alternate,e)}finally{ve=i,Ee.p=s,ee.T=n}}nt=3}}function Kb(){if(nt===4||nt===3){nt=0,TC();var t=ii,e=ha,n=gs,s=Pb;e.subtreeFlags&10256||e.flags&10256?nt=5:(nt=0,ha=ii=null,Qb(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&(si=null),Ug(n),e=e.stateNode,sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(Cl,e,void 0,(e.current.flags&128)===128)}catch{}if(s!==null){e=ee.T,i=Ee.p,Ee.p=2,ee.T=null;try{for(var r=t.onRecoverableError,a=0;a<s.length;a++){var l=s[a];r(l.value,{componentStack:l.stack})}}finally{ee.T=e,Ee.p=i}}gs&3&&jh(),Jn(t),i=t.pendingLanes,n&261930&&i&42?t===xm?qo++:(qo=0,xm=t):qo=0,Pl(0)}}function Qb(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,xl(e)))}function jh(){return $b(),Gb(),Kb(),Yb()}function Yb(){if(nt!==5)return!1;var t=ii,e=Nm;Nm=0;var n=Ug(gs),s=ee.T,i=Ee.p;try{Ee.p=32>n?32:n,ee.T=null,n=Mm,Mm=null;var r=ii,a=gs;if(nt=0,ha=ii=null,gs=0,ve&6)throw Error(k(331));var l=ve;if(ve|=4,xb(r.current),Db(r,r.current,a,n),ve=l,Pl(0,!1),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(Cl,r)}catch{}return!0}finally{Ee.p=i,ee.T=s,Qb(t,e)}}function Qv(t,e,n){e=mn(n,e),e=Rm(t.stateNode,e,2),t=ni(t,e,2),t!==null&&(Dl(t,2),Jn(t))}function be(t,e,n){if(t.tag===3)Qv(t,t,n);else for(;e!==null;){if(e.tag===3){Qv(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(si===null||!si.has(s))){t=mn(n,t),n=cb(2),s=ni(e,n,2),s!==null&&(hb(n,s,e,t),Dl(s,2),Jn(s));break}}e=e.return}}function gd(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new K2;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(n)||(vp=!0,i.add(n),t=W2.bind(null,t,e,n),e.then(t,t))}function W2(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Ie===t&&(ge&n)===n&&(je===4||je===3&&(ge&62914560)===ge&&300>nn()-Uh?!(ve&2)&&fa(t,0):Ep|=n,ca===ge&&(ca=0)),Jn(t)}function Xb(t,e){e===0&&(e=j0()),t=ur(t,e),t!==null&&(Dl(t,e),Jn(t))}function Z2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Xb(t,n)}function eO(t,e){var n=0;switch(t.tag){case 31:case 13:var s=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error(k(314))}s!==null&&s.delete(e),Xb(t,n)}function tO(t,e){return Pg(t,e)}var jc=null,wr=null,Vm=!1,qc=!1,pd=!1,Js=0;function Jn(t){t!==wr&&t.next===null&&(wr===null?jc=wr=t:wr=wr.next=t),qc=!0,Vm||(Vm=!0,sO())}function Pl(t,e){if(!pd&&qc){pd=!0;do for(var n=!1,s=jc;s!==null;){if(t!==0){var i=s.pendingLanes;if(i===0)var r=0;else{var a=s.suspendedLanes,l=s.pingedLanes;r=(1<<31-rn(42|t)+1)-1,r&=i&~(a&~l),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,Yv(s,r))}else r=ge,r=Ih(s,s===Ie?r:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(r&3)||Ol(s,r)||(n=!0,Yv(s,r));s=s.next}while(n);pd=!1}}function nO(){Jb()}function Jb(){qc=Vm=!1;var t=0;Js!==0&&dO()&&(t=Js);for(var e=nn(),n=null,s=jc;s!==null;){var i=s.next,r=Wb(s,e);r===0?(s.next=null,n===null?jc=i:n.next=i,i===null&&(wr=n)):(n=s,(t!==0||r&3)&&(qc=!0)),s=i}nt!==0&&nt!==5||Pl(t),Js!==0&&(Js=0)}function Wb(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,i=t.expirationTimes,r=t.pendingLanes&-62914561;0<r;){var a=31-rn(r),l=1<<a,u=i[a];u===-1?(!(l&n)||l&s)&&(i[a]=OC(l,e)):u<=e&&(t.expiredLanes|=l),r&=~l}if(e=Ie,n=ge,n=Ih(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s=t.callbackNode,n===0||t===e&&(Se===2||Se===9)||t.cancelPendingCommit!==null)return s!==null&&s!==null&&Ff(s),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Ol(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(s!==null&&Ff(s),Ug(n)){case 2:case 8:n=z0;break;case 32:n=Ac;break;case 268435456:n=B0;break;default:n=Ac}return s=Zb.bind(null,t),n=Pg(n,s),t.callbackPriority=e,t.callbackNode=n,e}return s!==null&&s!==null&&Ff(s),t.callbackPriority=2,t.callbackNode=null,2}function Zb(t,e){if(nt!==0&&nt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(jh()&&t.callbackNode!==n)return null;var s=ge;return s=Ih(t,t===Ie?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s===0?null:(Ub(t,s,e),Wb(t,nn()),t.callbackNode!=null&&t.callbackNode===n?Zb.bind(null,t):null)}function Yv(t,e){if(jh())return null;Ub(t,e,!0)}function sO(){gO(function(){ve&6?Pg(U0,nO):Jb()})}function Sp(){if(Js===0){var t=oa;t===0&&(t=fu,fu<<=1,!(fu&261888)&&(fu=256)),Js=t}return Js}function Xv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ju(""+t)}function Jv(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function iO(t,e,n,s,i){if(e==="submit"&&n&&n.stateNode===i){var r=Xv((i[Gt]||null).action),a=s.submitter;a&&(e=(e=a[Gt]||null)?Xv(e.formAction):a.getAttribute("formAction"),e!==null&&(r=e,a=null));var l=new Ch("action","action",null,s,i);t.push({event:l,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Js!==0){var u=a?Jv(i,a):new FormData(i);Am(n,{pending:!0,data:u,method:i.method,action:r},null,u)}}else typeof r=="function"&&(l.preventDefault(),u=a?Jv(i,a):new FormData(i),Am(n,{pending:!0,data:u,method:i.method,action:r},r,u))},currentTarget:i}]})}}for(var _d=0;_d<fm.length;_d++){var yd=fm[_d],rO=yd.toLowerCase(),aO=yd[0].toUpperCase()+yd.slice(1);Nn(rO,"on"+aO)}Nn(hS,"onAnimationEnd");Nn(fS,"onAnimationIteration");Nn(dS,"onAnimationStart");Nn("dblclick","onDoubleClick");Nn("focusin","onFocus");Nn("focusout","onBlur");Nn(S2,"onTransitionRun");Nn(b2,"onTransitionStart");Nn(A2,"onTransitionCancel");Nn(mS,"onTransitionEnd");ra("onMouseEnter",["mouseout","mouseover"]);ra("onMouseLeave",["mouseout","mouseover"]);ra("onPointerEnter",["pointerout","pointerover"]);ra("onPointerLeave",["pointerout","pointerover"]);ar("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ar("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ar("onBeforeInput",["compositionend","keypress","textInput","paste"]);ar("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ar("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ar("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ul));function eA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],i=s.event;s=s.listeners;e:{var r=void 0;if(e)for(var a=s.length-1;0<=a;a--){var l=s[a],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==r&&i.isPropagationStopped())break e;r=l,i.currentTarget=c;try{r(i)}catch(d){Rc(d)}i.currentTarget=null,r=u}else for(a=0;a<s.length;a++){if(l=s[a],u=l.instance,c=l.currentTarget,l=l.listener,u!==r&&i.isPropagationStopped())break e;r=l,i.currentTarget=c;try{r(i)}catch(d){Rc(d)}i.currentTarget=null,r=u}}}}function ce(t,e){var n=e[im];n===void 0&&(n=e[im]=new Set);var s=t+"__bubble";n.has(s)||(tA(e,t,2,!1),n.add(s))}function vd(t,e,n){var s=0;e&&(s|=4),tA(n,t,s,e)}var Su="_reactListening"+Math.random().toString(36).slice(2);function bp(t){if(!t[Su]){t[Su]=!0,G0.forEach(function(n){n!=="selectionchange"&&(oO.has(n)||vd(n,!1,t),vd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Su]||(e[Su]=!0,vd("selectionchange",!1,e))}}function tA(t,e,n,s){switch(mA(e)){case 2:var i=kO;break;case 8:i=PO;break;default:i=Ip}n=i.bind(null,e,n,t),i=void 0,!um||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ed(t,e,n,s,i){var r=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var l=s.stateNode.containerInfo;if(l===i)break;if(a===4)for(a=s.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===i)return;a=a.return}for(;l!==null;){if(a=kr(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){s=r=a;continue e}l=l.parentNode}}s=s.return}eS(function(){var c=r,d=jg(n),m=[];e:{var g=gS.get(t);if(g!==void 0){var p=Ch,C=t;switch(t){case"keypress":if(Hu(n)===0)break e;case"keydown":case"keyup":p=e2;break;case"focusin":C="focus",p=Yf;break;case"focusout":C="blur",p=Yf;break;case"beforeblur":case"afterblur":p=Yf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=rv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=qC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=s2;break;case hS:case fS:case dS:p=$C;break;case mS:p=r2;break;case"scroll":case"scrollend":p=BC;break;case"wheel":p=o2;break;case"copy":case"cut":case"paste":p=KC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=ov;break;case"toggle":case"beforetoggle":p=u2}var O=(e&4)!==0,x=!O&&(t==="scroll"||t==="scrollend"),S=O?g!==null?g+"Capture":null:g;O=[];for(var y=c,A;y!==null;){var I=y;if(A=I.stateNode,I=I.tag,I!==5&&I!==26&&I!==27||A===null||S===null||(I=tl(y,S),I!=null&&O.push(cl(y,I,A))),x)break;y=y.return}0<O.length&&(g=new p(g,C,null,n,d),m.push({event:g,listeners:O}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",g&&n!==lm&&(C=n.relatedTarget||n.fromElement)&&(kr(C)||C[Aa]))break e;if((p||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,p?(C=n.relatedTarget||n.toElement,p=c,C=C?kr(C):null,C!==null&&(x=Il(C),O=C.tag,C!==x||O!==5&&O!==27&&O!==6)&&(C=null)):(p=null,C=c),p!==C)){if(O=rv,I="onMouseLeave",S="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(O=ov,I="onPointerLeave",S="onPointerEnter",y="pointer"),x=p==null?g:mo(p),A=C==null?g:mo(C),g=new O(I,y+"leave",p,n,d),g.target=x,g.relatedTarget=A,I=null,kr(d)===c&&(O=new O(S,y+"enter",C,n,d),O.target=A,O.relatedTarget=x,I=O),x=I,p&&C)t:{for(O=lO,S=p,y=C,A=0,I=S;I;I=O(I))A++;I=0;for(var U=y;U;U=O(U))I++;for(;0<A-I;)S=O(S),A--;for(;0<I-A;)y=O(y),I--;for(;A--;){if(S===y||y!==null&&S===y.alternate){O=S;break t}S=O(S),y=O(y)}O=null}else O=null;p!==null&&Wv(m,g,p,O,!1),C!==null&&x!==null&&Wv(m,x,C,O,!0)}}e:{if(g=c?mo(c):window,p=g.nodeName&&g.nodeName.toLowerCase(),p==="select"||p==="input"&&g.type==="file")var j=hv;else if(cv(g))if(aS)j=v2;else{j=_2;var E=p2}else p=g.nodeName,!p||p.toLowerCase()!=="input"||g.type!=="checkbox"&&g.type!=="radio"?c&&Bg(c.elementType)&&(j=hv):j=y2;if(j&&(j=j(t,c))){rS(m,j,n,d);break e}E&&E(t,g,c),t==="focusout"&&c&&g.type==="number"&&c.memoizedProps.value!=null&&om(g,"number",g.value)}switch(E=c?mo(c):window,t){case"focusin":(cv(E)||E.contentEditable==="true")&&(Ur=E,cm=c,xo=null);break;case"focusout":xo=cm=Ur=null;break;case"mousedown":hm=!0;break;case"contextmenu":case"mouseup":case"dragend":hm=!1,pv(m,n,d);break;case"selectionchange":if(T2)break;case"keydown":case"keyup":pv(m,n,d)}var v;if(Fg)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Lr?sS(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(nS&&n.locale!=="ko"&&(Lr||T!=="onCompositionStart"?T==="onCompositionEnd"&&Lr&&(v=tS()):(Qs=d,qg="value"in Qs?Qs.value:Qs.textContent,Lr=!0)),E=Hc(c,T),0<E.length&&(T=new av(T,t,null,n,d),m.push({event:T,listeners:E}),v?T.data=v:(v=iS(n),v!==null&&(T.data=v)))),(v=h2?f2(t,n):d2(t,n))&&(T=Hc(c,"onBeforeInput"),0<T.length&&(E=new av("onBeforeInput","beforeinput",null,n,d),m.push({event:E,listeners:T}),E.data=v)),iO(m,t,c,n,d)}eA(m,e)})}function cl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Hc(t,e){for(var n=e+"Capture",s=[];t!==null;){var i=t,r=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||r===null||(i=tl(t,n),i!=null&&s.unshift(cl(t,i,r)),i=tl(t,e),i!=null&&s.push(cl(t,i,r))),t.tag===3)return s;t=t.return}return[]}function lO(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Wv(t,e,n,s,i){for(var r=e._reactName,a=[];n!==null&&n!==s;){var l=n,u=l.alternate,c=l.stateNode;if(l=l.tag,u!==null&&u===s)break;l!==5&&l!==26&&l!==27||c===null||(u=c,i?(c=tl(n,r),c!=null&&a.unshift(cl(n,c,u))):i||(c=tl(n,r),c!=null&&a.push(cl(n,c,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var uO=/\r\n?/g,cO=/\u0000|\uFFFD/g;function Zv(t){return(typeof t=="string"?t:""+t).replace(uO,`
`).replace(cO,"")}function nA(t,e){return e=Zv(e),Zv(t)===e}function Ae(t,e,n,s,i,r){switch(n){case"children":typeof s=="string"?e==="body"||e==="textarea"&&s===""||aa(t,s):(typeof s=="number"||typeof s=="bigint")&&e!=="body"&&aa(t,""+s);break;case"className":gu(t,"class",s);break;case"tabIndex":gu(t,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":gu(t,n,s);break;case"style":Z0(t,s,r);break;case"data":if(e!=="object"){gu(t,"data",s);break}case"src":case"href":if(s===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=ju(""+s),t.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(e!=="input"&&Ae(t,e,"name",i.name,i,null),Ae(t,e,"formEncType",i.formEncType,i,null),Ae(t,e,"formMethod",i.formMethod,i,null),Ae(t,e,"formTarget",i.formTarget,i,null)):(Ae(t,e,"encType",i.encType,i,null),Ae(t,e,"method",i.method,i,null),Ae(t,e,"target",i.target,i,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=ju(""+s),t.setAttribute(n,s);break;case"onClick":s!=null&&(t.onclick=us);break;case"onScroll":s!=null&&ce("scroll",t);break;case"onScrollEnd":s!=null&&ce("scrollend",t);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(k(61));if(n=s.__html,n!=null){if(i.children!=null)throw Error(k(60));t.innerHTML=n}}break;case"multiple":t.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":t.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){t.removeAttribute("xlink:href");break}n=ju(""+s),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""+s):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":s===!0?t.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,s):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?t.setAttribute(n,s):t.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?t.removeAttribute(n):t.setAttribute(n,s);break;case"popover":ce("beforetoggle",t),ce("toggle",t),Bu(t,"popover",s);break;case"xlinkActuate":Wn(t,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Wn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Wn(t,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Wn(t,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Wn(t,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Wn(t,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Wn(t,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Wn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Wn(t,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Bu(t,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=UC.get(n)||n,Bu(t,n,s))}}function km(t,e,n,s,i,r){switch(n){case"style":Z0(t,s,r);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(k(61));if(n=s.__html,n!=null){if(i.children!=null)throw Error(k(60));t.innerHTML=n}}break;case"children":typeof s=="string"?aa(t,s):(typeof s=="number"||typeof s=="bigint")&&aa(t,""+s);break;case"onScroll":s!=null&&ce("scroll",t);break;case"onScrollEnd":s!=null&&ce("scrollend",t);break;case"onClick":s!=null&&(t.onclick=us);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!K0.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),e=n.slice(2,i?n.length-7:void 0),r=t[Gt]||null,r=r!=null?r[n]:null,typeof r=="function"&&t.removeEventListener(e,r,i),typeof s=="function")){typeof r!="function"&&r!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,s,i);break e}n in t?t[n]=s:s===!0?t.setAttribute(n,""):Bu(t,n,s)}}}function At(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ce("error",t),ce("load",t);var s=!1,i=!1,r;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(a!=null)switch(r){case"src":s=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(k(137,e));default:Ae(t,e,r,a,n,null)}}i&&Ae(t,e,"srcSet",n.srcSet,n,null),s&&Ae(t,e,"src",n.src,n,null);return;case"input":ce("invalid",t);var l=r=a=i=null,u=null,c=null;for(s in n)if(n.hasOwnProperty(s)){var d=n[s];if(d!=null)switch(s){case"name":i=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":c=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(k(137,e));break;default:Ae(t,e,s,d,n,null)}}X0(t,r,l,u,c,a,i,!1);return;case"select":ce("invalid",t),s=a=r=null;for(i in n)if(n.hasOwnProperty(i)&&(l=n[i],l!=null))switch(i){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":s=l;default:Ae(t,e,i,l,n,null)}e=r,n=a,t.multiple=!!s,e!=null?Kr(t,!!s,e,!1):n!=null&&Kr(t,!!s,n,!0);return;case"textarea":ce("invalid",t),r=i=s=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":s=l;break;case"defaultValue":i=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(k(91));break;default:Ae(t,e,a,l,n,null)}W0(t,s,i,r);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(s=n[u],s!=null))switch(u){case"selected":t.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Ae(t,e,u,s,n,null)}return;case"dialog":ce("beforetoggle",t),ce("toggle",t),ce("cancel",t),ce("close",t);break;case"iframe":case"object":ce("load",t);break;case"video":case"audio":for(s=0;s<ul.length;s++)ce(ul[s],t);break;case"image":ce("error",t),ce("load",t);break;case"details":ce("toggle",t);break;case"embed":case"source":case"link":ce("error",t),ce("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(s=n[c],s!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(k(137,e));default:Ae(t,e,c,s,n,null)}return;default:if(Bg(e)){for(d in n)n.hasOwnProperty(d)&&(s=n[d],s!==void 0&&km(t,e,d,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(s=n[l],s!=null&&Ae(t,e,l,s,n,null))}function hO(t,e,n,s){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,r=null,a=null,l=null,u=null,c=null,d=null;for(p in n){var m=n[p];if(n.hasOwnProperty(p)&&m!=null)switch(p){case"checked":break;case"value":break;case"defaultValue":u=m;default:s.hasOwnProperty(p)||Ae(t,e,p,null,s,m)}}for(var g in s){var p=s[g];if(m=n[g],s.hasOwnProperty(g)&&(p!=null||m!=null))switch(g){case"type":r=p;break;case"name":i=p;break;case"checked":c=p;break;case"defaultChecked":d=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(k(137,e));break;default:p!==m&&Ae(t,e,g,p,s,m)}}am(t,a,l,u,c,d,r,i);return;case"select":p=a=l=g=null;for(r in n)if(u=n[r],n.hasOwnProperty(r)&&u!=null)switch(r){case"value":break;case"multiple":p=u;default:s.hasOwnProperty(r)||Ae(t,e,r,null,s,u)}for(i in s)if(r=s[i],u=n[i],s.hasOwnProperty(i)&&(r!=null||u!=null))switch(i){case"value":g=r;break;case"defaultValue":l=r;break;case"multiple":a=r;default:r!==u&&Ae(t,e,i,r,s,u)}e=l,n=a,s=p,g!=null?Kr(t,!!n,g,!1):!!s!=!!n&&(e!=null?Kr(t,!!n,e,!0):Kr(t,!!n,n?[]:"",!1));return;case"textarea":p=g=null;for(l in n)if(i=n[l],n.hasOwnProperty(l)&&i!=null&&!s.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Ae(t,e,l,null,s,i)}for(a in s)if(i=s[a],r=n[a],s.hasOwnProperty(a)&&(i!=null||r!=null))switch(a){case"value":g=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(k(91));break;default:i!==r&&Ae(t,e,a,i,s,r)}J0(t,g,p);return;case"option":for(var C in n)if(g=n[C],n.hasOwnProperty(C)&&g!=null&&!s.hasOwnProperty(C))switch(C){case"selected":t.selected=!1;break;default:Ae(t,e,C,null,s,g)}for(u in s)if(g=s[u],p=n[u],s.hasOwnProperty(u)&&g!==p&&(g!=null||p!=null))switch(u){case"selected":t.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Ae(t,e,u,g,s,p)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var O in n)g=n[O],n.hasOwnProperty(O)&&g!=null&&!s.hasOwnProperty(O)&&Ae(t,e,O,null,s,g);for(c in s)if(g=s[c],p=n[c],s.hasOwnProperty(c)&&g!==p&&(g!=null||p!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(k(137,e));break;default:Ae(t,e,c,g,s,p)}return;default:if(Bg(e)){for(var x in n)g=n[x],n.hasOwnProperty(x)&&g!==void 0&&!s.hasOwnProperty(x)&&km(t,e,x,void 0,s,g);for(d in s)g=s[d],p=n[d],!s.hasOwnProperty(d)||g===p||g===void 0&&p===void 0||km(t,e,d,g,s,p);return}}for(var S in n)g=n[S],n.hasOwnProperty(S)&&g!=null&&!s.hasOwnProperty(S)&&Ae(t,e,S,null,s,g);for(m in s)g=s[m],p=n[m],!s.hasOwnProperty(m)||g===p||g==null&&p==null||Ae(t,e,m,g,s,p)}function eE(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function fO(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),s=0;s<n.length;s++){var i=n[s],r=i.transferSize,a=i.initiatorType,l=i.duration;if(r&&l&&eE(a)){for(a=0,l=i.responseEnd,s+=1;s<n.length;s++){var u=n[s],c=u.startTime;if(c>l)break;var d=u.transferSize,m=u.initiatorType;d&&eE(m)&&(u=u.responseEnd,a+=d*(u<l?1:(l-c)/(u-c)))}if(--s,e+=8*(r+a)/(i.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Pm=null,Lm=null;function Fc(t){return t.nodeType===9?t:t.ownerDocument}function tE(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sA(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Um(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Td=null;function dO(){var t=window.event;return t&&t.type==="popstate"?t===Td?!1:(Td=t,!0):(Td=null,!1)}var iA=typeof setTimeout=="function"?setTimeout:void 0,mO=typeof clearTimeout=="function"?clearTimeout:void 0,nE=typeof Promise=="function"?Promise:void 0,gO=typeof queueMicrotask=="function"?queueMicrotask:typeof nE<"u"?function(t){return nE.resolve(null).then(t).catch(pO)}:iA;function pO(t){setTimeout(function(){throw t})}function Ai(t){return t==="head"}function sE(t,e){var n=e,s=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"||n==="/&"){if(s===0){t.removeChild(i),ma(e);return}s--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")s++;else if(n==="html")Ho(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Ho(n);for(var r=n.firstChild;r;){var a=r.nextSibling,l=r.nodeName;r[Nl]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&r.rel.toLowerCase()==="stylesheet"||n.removeChild(r),r=a}}else n==="body"&&Ho(t.ownerDocument.body);n=i}while(n);ma(e)}function iE(t,e){var n=t;t=0;do{var s=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=s}while(n)}function zm(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":zm(n),zg(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function _O(t,e,n,s){for(;t.nodeType===1;){var i=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!s&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(s){if(!t[Nl])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(r=t.getAttribute("rel"),r==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(r!==i.rel||t.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||t.getAttribute("title")!==(i.title==null?null:i.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(r=t.getAttribute("src"),(r!==(i.src==null?null:i.src)||t.getAttribute("type")!==(i.type==null?null:i.type)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&r&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var r=i.name==null?null:""+i.name;if(i.type==="hidden"&&t.getAttribute("name")===r)return t}else return t;if(t=En(t.nextSibling),t===null)break}return null}function yO(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=En(t.nextSibling),t===null))return null;return t}function rA(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=En(t.nextSibling),t===null))return null;return t}function Bm(t){return t.data==="$?"||t.data==="$~"}function jm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function vO(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var s=function(){e(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),t._reactRetry=s}}function En(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var qm=null;function rE(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return En(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function aE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function aA(t,e,n){switch(e=Fc(n),t){case"html":if(t=e.documentElement,!t)throw Error(k(452));return t;case"head":if(t=e.head,!t)throw Error(k(453));return t;case"body":if(t=e.body,!t)throw Error(k(454));return t;default:throw Error(k(451))}}function Ho(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);zg(t)}var Tn=new Map,oE=new Set;function $c(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Rs=Ee.d;Ee.d={f:EO,r:TO,D:SO,C:bO,L:AO,m:wO,X:IO,S:RO,M:CO};function EO(){var t=Rs.f(),e=zh();return t||e}function TO(t){var e=wa(t);e!==null&&e.tag===5&&e.type==="form"?ZS(e):Rs.r(t)}var Oa=typeof document>"u"?null:document;function oA(t,e,n){var s=Oa;if(s&&typeof e=="string"&&e){var i=dn(e);i='link[rel="'+t+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),oE.has(i)||(oE.add(i),t={rel:t,crossOrigin:n,href:e},s.querySelector(i)===null&&(e=s.createElement("link"),At(e,"link",t),dt(e),s.head.appendChild(e)))}}function SO(t){Rs.D(t),oA("dns-prefetch",t,null)}function bO(t,e){Rs.C(t,e),oA("preconnect",t,e)}function AO(t,e,n){Rs.L(t,e,n);var s=Oa;if(s&&t&&e){var i='link[rel="preload"][as="'+dn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+dn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+dn(n.imageSizes)+'"]')):i+='[href="'+dn(t)+'"]';var r=i;switch(e){case"style":r=da(t);break;case"script":r=Da(t)}Tn.has(r)||(t=Ve({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Tn.set(r,t),s.querySelector(i)!==null||e==="style"&&s.querySelector(Ll(r))||e==="script"&&s.querySelector(Ul(r))||(e=s.createElement("link"),At(e,"link",t),dt(e),s.head.appendChild(e)))}}function wO(t,e){Rs.m(t,e);var n=Oa;if(n&&t){var s=e&&typeof e.as=="string"?e.as:"script",i='link[rel="modulepreload"][as="'+dn(s)+'"][href="'+dn(t)+'"]',r=i;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Da(t)}if(!Tn.has(r)&&(t=Ve({rel:"modulepreload",href:t},e),Tn.set(r,t),n.querySelector(i)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Ul(r)))return}s=n.createElement("link"),At(s,"link",t),dt(s),n.head.appendChild(s)}}}function RO(t,e,n){Rs.S(t,e,n);var s=Oa;if(s&&t){var i=Gr(s).hoistableStyles,r=da(t);e=e||"default";var a=i.get(r);if(!a){var l={loading:0,preload:null};if(a=s.querySelector(Ll(r)))l.loading=5;else{t=Ve({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Tn.get(r))&&Ap(t,n);var u=a=s.createElement("link");dt(u),At(u,"link",t),u._p=new Promise(function(c,d){u.onload=c,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Ju(a,e,s)}a={type:"stylesheet",instance:a,count:1,state:l},i.set(r,a)}}}function IO(t,e){Rs.X(t,e);var n=Oa;if(n&&t){var s=Gr(n).hoistableScripts,i=Da(t),r=s.get(i);r||(r=n.querySelector(Ul(i)),r||(t=Ve({src:t,async:!0},e),(e=Tn.get(i))&&wp(t,e),r=n.createElement("script"),dt(r),At(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(i,r))}}function CO(t,e){Rs.M(t,e);var n=Oa;if(n&&t){var s=Gr(n).hoistableScripts,i=Da(t),r=s.get(i);r||(r=n.querySelector(Ul(i)),r||(t=Ve({src:t,async:!0,type:"module"},e),(e=Tn.get(i))&&wp(t,e),r=n.createElement("script"),dt(r),At(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(i,r))}}function lE(t,e,n,s){var i=(i=Zs.current)?$c(i):null;if(!i)throw Error(k(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=da(n.href),n=Gr(i).hoistableStyles,s=n.get(e),s||(s={type:"style",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=da(n.href);var r=Gr(i).hoistableStyles,a=r.get(t);if(a||(i=i.ownerDocument||i,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(t,a),(r=i.querySelector(Ll(t)))&&!r._p&&(a.instance=r,a.state.loading=5),Tn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Tn.set(t,n),r||OO(i,t,n,a.state))),e&&s===null)throw Error(k(528,""));return a}if(e&&s!==null)throw Error(k(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Da(n),n=Gr(i).hoistableScripts,s=n.get(e),s||(s={type:"script",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(k(444,t))}}function da(t){return'href="'+dn(t)+'"'}function Ll(t){return'link[rel="stylesheet"]['+t+"]"}function lA(t){return Ve({},t,{"data-precedence":t.precedence,precedence:null})}function OO(t,e,n,s){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?s.loading=1:(e=t.createElement("link"),s.preload=e,e.addEventListener("load",function(){return s.loading|=1}),e.addEventListener("error",function(){return s.loading|=2}),At(e,"link",n),dt(e),t.head.appendChild(e))}function Da(t){return'[src="'+dn(t)+'"]'}function Ul(t){return"script[async]"+t}function uE(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var s=t.querySelector('style[data-href~="'+dn(n.href)+'"]');if(s)return e.instance=s,dt(s),s;var i=Ve({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(t.ownerDocument||t).createElement("style"),dt(s),At(s,"style",i),Ju(s,n.precedence,t),e.instance=s;case"stylesheet":i=da(n.href);var r=t.querySelector(Ll(i));if(r)return e.state.loading|=4,e.instance=r,dt(r),r;s=lA(n),(i=Tn.get(i))&&Ap(s,i),r=(t.ownerDocument||t).createElement("link"),dt(r);var a=r;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),At(r,"link",s),e.state.loading|=4,Ju(r,n.precedence,t),e.instance=r;case"script":return r=Da(n.src),(i=t.querySelector(Ul(r)))?(e.instance=i,dt(i),i):(s=n,(i=Tn.get(r))&&(s=Ve({},n),wp(s,i)),t=t.ownerDocument||t,i=t.createElement("script"),dt(i),At(i,"link",s),t.head.appendChild(i),e.instance=i);case"void":return null;default:throw Error(k(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(s=e.instance,e.state.loading|=4,Ju(s,n.precedence,t));return e.instance}function Ju(t,e,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=s.length?s[s.length-1]:null,r=i,a=0;a<s.length;a++){var l=s[a];if(l.dataset.precedence===e)r=l;else if(r!==i)break}r?r.parentNode.insertBefore(t,r.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Ap(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function wp(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Wu=null;function cE(t,e,n){if(Wu===null){var s=new Map,i=Wu=new Map;i.set(n,s)}else i=Wu,s=i.get(n),s||(s=new Map,i.set(n,s));if(s.has(t))return s;for(s.set(t,null),n=n.getElementsByTagName(t),i=0;i<n.length;i++){var r=n[i];if(!(r[Nl]||r[Et]||t==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var a=r.getAttribute(e)||"";a=t+a;var l=s.get(a);l?l.push(r):s.set(a,[r])}}return s}function hE(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function DO(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function uA(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function NO(t,e,n,s){if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var i=da(s.href),r=e.querySelector(Ll(i));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=Gc.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=r,dt(r);return}r=e.ownerDocument||e,s=lA(s),(i=Tn.get(i))&&Ap(s,i),r=r.createElement("link"),dt(r);var a=r;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),At(r,"link",s),n.instance=r}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=Gc.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var Sd=0;function MO(t,e){return t.stylesheets&&t.count===0&&Zu(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var s=setTimeout(function(){if(t.stylesheets&&Zu(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4+e);0<t.imgBytes&&Sd===0&&(Sd=62500*fO());var i=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Zu(t,t.stylesheets),t.unsuspend)){var r=t.unsuspend;t.unsuspend=null,r()}},(t.imgBytes>Sd?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s),clearTimeout(i)}}:null}function Gc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Zu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Kc=null;function Zu(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Kc=new Map,e.forEach(xO,t),Kc=null,Gc.call(t))}function xO(t,e){if(!(e.state.loading&4)){var n=Kc.get(t);if(n)var s=n.get(null);else{n=new Map,Kc.set(t,n);for(var i=t.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<i.length;r++){var a=i[r];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),s=a)}s&&n.set(null,s)}i=e.instance,a=i.getAttribute("data-precedence"),r=n.get(a)||s,r===s&&n.set(null,i),n.set(a,i),this.count++,s=Gc.bind(this),i.addEventListener("load",s),i.addEventListener("error",s),r?r.parentNode.insertBefore(i,r.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(i,t.firstChild)),e.state.loading|=4}}var hl={$$typeof:ls,Provider:null,Consumer:null,_currentValue:qi,_currentValue2:qi,_threadCount:0};function VO(t,e,n,s,i,r,a,l,u){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$f(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$f(0),this.hiddenUpdates=$f(null),this.identifierPrefix=s,this.onUncaughtError=i,this.onCaughtError=r,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=u,this.incompleteTransitions=new Map}function cA(t,e,n,s,i,r,a,l,u,c,d,m){return t=new VO(t,e,n,a,u,c,d,m,l),e=1,r===!0&&(e|=24),r=en(3,null,null,e),t.current=r,r.stateNode=t,e=Jg(),e.refCount++,t.pooledCache=e,e.refCount++,r.memoizedState={element:s,isDehydrated:n,cache:e},ep(r),t}function hA(t){return t?(t=jr,t):jr}function fA(t,e,n,s,i,r){i=hA(i),s.context===null?s.context=i:s.pendingContext=i,s=ti(e),s.payload={element:n},r=r===void 0?null:r,r!==null&&(s.callback=r),n=ni(t,s,e),n!==null&&($t(n,t,e),ko(n,t,e))}function fE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Rp(t,e){fE(t,e),(t=t.alternate)&&fE(t,e)}function dA(t){if(t.tag===13||t.tag===31){var e=ur(t,67108864);e!==null&&$t(e,t,67108864),Rp(t,67108864)}}function dE(t){if(t.tag===13||t.tag===31){var e=an();e=Lg(e);var n=ur(t,e);n!==null&&$t(n,t,e),Rp(t,e)}}var Qc=!0;function kO(t,e,n,s){var i=ee.T;ee.T=null;var r=Ee.p;try{Ee.p=2,Ip(t,e,n,s)}finally{Ee.p=r,ee.T=i}}function PO(t,e,n,s){var i=ee.T;ee.T=null;var r=Ee.p;try{Ee.p=8,Ip(t,e,n,s)}finally{Ee.p=r,ee.T=i}}function Ip(t,e,n,s){if(Qc){var i=Hm(s);if(i===null)Ed(t,e,s,Yc,n),mE(t,s);else if(UO(i,t,e,n,s))s.stopPropagation();else if(mE(t,s),e&4&&-1<LO.indexOf(t)){for(;i!==null;){var r=wa(i);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var a=Mi(r.pendingLanes);if(a!==0){var l=r;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-rn(a);l.entanglements[1]|=u,a&=~u}Jn(r),!(ve&6)&&(Uc=nn()+500,Pl(0))}}break;case 31:case 13:l=ur(r,2),l!==null&&$t(l,r,2),zh(),Rp(r,2)}if(r=Hm(s),r===null&&Ed(t,e,s,Yc,n),r===i)break;i=r}i!==null&&s.stopPropagation()}else Ed(t,e,s,null,n)}}function Hm(t){return t=jg(t),Cp(t)}var Yc=null;function Cp(t){if(Yc=null,t=kr(t),t!==null){var e=Il(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=x0(e),t!==null)return t;t=null}else if(n===31){if(t=V0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Yc=t,null}function mA(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(SC()){case U0:return 2;case z0:return 8;case Ac:case bC:return 32;case B0:return 268435456;default:return 32}default:return 32}}var Fm=!1,ri=null,ai=null,oi=null,fl=new Map,dl=new Map,Hs=[],LO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mE(t,e){switch(t){case"focusin":case"focusout":ri=null;break;case"dragenter":case"dragleave":ai=null;break;case"mouseover":case"mouseout":oi=null;break;case"pointerover":case"pointerout":fl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":dl.delete(e.pointerId)}}function lo(t,e,n,s,i,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:r,targetContainers:[i]},e!==null&&(e=wa(e),e!==null&&dA(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function UO(t,e,n,s,i){switch(e){case"focusin":return ri=lo(ri,t,e,n,s,i),!0;case"dragenter":return ai=lo(ai,t,e,n,s,i),!0;case"mouseover":return oi=lo(oi,t,e,n,s,i),!0;case"pointerover":var r=i.pointerId;return fl.set(r,lo(fl.get(r)||null,t,e,n,s,i)),!0;case"gotpointercapture":return r=i.pointerId,dl.set(r,lo(dl.get(r)||null,t,e,n,s,i)),!0}return!1}function gA(t){var e=kr(t.target);if(e!==null){var n=Il(e);if(n!==null){if(e=n.tag,e===13){if(e=x0(n),e!==null){t.blockedOn=e,Wy(t.priority,function(){dE(n)});return}}else if(e===31){if(e=V0(n),e!==null){t.blockedOn=e,Wy(t.priority,function(){dE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ec(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hm(t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);lm=s,n.target.dispatchEvent(s),lm=null}else return e=wa(n),e!==null&&dA(e),t.blockedOn=n,!1;e.shift()}return!0}function gE(t,e,n){ec(t)&&n.delete(e)}function zO(){Fm=!1,ri!==null&&ec(ri)&&(ri=null),ai!==null&&ec(ai)&&(ai=null),oi!==null&&ec(oi)&&(oi=null),fl.forEach(gE),dl.forEach(gE)}function bu(t,e){t.blockedOn===e&&(t.blockedOn=null,Fm||(Fm=!0,rt.unstable_scheduleCallback(rt.unstable_NormalPriority,zO)))}var Au=null;function pE(t){Au!==t&&(Au=t,rt.unstable_scheduleCallback(rt.unstable_NormalPriority,function(){Au===t&&(Au=null);for(var e=0;e<t.length;e+=3){var n=t[e],s=t[e+1],i=t[e+2];if(typeof s!="function"){if(Cp(s||n)===null)continue;break}var r=wa(n);r!==null&&(t.splice(e,3),e-=3,Am(r,{pending:!0,data:i,method:n.method,action:s},s,i))}}))}function ma(t){function e(u){return bu(u,t)}ri!==null&&bu(ri,t),ai!==null&&bu(ai,t),oi!==null&&bu(oi,t),fl.forEach(e),dl.forEach(e);for(var n=0;n<Hs.length;n++){var s=Hs[n];s.blockedOn===t&&(s.blockedOn=null)}for(;0<Hs.length&&(n=Hs[0],n.blockedOn===null);)gA(n),n.blockedOn===null&&Hs.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var i=n[s],r=n[s+1],a=i[Gt]||null;if(typeof r=="function")a||pE(n);else if(a){var l=null;if(r&&r.hasAttribute("formAction")){if(i=r,a=r[Gt]||null)l=a.formAction;else if(Cp(i)!==null)continue}else l=a.action;typeof l=="function"?n[s+1]=l:(n.splice(s,3),s-=3),pE(n)}}}function pA(){function t(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(a){return i=a})},focusReset:"manual",scroll:"manual"})}function e(){i!==null&&(i(),i=null),s||setTimeout(n,20)}function n(){if(!s&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,i=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){s=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),i!==null&&(i(),i=null)}}}function Op(t){this._internalRoot=t}qh.prototype.render=Op.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(k(409));var n=e.current,s=an();fA(n,s,t,e,null,null)};qh.prototype.unmount=Op.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fA(t.current,2,null,t,null,null),zh(),e[Aa]=null}};function qh(t){this._internalRoot=t}qh.prototype.unstable_scheduleHydration=function(t){if(t){var e=$0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Hs.length&&e!==0&&e<Hs[n].priority;n++);Hs.splice(n,0,t),n===0&&gA(t)}};var _E=N0.version;if(_E!=="19.2.4")throw Error(k(527,_E,"19.2.4"));Ee.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(k(188)):(t=Object.keys(t).join(","),Error(k(268,t)));return t=gC(e),t=t!==null?k0(t):null,t=t===null?null:t.stateNode,t};var BO={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wu.isDisabled&&wu.supportsFiber)try{Cl=wu.inject(BO),sn=wu}catch{}}wh.createRoot=function(t,e){if(!M0(t))throw Error(k(299));var n=!1,s="",i=ob,r=lb,a=ub;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onUncaughtError!==void 0&&(i=e.onUncaughtError),e.onCaughtError!==void 0&&(r=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=cA(t,1,!1,null,null,n,s,null,i,r,a,pA),t[Aa]=e.current,bp(t),new Op(e)};wh.hydrateRoot=function(t,e,n){if(!M0(t))throw Error(k(299));var s=!1,i="",r=ob,a=lb,l=ub,u=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.formState!==void 0&&(u=n.formState)),e=cA(t,1,!0,e,n??null,s,i,u,r,a,l,pA),e.context=hA(null),n=e.current,s=an(),s=Lg(s),i=ti(s),i.callback=null,ni(n,i,s),n=s,e.current.lanes=n,Dl(e,n),Jn(e),t[Aa]=e.current,bp(t),new qh(e)};wh.version="19.2.4";function _A(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_A)}catch(t){console.error(t)}}_A(),w0.exports=wh;var jO=w0.exports;function Z(t,e,n,s,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function M(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)}let yA=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return yA=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^n()&15>>+s/4).toString(16))};function $m(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Gm=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Y extends Error{}class wt extends Y{constructor(e,n,s,i){super(`${wt.makeMessage(e,n,s)}`),this.status=e,this.headers=i,this.requestID=i==null?void 0:i.get("x-request-id"),this.error=n;const r=n;this.code=r==null?void 0:r.code,this.param=r==null?void 0:r.param,this.type=r==null?void 0:r.type}static makeMessage(e,n,s){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):s;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,s,i){if(!e||!i)return new Hh({message:s,cause:Gm(n)});const r=n==null?void 0:n.error;return e===400?new vA(e,r,s,i):e===401?new EA(e,r,s,i):e===403?new TA(e,r,s,i):e===404?new SA(e,r,s,i):e===409?new bA(e,r,s,i):e===422?new AA(e,r,s,i):e===429?new wA(e,r,s,i):e>=500?new RA(e,r,s,i):new wt(e,r,s,i)}}class yn extends wt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Hh extends wt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Dp extends Hh{constructor({message:e}={}){super({message:e??"Request timed out."})}}class vA extends wt{}class EA extends wt{}class TA extends wt{}class SA extends wt{}class bA extends wt{}class AA extends wt{}class wA extends wt{}class RA extends wt{}class IA extends Y{constructor(){super("Could not parse response content as the length limit was reached")}}class CA extends Y{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class _o extends Error{constructor(e){super(e)}}const qO=/^[a-z][a-z0-9+.-]*:/i,HO=t=>qO.test(t);let Ft=t=>(Ft=Array.isArray,Ft(t)),yE=Ft;function OA(t){return typeof t!="object"?{}:t??{}}function FO(t){if(!t)return!0;for(const e in t)return!1;return!0}function $O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function bd(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const GO=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Y(`${t} must be an integer`);if(e<0)throw new Y(`${t} must be a positive integer`);return e},KO=t=>{try{return JSON.parse(t)}catch{return}},zl=t=>new Promise(e=>setTimeout(e,t)),Rr="6.22.0",QO=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function YO(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const XO=()=>{var n;const t=YO();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Rr,"X-Stainless-OS":EE(Deno.build.os),"X-Stainless-Arch":vE(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((n=Deno.version)==null?void 0:n.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Rr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Rr,"X-Stainless-OS":EE(globalThis.process.platform??"unknown"),"X-Stainless-Arch":vE(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=JO();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Rr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Rr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function JO(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const s=n.exec(navigator.userAgent);if(s){const i=s[1]||0,r=s[2]||0,a=s[3]||0;return{browser:e,version:`${i}.${r}.${a}`}}}return null}const vE=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",EE=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let TE;const WO=()=>TE??(TE=XO());function ZO(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function DA(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function NA(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return DA({start(){},async pull(n){const{done:s,value:i}=await e.next();s?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)==null?void 0:n.call(e))}})}function MA(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function eD(t){var s,i;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((i=(s=t[Symbol.asyncIterator]()).return)==null?void 0:i.call(s));return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const tD=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),xA="RFC3986",VA=t=>String(t),SE={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:VA},nD="RFC1738";let Km=(t,e)=>(Km=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Km(t,e));const kn=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),Ad=1024,sD=(t,e,n,s,i)=>{if(t.length===0)return t;let r=t;if(typeof t=="symbol"?r=Symbol.prototype.toString.call(t):typeof t!="string"&&(r=String(t)),n==="iso-8859-1")return escape(r).replace(/%u[0-9a-f]{4}/gi,function(l){return"%26%23"+parseInt(l.slice(2),16)+"%3B"});let a="";for(let l=0;l<r.length;l+=Ad){const u=r.length>=Ad?r.slice(l,l+Ad):r,c=[];for(let d=0;d<u.length;++d){let m=u.charCodeAt(d);if(m===45||m===46||m===95||m===126||m>=48&&m<=57||m>=65&&m<=90||m>=97&&m<=122||i===nD&&(m===40||m===41)){c[c.length]=u.charAt(d);continue}if(m<128){c[c.length]=kn[m];continue}if(m<2048){c[c.length]=kn[192|m>>6]+kn[128|m&63];continue}if(m<55296||m>=57344){c[c.length]=kn[224|m>>12]+kn[128|m>>6&63]+kn[128|m&63];continue}d+=1,m=65536+((m&1023)<<10|u.charCodeAt(d)&1023),c[c.length]=kn[240|m>>18]+kn[128|m>>12&63]+kn[128|m>>6&63]+kn[128|m&63]}a+=c.join("")}return a};function iD(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function bE(t,e){if(Ft(t)){const n=[];for(let s=0;s<t.length;s+=1)n.push(e(t[s]));return n}return e(t)}const kA={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},PA=function(t,e){Array.prototype.push.apply(t,Ft(e)?e:[e])};let AE;const tt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:sD,encodeValuesOnly:!1,format:xA,formatter:VA,indices:!1,serializeDate(t){return(AE??(AE=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function rD(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const wd={};function LA(t,e,n,s,i,r,a,l,u,c,d,m,g,p,C,O,x,S){let y=t,A=S,I=0,U=!1;for(;(A=A.get(wd))!==void 0&&!U;){const b=A.get(t);if(I+=1,typeof b<"u"){if(b===I)throw new RangeError("Cyclic object value");U=!0}typeof A.get(wd)>"u"&&(I=0)}if(typeof c=="function"?y=c(e,y):y instanceof Date?y=g==null?void 0:g(y):n==="comma"&&Ft(y)&&(y=bE(y,function(b){return b instanceof Date?g==null?void 0:g(b):b})),y===null){if(r)return u&&!O?u(e,tt.encoder,x,"key",p):e;y=""}if(rD(y)||iD(y)){if(u){const b=O?e:u(e,tt.encoder,x,"key",p);return[(C==null?void 0:C(b))+"="+(C==null?void 0:C(u(y,tt.encoder,x,"value",p)))]}return[(C==null?void 0:C(e))+"="+(C==null?void 0:C(String(y)))]}const j=[];if(typeof y>"u")return j;let E;if(n==="comma"&&Ft(y))O&&u&&(y=bE(y,u)),E=[{value:y.length>0?y.join(",")||null:void 0}];else if(Ft(c))E=c;else{const b=Object.keys(y);E=d?b.sort(d):b}const v=l?String(e).replace(/\./g,"%2E"):String(e),T=s&&Ft(y)&&y.length===1?v+"[]":v;if(i&&Ft(y)&&y.length===0)return T+"[]";for(let b=0;b<E.length;++b){const w=E[b],D=typeof w=="object"&&typeof w.value<"u"?w.value:y[w];if(a&&D===null)continue;const R=m&&l?w.replace(/\./g,"%2E"):w,Ge=Ft(y)?typeof n=="function"?n(T,R):T:T+(m?"."+R:"["+R+"]");S.set(t,I);const It=new WeakMap;It.set(wd,S),PA(j,LA(D,Ge,n,s,i,r,a,l,n==="comma"&&O&&Ft(y)?null:u,c,d,m,g,p,C,O,x,It))}return j}function aD(t=tt){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||tt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=xA;if(typeof t.format<"u"){if(!Km(SE,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const s=SE[n];let i=tt.filter;(typeof t.filter=="function"||Ft(t.filter))&&(i=t.filter);let r;if(t.arrayFormat&&t.arrayFormat in kA?r=t.arrayFormat:"indices"in t?r=t.indices?"indices":"repeat":r=tt.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const a=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:tt.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:tt.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:tt.allowEmptyArrays,arrayFormat:r,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:tt.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?tt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:tt.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:tt.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:tt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:tt.encodeValuesOnly,filter:i,format:n,formatter:s,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:tt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:tt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:tt.strictNullHandling}}function oD(t,e={}){let n=t;const s=aD(e);let i,r;typeof s.filter=="function"?(r=s.filter,n=r("",n)):Ft(s.filter)&&(r=s.filter,i=r);const a=[];if(typeof n!="object"||n===null)return"";const l=kA[s.arrayFormat],u=l==="comma"&&s.commaRoundTrip;i||(i=Object.keys(n)),s.sort&&i.sort(s.sort);const c=new WeakMap;for(let g=0;g<i.length;++g){const p=i[g];s.skipNulls&&n[p]===null||PA(a,LA(n[p],p,l,u,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,c))}const d=a.join(s.delimiter);let m=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),d.length>0?m+d:""}function lD(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let s=0;for(const i of t)n.set(i,s),s+=i.length;return n}let wE;function Np(t){let e;return(wE??(e=new globalThis.TextEncoder,wE=e.encode.bind(e)))(t)}let RE;function IE(t){let e;return(RE??(e=new globalThis.TextDecoder,RE=e.decode.bind(e)))(t)}var Yt,Xt;class Fh{constructor(){Yt.set(this,void 0),Xt.set(this,void 0),Z(this,Yt,new Uint8Array),Z(this,Xt,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Np(e):e;Z(this,Yt,lD([M(this,Yt,"f"),n]));const s=[];let i;for(;(i=uD(M(this,Yt,"f"),M(this,Xt,"f")))!=null;){if(i.carriage&&M(this,Xt,"f")==null){Z(this,Xt,i.index);continue}if(M(this,Xt,"f")!=null&&(i.index!==M(this,Xt,"f")+1||i.carriage)){s.push(IE(M(this,Yt,"f").subarray(0,M(this,Xt,"f")-1))),Z(this,Yt,M(this,Yt,"f").subarray(M(this,Xt,"f"))),Z(this,Xt,null);continue}const r=M(this,Xt,"f")!==null?i.preceding-1:i.preceding,a=IE(M(this,Yt,"f").subarray(0,r));s.push(a),Z(this,Yt,M(this,Yt,"f").subarray(i.index)),Z(this,Xt,null)}return s}flush(){return M(this,Yt,"f").length?this.decode(`
`):[]}}Yt=new WeakMap,Xt=new WeakMap;Fh.NEWLINE_CHARS=new Set([`
`,"\r"]);Fh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function uD(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function cD(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}const Xc={off:0,error:200,warn:300,info:400,debug:500},CE=(t,e,n)=>{if(t){if($O(Xc,t))return t;pt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Xc))}`)}};function yo(){}function Ru(t,e,n){return!e||Xc[t]>Xc[n]?yo:e[t].bind(e)}const hD={error:yo,warn:yo,info:yo,debug:yo};let OE=new WeakMap;function pt(t){const e=t.logger,n=t.logLevel??"off";if(!e)return hD;const s=OE.get(e);if(s&&s[0]===n)return s[1];const i={error:Ru("error",e,n),warn:Ru("warn",e,n),info:Ru("info",e,n),debug:Ru("debug",e,n)};return OE.set(e,[n,i]),i}const ki=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var uo;class jn{constructor(e,n,s){this.iterator=e,uo.set(this,void 0),this.controller=n,Z(this,uo,s)}static fromSSEResponse(e,n,s){let i=!1;const r=s?pt(s):console;async function*a(){if(i)throw new Y("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let l=!1;try{for await(const u of fD(e,n))if(!l){if(u.data.startsWith("[DONE]")){l=!0;continue}if(u.event===null||!u.event.startsWith("thread.")){let c;try{c=JSON.parse(u.data)}catch(d){throw r.error("Could not parse message into JSON:",u.data),r.error("From chunk:",u.raw),d}if(c&&c.error)throw new wt(void 0,c.error,void 0,e.headers);yield c}else{let c;try{c=JSON.parse(u.data)}catch(d){throw console.error("Could not parse message into JSON:",u.data),console.error("From chunk:",u.raw),d}if(u.event=="error")throw new wt(void 0,c.error,c.message,void 0);yield{event:u.event,data:c}}}l=!0}catch(u){if($m(u))return;throw u}finally{l||n.abort()}}return new jn(a,n,s)}static fromReadableStream(e,n,s){let i=!1;async function*r(){const l=new Fh,u=MA(e);for await(const c of u)for(const d of l.decode(c))yield d;for(const c of l.flush())yield c}async function*a(){if(i)throw new Y("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let l=!1;try{for await(const u of r())l||u&&(yield JSON.parse(u));l=!0}catch(u){if($m(u))return;throw u}finally{l||n.abort()}}return new jn(a,n,s)}[(uo=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],s=this.iterator(),i=r=>({next:()=>{if(r.length===0){const a=s.next();e.push(a),n.push(a)}return r.shift()}});return[new jn(()=>i(e),this.controller,M(this,uo,"f")),new jn(()=>i(n),this.controller,M(this,uo,"f"))]}toReadableStream(){const e=this;let n;return DA({async start(){n=e[Symbol.asyncIterator]()},async pull(s){try{const{value:i,done:r}=await n.next();if(r)return s.close();const a=Np(JSON.stringify(i)+`
`);s.enqueue(a)}catch(i){s.error(i)}},async cancel(){var s;await((s=n.return)==null?void 0:s.call(n))}})}}async function*fD(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Y("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Y("Attempted to iterate over a response with no body");const n=new mD,s=new Fh,i=MA(t.body);for await(const r of dD(i))for(const a of s.decode(r)){const l=n.decode(a);l&&(yield l)}for(const r of s.flush()){const a=n.decode(r);a&&(yield a)}}async function*dD(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const s=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?Np(n):n;let i=new Uint8Array(e.length+s.length);i.set(e),i.set(s,e.length),e=i;let r;for(;(r=cD(e))!==-1;)yield e.slice(0,r),e=e.slice(r)}e.length>0&&(yield e)}class mD{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const r={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],r}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,s,i]=gD(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function gD(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function UA(t,e){const{response:n,requestLogID:s,retryOfRequestLogID:i,startTime:r}=e,a=await(async()=>{var m;if(e.options.stream)return pt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):jn.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),u=(m=l==null?void 0:l.split(";")[0])==null?void 0:m.trim();if((u==null?void 0:u.includes("application/json"))||(u==null?void 0:u.endsWith("+json"))){if(n.headers.get("content-length")==="0")return;const p=await n.json();return zA(p,n)}return await n.text()})();return pt(t).debug(`[${s}] response parsed`,ki({retryOfRequestLogID:i,url:n.url,status:n.status,body:a,durationMs:Date.now()-r})),a}function zA(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var vo;class $h extends Promise{constructor(e,n,s=UA){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=s,vo.set(this,void 0),Z(this,vo,e)}_thenUnwrap(e){return new $h(M(this,vo,"f"),this.responsePromise,async(n,s)=>zA(e(await this.parseResponse(n,s),s),s.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(M(this,vo,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}vo=new WeakMap;var Iu;class Mp{constructor(e,n,s,i){Iu.set(this,void 0),Z(this,Iu,e),this.options=i,this.response=n,this.body=s}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Y("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await M(this,Iu,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Iu=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class pD extends $h{constructor(e,n,s){super(e,n,async(i,r)=>new s(i,r.response,await UA(i,r),r.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class Gh extends Mp{constructor(e,n,s,i){super(e,n,s,i),this.data=s.data||[],this.object=s.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class qe extends Mp{constructor(e,n,s,i){super(e,n,s,i),this.data=s.data||[],this.has_more=s.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var s;const e=this.getPaginatedItems(),n=(s=e[e.length-1])==null?void 0:s.id;return n?{...this.options,query:{...OA(this.options.query),after:n}}:null}}class Jc extends Mp{constructor(e,n,s,i){super(e,n,s,i),this.data=s.data||[],this.has_more=s.has_more||!1,this.last_id=s.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...OA(this.options.query),after:e}}:null}}const BA=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Fo(t,e,n){return BA(),new File(t,e??"unknown_file",n)}function tc(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const xp=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",ml=async(t,e)=>Qm(t.body)?{...t,body:await jA(t.body,e)}:t,ga=async(t,e)=>({...t,body:await jA(t.body,e)}),DE=new WeakMap;function _D(t){const e=typeof t=="function"?t:t.fetch,n=DE.get(e);if(n)return n;const s=(async()=>{try{const i="Response"in e?e.Response:(await e("data:,")).constructor,r=new FormData;return r.toString()!==await new i(r).text()}catch{return!0}})();return DE.set(e,s),s}const jA=async(t,e)=>{if(!await _D(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([s,i])=>Ym(n,s,i))),n},qA=t=>t instanceof Blob&&"name"in t,yD=t=>typeof t=="object"&&t!==null&&(t instanceof Response||xp(t)||qA(t)),Qm=t=>{if(yD(t))return!0;if(Array.isArray(t))return t.some(Qm);if(t&&typeof t=="object"){for(const e in t)if(Qm(t[e]))return!0}return!1},Ym=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,Fo([await n.blob()],tc(n)));else if(xp(n))t.append(e,Fo([await new Response(NA(n)).blob()],tc(n)));else if(qA(n))t.append(e,n,tc(n));else if(Array.isArray(n))await Promise.all(n.map(s=>Ym(t,e+"[]",s)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([s,i])=>Ym(t,`${e}[${s}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},HA=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",vD=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&HA(t),ED=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function TD(t,e,n){if(BA(),t=await t,vD(t))return t instanceof File?t:Fo([await t.arrayBuffer()],t.name);if(ED(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Fo(await Xm(i),e,n)}const s=await Xm(t);if(e||(e=tc(t)),!(n!=null&&n.type)){const i=s.find(r=>typeof r=="object"&&"type"in r&&r.type);typeof i=="string"&&(n={...n,type:i})}return Fo(s,e,n)}async function Xm(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(HA(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(xp(t))for await(const s of t)e.push(...await Xm(s));else{const s=(n=t==null?void 0:t.constructor)==null?void 0:n.name;throw new Error(`Unexpected data type: ${typeof t}${s?`; constructor: ${s}`:""}${SD(t)}`)}return e}function SD(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class K{constructor(e){this._client=e}}function FA(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const NE=Object.freeze(Object.create(null)),bD=(t=FA)=>function(n,...s){if(n.length===1)return n[0];let i=!1;const r=[],a=n.reduce((d,m,g)=>{var O;/[?#]/.test(m)&&(i=!0);const p=s[g];let C=(i?encodeURIComponent:t)(""+p);return g!==s.length&&(p==null||typeof p=="object"&&p.toString===((O=Object.getPrototypeOf(Object.getPrototypeOf(p.hasOwnProperty??NE)??NE))==null?void 0:O.toString))&&(C=p+"",r.push({start:d.length+m.length,length:C.length,error:`Value of type ${Object.prototype.toString.call(p).slice(8,-1)} is not a valid path parameter`})),d+m+(g===s.length?"":C)},""),l=a.split(/[?#]/,1)[0],u=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=u.exec(l))!==null;)r.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(r.sort((d,m)=>d.start-m.start),r.length>0){let d=0;const m=r.reduce((g,p)=>{const C=" ".repeat(p.start-d),O="^".repeat(p.length);return d=p.start+p.length,g+C+O},"");throw new Y(`Path parameters result in path with invalid segments:
${r.map(g=>g.error).join(`
`)}
${a}
${m}`)}return a},L=bD(FA);let $A=class extends K{list(e,n={},s){return this._client.getAPIList(L`/chat/completions/${e}/messages`,qe,{query:n,...s})}};function Wc(t){return t!==void 0&&"function"in t&&t.function!==void 0}function Vp(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function Bl(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function AD(t,e){return!e||!GA(e)?{...t,choices:t.choices.map(n=>(KA(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:kp(t,e)}function kp(t,e){const n=t.choices.map(s=>{var i;if(s.finish_reason==="length")throw new IA;if(s.finish_reason==="content_filter")throw new CA;return KA(s.message.tool_calls),{...s,message:{...s.message,...s.message.tool_calls?{tool_calls:((i=s.message.tool_calls)==null?void 0:i.map(r=>RD(e,r)))??void 0}:void 0,parsed:s.message.content&&!s.message.refusal?wD(e,s.message.content):null}}});return{...t,choices:n}}function wD(t,e){var n,s;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((s=t.response_format)==null?void 0:s.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function RD(t,e){var s;const n=(s=t.tools)==null?void 0:s.find(i=>{var r;return Wc(i)&&((r=i.function)==null?void 0:r.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Bl(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function ID(t,e){var s;if(!t||!("tools"in t)||!t.tools)return!1;const n=(s=t.tools)==null?void 0:s.find(i=>{var r;return Wc(i)&&((r=i.function)==null?void 0:r.name)===e.function.name});return Wc(n)&&(Bl(n)||(n==null?void 0:n.function.strict)||!1)}function GA(t){var e;return Vp(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(n=>Bl(n)||n.type==="function"&&n.function.strict===!0))??!1}function KA(t){for(const e of t||[])if(e.type!=="function")throw new Y(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function CD(t){for(const e of t??[]){if(e.type!=="function")throw new Y(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Y(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Zc=t=>(t==null?void 0:t.role)==="assistant",QA=t=>(t==null?void 0:t.role)==="tool";var Jm,nc,sc,Eo,To,ic,So,is,bo,eh,th,Ir,YA;class Pp{constructor(){Jm.add(this),this.controller=new AbortController,nc.set(this,void 0),sc.set(this,()=>{}),Eo.set(this,()=>{}),To.set(this,void 0),ic.set(this,()=>{}),So.set(this,()=>{}),is.set(this,{}),bo.set(this,!1),eh.set(this,!1),th.set(this,!1),Ir.set(this,!1),Z(this,nc,new Promise((e,n)=>{Z(this,sc,e,"f"),Z(this,Eo,n,"f")})),Z(this,To,new Promise((e,n)=>{Z(this,ic,e,"f"),Z(this,So,n,"f")})),M(this,nc,"f").catch(()=>{}),M(this,To,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},M(this,Jm,"m",YA).bind(this))},0)}_connected(){this.ended||(M(this,sc,"f").call(this),this._emit("connect"))}get ended(){return M(this,bo,"f")}get errored(){return M(this,eh,"f")}get aborted(){return M(this,th,"f")}abort(){this.controller.abort()}on(e,n){return(M(this,is,"f")[e]||(M(this,is,"f")[e]=[])).push({listener:n}),this}off(e,n){const s=M(this,is,"f")[e];if(!s)return this;const i=s.findIndex(r=>r.listener===n);return i>=0&&s.splice(i,1),this}once(e,n){return(M(this,is,"f")[e]||(M(this,is,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,s)=>{Z(this,Ir,!0),e!=="error"&&this.once("error",s),this.once(e,n)})}async done(){Z(this,Ir,!0),await M(this,To,"f")}_emit(e,...n){if(M(this,bo,"f"))return;e==="end"&&(Z(this,bo,!0),M(this,ic,"f").call(this));const s=M(this,is,"f")[e];if(s&&(M(this,is,"f")[e]=s.filter(i=>!i.once),s.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!M(this,Ir,"f")&&!(s!=null&&s.length)&&Promise.reject(i),M(this,Eo,"f").call(this,i),M(this,So,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!M(this,Ir,"f")&&!(s!=null&&s.length)&&Promise.reject(i),M(this,Eo,"f").call(this,i),M(this,So,"f").call(this,i),this._emit("end")}}_emitFinal(){}}nc=new WeakMap,sc=new WeakMap,Eo=new WeakMap,To=new WeakMap,ic=new WeakMap,So=new WeakMap,is=new WeakMap,bo=new WeakMap,eh=new WeakMap,th=new WeakMap,Ir=new WeakMap,Jm=new WeakSet,YA=function(e){if(Z(this,eh,!0),e instanceof Error&&e.name==="AbortError"&&(e=new yn),e instanceof yn)return Z(this,th,!0),this._emit("abort",e);if(e instanceof Y)return this._emit("error",e);if(e instanceof Error){const n=new Y(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Y(String(e)))};function OD(t){return typeof t.parse=="function"}var kt,Wm,nh,Zm,eg,tg,XA,JA;const DD=10;class WA extends Pp{constructor(){super(...arguments),kt.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var s;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(s=e.choices[0])==null?void 0:s.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),QA(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Zc(e)&&e.tool_calls)for(const s of e.tool_calls)s.type==="function"&&this._emit("functionToolCall",s.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Y("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),M(this,kt,"m",Wm).call(this)}async finalMessage(){return await this.done(),M(this,kt,"m",nh).call(this)}async finalFunctionToolCall(){return await this.done(),M(this,kt,"m",Zm).call(this)}async finalFunctionToolCallResult(){return await this.done(),M(this,kt,"m",eg).call(this)}async totalUsage(){return await this.done(),M(this,kt,"m",tg).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=M(this,kt,"m",nh).call(this);n&&this._emit("finalMessage",n);const s=M(this,kt,"m",Wm).call(this);s&&this._emit("finalContent",s);const i=M(this,kt,"m",Zm).call(this);i&&this._emit("finalFunctionToolCall",i);const r=M(this,kt,"m",eg).call(this);r!=null&&this._emit("finalFunctionToolCallResult",r),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",M(this,kt,"m",tg).call(this))}async _createChatCompletion(e,n,s){const i=s==null?void 0:s.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),M(this,kt,"m",XA).call(this,n);const r=await e.chat.completions.create({...n,stream:!1},{...s,signal:this.controller.signal});return this._connected(),this._addChatCompletion(kp(r,n))}async _runChatCompletion(e,n,s){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,n,s)}async _runTools(e,n,s){var p,C,O;const i="tool",{tool_choice:r="auto",stream:a,...l}=n,u=typeof r!="string"&&r.type==="function"&&((p=r==null?void 0:r.function)==null?void 0:p.name),{maxChatCompletions:c=DD}=s||{},d=n.tools.map(x=>{if(Bl(x)){if(!x.$callback)throw new Y("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:x.$callback,name:x.function.name,description:x.function.description||"",parameters:x.function.parameters,parse:x.$parseRaw,strict:!0}}}return x}),m={};for(const x of d)x.type==="function"&&(m[x.function.name||x.function.function.name]=x.function);const g="tools"in n?d.map(x=>x.type==="function"?{type:"function",function:{name:x.function.name||x.function.function.name,parameters:x.function.parameters,description:x.function.description,strict:x.function.strict}}:x):void 0;for(const x of n.messages)this._addMessage(x,!1);for(let x=0;x<c;++x){const y=(C=(await this._createChatCompletion(e,{...l,tool_choice:r,tools:g,messages:[...this.messages]},s)).choices[0])==null?void 0:C.message;if(!y)throw new Y("missing message in ChatCompletion response");if(!((O=y.tool_calls)!=null&&O.length))return;for(const A of y.tool_calls){if(A.type!=="function")continue;const I=A.id,{name:U,arguments:j}=A.function,E=m[U];if(E){if(u&&u!==U){const w=`Invalid tool_call: ${JSON.stringify(U)}. ${JSON.stringify(u)} requested. Please try again`;this._addMessage({role:i,tool_call_id:I,content:w});continue}}else{const w=`Invalid tool_call: ${JSON.stringify(U)}. Available options are: ${Object.keys(m).map(D=>JSON.stringify(D)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:I,content:w});continue}let v;try{v=OD(E)?await E.parse(j):j}catch(w){const D=w instanceof Error?w.message:String(w);this._addMessage({role:i,tool_call_id:I,content:D});continue}const T=await E.function(v,this),b=M(this,kt,"m",JA).call(this,T);if(this._addMessage({role:i,tool_call_id:I,content:b}),u)return}}}}kt=new WeakSet,Wm=function(){return M(this,kt,"m",nh).call(this).content??null},nh=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Zc(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Y("stream ended without producing a ChatCompletionMessage with role=assistant")},Zm=function(){var e,n;for(let s=this.messages.length-1;s>=0;s--){const i=this.messages[s];if(Zc(i)&&((e=i==null?void 0:i.tool_calls)!=null&&e.length))return(n=i.tool_calls.filter(r=>r.type==="function").at(-1))==null?void 0:n.function}},eg=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(QA(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(s=>{var i;return s.role==="assistant"&&((i=s.tool_calls)==null?void 0:i.some(r=>r.type==="function"&&r.id===n.tool_call_id))}))return n.content}},tg=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},XA=function(e){if(e.n!=null&&e.n>1)throw new Y("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},JA=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Lp extends WA{static runTools(e,n,s){const i=new Lp,r={...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,r)),i}_addMessage(e,n=!0){super._addMessage(e,n),Zc(e)&&e.content&&this._emit("content",e.content)}}const ZA=1,ew=2,tw=4,nw=8,sw=16,iw=32,rw=64,aw=128,ow=256,lw=aw|ow,uw=sw|iw|lw|rw,cw=ZA|ew|uw,hw=tw|nw,ND=cw|hw,ct={STR:ZA,NUM:ew,ARR:tw,OBJ:nw,NULL:sw,BOOL:iw,NAN:rw,INFINITY:aw,MINUS_INFINITY:ow,INF:lw,SPECIAL:uw,ATOM:cw,COLLECTION:hw,ALL:ND};class MD extends Error{}class xD extends Error{}function VD(t,e=ct.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return kD(t.trim(),e)}const kD=(t,e)=>{const n=t.length;let s=0;const i=g=>{throw new MD(`${g} at position ${s}`)},r=g=>{throw new xD(`${g} at position ${s}`)},a=()=>(m(),s>=n&&i("Unexpected end of input"),t[s]==='"'?l():t[s]==="{"?u():t[s]==="["?c():t.substring(s,s+4)==="null"||ct.NULL&e&&n-s<4&&"null".startsWith(t.substring(s))?(s+=4,null):t.substring(s,s+4)==="true"||ct.BOOL&e&&n-s<4&&"true".startsWith(t.substring(s))?(s+=4,!0):t.substring(s,s+5)==="false"||ct.BOOL&e&&n-s<5&&"false".startsWith(t.substring(s))?(s+=5,!1):t.substring(s,s+8)==="Infinity"||ct.INFINITY&e&&n-s<8&&"Infinity".startsWith(t.substring(s))?(s+=8,1/0):t.substring(s,s+9)==="-Infinity"||ct.MINUS_INFINITY&e&&1<n-s&&n-s<9&&"-Infinity".startsWith(t.substring(s))?(s+=9,-1/0):t.substring(s,s+3)==="NaN"||ct.NAN&e&&n-s<3&&"NaN".startsWith(t.substring(s))?(s+=3,NaN):d()),l=()=>{const g=s;let p=!1;for(s++;s<n&&(t[s]!=='"'||p&&t[s-1]==="\\");)p=t[s]==="\\"?!p:!1,s++;if(t.charAt(s)=='"')try{return JSON.parse(t.substring(g,++s-Number(p)))}catch(C){r(String(C))}else if(ct.STR&e)try{return JSON.parse(t.substring(g,s-Number(p))+'"')}catch{return JSON.parse(t.substring(g,t.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},u=()=>{s++,m();const g={};try{for(;t[s]!=="}";){if(m(),s>=n&&ct.OBJ&e)return g;const p=l();m(),s++;try{const C=a();Object.defineProperty(g,p,{value:C,writable:!0,enumerable:!0,configurable:!0})}catch(C){if(ct.OBJ&e)return g;throw C}m(),t[s]===","&&s++}}catch{if(ct.OBJ&e)return g;i("Expected '}' at end of object")}return s++,g},c=()=>{s++;const g=[];try{for(;t[s]!=="]";)g.push(a()),m(),t[s]===","&&s++}catch{if(ct.ARR&e)return g;i("Expected ']' at end of array")}return s++,g},d=()=>{if(s===0){t==="-"&&ct.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t)}catch(p){if(ct.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}r(String(p))}}const g=s;for(t[s]==="-"&&s++;t[s]&&!",]}".includes(t[s]);)s++;s==n&&!(ct.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(t.substring(g,s))}catch{t.substring(g,s)==="-"&&ct.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t.substring(g,t.lastIndexOf("e")))}catch(C){r(String(C))}}},m=()=>{for(;s<n&&` 
\r	`.includes(t[s]);)s++};return a()},ME=t=>VD(t,ct.ALL^ct.NUM);var et,ns,Er,ks,Rd,Cu,Id,Cd,Od,Ou,Dd,xE;class gl extends WA{constructor(e){super(),et.add(this),ns.set(this,void 0),Er.set(this,void 0),ks.set(this,void 0),Z(this,ns,e),Z(this,Er,[])}get currentChatCompletionSnapshot(){return M(this,ks,"f")}static fromReadableStream(e){const n=new gl(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,s){const i=new gl(n);return i._run(()=>i._runChatCompletion(e,{...n,stream:!0},{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,n,s){var a;super._createChatCompletion;const i=s==null?void 0:s.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),M(this,et,"m",Rd).call(this);const r=await e.chat.completions.create({...n,stream:!0},{...s,signal:this.controller.signal});this._connected();for await(const l of r)M(this,et,"m",Id).call(this,l);if((a=r.controller.signal)!=null&&a.aborted)throw new yn;return this._addChatCompletion(M(this,et,"m",Ou).call(this))}async _fromReadableStream(e,n){var a;const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),M(this,et,"m",Rd).call(this),this._connected();const i=jn.fromReadableStream(e,this.controller);let r;for await(const l of i)r&&r!==l.id&&this._addChatCompletion(M(this,et,"m",Ou).call(this)),M(this,et,"m",Id).call(this,l),r=l.id;if((a=i.controller.signal)!=null&&a.aborted)throw new yn;return this._addChatCompletion(M(this,et,"m",Ou).call(this))}[(ns=new WeakMap,Er=new WeakMap,ks=new WeakMap,et=new WeakSet,Rd=function(){this.ended||Z(this,ks,void 0)},Cu=function(n){let s=M(this,Er,"f")[n.index];return s||(s={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},M(this,Er,"f")[n.index]=s,s)},Id=function(n){var i,r,a,l,u,c,d,m,g,p,C,O,x,S,y;if(this.ended)return;const s=M(this,et,"m",xE).call(this,n);this._emit("chunk",n,s);for(const A of n.choices){const I=s.choices[A.index];A.delta.content!=null&&((i=I.message)==null?void 0:i.role)==="assistant"&&((r=I.message)!=null&&r.content)&&(this._emit("content",A.delta.content,I.message.content),this._emit("content.delta",{delta:A.delta.content,snapshot:I.message.content,parsed:I.message.parsed})),A.delta.refusal!=null&&((a=I.message)==null?void 0:a.role)==="assistant"&&((l=I.message)!=null&&l.refusal)&&this._emit("refusal.delta",{delta:A.delta.refusal,snapshot:I.message.refusal}),((u=A.logprobs)==null?void 0:u.content)!=null&&((c=I.message)==null?void 0:c.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(d=A.logprobs)==null?void 0:d.content,snapshot:((m=I.logprobs)==null?void 0:m.content)??[]}),((g=A.logprobs)==null?void 0:g.refusal)!=null&&((p=I.message)==null?void 0:p.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(C=A.logprobs)==null?void 0:C.refusal,snapshot:((O=I.logprobs)==null?void 0:O.refusal)??[]});const U=M(this,et,"m",Cu).call(this,I);I.finish_reason&&(M(this,et,"m",Od).call(this,I),U.current_tool_call_index!=null&&M(this,et,"m",Cd).call(this,I,U.current_tool_call_index));for(const j of A.delta.tool_calls??[])U.current_tool_call_index!==j.index&&(M(this,et,"m",Od).call(this,I),U.current_tool_call_index!=null&&M(this,et,"m",Cd).call(this,I,U.current_tool_call_index)),U.current_tool_call_index=j.index;for(const j of A.delta.tool_calls??[]){const E=(x=I.message.tool_calls)==null?void 0:x[j.index];E!=null&&E.type&&((E==null?void 0:E.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(S=E.function)==null?void 0:S.name,index:j.index,arguments:E.function.arguments,parsed_arguments:E.function.parsed_arguments,arguments_delta:((y=j.function)==null?void 0:y.arguments)??""}):(E==null||E.type,void 0))}}},Cd=function(n,s){var a,l,u;if(M(this,et,"m",Cu).call(this,n).done_tool_calls.has(s))return;const r=(a=n.message.tool_calls)==null?void 0:a[s];if(!r)throw new Error("no tool call snapshot");if(!r.type)throw new Error("tool call snapshot missing `type`");if(r.type==="function"){const c=(u=(l=M(this,ns,"f"))==null?void 0:l.tools)==null?void 0:u.find(d=>Wc(d)&&d.function.name===r.function.name);this._emit("tool_calls.function.arguments.done",{name:r.function.name,index:s,arguments:r.function.arguments,parsed_arguments:Bl(c)?c.$parseRaw(r.function.arguments):c!=null&&c.function.strict?JSON.parse(r.function.arguments):null})}else r.type},Od=function(n){var i,r;const s=M(this,et,"m",Cu).call(this,n);if(n.message.content&&!s.content_done){s.content_done=!0;const a=M(this,et,"m",Dd).call(this);this._emit("content.done",{content:n.message.content,parsed:a?a.$parseRaw(n.message.content):null})}n.message.refusal&&!s.refusal_done&&(s.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(i=n.logprobs)!=null&&i.content&&!s.logprobs_content_done&&(s.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(r=n.logprobs)!=null&&r.refusal&&!s.logprobs_refusal_done&&(s.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Ou=function(){if(this.ended)throw new Y("stream has ended, this shouldn't happen");const n=M(this,ks,"f");if(!n)throw new Y("request ended without sending any chunks");return Z(this,ks,void 0),Z(this,Er,[]),PD(n,M(this,ns,"f"))},Dd=function(){var s;const n=(s=M(this,ns,"f"))==null?void 0:s.response_format;return Vp(n)?n:null},xE=function(n){var s,i,r,a;let l=M(this,ks,"f");const{choices:u,...c}=n;l?Object.assign(l,c):l=Z(this,ks,{...c,choices:[]});for(const{delta:d,finish_reason:m,index:g,logprobs:p=null,...C}of n.choices){let O=l.choices[g];if(O||(O=l.choices[g]={finish_reason:m,index:g,message:{},logprobs:p,...C}),p)if(!O.logprobs)O.logprobs=Object.assign({},p);else{const{content:j,refusal:E,...v}=p;Object.assign(O.logprobs,v),j&&((s=O.logprobs).content??(s.content=[]),O.logprobs.content.push(...j)),E&&((i=O.logprobs).refusal??(i.refusal=[]),O.logprobs.refusal.push(...E))}if(m&&(O.finish_reason=m,M(this,ns,"f")&&GA(M(this,ns,"f")))){if(m==="length")throw new IA;if(m==="content_filter")throw new CA}if(Object.assign(O,C),!d)continue;const{content:x,refusal:S,function_call:y,role:A,tool_calls:I,...U}=d;if(Object.assign(O.message,U),S&&(O.message.refusal=(O.message.refusal||"")+S),A&&(O.message.role=A),y&&(O.message.function_call?(y.name&&(O.message.function_call.name=y.name),y.arguments&&((r=O.message.function_call).arguments??(r.arguments=""),O.message.function_call.arguments+=y.arguments)):O.message.function_call=y),x&&(O.message.content=(O.message.content||"")+x,!O.message.refusal&&M(this,et,"m",Dd).call(this)&&(O.message.parsed=ME(O.message.content))),I){O.message.tool_calls||(O.message.tool_calls=[]);for(const{index:j,id:E,type:v,function:T,...b}of I){const w=(a=O.message.tool_calls)[j]??(a[j]={});Object.assign(w,b),E&&(w.id=E),v&&(w.type=v),T&&(w.function??(w.function={name:T.name??"",arguments:""})),T!=null&&T.name&&(w.function.name=T.name),T!=null&&T.arguments&&(w.function.arguments+=T.arguments,ID(M(this,ns,"f"),w)&&(w.function.parsed_arguments=ME(w.function.arguments)))}}}return l},Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("chunk",i=>{const r=n.shift();r?r.resolve(i):e.push(i)}),this.on("end",()=>{s=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{s=!0;for(const r of n)r.reject(i);n.length=0}),this.on("error",i=>{s=!0;for(const r of n)r.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((r,a)=>n.push({resolve:r,reject:a})).then(r=>r?{value:r,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new jn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function PD(t,e){const{id:n,choices:s,created:i,model:r,system_fingerprint:a,...l}=t,u={...l,id:n,choices:s.map(({message:c,finish_reason:d,index:m,logprobs:g,...p})=>{if(!d)throw new Y(`missing finish_reason for choice ${m}`);const{content:C=null,function_call:O,tool_calls:x,...S}=c,y=c.role;if(!y)throw new Y(`missing role for choice ${m}`);if(O){const{arguments:A,name:I}=O;if(A==null)throw new Y(`missing function_call.arguments for choice ${m}`);if(!I)throw new Y(`missing function_call.name for choice ${m}`);return{...p,message:{content:C,function_call:{arguments:A,name:I},role:y,refusal:c.refusal??null},finish_reason:d,index:m,logprobs:g}}return x?{...p,index:m,finish_reason:d,logprobs:g,message:{...S,role:y,content:C,refusal:c.refusal??null,tool_calls:x.map((A,I)=>{const{function:U,type:j,id:E,...v}=A,{arguments:T,name:b,...w}=U||{};if(E==null)throw new Y(`missing choices[${m}].tool_calls[${I}].id
${Du(t)}`);if(j==null)throw new Y(`missing choices[${m}].tool_calls[${I}].type
${Du(t)}`);if(b==null)throw new Y(`missing choices[${m}].tool_calls[${I}].function.name
${Du(t)}`);if(T==null)throw new Y(`missing choices[${m}].tool_calls[${I}].function.arguments
${Du(t)}`);return{...v,id:E,type:j,function:{...w,name:b,arguments:T}}})}}:{...p,message:{...S,content:C,role:y,refusal:c.refusal??null},finish_reason:d,index:m,logprobs:g}}),created:i,model:r,object:"chat.completion",...a?{system_fingerprint:a}:{}};return AD(u,e)}function Du(t){return JSON.stringify(t)}class sh extends gl{static fromReadableStream(e){const n=new sh(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,s){const i=new sh(n),r={...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,r)),i}}let Up=class extends K{constructor(){super(...arguments),this.messages=new $A(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(L`/chat/completions/${e}`,n)}update(e,n,s){return this._client.post(L`/chat/completions/${e}`,{body:n,...s})}list(e={},n){return this._client.getAPIList("/chat/completions",qe,{query:e,...n})}delete(e,n){return this._client.delete(L`/chat/completions/${e}`,n)}parse(e,n){return CD(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(s=>kp(s,e))}runTools(e,n){return e.stream?sh.runTools(this._client,e,n):Lp.runTools(this._client,e,n)}stream(e,n){return gl.createChatCompletion(this._client,e,n)}};Up.Messages=$A;class zp extends K{constructor(){super(...arguments),this.completions=new Up(this._client)}}zp.Completions=Up;const fw=Symbol("brand.privateNullableHeaders");function*LD(t){if(!t)return;if(fw in t){const{values:s,nulls:i}=t;yield*s.entries();for(const r of i)yield[r,null];return}let e=!1,n;t instanceof Headers?n=t.entries():yE(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let s of n){const i=s[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const r=yE(s[1])?s[1]:[s[1]];let a=!1;for(const l of r)l!==void 0&&(e&&!a&&(a=!0,yield[i,null]),yield[i,l])}}const G=t=>{const e=new Headers,n=new Set;for(const s of t){const i=new Set;for(const[r,a]of LD(s)){const l=r.toLowerCase();i.has(l)||(e.delete(r),i.add(l)),a===null?(e.delete(r),n.add(l)):(e.append(r,a),n.delete(l))}}return{[fw]:!0,values:e,nulls:n}};class dw extends K{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:G([{Accept:"application/octet-stream"},n==null?void 0:n.headers]),__binaryResponse:!0})}}class mw extends K{create(e,n){return this._client.post("/audio/transcriptions",ga({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class gw extends K{create(e,n){return this._client.post("/audio/translations",ga({body:e,...n,__metadata:{model:e.model}},this._client))}}class jl extends K{constructor(){super(...arguments),this.transcriptions=new mw(this._client),this.translations=new gw(this._client),this.speech=new dw(this._client)}}jl.Transcriptions=mw;jl.Translations=gw;jl.Speech=dw;class pw extends K{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(L`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",qe,{query:e,...n})}cancel(e,n){return this._client.post(L`/batches/${e}/cancel`,n)}}class _w extends K{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:G([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(L`/assistants/${e}`,{...n,headers:G([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,s){return this._client.post(L`/assistants/${e}`,{body:n,...s,headers:G([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e={},n){return this._client.getAPIList("/assistants",qe,{query:e,...n,headers:G([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(L`/assistants/${e}`,{...n,headers:G([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}let yw=class extends K{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:G([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}};class vw extends K{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:G([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}let Kh=class extends K{constructor(){super(...arguments),this.sessions=new yw(this._client),this.transcriptionSessions=new vw(this._client)}};Kh.Sessions=yw;Kh.TranscriptionSessions=vw;class Ew extends K{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:G([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}cancel(e,n){return this._client.post(L`/chatkit/sessions/${e}/cancel`,{...n,headers:G([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}}let Tw=class extends K{retrieve(e,n){return this._client.get(L`/chatkit/threads/${e}`,{...n,headers:G([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",Jc,{query:e,...n,headers:G([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(L`/chatkit/threads/${e}`,{...n,headers:G([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}listItems(e,n={},s){return this._client.getAPIList(L`/chatkit/threads/${e}/items`,Jc,{query:n,...s,headers:G([{"OpenAI-Beta":"chatkit_beta=v1"},s==null?void 0:s.headers])})}};class Qh extends K{constructor(){super(...arguments),this.sessions=new Ew(this._client),this.threads=new Tw(this._client)}}Qh.Sessions=Ew;Qh.Threads=Tw;class Sw extends K{create(e,n,s){return this._client.post(L`/threads/${e}/messages`,{body:n,...s,headers:G([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,n,s){const{thread_id:i}=n;return this._client.get(L`/threads/${i}/messages/${e}`,{...s,headers:G([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,n,s){const{thread_id:i,...r}=n;return this._client.post(L`/threads/${i}/messages/${e}`,{body:r,...s,headers:G([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,n={},s){return this._client.getAPIList(L`/threads/${e}/messages`,qe,{query:n,...s,headers:G([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,n,s){const{thread_id:i}=n;return this._client.delete(L`/threads/${i}/messages/${e}`,{...s,headers:G([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}class bw extends K{retrieve(e,n,s){const{thread_id:i,run_id:r,...a}=n;return this._client.get(L`/threads/${i}/runs/${r}/steps/${e}`,{query:a,...s,headers:G([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,n,s){const{thread_id:i,...r}=n;return this._client.getAPIList(L`/threads/${i}/runs/${e}/steps`,qe,{query:r,...s,headers:G([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}const UD=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,s=new Uint8Array(n);for(let i=0;i<n;i++)s[i]=e.charCodeAt(i);return Array.from(new Float32Array(s.buffer))}};var Nd={};const Tr=t=>{var e,n,s,i;if(typeof globalThis.process<"u")return((e=Nd==null?void 0:Nd[t])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(i=(s=(n=globalThis.Deno.env)==null?void 0:n.get)==null?void 0:s.call(n,t))==null?void 0:i.trim()};var yt,Ui,ng,Pn,rc,An,zi,$r,Li,ih,Jt,ac,oc,$o,Ao,wo,VE,kE,PE,LE,UE,zE,BE;class Go extends Pp{constructor(){super(...arguments),yt.add(this),ng.set(this,[]),Pn.set(this,{}),rc.set(this,{}),An.set(this,void 0),zi.set(this,void 0),$r.set(this,void 0),Li.set(this,void 0),ih.set(this,void 0),Jt.set(this,void 0),ac.set(this,void 0),oc.set(this,void 0),$o.set(this,void 0)}[(ng=new WeakMap,Pn=new WeakMap,rc=new WeakMap,An=new WeakMap,zi=new WeakMap,$r=new WeakMap,Li=new WeakMap,ih=new WeakMap,Jt=new WeakMap,ac=new WeakMap,oc=new WeakMap,$o=new WeakMap,yt=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("event",i=>{const r=n.shift();r?r.resolve(i):e.push(i)}),this.on("end",()=>{s=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{s=!0;for(const r of n)r.reject(i);n.length=0}),this.on("error",i=>{s=!0;for(const r of n)r.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((r,a)=>n.push({resolve:r,reject:a})).then(r=>r?{value:r,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new Ui;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var r;const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=jn.fromReadableStream(e,this.controller);for await(const a of i)M(this,yt,"m",Ao).call(this,a);if((r=i.controller.signal)!=null&&r.aborted)throw new yn;return this._addRun(M(this,yt,"m",wo).call(this))}toReadableStream(){return new jn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,s,i){const r=new Ui;return r._run(()=>r._runToolAssistantStream(e,n,s,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createToolAssistantStream(e,n,s,i){var u;const r=i==null?void 0:i.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const a={...s,stream:!0},l=await e.submitToolOutputs(n,a,{...i,signal:this.controller.signal});this._connected();for await(const c of l)M(this,yt,"m",Ao).call(this,c);if((u=l.controller.signal)!=null&&u.aborted)throw new yn;return this._addRun(M(this,yt,"m",wo).call(this))}static createThreadAssistantStream(e,n,s){const i=new Ui;return i._run(()=>i._threadAssistantStream(e,n,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,n,s,i){const r=new Ui;return r._run(()=>r._runAssistantStream(e,n,s,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),r}currentEvent(){return M(this,ac,"f")}currentRun(){return M(this,oc,"f")}currentMessageSnapshot(){return M(this,An,"f")}currentRunStepSnapshot(){return M(this,$o,"f")}async finalRunSteps(){return await this.done(),Object.values(M(this,Pn,"f"))}async finalMessages(){return await this.done(),Object.values(M(this,rc,"f"))}async finalRun(){if(await this.done(),!M(this,zi,"f"))throw Error("Final run was not received.");return M(this,zi,"f")}async _createThreadAssistantStream(e,n,s){var l;const i=s==null?void 0:s.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const r={...n,stream:!0},a=await e.createAndRun(r,{...s,signal:this.controller.signal});this._connected();for await(const u of a)M(this,yt,"m",Ao).call(this,u);if((l=a.controller.signal)!=null&&l.aborted)throw new yn;return this._addRun(M(this,yt,"m",wo).call(this))}async _createAssistantStream(e,n,s,i){var u;const r=i==null?void 0:i.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const a={...s,stream:!0},l=await e.create(n,a,{...i,signal:this.controller.signal});this._connected();for await(const c of l)M(this,yt,"m",Ao).call(this,c);if((u=l.controller.signal)!=null&&u.aborted)throw new yn;return this._addRun(M(this,yt,"m",wo).call(this))}static accumulateDelta(e,n){for(const[s,i]of Object.entries(n)){if(!e.hasOwnProperty(s)){e[s]=i;continue}let r=e[s];if(r==null){e[s]=i;continue}if(s==="index"||s==="type"){e[s]=i;continue}if(typeof r=="string"&&typeof i=="string")r+=i;else if(typeof r=="number"&&typeof i=="number")r+=i;else if(bd(r)&&bd(i))r=this.accumulateDelta(r,i);else if(Array.isArray(r)&&Array.isArray(i)){if(r.every(a=>typeof a=="string"||typeof a=="number")){r.push(...i);continue}for(const a of i){if(!bd(a))throw new Error(`Expected array delta entry to be an object but got: ${a}`);const l=a.index;if(l==null)throw console.error(a),new Error("Expected array delta entry to have an `index` property");if(typeof l!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${l}`);const u=r[l];u==null?r.push(a):r[l]=this.accumulateDelta(u,a)}continue}else throw Error(`Unhandled record type: ${s}, deltaValue: ${i}, accValue: ${r}`);e[s]=r}return e}_addRun(e){return e}async _threadAssistantStream(e,n,s){return await this._createThreadAssistantStream(n,e,s)}async _runAssistantStream(e,n,s,i){return await this._createAssistantStream(n,e,s,i)}async _runToolAssistantStream(e,n,s,i){return await this._createToolAssistantStream(n,e,s,i)}}Ui=Go,Ao=function(e){if(!this.ended)switch(Z(this,ac,e),M(this,yt,"m",PE).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":M(this,yt,"m",BE).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":M(this,yt,"m",kE).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":M(this,yt,"m",VE).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},wo=function(){if(this.ended)throw new Y("stream has ended, this shouldn't happen");if(!M(this,zi,"f"))throw Error("Final run has not been received");return M(this,zi,"f")},VE=function(e){const[n,s]=M(this,yt,"m",UE).call(this,e,M(this,An,"f"));Z(this,An,n),M(this,rc,"f")[n.id]=n;for(const i of s){const r=n.content[i.index];(r==null?void 0:r.type)=="text"&&this._emit("textCreated",r.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let r=i.text,a=n.content[i.index];if(a&&a.type=="text")this._emit("textDelta",r,a.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=M(this,$r,"f")){if(M(this,Li,"f"))switch(M(this,Li,"f").type){case"text":this._emit("textDone",M(this,Li,"f").text,M(this,An,"f"));break;case"image_file":this._emit("imageFileDone",M(this,Li,"f").image_file,M(this,An,"f"));break}Z(this,$r,i.index)}Z(this,Li,n.content[i.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(M(this,$r,"f")!==void 0){const i=e.data.content[M(this,$r,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,M(this,An,"f"));break;case"text":this._emit("textDone",i.text,M(this,An,"f"));break}}M(this,An,"f")&&this._emit("messageDone",e.data),Z(this,An,void 0)}},kE=function(e){const n=M(this,yt,"m",LE).call(this,e);switch(Z(this,$o,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const s=e.data.delta;if(s.step_details&&s.step_details.type=="tool_calls"&&s.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const r of s.step_details.tool_calls)r.index==M(this,ih,"f")?this._emit("toolCallDelta",r,n.step_details.tool_calls[r.index]):(M(this,Jt,"f")&&this._emit("toolCallDone",M(this,Jt,"f")),Z(this,ih,r.index),Z(this,Jt,n.step_details.tool_calls[r.index]),M(this,Jt,"f")&&this._emit("toolCallCreated",M(this,Jt,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Z(this,$o,void 0),e.data.step_details.type=="tool_calls"&&M(this,Jt,"f")&&(this._emit("toolCallDone",M(this,Jt,"f")),Z(this,Jt,void 0)),this._emit("runStepDone",e.data,n);break}},PE=function(e){M(this,ng,"f").push(e),this._emit("event",e)},LE=function(e){switch(e.event){case"thread.run.step.created":return M(this,Pn,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=M(this,Pn,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let s=e.data;if(s.delta){const i=Ui.accumulateDelta(n,s.delta);M(this,Pn,"f")[e.data.id]=i}return M(this,Pn,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":M(this,Pn,"f")[e.data.id]=e.data;break}if(M(this,Pn,"f")[e.data.id])return M(this,Pn,"f")[e.data.id];throw new Error("No snapshot available")},UE=function(e,n){let s=[];switch(e.event){case"thread.message.created":return[e.data,s];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const r of i.delta.content)if(r.index in n.content){let a=n.content[r.index];n.content[r.index]=M(this,yt,"m",zE).call(this,r,a)}else n.content[r.index]=r,s.push(r);return[n,s];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,s];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},zE=function(e,n){return Ui.accumulateDelta(n,e)},BE=function(e){switch(Z(this,oc,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Z(this,zi,e.data),M(this,Jt,"f")&&(this._emit("toolCallDone",M(this,Jt,"f")),Z(this,Jt,void 0));break}};let Bp=class extends K{constructor(){super(...arguments),this.steps=new bw(this._client)}create(e,n,s){const{include:i,...r}=n;return this._client.post(L`/threads/${e}/runs`,{query:{include:i},body:r,...s,headers:G([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers]),stream:n.stream??!1})}retrieve(e,n,s){const{thread_id:i}=n;return this._client.get(L`/threads/${i}/runs/${e}`,{...s,headers:G([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,n,s){const{thread_id:i,...r}=n;return this._client.post(L`/threads/${i}/runs/${e}`,{body:r,...s,headers:G([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,n={},s){return this._client.getAPIList(L`/threads/${e}/runs`,qe,{query:n,...s,headers:G([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}cancel(e,n,s){const{thread_id:i}=n;return this._client.post(L`/threads/${i}/runs/${e}/cancel`,{...s,headers:G([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async createAndPoll(e,n,s){const i=await this.create(e,n,s);return await this.poll(i.id,{thread_id:e},s)}createAndStream(e,n,s){return Go.createAssistantStream(e,this._client.beta.threads.runs,n,s)}async poll(e,n,s){var r;const i=G([s==null?void 0:s.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((r=s==null?void 0:s.pollIntervalMs)==null?void 0:r.toString())??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(e,n,{...s,headers:{...s==null?void 0:s.headers,...i}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let u=5e3;if(s!=null&&s.pollIntervalMs)u=s.pollIntervalMs;else{const c=l.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(u=d)}}await zl(u);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,n,s){return Go.createAssistantStream(e,this._client.beta.threads.runs,n,s)}submitToolOutputs(e,n,s){const{thread_id:i,...r}=n;return this._client.post(L`/threads/${i}/runs/${e}/submit_tool_outputs`,{body:r,...s,headers:G([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,s){const i=await this.submitToolOutputs(e,n,s);return await this.poll(i.id,n,s)}submitToolOutputsStream(e,n,s){return Go.createToolAssistantStream(e,this._client.beta.threads.runs,n,s)}};Bp.Steps=bw;class Yh extends K{constructor(){super(...arguments),this.runs=new Bp(this._client),this.messages=new Sw(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:G([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(L`/threads/${e}`,{...n,headers:G([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,s){return this._client.post(L`/threads/${e}`,{body:n,...s,headers:G([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,n){return this._client.delete(L`/threads/${e}`,{...n,headers:G([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:G([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const s=await this.createAndRun(e,n);return await this.runs.poll(s.id,{thread_id:s.thread_id},n)}createAndRunStream(e,n){return Go.createThreadAssistantStream(e,this._client.beta.threads,n)}}Yh.Runs=Bp;Yh.Messages=Sw;class Na extends K{constructor(){super(...arguments),this.realtime=new Kh(this._client),this.chatkit=new Qh(this._client),this.assistants=new _w(this._client),this.threads=new Yh(this._client)}}Na.Realtime=Kh;Na.ChatKit=Qh;Na.Assistants=_w;Na.Threads=Yh;class Aw extends K{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}let ww=class extends K{retrieve(e,n,s){const{container_id:i}=n;return this._client.get(L`/containers/${i}/files/${e}/content`,{...s,headers:G([{Accept:"application/binary"},s==null?void 0:s.headers]),__binaryResponse:!0})}},jp=class extends K{constructor(){super(...arguments),this.content=new ww(this._client)}create(e,n,s){return this._client.post(L`/containers/${e}/files`,ml({body:n,...s},this._client))}retrieve(e,n,s){const{container_id:i}=n;return this._client.get(L`/containers/${i}/files/${e}`,s)}list(e,n={},s){return this._client.getAPIList(L`/containers/${e}/files`,qe,{query:n,...s})}delete(e,n,s){const{container_id:i}=n;return this._client.delete(L`/containers/${i}/files/${e}`,{...s,headers:G([{Accept:"*/*"},s==null?void 0:s.headers])})}};jp.Content=ww;class qp extends K{constructor(){super(...arguments),this.files=new jp(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(L`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",qe,{query:e,...n})}delete(e,n){return this._client.delete(L`/containers/${e}`,{...n,headers:G([{Accept:"*/*"},n==null?void 0:n.headers])})}}qp.Files=jp;class Rw extends K{create(e,n,s){const{include:i,...r}=n;return this._client.post(L`/conversations/${e}/items`,{query:{include:i},body:r,...s})}retrieve(e,n,s){const{conversation_id:i,...r}=n;return this._client.get(L`/conversations/${i}/items/${e}`,{query:r,...s})}list(e,n={},s){return this._client.getAPIList(L`/conversations/${e}/items`,Jc,{query:n,...s})}delete(e,n,s){const{conversation_id:i}=n;return this._client.delete(L`/conversations/${i}/items/${e}`,s)}}class Hp extends K{constructor(){super(...arguments),this.items=new Rw(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(L`/conversations/${e}`,n)}update(e,n,s){return this._client.post(L`/conversations/${e}`,{body:n,...s})}delete(e,n){return this._client.delete(L`/conversations/${e}`,n)}}Hp.Items=Rw;class Iw extends K{create(e,n){const s=!!e.encoding_format;let i=s?e.encoding_format:"base64";s&&pt(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const r=this._client.post("/embeddings",{body:{...e,encoding_format:i},...n});return s?r:(pt(this._client).debug("embeddings/decoding base64 embeddings from base64"),r._thenUnwrap(a=>(a&&a.data&&a.data.forEach(l=>{const u=l.embedding;l.embedding=UD(u)}),a)))}}class Cw extends K{retrieve(e,n,s){const{eval_id:i,run_id:r}=n;return this._client.get(L`/evals/${i}/runs/${r}/output_items/${e}`,s)}list(e,n,s){const{eval_id:i,...r}=n;return this._client.getAPIList(L`/evals/${i}/runs/${e}/output_items`,qe,{query:r,...s})}}class Fp extends K{constructor(){super(...arguments),this.outputItems=new Cw(this._client)}create(e,n,s){return this._client.post(L`/evals/${e}/runs`,{body:n,...s})}retrieve(e,n,s){const{eval_id:i}=n;return this._client.get(L`/evals/${i}/runs/${e}`,s)}list(e,n={},s){return this._client.getAPIList(L`/evals/${e}/runs`,qe,{query:n,...s})}delete(e,n,s){const{eval_id:i}=n;return this._client.delete(L`/evals/${i}/runs/${e}`,s)}cancel(e,n,s){const{eval_id:i}=n;return this._client.post(L`/evals/${i}/runs/${e}`,s)}}Fp.OutputItems=Cw;class $p extends K{constructor(){super(...arguments),this.runs=new Fp(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(L`/evals/${e}`,n)}update(e,n,s){return this._client.post(L`/evals/${e}`,{body:n,...s})}list(e={},n){return this._client.getAPIList("/evals",qe,{query:e,...n})}delete(e,n){return this._client.delete(L`/evals/${e}`,n)}}$p.Runs=Fp;let Ow=class extends K{create(e,n){return this._client.post("/files",ga({body:e,...n},this._client))}retrieve(e,n){return this._client.get(L`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",qe,{query:e,...n})}delete(e,n){return this._client.delete(L`/files/${e}`,n)}content(e,n){return this._client.get(L`/files/${e}/content`,{...n,headers:G([{Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:s=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),r=Date.now();let a=await this.retrieve(e);for(;!a.status||!i.has(a.status);)if(await zl(n),a=await this.retrieve(e),Date.now()-r>s)throw new Dp({message:`Giving up on waiting for file ${e} to finish processing after ${s} milliseconds.`});return a}};class Dw extends K{}let Nw=class extends K{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class Gp extends K{constructor(){super(...arguments),this.graders=new Nw(this._client)}}Gp.Graders=Nw;class Mw extends K{create(e,n,s){return this._client.getAPIList(L`/fine_tuning/checkpoints/${e}/permissions`,Gh,{body:n,method:"post",...s})}retrieve(e,n={},s){return this._client.get(L`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...s})}delete(e,n,s){const{fine_tuned_model_checkpoint:i}=n;return this._client.delete(L`/fine_tuning/checkpoints/${i}/permissions/${e}`,s)}}let Kp=class extends K{constructor(){super(...arguments),this.permissions=new Mw(this._client)}};Kp.Permissions=Mw;class xw extends K{list(e,n={},s){return this._client.getAPIList(L`/fine_tuning/jobs/${e}/checkpoints`,qe,{query:n,...s})}}class Qp extends K{constructor(){super(...arguments),this.checkpoints=new xw(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(L`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",qe,{query:e,...n})}cancel(e,n){return this._client.post(L`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},s){return this._client.getAPIList(L`/fine_tuning/jobs/${e}/events`,qe,{query:n,...s})}pause(e,n){return this._client.post(L`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(L`/fine_tuning/jobs/${e}/resume`,n)}}Qp.Checkpoints=xw;class Ma extends K{constructor(){super(...arguments),this.methods=new Dw(this._client),this.jobs=new Qp(this._client),this.checkpoints=new Kp(this._client),this.alpha=new Gp(this._client)}}Ma.Methods=Dw;Ma.Jobs=Qp;Ma.Checkpoints=Kp;Ma.Alpha=Gp;class Vw extends K{}class Yp extends K{constructor(){super(...arguments),this.graderModels=new Vw(this._client)}}Yp.GraderModels=Vw;class kw extends K{createVariation(e,n){return this._client.post("/images/variations",ga({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",ga({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class Pw extends K{retrieve(e,n){return this._client.get(L`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",Gh,e)}delete(e,n){return this._client.delete(L`/models/${e}`,n)}}class Lw extends K{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class Uw extends K{accept(e,n,s){return this._client.post(L`/realtime/calls/${e}/accept`,{body:n,...s,headers:G([{Accept:"*/*"},s==null?void 0:s.headers])})}hangup(e,n){return this._client.post(L`/realtime/calls/${e}/hangup`,{...n,headers:G([{Accept:"*/*"},n==null?void 0:n.headers])})}refer(e,n,s){return this._client.post(L`/realtime/calls/${e}/refer`,{body:n,...s,headers:G([{Accept:"*/*"},s==null?void 0:s.headers])})}reject(e,n={},s){return this._client.post(L`/realtime/calls/${e}/reject`,{body:n,...s,headers:G([{Accept:"*/*"},s==null?void 0:s.headers])})}}class zw extends K{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class Xh extends K{constructor(){super(...arguments),this.clientSecrets=new zw(this._client),this.calls=new Uw(this._client)}}Xh.ClientSecrets=zw;Xh.Calls=Uw;function zD(t,e){return!e||!jD(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(s=>({...s,parsed:null}))}:n)}:Bw(t,e)}function Bw(t,e){const n=t.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:FD(e,i)};if(i.type==="message"){const r=i.content.map(a=>a.type==="output_text"?{...a,parsed:BD(e,a.text)}:a);return{...i,content:r}}return i}),s=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||sg(s),Object.defineProperty(s,"output_parsed",{enumerable:!0,get(){for(const i of s.output)if(i.type==="message"){for(const r of i.content)if(r.type==="output_text"&&r.parsed!==null)return r.parsed}return null}}),s}function BD(t,e){var n,s,i,r;return((s=(n=t.text)==null?void 0:n.format)==null?void 0:s.type)!=="json_schema"?null:"$parseRaw"in((i=t.text)==null?void 0:i.format)?((r=t.text)==null?void 0:r.format).$parseRaw(e):JSON.parse(e)}function jD(t){var e;return!!Vp((e=t.text)==null?void 0:e.format)}function qD(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function HD(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function FD(t,e){const n=HD(t.tools??[],e.name);return{...e,...e,parsed_arguments:qD(n)?n.$parseRaw(e.arguments):n!=null&&n.strict?JSON.parse(e.arguments):null}}function sg(t){const e=[];for(const n of t.output)if(n.type==="message")for(const s of n.content)s.type==="output_text"&&e.push(s.text);t.output_text=e.join("")}var Sr,Nu,Ps,Mu,jE,qE,HE,FE;class Xp extends Pp{constructor(e){super(),Sr.add(this),Nu.set(this,void 0),Ps.set(this,void 0),Mu.set(this,void 0),Z(this,Nu,e)}static createResponse(e,n,s){const i=new Xp(n);return i._run(()=>i._createOrRetrieveResponse(e,n,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,n,s){var l;const i=s==null?void 0:s.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),M(this,Sr,"m",jE).call(this);let r,a=null;"response_id"in n?(r=await e.responses.retrieve(n.response_id,{stream:!0},{...s,signal:this.controller.signal,stream:!0}),a=n.starting_after??null):r=await e.responses.create({...n,stream:!0},{...s,signal:this.controller.signal}),this._connected();for await(const u of r)M(this,Sr,"m",qE).call(this,u,a);if((l=r.controller.signal)!=null&&l.aborted)throw new yn;return M(this,Sr,"m",HE).call(this)}[(Nu=new WeakMap,Ps=new WeakMap,Mu=new WeakMap,Sr=new WeakSet,jE=function(){this.ended||Z(this,Ps,void 0)},qE=function(n,s){if(this.ended)return;const i=(a,l)=>{(s==null||l.sequence_number>s)&&this._emit(a,l)},r=M(this,Sr,"m",FE).call(this,n);switch(i("event",n),n.type){case"response.output_text.delta":{const a=r.output[n.output_index];if(!a)throw new Y(`missing output at index ${n.output_index}`);if(a.type==="message"){const l=a.content[n.content_index];if(!l)throw new Y(`missing content at index ${n.content_index}`);if(l.type!=="output_text")throw new Y(`expected content to be 'output_text', got ${l.type}`);i("response.output_text.delta",{...n,snapshot:l.text})}break}case"response.function_call_arguments.delta":{const a=r.output[n.output_index];if(!a)throw new Y(`missing output at index ${n.output_index}`);a.type==="function_call"&&i("response.function_call_arguments.delta",{...n,snapshot:a.arguments});break}default:i(n.type,n);break}},HE=function(){if(this.ended)throw new Y("stream has ended, this shouldn't happen");const n=M(this,Ps,"f");if(!n)throw new Y("request ended without sending any events");Z(this,Ps,void 0);const s=$D(n,M(this,Nu,"f"));return Z(this,Mu,s),s},FE=function(n){var i;let s=M(this,Ps,"f");if(!s){if(n.type!=="response.created")throw new Y(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return s=Z(this,Ps,n.response),s}switch(n.type){case"response.output_item.added":{s.output.push(n.item);break}case"response.content_part.added":{const r=s.output[n.output_index];if(!r)throw new Y(`missing output at index ${n.output_index}`);const a=r.type,l=n.part;a==="message"&&l.type!=="reasoning_text"?r.content.push(l):a==="reasoning"&&l.type==="reasoning_text"&&(r.content||(r.content=[]),r.content.push(l));break}case"response.output_text.delta":{const r=s.output[n.output_index];if(!r)throw new Y(`missing output at index ${n.output_index}`);if(r.type==="message"){const a=r.content[n.content_index];if(!a)throw new Y(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new Y(`expected content to be 'output_text', got ${a.type}`);a.text+=n.delta}break}case"response.function_call_arguments.delta":{const r=s.output[n.output_index];if(!r)throw new Y(`missing output at index ${n.output_index}`);r.type==="function_call"&&(r.arguments+=n.delta);break}case"response.reasoning_text.delta":{const r=s.output[n.output_index];if(!r)throw new Y(`missing output at index ${n.output_index}`);if(r.type==="reasoning"){const a=(i=r.content)==null?void 0:i[n.content_index];if(!a)throw new Y(`missing content at index ${n.content_index}`);if(a.type!=="reasoning_text")throw new Y(`expected content to be 'reasoning_text', got ${a.type}`);a.text+=n.delta}break}case"response.completed":{Z(this,Ps,n.response);break}}return s},Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("event",i=>{const r=n.shift();r?r.resolve(i):e.push(i)}),this.on("end",()=>{s=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{s=!0;for(const r of n)r.reject(i);n.length=0}),this.on("error",i=>{s=!0;for(const r of n)r.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((r,a)=>n.push({resolve:r,reject:a})).then(r=>r?{value:r,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=M(this,Mu,"f");if(!e)throw new Y("stream ended without producing a ChatCompletion");return e}}function $D(t,e){return zD(t,e)}class jw extends K{list(e,n={},s){return this._client.getAPIList(L`/responses/${e}/input_items`,qe,{query:n,...s})}}class qw extends K{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class Jh extends K{constructor(){super(...arguments),this.inputItems=new jw(this._client),this.inputTokens=new qw(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&sg(s),s))}retrieve(e,n={},s){return this._client.get(L`/responses/${e}`,{query:n,...s,stream:(n==null?void 0:n.stream)??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&sg(i),i))}delete(e,n){return this._client.delete(L`/responses/${e}`,{...n,headers:G([{Accept:"*/*"},n==null?void 0:n.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(s=>Bw(s,e))}stream(e,n){return Xp.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(L`/responses/${e}/cancel`,n)}compact(e,n){return this._client.post("/responses/compact",{body:e,...n})}}Jh.InputItems=jw;Jh.InputTokens=qw;let Hw=class extends K{retrieve(e,n){return this._client.get(L`/skills/${e}/content`,{...n,headers:G([{Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}};class Fw extends K{retrieve(e,n,s){const{skill_id:i}=n;return this._client.get(L`/skills/${i}/versions/${e}/content`,{...s,headers:G([{Accept:"application/binary"},s==null?void 0:s.headers]),__binaryResponse:!0})}}class Jp extends K{constructor(){super(...arguments),this.content=new Fw(this._client)}create(e,n={},s){return this._client.post(L`/skills/${e}/versions`,ml({body:n,...s},this._client))}retrieve(e,n,s){const{skill_id:i}=n;return this._client.get(L`/skills/${i}/versions/${e}`,s)}list(e,n={},s){return this._client.getAPIList(L`/skills/${e}/versions`,qe,{query:n,...s})}delete(e,n,s){const{skill_id:i}=n;return this._client.delete(L`/skills/${i}/versions/${e}`,s)}}Jp.Content=Fw;class Wh extends K{constructor(){super(...arguments),this.content=new Hw(this._client),this.versions=new Jp(this._client)}create(e={},n){return this._client.post("/skills",ml({body:e,...n},this._client))}retrieve(e,n){return this._client.get(L`/skills/${e}`,n)}update(e,n,s){return this._client.post(L`/skills/${e}`,{body:n,...s})}list(e={},n){return this._client.getAPIList("/skills",qe,{query:e,...n})}delete(e,n){return this._client.delete(L`/skills/${e}`,n)}}Wh.Content=Hw;Wh.Versions=Jp;class $w extends K{create(e,n,s){return this._client.post(L`/uploads/${e}/parts`,ga({body:n,...s},this._client))}}class Wp extends K{constructor(){super(...arguments),this.parts=new $w(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(L`/uploads/${e}/cancel`,n)}complete(e,n,s){return this._client.post(L`/uploads/${e}/complete`,{body:n,...s})}}Wp.Parts=$w;const GD=async t=>{const e=await Promise.allSettled(t),n=e.filter(i=>i.status==="rejected");if(n.length){for(const i of n)console.error(i.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const s=[];for(const i of e)i.status==="fulfilled"&&s.push(i.value);return s};class Gw extends K{create(e,n,s){return this._client.post(L`/vector_stores/${e}/file_batches`,{body:n,...s,headers:G([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,n,s){const{vector_store_id:i}=n;return this._client.get(L`/vector_stores/${i}/file_batches/${e}`,{...s,headers:G([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}cancel(e,n,s){const{vector_store_id:i}=n;return this._client.post(L`/vector_stores/${i}/file_batches/${e}/cancel`,{...s,headers:G([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async createAndPoll(e,n,s){const i=await this.create(e,n);return await this.poll(e,i.id,s)}listFiles(e,n,s){const{vector_store_id:i,...r}=n;return this._client.getAPIList(L`/vector_stores/${i}/file_batches/${e}/files`,qe,{query:r,...s,headers:G([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async poll(e,n,s){var r;const i=G([s==null?void 0:s.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((r=s==null?void 0:s.pollIntervalMs)==null?void 0:r.toString())??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(n,{vector_store_id:e},{...s,headers:i}).withResponse();switch(a.status){case"in_progress":let u=5e3;if(s!=null&&s.pollIntervalMs)u=s.pollIntervalMs;else{const c=l.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(u=d)}}await zl(u);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:n,fileIds:s=[]},i){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const r=(i==null?void 0:i.maxConcurrency)??5,a=Math.min(r,n.length),l=this._client,u=n.values(),c=[...s];async function d(g){for(let p of g){const C=await l.files.create({file:p,purpose:"assistants"},i);c.push(C.id)}}const m=Array(a).fill(u).map(d);return await GD(m),await this.createAndPoll(e,{file_ids:c})}}class Kw extends K{create(e,n,s){return this._client.post(L`/vector_stores/${e}/files`,{body:n,...s,headers:G([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,n,s){const{vector_store_id:i}=n;return this._client.get(L`/vector_stores/${i}/files/${e}`,{...s,headers:G([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,n,s){const{vector_store_id:i,...r}=n;return this._client.post(L`/vector_stores/${i}/files/${e}`,{body:r,...s,headers:G([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,n={},s){return this._client.getAPIList(L`/vector_stores/${e}/files`,qe,{query:n,...s,headers:G([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,n,s){const{vector_store_id:i}=n;return this._client.delete(L`/vector_stores/${i}/files/${e}`,{...s,headers:G([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async createAndPoll(e,n,s){const i=await this.create(e,n,s);return await this.poll(e,i.id,s)}async poll(e,n,s){var r;const i=G([s==null?void 0:s.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((r=s==null?void 0:s.pollIntervalMs)==null?void 0:r.toString())??void 0}]);for(;;){const a=await this.retrieve(n,{vector_store_id:e},{...s,headers:i}).withResponse(),l=a.data;switch(l.status){case"in_progress":let u=5e3;if(s!=null&&s.pollIntervalMs)u=s.pollIntervalMs;else{const c=a.response.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(u=d)}}await zl(u);break;case"failed":case"completed":return l}}}async upload(e,n,s){const i=await this._client.files.create({file:n,purpose:"assistants"},s);return this.create(e,{file_id:i.id},s)}async uploadAndPoll(e,n,s){const i=await this.upload(e,n,s);return await this.poll(e,i.id,s)}content(e,n,s){const{vector_store_id:i}=n;return this._client.getAPIList(L`/vector_stores/${i}/files/${e}/content`,Gh,{...s,headers:G([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}class Zh extends K{constructor(){super(...arguments),this.files=new Kw(this._client),this.fileBatches=new Gw(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:G([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(L`/vector_stores/${e}`,{...n,headers:G([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,s){return this._client.post(L`/vector_stores/${e}`,{body:n,...s,headers:G([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",qe,{query:e,...n,headers:G([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(L`/vector_stores/${e}`,{...n,headers:G([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}search(e,n,s){return this._client.getAPIList(L`/vector_stores/${e}/search`,Gh,{body:n,method:"post",...s,headers:G([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}Zh.Files=Kw;Zh.FileBatches=Gw;class Qw extends K{create(e,n){return this._client.post("/videos",ml({body:e,...n},this._client))}retrieve(e,n){return this._client.get(L`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",Jc,{query:e,...n})}delete(e,n){return this._client.delete(L`/videos/${e}`,n)}downloadContent(e,n={},s){return this._client.get(L`/videos/${e}/content`,{query:n,...s,headers:G([{Accept:"application/binary"},s==null?void 0:s.headers]),__binaryResponse:!0})}remix(e,n,s){return this._client.post(L`/videos/${e}/remix`,ml({body:n,...s},this._client))}}var Cr,Yw,lc;class Xw extends K{constructor(){super(...arguments),Cr.add(this)}async unwrap(e,n,s=this._client.webhookSecret,i=300){return await this.verifySignature(e,n,s,i),JSON.parse(e)}async verifySignature(e,n,s=this._client.webhookSecret,i=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");M(this,Cr,"m",Yw).call(this,s);const r=G([n]).values,a=M(this,Cr,"m",lc).call(this,r,"webhook-signature"),l=M(this,Cr,"m",lc).call(this,r,"webhook-timestamp"),u=M(this,Cr,"m",lc).call(this,r,"webhook-id"),c=parseInt(l,10);if(isNaN(c))throw new _o("Invalid webhook timestamp format");const d=Math.floor(Date.now()/1e3);if(d-c>i)throw new _o("Webhook timestamp is too old");if(c>d+i)throw new _o("Webhook timestamp is too new");const m=a.split(" ").map(O=>O.startsWith("v1,")?O.substring(3):O),g=s.startsWith("whsec_")?Buffer.from(s.replace("whsec_",""),"base64"):Buffer.from(s,"utf-8"),p=u?`${u}.${l}.${e}`:`${l}.${e}`,C=await crypto.subtle.importKey("raw",g,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const O of m)try{const x=Buffer.from(O,"base64");if(await crypto.subtle.verify("HMAC",C,x,new TextEncoder().encode(p)))return}catch{continue}throw new _o("The given webhook signature does not match the expected signature")}}Cr=new WeakSet,Yw=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},lc=function(e,n){if(!e)throw new Error("Headers are required");const s=e.get(n);if(s==null)throw new Error(`Missing required header: ${n}`);return s};var ig,Zp,uc,Jw;class le{constructor({baseURL:e=Tr("OPENAI_BASE_URL"),apiKey:n=Tr("OPENAI_API_KEY"),organization:s=Tr("OPENAI_ORG_ID")??null,project:i=Tr("OPENAI_PROJECT_ID")??null,webhookSecret:r=Tr("OPENAI_WEBHOOK_SECRET")??null,...a}={}){if(ig.add(this),uc.set(this,void 0),this.completions=new Aw(this),this.chat=new zp(this),this.embeddings=new Iw(this),this.files=new Ow(this),this.images=new kw(this),this.audio=new jl(this),this.moderations=new Lw(this),this.models=new Pw(this),this.fineTuning=new Ma(this),this.graders=new Yp(this),this.vectorStores=new Zh(this),this.webhooks=new Xw(this),this.beta=new Na(this),this.batches=new pw(this),this.uploads=new Wp(this),this.responses=new Jh(this),this.realtime=new Xh(this),this.conversations=new Hp(this),this.evals=new $p(this),this.containers=new qp(this),this.skills=new Wh(this),this.videos=new Qw(this),n===void 0)throw new Y("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const l={apiKey:n,organization:s,project:i,webhookSecret:r,...a,baseURL:e||"https://api.openai.com/v1"};if(!l.dangerouslyAllowBrowser&&QO())throw new Y(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=l.baseURL,this.timeout=l.timeout??Zp.DEFAULT_TIMEOUT,this.logger=l.logger??console;const u="warn";this.logLevel=u,this.logLevel=CE(l.logLevel,"ClientOptions.logLevel",this)??CE(Tr("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??u,this.fetchOptions=l.fetchOptions,this.maxRetries=l.maxRetries??2,this.fetch=l.fetch??ZO(),Z(this,uc,tD),this._options=l,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=s,this.project=i,this.webhookSecret=r}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return G([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return oD(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Rr}`}defaultIdempotencyKey(){return`stainless-node-retry-${yA()}`}makeStatusError(e,n,s,i){return wt.generate(e,n,s,i)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(s){throw s instanceof Y?s:new Y(`Failed to get token from 'apiKey' function: ${s.message}`,{cause:s})}if(typeof n!="string"||!n)throw new Y(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,s){const i=!M(this,ig,"m",Jw).call(this)&&s||this.baseURL,r=HO(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return FO(a)||(n={...a,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:s}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,s){return this.request(Promise.resolve(s).then(i=>({method:e,path:n,...i})))}request(e,n=null){return new $h(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,s){var S,y;const i=await e,r=i.maxRetries??this.maxRetries;n==null&&(n=r),await this.prepareOptions(i);const{req:a,url:l,timeout:u}=await this.buildRequest(i,{retryCount:r-n});await this.prepareRequest(a,{url:l,options:i});const c="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),d=s===void 0?"":`, retryOf: ${s}`,m=Date.now();if(pt(this).debug(`[${c}] sending request`,ki({retryOfRequestLogID:s,method:i.method,url:l,options:i,headers:a.headers})),(S=i.signal)!=null&&S.aborted)throw new yn;const g=new AbortController,p=await this.fetchWithTimeout(l,a,u,g).catch(Gm),C=Date.now();if(p instanceof globalThis.Error){const A=`retrying, ${n} attempts remaining`;if((y=i.signal)!=null&&y.aborted)throw new yn;const I=$m(p)||/timed? ?out/i.test(String(p)+("cause"in p?String(p.cause):""));if(n)return pt(this).info(`[${c}] connection ${I?"timed out":"failed"} - ${A}`),pt(this).debug(`[${c}] connection ${I?"timed out":"failed"} (${A})`,ki({retryOfRequestLogID:s,url:l,durationMs:C-m,message:p.message})),this.retryRequest(i,n,s??c);throw pt(this).info(`[${c}] connection ${I?"timed out":"failed"} - error; no more retries left`),pt(this).debug(`[${c}] connection ${I?"timed out":"failed"} (error; no more retries left)`,ki({retryOfRequestLogID:s,url:l,durationMs:C-m,message:p.message})),I?new Dp:new Hh({cause:p})}const O=[...p.headers.entries()].filter(([A])=>A==="x-request-id").map(([A,I])=>", "+A+": "+JSON.stringify(I)).join(""),x=`[${c}${d}${O}] ${a.method} ${l} ${p.ok?"succeeded":"failed"} with status ${p.status} in ${C-m}ms`;if(!p.ok){const A=await this.shouldRetry(p);if(n&&A){const T=`retrying, ${n} attempts remaining`;return await eD(p.body),pt(this).info(`${x} - ${T}`),pt(this).debug(`[${c}] response error (${T})`,ki({retryOfRequestLogID:s,url:p.url,status:p.status,headers:p.headers,durationMs:C-m})),this.retryRequest(i,n,s??c,p.headers)}const I=A?"error; no more retries left":"error; not retryable";pt(this).info(`${x} - ${I}`);const U=await p.text().catch(T=>Gm(T).message),j=KO(U),E=j?void 0:U;throw pt(this).debug(`[${c}] response error (${I})`,ki({retryOfRequestLogID:s,url:p.url,status:p.status,headers:p.headers,message:E,durationMs:Date.now()-m})),this.makeStatusError(p.status,j,E,p.headers)}return pt(this).info(x),pt(this).debug(`[${c}] response start`,ki({retryOfRequestLogID:s,url:p.url,status:p.status,headers:p.headers,durationMs:C-m})),{response:p,options:i,controller:g,requestLogID:c,retryOfRequestLogID:s,startTime:m}}getAPIList(e,n,s){return this.requestAPIList(n,s&&"then"in s?s.then(i=>({method:"get",path:e,...i})):{method:"get",path:e,...s})}requestAPIList(e,n){const s=this.makeRequest(n,null,void 0);return new pD(this,s,e)}async fetchWithTimeout(e,n,s,i){const{signal:r,method:a,...l}=n||{},u=this._makeAbort(i);r&&r.addEventListener("abort",u,{once:!0});const c=setTimeout(u,s),d=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,m={signal:i.signal,...d?{duplex:"half"}:{},method:"GET",...l};a&&(m.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,s,i){let r;const a=i==null?void 0:i.get("retry-after-ms");if(a){const u=parseFloat(a);Number.isNaN(u)||(r=u)}const l=i==null?void 0:i.get("retry-after");if(l&&!r){const u=parseFloat(l);Number.isNaN(u)?r=Date.parse(l)-Date.now():r=u*1e3}if(!(r&&0<=r&&r<60*1e3)){const u=e.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(n,u)}return await zl(r),this.makeRequest(e,n-1,s)}calculateDefaultRetryTimeoutMillis(e,n){const r=n-e,a=Math.min(.5*Math.pow(2,r),8),l=1-Math.random()*.25;return a*l*1e3}async buildRequest(e,{retryCount:n=0}={}){const s={...e},{method:i,path:r,query:a,defaultBaseURL:l}=s,u=this.buildURL(r,a,l);"timeout"in s&&GO("timeout",s.timeout),s.timeout=s.timeout??this.timeout;const{bodyHeaders:c,body:d}=this.buildBody({options:s}),m=await this.buildHeaders({options:e,method:i,bodyHeaders:c,retryCount:n});return{req:{method:i,headers:m,...s.signal&&{signal:s.signal},...globalThis.ReadableStream&&d instanceof globalThis.ReadableStream&&{duplex:"half"},...d&&{body:d},...this.fetchOptions??{},...s.fetchOptions??{}},url:u,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:s,retryCount:i}){let r={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),r[this.idempotencyHeader]=e.idempotencyKey);const a=G([r,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...WO(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,s,e.headers]);return this.validateHeaders(a),a.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=G([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:NA(e)}:M(this,uc,"f").call(this,{body:e,headers:s})}}Zp=le,uc=new WeakMap,ig=new WeakSet,Jw=function(){return this.baseURL!=="https://api.openai.com/v1"};le.OpenAI=Zp;le.DEFAULT_TIMEOUT=6e5;le.OpenAIError=Y;le.APIError=wt;le.APIConnectionError=Hh;le.APIConnectionTimeoutError=Dp;le.APIUserAbortError=yn;le.NotFoundError=SA;le.ConflictError=bA;le.RateLimitError=wA;le.BadRequestError=vA;le.AuthenticationError=EA;le.InternalServerError=RA;le.PermissionDeniedError=TA;le.UnprocessableEntityError=AA;le.InvalidWebhookSignatureError=_o;le.toFile=TD;le.Completions=Aw;le.Chat=zp;le.Embeddings=Iw;le.Files=Ow;le.Images=kw;le.Audio=jl;le.Moderations=Lw;le.Models=Pw;le.FineTuning=Ma;le.Graders=Yp;le.VectorStores=Zh;le.Webhooks=Xw;le.Beta=Na;le.Batches=pw;le.Uploads=Wp;le.Responses=Jh;le.Realtime=Xh;le.Conversations=Hp;le.Evals=$p;le.Containers=qp;le.Skills=Wh;le.Videos=Qw;const KD=()=>{};var $E={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},QD=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const i=t[n++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=t[n++];e[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=t[n++],a=t[n++],l=t[n++],u=((i&7)<<18|(r&63)<<12|(a&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(u>>10)),e[s++]=String.fromCharCode(56320+(u&1023))}else{const r=t[n++],a=t[n++];e[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|a&63)}}return e.join("")},Zw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<t.length;i+=3){const r=t[i],a=i+1<t.length,l=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,d=r>>2,m=(r&3)<<4|l>>4;let g=(l&15)<<2|c>>6,p=c&63;u||(p=64,a||(g=64)),s.push(n[d],n[m],n[g],n[p])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ww(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):QD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<t.length;){const r=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,r==null||l==null||c==null||m==null)throw new YD;const g=r<<2|l>>4;if(s.push(g),c!==64){const p=l<<4&240|c>>2;if(s.push(p),m!==64){const C=c<<6&192|m;s.push(C)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class YD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const XD=function(t){const e=Ww(t);return Zw.encodeByteArray(e,!0)},rh=function(t){return XD(t).replace(/\./g,"")},e1=function(t){try{return Zw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=()=>JD().__FIREBASE_DEFAULTS__,ZD=()=>{if(typeof process>"u"||typeof $E>"u")return;const t=$E.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},eN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&e1(t[1]);return e&&JSON.parse(e)},ef=()=>{try{return KD()||WD()||ZD()||eN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},t1=t=>{var e,n;return(n=(e=ef())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},tN=t=>{const e=t1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},n1=()=>{var t;return(t=ef())==null?void 0:t.config},s1=t=>{var e;return(e=ef())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function i1(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...t};return[rh(JSON.stringify(n)),rh(JSON.stringify(a)),""].join(".")}const Ko={};function iN(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ko))Ko[e]?t.emulator.push(e):t.prod.push(e);return t}function rN(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let GE=!1;function r1(t,e){if(typeof window>"u"||typeof document>"u"||!xa(window.location.host)||Ko[t]===e||Ko[t]||GE)return;Ko[t]=e;function n(g){return`__firebase__banner__${g}`}const s="__firebase__banner",r=iN().prod.length>0;function a(){const g=document.getElementById(s);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,p){g.setAttribute("width","24"),g.setAttribute("id",p),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function c(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{GE=!0,a()},g}function d(g,p){g.setAttribute("id",p),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=rN(s),p=n("text"),C=document.getElementById(p)||document.createElement("span"),O=n("learnmore"),x=document.getElementById(O)||document.createElement("a"),S=n("preprendIcon"),y=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const A=g.element;l(A),d(x,O);const I=c();u(y,S),A.append(y,C,x,I),document.body.appendChild(A)}r?(C.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mt())}function oN(){var e;const t=(e=ef())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hN(){const t=Mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function fN(){return!oN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dN(){try{return typeof indexedDB=="object"}catch{return!1}}function mN(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var r;e(((r=i.error)==null?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN="FirebaseError";class Is extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=gN,Object.setPrototypeOf(this,Is.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ql.prototype.create)}}class ql{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},i=`${this.service}/${e}`,r=this.errors[e],a=r?pN(r,s):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new Is(i,l,s)}}function pN(t,e){return t.replace(_N,(n,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const _N=/\{\$([^}]+)}/g;function yN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function er(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const i of n){if(!s.includes(i))return!1;const r=t[i],a=e[i];if(KE(r)&&KE(a)){if(!er(r,a))return!1}else if(r!==a)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function KE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function vN(t,e){const n=new EN(t,e);return n.subscribe.bind(n)}class EN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let i;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");TN(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:s},i.next===void 0&&(i.next=Md),i.error===void 0&&(i.error=Md),i.complete===void 0&&(i.complete=Md);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Md(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(t){return t&&t._delegate?t._delegate:t}class tr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new nN;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AN(e))try{this.getOrInitializeService({instanceIdentifier:Pi})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(e=Pi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pi){return this.instances.has(e)}getOptions(e=Pi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[r,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);s===l&&a.resolve(i)}return i}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(s)??new Set;i.add(e),this.onInitCallbacks.set(s,i);const r=this.instances.get(s);return r&&e(r,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:bN(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Pi){return this.component?this.component.multipleInstances?e:Pi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bN(t){return t===Pi?void 0:t}function AN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new SN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(fe||(fe={}));const RN={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},IN=fe.INFO,CN={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},ON=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),i=CN[e];if(i)console[i](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class e_{constructor(e){this.name=e,this._logLevel=IN,this._logHandler=ON,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}}const DN=(t,e)=>e.some(n=>t instanceof n);let QE,YE;function NN(){return QE||(QE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MN(){return YE||(YE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const a1=new WeakMap,rg=new WeakMap,o1=new WeakMap,xd=new WeakMap,t_=new WeakMap;function xN(t){const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",a)},r=()=>{n(li(t.result)),i()},a=()=>{s(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&a1.set(n,t)}).catch(()=>{}),t_.set(e,t),e}function VN(t){if(rg.has(t))return;const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",a),t.removeEventListener("abort",a)},r=()=>{n(),i()},a=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",a),t.addEventListener("abort",a)});rg.set(t,e)}let ag={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return rg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||o1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return li(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kN(t){ag=t(ag)}function PN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Vd(this),e,...n);return o1.set(s,e.sort?e.sort():[e]),li(s)}:MN().includes(t)?function(...e){return t.apply(Vd(this),e),li(a1.get(this))}:function(...e){return li(t.apply(Vd(this),e))}}function LN(t){return typeof t=="function"?PN(t):(t instanceof IDBTransaction&&VN(t),DN(t,NN())?new Proxy(t,ag):t)}function li(t){if(t instanceof IDBRequest)return xN(t);if(xd.has(t))return xd.get(t);const e=LN(t);return e!==t&&(xd.set(t,e),t_.set(e,t)),e}const Vd=t=>t_.get(t);function UN(t,e,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const a=indexedDB.open(t,e),l=li(a);return s&&a.addEventListener("upgradeneeded",u=>{s(li(a.result),u.oldVersion,u.newVersion,li(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{r&&u.addEventListener("close",()=>r()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const zN=["get","getKey","getAll","getAllKeys","count"],BN=["put","add","delete","clear"],kd=new Map;function XE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(kd.get(e))return kd.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,i=BN.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||zN.includes(n)))return;const r=async function(a,...l){const u=this.transaction(a,i?"readwrite":"readonly");let c=u.store;return s&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&u.done]))[0]};return kd.set(e,r),r}kN(t=>({...t,get:(e,n,s)=>XE(e,n)||t.get(e,n,s),has:(e,n)=>!!XE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qN(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function qN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const og="@firebase/app",JE="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=new e_("@firebase/app"),HN="@firebase/app-compat",FN="@firebase/analytics-compat",$N="@firebase/analytics",GN="@firebase/app-check-compat",KN="@firebase/app-check",QN="@firebase/auth",YN="@firebase/auth-compat",XN="@firebase/database",JN="@firebase/data-connect",WN="@firebase/database-compat",ZN="@firebase/functions",eM="@firebase/functions-compat",tM="@firebase/installations",nM="@firebase/installations-compat",sM="@firebase/messaging",iM="@firebase/messaging-compat",rM="@firebase/performance",aM="@firebase/performance-compat",oM="@firebase/remote-config",lM="@firebase/remote-config-compat",uM="@firebase/storage",cM="@firebase/storage-compat",hM="@firebase/firestore",fM="@firebase/ai",dM="@firebase/firestore-compat",mM="firebase",gM="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg="[DEFAULT]",pM={[og]:"fire-core",[HN]:"fire-core-compat",[$N]:"fire-analytics",[FN]:"fire-analytics-compat",[KN]:"fire-app-check",[GN]:"fire-app-check-compat",[QN]:"fire-auth",[YN]:"fire-auth-compat",[XN]:"fire-rtdb",[JN]:"fire-data-connect",[WN]:"fire-rtdb-compat",[ZN]:"fire-fn",[eM]:"fire-fn-compat",[tM]:"fire-iid",[nM]:"fire-iid-compat",[sM]:"fire-fcm",[iM]:"fire-fcm-compat",[rM]:"fire-perf",[aM]:"fire-perf-compat",[oM]:"fire-rc",[lM]:"fire-rc-compat",[uM]:"fire-gcs",[cM]:"fire-gcs-compat",[hM]:"fire-fst",[dM]:"fire-fst-compat",[fM]:"fire-vertex","fire-js":"fire-js",[mM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah=new Map,_M=new Map,ug=new Map;function WE(t,e){try{t.container.addComponent(e)}catch(n){Ss.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function pa(t){const e=t.name;if(ug.has(e))return Ss.debug(`There were multiple attempts to register component ${e}.`),!1;ug.set(e,t);for(const n of ah.values())WE(n,t);for(const n of _M.values())WE(n,t);return!0}function n_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Rn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ui=new ql("app","Firebase",yM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new tr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ui.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va=gM;function l1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:lg,automaticDataCollectionEnabled:!0,...e},i=s.name;if(typeof i!="string"||!i)throw ui.create("bad-app-name",{appName:String(i)});if(n||(n=n1()),!n)throw ui.create("no-options");const r=ah.get(i);if(r){if(er(n,r.options)&&er(s,r.config))return r;throw ui.create("duplicate-app",{appName:i})}const a=new wN(i);for(const u of ug.values())a.addComponent(u);const l=new vM(n,s,a);return ah.set(i,l),l}function u1(t=lg){const e=ah.get(t);if(!e&&t===lg&&n1())return l1();if(!e)throw ui.create("no-app",{appName:t});return e}function ci(t,e,n){let s=pM[t]??t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),r=e.match(/\s|\//);if(i||r){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&r&&a.push("and"),r&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ss.warn(a.join(" "));return}pa(new tr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM="firebase-heartbeat-database",TM=1,pl="firebase-heartbeat-store";let Pd=null;function c1(){return Pd||(Pd=UN(EM,TM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(pl)}catch(n){console.warn(n)}}}}).catch(t=>{throw ui.create("idb-open",{originalErrorMessage:t.message})})),Pd}async function SM(t){try{const n=(await c1()).transaction(pl),s=await n.objectStore(pl).get(h1(t));return await n.done,s}catch(e){if(e instanceof Is)Ss.warn(e.message);else{const n=ui.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ss.warn(n.message)}}}async function ZE(t,e){try{const s=(await c1()).transaction(pl,"readwrite");await s.objectStore(pl).put(e,h1(t)),await s.done}catch(n){if(n instanceof Is)Ss.warn(n.message);else{const s=ui.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ss.warn(s.message)}}}function h1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=1024,AM=30;class wM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new IM(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=eT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>AM){const a=CM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ss.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=eT(),{heartbeatsToSend:s,unsentEntries:i}=RM(this._heartbeatsCache.heartbeats),r=rh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return Ss.warn(n),""}}}function eT(){return new Date().toISOString().substring(0,10)}function RM(t,e=bM){const n=[];let s=t.slice();for(const i of t){const r=n.find(a=>a.agent===i.agent);if(r){if(r.dates.push(i.date),tT(n)>e){r.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),tT(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class IM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dN()?mN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await SM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return ZE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return ZE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function tT(t){return rh(JSON.stringify({version:2,heartbeats:t})).length}function CM(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(t){pa(new tr("platform-logger",e=>new jN(e),"PRIVATE")),pa(new tr("heartbeat",e=>new wM(e),"PRIVATE")),ci(og,JE,t),ci(og,JE,"esm2020"),ci("fire-js","")}OM("");var DM="firebase",NM="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ci(DM,NM,"app");function f1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MM=f1,d1=new ql("auth","Firebase",f1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh=new e_("@firebase/auth");function xM(t,...e){oh.logLevel<=fe.WARN&&oh.warn(`Auth (${Va}): ${t}`,...e)}function cc(t,...e){oh.logLevel<=fe.ERROR&&oh.error(`Auth (${Va}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(t,...e){throw i_(t,...e)}function On(t,...e){return i_(t,...e)}function s_(t,e,n){const s={...MM(),[e]:n};return new ql("auth","Firebase",s).create(e,{appName:t.name})}function Ki(t){return s_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function VM(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Kn(t,"argument-error"),s_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function i_(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return d1.create(t,...e)}function te(t,e,...n){if(!t)throw i_(e,...n)}function hs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw cc(e),new Error(e)}function bs(t,e){t||hs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function kM(){return nT()==="http:"||nT()==="https:"}function nT(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kM()||uN()||"connection"in navigator)?navigator.onLine:!0}function LM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,n){this.shortDelay=e,this.longDelay=n,bs(n>e,"Short delay should be less than long delay!"),this.isMobile=aN()||cN()}get(){return PM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(t,e){bs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],BM=new Fl(3e4,6e4);function a_(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ka(t,e,n,s,i={}){return g1(t,i,async()=>{let r={},a={};s&&(e==="GET"?a=s:r={body:JSON.stringify(s)});const l=Hl({key:t.config.apiKey,...a}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:u,...r};return lN()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&xa(t.emulatorConfig.host)&&(c.credentials="include"),m1.fetch()(await p1(t,t.config.apiHost,n,l),c)})}async function g1(t,e,n){t._canInitEmulator=!1;const s={...UM,...e};try{const i=new qM(t),r=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await r.json();if("needConfirmation"in a)throw xu(t,"account-exists-with-different-credential",a);if(r.ok&&!("errorMessage"in a))return a;{const l=r.ok?a.errorMessage:a.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw xu(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw xu(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw xu(t,"user-disabled",a);const d=s[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw s_(t,d,c);Kn(t,d)}}catch(i){if(i instanceof Is)throw i;Kn(t,"network-request-failed",{message:String(i)})}}async function jM(t,e,n,s,i={}){const r=await ka(t,e,n,s,i);return"mfaPendingCredential"in r&&Kn(t,"multi-factor-auth-required",{_serverResponse:r}),r}async function p1(t,e,n,s){const i=`${e}${n}?${s}`,r=t,a=r.config.emulator?r_(t.config,i):`${t.config.apiScheme}://${i}`;return zM.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(a).toString():a}class qM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(On(this.auth,"network-request-failed")),BM.get())})}}function xu(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=On(t,e,s);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HM(t,e){return ka(t,"POST","/v1/accounts:delete",e)}async function lh(t,e){return ka(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FM(t,e=!1){const n=Sn(t),s=await n.getIdToken(e),i=o_(s);te(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const r=typeof i.firebase=="object"?i.firebase:void 0,a=r==null?void 0:r.sign_in_provider;return{claims:i,token:s,authTime:Qo(Ld(i.auth_time)),issuedAtTime:Qo(Ld(i.iat)),expirationTime:Qo(Ld(i.exp)),signInProvider:a||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function Ld(t){return Number(t)*1e3}function o_(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return cc("JWT malformed, contained fewer than 3 sections"),null;try{const i=e1(n);return i?JSON.parse(i):(cc("Failed to decode base64 JWT payload"),null)}catch(i){return cc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function sT(t){const e=o_(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _l(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Is&&$M(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function $M({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qo(this.lastLoginAt),this.creationTime=Qo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uh(t){var m;const e=t.auth,n=await t.getIdToken(),s=await _l(t,lh(e,{idToken:n}));te(s==null?void 0:s.users.length,e,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const r=(m=i.providerUserInfo)!=null&&m.length?_1(i.providerUserInfo):[],a=QM(t.providerData,r),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new hg(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function KM(t){const e=Sn(t);await uh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function QM(t,e){return[...t.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function _1(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YM(t,e){const n=await g1(t,{},async()=>{const s=Hl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,a=await p1(t,i,"/v1/token",`key=${r}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:s};return t.emulatorConfig&&xa(t.emulatorConfig.host)&&(u.credentials="include"),m1.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function XM(t,e){return ka(t,"POST","/v2/accounts:revokeToken",a_(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=sT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:i,expiresIn:r}=await YM(e,n);this.updateTokensAndExpiration(s,i,Number(r))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:i,expirationTime:r}=n,a=new Zr;return s&&(te(typeof s=="string","internal-error",{appName:e}),a.refreshToken=s),i&&(te(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),r&&(te(typeof r=="number","internal-error",{appName:e}),a.expirationTime=r),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zr,this.toJSON())}_performRefresh(){return hs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class In{constructor({uid:e,auth:n,stsTokenManager:s,...i}){this.providerId="firebase",this.proactiveRefresh=new GM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new hg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await _l(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return FM(this,e)}reload(){return KM(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new In({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await uh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rn(this.auth.app))return Promise.reject(Ki(this.auth));const e=await this.getIdToken();return await _l(this,HM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,i=n.email??void 0,r=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:m,emailVerified:g,isAnonymous:p,providerData:C,stsTokenManager:O}=n;te(m&&O,e,"internal-error");const x=Zr.fromJSON(this.name,O);te(typeof m=="string",e,"internal-error"),Ls(s,e.name),Ls(i,e.name),te(typeof g=="boolean",e,"internal-error"),te(typeof p=="boolean",e,"internal-error"),Ls(r,e.name),Ls(a,e.name),Ls(l,e.name),Ls(u,e.name),Ls(c,e.name),Ls(d,e.name);const S=new In({uid:m,auth:e,email:i,emailVerified:g,displayName:s,isAnonymous:p,photoURL:a,phoneNumber:r,tenantId:l,stsTokenManager:x,createdAt:c,lastLoginAt:d});return C&&Array.isArray(C)&&(S.providerData=C.map(y=>({...y}))),u&&(S._redirectEventId=u),S}static async _fromIdTokenResponse(e,n,s=!1){const i=new Zr;i.updateFromServerResponse(n);const r=new In({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await uh(r),r}static async _fromGetAccountInfoResponse(e,n,s){const i=n.users[0];te(i.localId!==void 0,"internal-error");const r=i.providerUserInfo!==void 0?_1(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(r!=null&&r.length),l=new Zr;l.updateFromIdToken(s);const u=new In({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:a}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new hg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(r!=null&&r.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT=new Map;function fs(t){bs(t instanceof Function,"Expected a class definition");let e=iT.get(t);return e?(bs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,iT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}y1.type="NONE";const rT=y1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(t,e,n){return`firebase:${t}:${e}:${n}`}class ea{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:i,name:r}=this.auth;this.fullUserKey=hc(this.userKey,i.apiKey,r),this.fullPersistenceKey=hc("persistence",i.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await lh(this.auth,{idToken:e}).catch(()=>{});return n?In._fromGetAccountInfoResponse(this.auth,n,e):null}return In._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new ea(fs(rT),e,s);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let r=i[0]||fs(rT);const a=hc(s,e.config.apiKey,e.name);let l=null;for(const c of n)try{const d=await c._get(a);if(d){let m;if(typeof d=="string"){const g=await lh(e,{idToken:d}).catch(()=>{});if(!g)break;m=await In._fromGetAccountInfoResponse(e,g,d)}else m=In._fromJSON(e,d);c!==r&&(l=m),r=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!u.length?new ea(r,e,s):(r=u[0],l&&await r._set(a,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==r)try{await c._remove(a)}catch{}})),new ea(r,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(S1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(v1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(A1(e))return"Blackberry";if(w1(e))return"Webos";if(E1(e))return"Safari";if((e.includes("chrome/")||T1(e))&&!e.includes("edge/"))return"Chrome";if(b1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function v1(t=Mt()){return/firefox\//i.test(t)}function E1(t=Mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function T1(t=Mt()){return/crios\//i.test(t)}function S1(t=Mt()){return/iemobile/i.test(t)}function b1(t=Mt()){return/android/i.test(t)}function A1(t=Mt()){return/blackberry/i.test(t)}function w1(t=Mt()){return/webos/i.test(t)}function l_(t=Mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function JM(t=Mt()){var e;return l_(t)&&!!((e=window.navigator)!=null&&e.standalone)}function WM(){return hN()&&document.documentMode===10}function R1(t=Mt()){return l_(t)||b1(t)||w1(t)||A1(t)||/windows phone/i.test(t)||S1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(t,e=[]){let n;switch(t){case"Browser":n=aT(Mt());break;case"Worker":n=`${aT(Mt())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Va}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=r=>new Promise((a,l)=>{try{const u=e(r);a(u)}catch(u){l(u)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ex(t,e={}){return ka(t,"GET","/v2/passwordPolicy",a_(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=6;class nx{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??tx,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,n,s,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oT(this),this.idTokenSubscription=new oT(this),this.beforeStateQueue=new ZM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=d1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fs(n)),this._initializationPromise=this.queue(async()=>{var s,i,r;if(!this._deleted&&(this.persistenceManager=await ea.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)==null?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await lh(this,{idToken:e}),s=await In._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Rn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)==null?void 0:r._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await uh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=LM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rn(this.app))return Promise.reject(Ki(this));const n=e?Sn(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rn(this.app)?Promise.reject(Ki(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rn(this.app)?Promise.reject(Ki(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ex(this),n=new nx(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ql("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await XM(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fs(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await ea.create(this,[fs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,i){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(l,this,"internal-error"),l.then(()=>{a||r(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,s,i);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=I1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(Rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&xM(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function tf(t){return Sn(t)}class oT{constructor(e){this.auth=e,this.observer=null,this.addObserver=vN(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let u_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ix(t){u_=t}function rx(t){return u_.loadJS(t)}function ax(){return u_.gapiScript}function ox(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(t,e){const n=n_(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),r=n.getOptions();if(er(r,e??{}))return i;Kn(i,"already-initialized")}return n.initialize({options:e})}function ux(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(fs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function cx(t,e,n){const s=tf(t);te(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!1,r=C1(e),{host:a,port:l}=hx(e),u=l===null?"":`:${l}`,c={url:`${r}//${a}${u}/`},d=Object.freeze({host:a,port:l,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){te(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),te(er(c,s.config.emulator)&&er(d,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=c,s.emulatorConfig=d,s.settings.appVerificationDisabledForTesting=!0,xa(a)?(i1(`${r}//${a}${u}`),r1("Auth",!0)):fx()}function C1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function hx(t){const e=C1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const r=i[1];return{host:r,port:lT(s.substr(r.length+1))}}else{const[r,a]=s.split(":");return{host:r,port:lT(a)}}}function lT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function fx(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hs("not implemented")}_getIdTokenResponse(e){return hs("not implemented")}_linkToIdToken(e,n){return hs("not implemented")}_getReauthenticationResolver(e){return hs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ta(t,e){return jM(t,"POST","/v1/accounts:signInWithIdp",a_(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx="http://localhost";class nr extends O1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new nr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Kn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i,...r}=n;if(!s||!i)return null;const a=new nr(s,i);return a.idToken=r.idToken||void 0,a.accessToken=r.accessToken||void 0,a.secret=r.secret,a.nonce=r.nonce,a.pendingToken=r.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return ta(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,ta(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ta(e,n)}buildRequest(){const e={requestUri:dx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Hl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l extends c_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends $l{constructor(){super("facebook.com")}static credential(e){return nr._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fs.credential(e.oauthAccessToken)}catch{return null}}}Fs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends $l{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return nr._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return os.credential(n,s)}catch{return null}}}os.GOOGLE_SIGN_IN_METHOD="google.com";os.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends $l{constructor(){super("github.com")}static credential(e){return nr._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $s.credential(e.oauthAccessToken)}catch{return null}}}$s.GITHUB_SIGN_IN_METHOD="github.com";$s.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends $l{constructor(){super("twitter.com")}static credential(e,n){return nr._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Gs.credential(n,s)}catch{return null}}}Gs.TWITTER_SIGN_IN_METHOD="twitter.com";Gs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,i=!1){const r=await In._fromIdTokenResponse(e,s,i),a=uT(s);return new _a({user:r,providerId:a,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const i=uT(s);return new _a({user:e,providerId:i,_tokenResponse:s,operationType:n})}}function uT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch extends Is{constructor(e,n,s,i){super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,ch.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,i){return new ch(e,n,s,i)}}function D1(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?ch._fromErrorAndOperation(t,r,e,s):r})}async function mx(t,e,n=!1){const s=await _l(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return _a._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gx(t,e,n=!1){const{auth:s}=t;if(Rn(s.app))return Promise.reject(Ki(s));const i="reauthenticate";try{const r=await _l(t,D1(s,i,e,t),n);te(r.idToken,s,"internal-error");const a=o_(r.idToken);te(a,s,"internal-error");const{sub:l}=a;return te(t.uid===l,s,"user-mismatch"),_a._forOperation(t,i,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&Kn(s,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function px(t,e,n=!1){if(Rn(t.app))return Promise.reject(Ki(t));const s="signIn",i=await D1(t,s,e),r=await _a._fromIdTokenResponse(t,s,i);return n||await t._updateCurrentUser(r.user),r}function _x(t,e,n,s){return Sn(t).onIdTokenChanged(e,n,s)}function yx(t,e,n){return Sn(t).beforeAuthStateChanged(e,n)}function vx(t,e,n,s){return Sn(t).onAuthStateChanged(e,n,s)}function Ex(t){return Sn(t).signOut()}const hh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(hh,"1"),this.storage.removeItem(hh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=1e3,Sx=10;class M1 extends N1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=R1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&e(n,i,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const s=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(s);!n&&this.localCache[s]===a||this.notifyListeners(s,a)},r=this.storage.getItem(s);WM()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Sx):i()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Tx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}M1.type="LOCAL";const bx=M1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1 extends N1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}x1.type="SESSION";const V1=x1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const s=new nf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:i,data:r}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const l=Array.from(a).map(async c=>c(n.origin,r)),u=await Ax(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,a;return new Promise((l,u)=>{const c=h_("",20);i.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},s);a={messageChannel:i,onMessage(m){const g=m;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(d),r=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),l(g.data.response);break;default:clearTimeout(d),clearTimeout(r),u(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(){return window}function Rx(t){Hn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(){return typeof Hn().WorkerGlobalScope<"u"&&typeof Hn().importScripts=="function"}async function Ix(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Cx(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Ox(){return k1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1="firebaseLocalStorageDb",Dx=1,fh="firebaseLocalStorage",L1="fbase_key";class Gl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function sf(t,e){return t.transaction([fh],e?"readwrite":"readonly").objectStore(fh)}function Nx(){const t=indexedDB.deleteDatabase(P1);return new Gl(t).toPromise()}function fg(){const t=indexedDB.open(P1,Dx);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(fh,{keyPath:L1})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(fh)?e(s):(s.close(),await Nx(),e(await fg()))})})}async function cT(t,e,n){const s=sf(t,!0).put({[L1]:e,value:n});return new Gl(s).toPromise()}async function Mx(t,e){const n=sf(t,!1).get(e),s=await new Gl(n).toPromise();return s===void 0?null:s.value}function hT(t,e){const n=sf(t,!0).delete(e);return new Gl(n).toPromise()}const xx=800,Vx=3;class U1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>Vx)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return k1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nf._getInstance(Ox()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await Ix(),!this.activeServiceWorker)return;this.sender=new wx(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Cx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fg();return await cT(e,hh,"1"),await hT(e,hh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>cT(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>Mx(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>hT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const r=sf(i,!1).getAll();return new Gl(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:r}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}U1.type="LOCAL";const kx=U1;new Fl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(t,e){return e?fs(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_ extends O1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ta(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ta(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ta(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Px(t){return px(t.auth,new f_(t),t.bypassAuthState)}function Lx(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),gx(n,new f_(t),t.bypassAuthState)}async function Ux(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),mx(n,new f_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,n,s,i,r=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:i,tenantId:r,error:a,type:l}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:s,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Px;case"linkViaPopup":case"linkViaRedirect":return Ux;case"reauthViaPopup":case"reauthViaRedirect":return Lx;default:Kn(this.auth,"internal-error")}}resolve(e){bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=new Fl(2e3,1e4);async function Bx(t,e,n){if(Rn(t.app))return Promise.reject(On(t,"operation-not-supported-in-this-environment"));const s=tf(t);VM(t,e,c_);const i=z1(s,n);return new Bi(s,"signInViaPopup",e,i).executeNotNull()}class Bi extends B1{constructor(e,n,s,i,r){super(e,n,i,r),this.provider=s,this.authWindow=null,this.pollId=null,Bi.currentPopupAction&&Bi.currentPopupAction.cancel(),Bi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){bs(this.filter.length===1,"Popup operations only handle one event");const e=h_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(On(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(On(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(On(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zx.get())};e()}}Bi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx="pendingRedirect",fc=new Map;class qx extends B1{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=fc.get(this.auth._key());if(!e){try{const s=await Hx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}fc.set(this.auth._key(),e)}return this.bypassAuthState||fc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Hx(t,e){const n=Gx(e),s=$x(t);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function Fx(t,e){fc.set(t._key(),e)}function $x(t){return fs(t._redirectPersistence)}function Gx(t){return hc(jx,t.config.apiKey,t.name)}async function Kx(t,e,n=!1){if(Rn(t.app))return Promise.reject(Ki(t));const s=tf(t),i=z1(s,e),a=await new qx(s,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await s._persistUserIfCurrent(a.user),await s._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx=10*60*1e3;class Yx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Xx(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!j1(e)){const i=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(On(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Qx&&this.cachedEventUids.clear(),this.cachedEventUids.has(fT(e))}saveEventToCache(e){this.cachedEventUids.add(fT(e)),this.lastProcessedEventTime=Date.now()}}function fT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function j1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Xx(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return j1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jx(t,e={}){return ka(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zx=/^https?/;async function e4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Jx(t);for(const n of e)try{if(t4(n))return}catch{}Kn(t,"unauthorized-domain")}function t4(t){const e=cg(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===s}if(!Zx.test(n))return!1;if(Wx.test(t))return s===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=new Fl(3e4,6e4);function dT(){const t=Hn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function s4(t){return new Promise((e,n)=>{var i,r,a;function s(){dT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dT(),n(On(t,"network-request-failed"))},timeout:n4.get()})}if((r=(i=Hn().gapi)==null?void 0:i.iframes)!=null&&r.Iframe)e(gapi.iframes.getContext());else if((a=Hn().gapi)!=null&&a.load)s();else{const l=ox("iframefcb");return Hn()[l]=()=>{gapi.load?s():n(On(t,"network-request-failed"))},rx(`${ax()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw dc=null,e})}let dc=null;function i4(t){return dc=dc||s4(t),dc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=new Fl(5e3,15e3),a4="__/auth/iframe",o4="emulator/auth/iframe",l4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},u4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function c4(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?r_(e,o4):`https://${t.config.authDomain}/${a4}`,s={apiKey:e.apiKey,appName:t.name,v:Va},i=u4.get(t.config.apiHost);i&&(s.eid=i);const r=t._getFrameworks();return r.length&&(s.fw=r.join(",")),`${n}?${Hl(s).slice(1)}`}async function h4(t){const e=await i4(t),n=Hn().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:c4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:l4,dontclear:!0},s=>new Promise(async(i,r)=>{await s.restyle({setHideOnLeave:!1});const a=On(t,"network-request-failed"),l=Hn().setTimeout(()=>{r(a)},r4.get());function u(){Hn().clearTimeout(l),i(s)}s.ping(u).then(u,()=>{r(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},d4=500,m4=600,g4="_blank",p4="http://localhost";class mT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _4(t,e,n,s=d4,i=m4){const r=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const u={...f4,width:s.toString(),height:i.toString(),top:r,left:a},c=Mt().toLowerCase();n&&(l=T1(c)?g4:n),v1(c)&&(e=e||p4,u.scrollbars="yes");const d=Object.entries(u).reduce((g,[p,C])=>`${g}${p}=${C},`,"");if(JM(c)&&l!=="_self")return y4(e||"",l),new mT(null);const m=window.open(e||"",l,d);te(m,t,"popup-blocked");try{m.focus()}catch{}return new mT(m)}function y4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4="__/auth/handler",E4="emulator/auth/handler",T4=encodeURIComponent("fac");async function gT(t,e,n,s,i,r){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Va,eventId:i};if(e instanceof c_){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",yN(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,m]of Object.entries({}))a[d]=m}if(e instanceof $l){const d=e.getScopes().filter(m=>m!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await t._getAppCheckToken(),c=u?`#${T4}=${encodeURIComponent(u)}`:"";return`${S4(t)}?${Hl(l).slice(1)}${c}`}function S4({config:t}){return t.emulator?r_(t,E4):`https://${t.authDomain}/${v4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud="webStorageSupport";class b4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=V1,this._completeRedirectFn=Kx,this._overrideRedirectResult=Fx}async _openPopup(e,n,s,i){var a;bs((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const r=await gT(e,n,s,cg(),i);return _4(e,r,h_())}async _openRedirect(e,n,s,i){await this._originValidation(e);const r=await gT(e,n,s,cg(),i);return Rx(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:r}=this.eventManagers[n];return i?Promise.resolve(i):(bs(r,"If manager is not set, promise should be"),r)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await h4(e),s=new Yx(e);return n.register("authEvent",i=>(te(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ud,{type:Ud},i=>{var a;const r=(a=i==null?void 0:i[0])==null?void 0:a[Ud];r!==void 0&&n(!!r),Kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=e4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return R1()||E1()||l_()}}const A4=b4;var pT="@firebase/auth",_T="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function I4(t){pa(new tr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=s.options;te(a&&!a.includes(":"),"invalid-api-key",{appName:s.name});const u={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:I1(t)},c=new sx(s,i,r,u);return ux(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),pa(new tr("auth-internal",e=>{const n=tf(e.getProvider("auth").getImmediate());return(s=>new w4(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ci(pT,_T,R4(t)),ci(pT,_T,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4=5*60,O4=s1("authIdTokenMaxAge")||C4;let yT=null;const D4=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>O4)return;const i=n==null?void 0:n.token;yT!==i&&(yT=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function N4(t=u1()){const e=n_(t,"auth");if(e.isInitialized())return e.getImmediate();const n=lx(t,{popupRedirectResolver:A4,persistence:[kx,bx,V1]}),s=s1("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(s,location.origin);if(location.origin===r.origin){const a=D4(r.toString());yx(n,a,()=>a(n.currentUser)),_x(n,l=>a(l))}}const i=t1("auth");return i&&cx(n,`http://${i}`),n}function M4(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}ix({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=i=>{const r=On("internal-error");r.customData=i,n(r)},s.type="text/javascript",s.charset="UTF-8",M4().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});I4("Browser");var vT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hi,q1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,v){function T(){}T.prototype=v.prototype,E.F=v.prototype,E.prototype=new T,E.prototype.constructor=E,E.D=function(b,w,D){for(var R=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)R[Ge-2]=arguments[Ge];return v.prototype[w].apply(b,R)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,T){T||(T=0);const b=Array(16);if(typeof v=="string")for(var w=0;w<16;++w)b[w]=v.charCodeAt(T++)|v.charCodeAt(T++)<<8|v.charCodeAt(T++)<<16|v.charCodeAt(T++)<<24;else for(w=0;w<16;++w)b[w]=v[T++]|v[T++]<<8|v[T++]<<16|v[T++]<<24;v=E.g[0],T=E.g[1],w=E.g[2];let D=E.g[3],R;R=v+(D^T&(w^D))+b[0]+3614090360&4294967295,v=T+(R<<7&4294967295|R>>>25),R=D+(w^v&(T^w))+b[1]+3905402710&4294967295,D=v+(R<<12&4294967295|R>>>20),R=w+(T^D&(v^T))+b[2]+606105819&4294967295,w=D+(R<<17&4294967295|R>>>15),R=T+(v^w&(D^v))+b[3]+3250441966&4294967295,T=w+(R<<22&4294967295|R>>>10),R=v+(D^T&(w^D))+b[4]+4118548399&4294967295,v=T+(R<<7&4294967295|R>>>25),R=D+(w^v&(T^w))+b[5]+1200080426&4294967295,D=v+(R<<12&4294967295|R>>>20),R=w+(T^D&(v^T))+b[6]+2821735955&4294967295,w=D+(R<<17&4294967295|R>>>15),R=T+(v^w&(D^v))+b[7]+4249261313&4294967295,T=w+(R<<22&4294967295|R>>>10),R=v+(D^T&(w^D))+b[8]+1770035416&4294967295,v=T+(R<<7&4294967295|R>>>25),R=D+(w^v&(T^w))+b[9]+2336552879&4294967295,D=v+(R<<12&4294967295|R>>>20),R=w+(T^D&(v^T))+b[10]+4294925233&4294967295,w=D+(R<<17&4294967295|R>>>15),R=T+(v^w&(D^v))+b[11]+2304563134&4294967295,T=w+(R<<22&4294967295|R>>>10),R=v+(D^T&(w^D))+b[12]+1804603682&4294967295,v=T+(R<<7&4294967295|R>>>25),R=D+(w^v&(T^w))+b[13]+4254626195&4294967295,D=v+(R<<12&4294967295|R>>>20),R=w+(T^D&(v^T))+b[14]+2792965006&4294967295,w=D+(R<<17&4294967295|R>>>15),R=T+(v^w&(D^v))+b[15]+1236535329&4294967295,T=w+(R<<22&4294967295|R>>>10),R=v+(w^D&(T^w))+b[1]+4129170786&4294967295,v=T+(R<<5&4294967295|R>>>27),R=D+(T^w&(v^T))+b[6]+3225465664&4294967295,D=v+(R<<9&4294967295|R>>>23),R=w+(v^T&(D^v))+b[11]+643717713&4294967295,w=D+(R<<14&4294967295|R>>>18),R=T+(D^v&(w^D))+b[0]+3921069994&4294967295,T=w+(R<<20&4294967295|R>>>12),R=v+(w^D&(T^w))+b[5]+3593408605&4294967295,v=T+(R<<5&4294967295|R>>>27),R=D+(T^w&(v^T))+b[10]+38016083&4294967295,D=v+(R<<9&4294967295|R>>>23),R=w+(v^T&(D^v))+b[15]+3634488961&4294967295,w=D+(R<<14&4294967295|R>>>18),R=T+(D^v&(w^D))+b[4]+3889429448&4294967295,T=w+(R<<20&4294967295|R>>>12),R=v+(w^D&(T^w))+b[9]+568446438&4294967295,v=T+(R<<5&4294967295|R>>>27),R=D+(T^w&(v^T))+b[14]+3275163606&4294967295,D=v+(R<<9&4294967295|R>>>23),R=w+(v^T&(D^v))+b[3]+4107603335&4294967295,w=D+(R<<14&4294967295|R>>>18),R=T+(D^v&(w^D))+b[8]+1163531501&4294967295,T=w+(R<<20&4294967295|R>>>12),R=v+(w^D&(T^w))+b[13]+2850285829&4294967295,v=T+(R<<5&4294967295|R>>>27),R=D+(T^w&(v^T))+b[2]+4243563512&4294967295,D=v+(R<<9&4294967295|R>>>23),R=w+(v^T&(D^v))+b[7]+1735328473&4294967295,w=D+(R<<14&4294967295|R>>>18),R=T+(D^v&(w^D))+b[12]+2368359562&4294967295,T=w+(R<<20&4294967295|R>>>12),R=v+(T^w^D)+b[5]+4294588738&4294967295,v=T+(R<<4&4294967295|R>>>28),R=D+(v^T^w)+b[8]+2272392833&4294967295,D=v+(R<<11&4294967295|R>>>21),R=w+(D^v^T)+b[11]+1839030562&4294967295,w=D+(R<<16&4294967295|R>>>16),R=T+(w^D^v)+b[14]+4259657740&4294967295,T=w+(R<<23&4294967295|R>>>9),R=v+(T^w^D)+b[1]+2763975236&4294967295,v=T+(R<<4&4294967295|R>>>28),R=D+(v^T^w)+b[4]+1272893353&4294967295,D=v+(R<<11&4294967295|R>>>21),R=w+(D^v^T)+b[7]+4139469664&4294967295,w=D+(R<<16&4294967295|R>>>16),R=T+(w^D^v)+b[10]+3200236656&4294967295,T=w+(R<<23&4294967295|R>>>9),R=v+(T^w^D)+b[13]+681279174&4294967295,v=T+(R<<4&4294967295|R>>>28),R=D+(v^T^w)+b[0]+3936430074&4294967295,D=v+(R<<11&4294967295|R>>>21),R=w+(D^v^T)+b[3]+3572445317&4294967295,w=D+(R<<16&4294967295|R>>>16),R=T+(w^D^v)+b[6]+76029189&4294967295,T=w+(R<<23&4294967295|R>>>9),R=v+(T^w^D)+b[9]+3654602809&4294967295,v=T+(R<<4&4294967295|R>>>28),R=D+(v^T^w)+b[12]+3873151461&4294967295,D=v+(R<<11&4294967295|R>>>21),R=w+(D^v^T)+b[15]+530742520&4294967295,w=D+(R<<16&4294967295|R>>>16),R=T+(w^D^v)+b[2]+3299628645&4294967295,T=w+(R<<23&4294967295|R>>>9),R=v+(w^(T|~D))+b[0]+4096336452&4294967295,v=T+(R<<6&4294967295|R>>>26),R=D+(T^(v|~w))+b[7]+1126891415&4294967295,D=v+(R<<10&4294967295|R>>>22),R=w+(v^(D|~T))+b[14]+2878612391&4294967295,w=D+(R<<15&4294967295|R>>>17),R=T+(D^(w|~v))+b[5]+4237533241&4294967295,T=w+(R<<21&4294967295|R>>>11),R=v+(w^(T|~D))+b[12]+1700485571&4294967295,v=T+(R<<6&4294967295|R>>>26),R=D+(T^(v|~w))+b[3]+2399980690&4294967295,D=v+(R<<10&4294967295|R>>>22),R=w+(v^(D|~T))+b[10]+4293915773&4294967295,w=D+(R<<15&4294967295|R>>>17),R=T+(D^(w|~v))+b[1]+2240044497&4294967295,T=w+(R<<21&4294967295|R>>>11),R=v+(w^(T|~D))+b[8]+1873313359&4294967295,v=T+(R<<6&4294967295|R>>>26),R=D+(T^(v|~w))+b[15]+4264355552&4294967295,D=v+(R<<10&4294967295|R>>>22),R=w+(v^(D|~T))+b[6]+2734768916&4294967295,w=D+(R<<15&4294967295|R>>>17),R=T+(D^(w|~v))+b[13]+1309151649&4294967295,T=w+(R<<21&4294967295|R>>>11),R=v+(w^(T|~D))+b[4]+4149444226&4294967295,v=T+(R<<6&4294967295|R>>>26),R=D+(T^(v|~w))+b[11]+3174756917&4294967295,D=v+(R<<10&4294967295|R>>>22),R=w+(v^(D|~T))+b[2]+718787259&4294967295,w=D+(R<<15&4294967295|R>>>17),R=T+(D^(w|~v))+b[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(w+(R<<21&4294967295|R>>>11))&4294967295,E.g[2]=E.g[2]+w&4294967295,E.g[3]=E.g[3]+D&4294967295}s.prototype.v=function(E,v){v===void 0&&(v=E.length);const T=v-this.blockSize,b=this.C;let w=this.h,D=0;for(;D<v;){if(w==0)for(;D<=T;)i(this,E,D),D+=this.blockSize;if(typeof E=="string"){for(;D<v;)if(b[w++]=E.charCodeAt(D++),w==this.blockSize){i(this,b),w=0;break}}else for(;D<v;)if(b[w++]=E[D++],w==this.blockSize){i(this,b),w=0;break}}this.h=w,this.o+=v},s.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;v=this.o*8;for(var T=E.length-8;T<E.length;++T)E[T]=v&255,v/=256;for(this.v(E),E=Array(16),v=0,T=0;T<4;++T)for(let b=0;b<32;b+=8)E[v++]=this.g[T]>>>b&255;return E};function r(E,v){var T=l;return Object.prototype.hasOwnProperty.call(T,E)?T[E]:T[E]=v(E)}function a(E,v){this.h=v;const T=[];let b=!0;for(let w=E.length-1;w>=0;w--){const D=E[w]|0;b&&D==v||(T[w]=D,b=!1)}this.g=T}var l={};function u(E){return-128<=E&&E<128?r(E,function(v){return new a([v|0],v<0?-1:0)}):new a([E|0],E<0?-1:0)}function c(E){if(isNaN(E)||!isFinite(E))return m;if(E<0)return x(c(-E));const v=[];let T=1;for(let b=0;E>=T;b++)v[b]=E/T|0,T*=4294967296;return new a(v,0)}function d(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return x(d(E.substring(1),v));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=c(Math.pow(v,8));let b=m;for(let D=0;D<E.length;D+=8){var w=Math.min(8,E.length-D);const R=parseInt(E.substring(D,D+w),v);w<8?(w=c(Math.pow(v,w)),b=b.j(w).add(c(R))):(b=b.j(T),b=b.add(c(R)))}return b}var m=u(0),g=u(1),p=u(16777216);t=a.prototype,t.m=function(){if(O(this))return-x(this).m();let E=0,v=1;for(let T=0;T<this.g.length;T++){const b=this.i(T);E+=(b>=0?b:4294967296+b)*v,v*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(C(this))return"0";if(O(this))return"-"+x(this).toString(E);const v=c(Math.pow(E,6));var T=this;let b="";for(;;){const w=I(T,v).g;T=S(T,w.j(v));let D=((T.g.length>0?T.g[0]:T.h)>>>0).toString(E);if(T=w,C(T))return D+b;for(;D.length<6;)D="0"+D;b=D+b}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function C(E){if(E.h!=0)return!1;for(let v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function O(E){return E.h==-1}t.l=function(E){return E=S(this,E),O(E)?-1:C(E)?0:1};function x(E){const v=E.g.length,T=[];for(let b=0;b<v;b++)T[b]=~E.g[b];return new a(T,~E.h).add(g)}t.abs=function(){return O(this)?x(this):this},t.add=function(E){const v=Math.max(this.g.length,E.g.length),T=[];let b=0;for(let w=0;w<=v;w++){let D=b+(this.i(w)&65535)+(E.i(w)&65535),R=(D>>>16)+(this.i(w)>>>16)+(E.i(w)>>>16);b=R>>>16,D&=65535,R&=65535,T[w]=R<<16|D}return new a(T,T[T.length-1]&-2147483648?-1:0)};function S(E,v){return E.add(x(v))}t.j=function(E){if(C(this)||C(E))return m;if(O(this))return O(E)?x(this).j(x(E)):x(x(this).j(E));if(O(E))return x(this.j(x(E)));if(this.l(p)<0&&E.l(p)<0)return c(this.m()*E.m());const v=this.g.length+E.g.length,T=[];for(var b=0;b<2*v;b++)T[b]=0;for(b=0;b<this.g.length;b++)for(let w=0;w<E.g.length;w++){const D=this.i(b)>>>16,R=this.i(b)&65535,Ge=E.i(w)>>>16,It=E.i(w)&65535;T[2*b+2*w]+=R*It,y(T,2*b+2*w),T[2*b+2*w+1]+=D*It,y(T,2*b+2*w+1),T[2*b+2*w+1]+=R*Ge,y(T,2*b+2*w+1),T[2*b+2*w+2]+=D*Ge,y(T,2*b+2*w+2)}for(E=0;E<v;E++)T[E]=T[2*E+1]<<16|T[2*E];for(E=v;E<2*v;E++)T[E]=0;return new a(T,0)};function y(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function A(E,v){this.g=E,this.h=v}function I(E,v){if(C(v))throw Error("division by zero");if(C(E))return new A(m,m);if(O(E))return v=I(x(E),v),new A(x(v.g),x(v.h));if(O(v))return v=I(E,x(v)),new A(x(v.g),v.h);if(E.g.length>30){if(O(E)||O(v))throw Error("slowDivide_ only works with positive integers.");for(var T=g,b=v;b.l(E)<=0;)T=U(T),b=U(b);var w=j(T,1),D=j(b,1);for(b=j(b,2),T=j(T,2);!C(b);){var R=D.add(b);R.l(E)<=0&&(w=w.add(T),D=R),b=j(b,1),T=j(T,1)}return v=S(E,w.j(v)),new A(w,v)}for(w=m;E.l(v)>=0;){for(T=Math.max(1,Math.floor(E.m()/v.m())),b=Math.ceil(Math.log(T)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),D=c(T),R=D.j(v);O(R)||R.l(E)>0;)T-=b,D=c(T),R=D.j(v);C(D)&&(D=g),w=w.add(D),E=S(E,R)}return new A(w,E)}t.B=function(E){return I(this,E).h},t.and=function(E){const v=Math.max(this.g.length,E.g.length),T=[];for(let b=0;b<v;b++)T[b]=this.i(b)&E.i(b);return new a(T,this.h&E.h)},t.or=function(E){const v=Math.max(this.g.length,E.g.length),T=[];for(let b=0;b<v;b++)T[b]=this.i(b)|E.i(b);return new a(T,this.h|E.h)},t.xor=function(E){const v=Math.max(this.g.length,E.g.length),T=[];for(let b=0;b<v;b++)T[b]=this.i(b)^E.i(b);return new a(T,this.h^E.h)};function U(E){const v=E.g.length+1,T=[];for(let b=0;b<v;b++)T[b]=E.i(b)<<1|E.i(b-1)>>>31;return new a(T,E.h)}function j(E,v){const T=v>>5;v%=32;const b=E.g.length-T,w=[];for(let D=0;D<b;D++)w[D]=v>0?E.i(D+T)>>>v|E.i(D+T+1)<<32-v:E.i(D+T);return new a(w,E.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,q1=s,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=d,hi=a}).apply(typeof vT<"u"?vT:typeof self<"u"?self:typeof window<"u"?window:{});var Vu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var H1,Ro,F1,mc,dg,$1,G1,K1;(function(){var t,e=Object.defineProperty;function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vu=="object"&&Vu];for(var h=0;h<o.length;++h){var f=o[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var s=n(this);function i(o,h){if(h)e:{var f=s;o=o.split(".");for(var _=0;_<o.length-1;_++){var N=o[_];if(!(N in f))break e;f=f[N]}o=o[o.length-1],_=f[o],h=h(_),h!=_&&h!=null&&e(f,o,{configurable:!0,writable:!0,value:h})}}i("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(o){return o||function(h){var f=[],_;for(_ in h)Object.prototype.hasOwnProperty.call(h,_)&&f.push([_,h[_]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var r=r||{},a=this||self;function l(o){var h=typeof o;return h=="object"&&o!=null||h=="function"}function u(o,h,f){return o.call.apply(o.bind,arguments)}function c(o,h,f){return c=u,c.apply(null,arguments)}function d(o,h){var f=Array.prototype.slice.call(arguments,1);return function(){var _=f.slice();return _.push.apply(_,arguments),o.apply(this,_)}}function m(o,h){function f(){}f.prototype=h.prototype,o.Z=h.prototype,o.prototype=new f,o.prototype.constructor=o,o.Ob=function(_,N,V){for(var q=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)q[ue-2]=arguments[ue];return h.prototype[N].apply(_,q)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function p(o){const h=o.length;if(h>0){const f=Array(h);for(let _=0;_<h;_++)f[_]=o[_];return f}return[]}function C(o,h){for(let _=1;_<arguments.length;_++){const N=arguments[_];var f=typeof N;if(f=f!="object"?f:N?Array.isArray(N)?"array":f:"null",f=="array"||f=="object"&&typeof N.length=="number"){f=o.length||0;const V=N.length||0;o.length=f+V;for(let q=0;q<V;q++)o[f+q]=N[q]}else o.push(N)}}class O{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function x(o){a.setTimeout(()=>{throw o},0)}function S(){var o=E;let h=null;return o.g&&(h=o.g,o.g=o.g.next,o.g||(o.h=null),h.next=null),h}class y{constructor(){this.h=this.g=null}add(h,f){const _=A.get();_.set(h,f),this.h?this.h.next=_:this.g=_,this.h=_}}var A=new O(()=>new I,o=>o.reset());class I{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let U,j=!1,E=new y,v=()=>{const o=Promise.resolve(void 0);U=()=>{o.then(T)}};function T(){for(var o;o=S();){try{o.h.call(o.g)}catch(f){x(f)}var h=A;h.j(o),h.h<100&&(h.h++,o.next=h.g,h.g=o)}j=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function w(o,h){this.type=o,this.g=this.target=h,this.defaultPrevented=!1}w.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,h=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};a.addEventListener("test",f,h),a.removeEventListener("test",f,h)}catch{}return o}();function R(o){return/^[\s\xa0]*$/.test(o)}function Ge(o,h){w.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,h)}m(Ge,w),Ge.prototype.init=function(o,h){const f=this.type=o.type,_=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=h,h=o.relatedTarget,h||(f=="mouseover"?h=o.fromElement:f=="mouseout"&&(h=o.toElement)),this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&Ge.Z.h.call(this)},Ge.prototype.h=function(){Ge.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var It="closure_listenable_"+(Math.random()*1e6|0),F=0;function oe(o,h,f,_,N){this.listener=o,this.proxy=null,this.src=h,this.type=f,this.capture=!!_,this.ha=N,this.key=++F,this.da=this.fa=!1}function ne(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function ye(o,h,f){for(const _ in o)h.call(f,o[_],_,o)}function H(o,h){for(const f in o)h.call(void 0,o[f],f,o)}function J(o){const h={};for(const f in o)h[f]=o[f];return h}const Pe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function at(o,h){let f,_;for(let N=1;N<arguments.length;N++){_=arguments[N];for(f in _)o[f]=_[f];for(let V=0;V<Pe.length;V++)f=Pe[V],Object.prototype.hasOwnProperty.call(_,f)&&(o[f]=_[f])}}function ot(o){this.src=o,this.g={},this.h=0}ot.prototype.add=function(o,h,f,_,N){const V=o.toString();o=this.g[V],o||(o=this.g[V]=[],this.h++);const q=_f(o,h,_,N);return q>-1?(h=o[q],f||(h.fa=!1)):(h=new oe(h,this.src,V,!!_,N),h.fa=f,o.push(h)),h};function Mn(o,h){const f=h.type;if(f in o.g){var _=o.g[f],N=Array.prototype.indexOf.call(_,h,void 0),V;(V=N>=0)&&Array.prototype.splice.call(_,N,1),V&&(ne(h),o.g[f].length==0&&(delete o.g[f],o.h--))}}function _f(o,h,f,_){for(let N=0;N<o.length;++N){const V=o[N];if(!V.da&&V.listener==h&&V.capture==!!f&&V.ha==_)return N}return-1}var yf="closure_lm_"+(Math.random()*1e6|0),vf={};function G_(o,h,f,_,N){if(Array.isArray(h)){for(let V=0;V<h.length;V++)G_(o,h[V],f,_,N);return null}return f=Y_(f),o&&o[It]?o.J(h,f,l(_)?!!_.capture:!1,N):pI(o,h,f,!1,_,N)}function pI(o,h,f,_,N,V){if(!h)throw Error("Invalid event type");const q=l(N)?!!N.capture:!!N;let ue=Tf(o);if(ue||(o[yf]=ue=new ot(o)),f=ue.add(h,f,_,q,V),f.proxy)return f;if(_=_I(),f.proxy=_,_.src=o,_.listener=f,o.addEventListener)D||(N=q),N===void 0&&(N=!1),o.addEventListener(h.toString(),_,N);else if(o.attachEvent)o.attachEvent(Q_(h.toString()),_);else if(o.addListener&&o.removeListener)o.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return f}function _I(){function o(f){return h.call(o.src,o.listener,f)}const h=yI;return o}function K_(o,h,f,_,N){if(Array.isArray(h))for(var V=0;V<h.length;V++)K_(o,h[V],f,_,N);else _=l(_)?!!_.capture:!!_,f=Y_(f),o&&o[It]?(o=o.i,V=String(h).toString(),V in o.g&&(h=o.g[V],f=_f(h,f,_,N),f>-1&&(ne(h[f]),Array.prototype.splice.call(h,f,1),h.length==0&&(delete o.g[V],o.h--)))):o&&(o=Tf(o))&&(h=o.g[h.toString()],o=-1,h&&(o=_f(h,f,_,N)),(f=o>-1?h[o]:null)&&Ef(f))}function Ef(o){if(typeof o!="number"&&o&&!o.da){var h=o.src;if(h&&h[It])Mn(h.i,o);else{var f=o.type,_=o.proxy;h.removeEventListener?h.removeEventListener(f,_,o.capture):h.detachEvent?h.detachEvent(Q_(f),_):h.addListener&&h.removeListener&&h.removeListener(_),(f=Tf(h))?(Mn(f,o),f.h==0&&(f.src=null,h[yf]=null)):ne(o)}}}function Q_(o){return o in vf?vf[o]:vf[o]="on"+o}function yI(o,h){if(o.da)o=!0;else{h=new Ge(h,this);const f=o.listener,_=o.ha||o.src;o.fa&&Ef(o),o=f.call(_,h)}return o}function Tf(o){return o=o[yf],o instanceof ot?o:null}var Sf="__closure_events_fn_"+(Math.random()*1e9>>>0);function Y_(o){return typeof o=="function"?o:(o[Sf]||(o[Sf]=function(h){return o.handleEvent(h)}),o[Sf])}function Ct(){b.call(this),this.i=new ot(this),this.M=this,this.G=null}m(Ct,b),Ct.prototype[It]=!0,Ct.prototype.removeEventListener=function(o,h,f,_){K_(this,o,h,f,_)};function xt(o,h){var f,_=o.G;if(_)for(f=[];_;_=_.G)f.push(_);if(o=o.M,_=h.type||h,typeof h=="string")h=new w(h,o);else if(h instanceof w)h.target=h.target||o;else{var N=h;h=new w(_,o),at(h,N)}N=!0;let V,q;if(f)for(q=f.length-1;q>=0;q--)V=h.g=f[q],N=Wl(V,_,!0,h)&&N;if(V=h.g=o,N=Wl(V,_,!0,h)&&N,N=Wl(V,_,!1,h)&&N,f)for(q=0;q<f.length;q++)V=h.g=f[q],N=Wl(V,_,!1,h)&&N}Ct.prototype.N=function(){if(Ct.Z.N.call(this),this.i){var o=this.i;for(const h in o.g){const f=o.g[h];for(let _=0;_<f.length;_++)ne(f[_]);delete o.g[h],o.h--}}this.G=null},Ct.prototype.J=function(o,h,f,_){return this.i.add(String(o),h,!1,f,_)},Ct.prototype.K=function(o,h,f,_){return this.i.add(String(o),h,!0,f,_)};function Wl(o,h,f,_){if(h=o.i.g[String(h)],!h)return!0;h=h.concat();let N=!0;for(let V=0;V<h.length;++V){const q=h[V];if(q&&!q.da&&q.capture==f){const ue=q.listener,Ze=q.ha||q.src;q.fa&&Mn(o.i,q),N=ue.call(Ze,_)!==!1&&N}}return N&&!_.defaultPrevented}function vI(o,h){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=c(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:a.setTimeout(o,h||0)}function X_(o){o.g=vI(()=>{o.g=null,o.i&&(o.i=!1,X_(o))},o.l);const h=o.h;o.h=null,o.m.apply(null,h)}class EI extends b{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:X_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ba(o){b.call(this),this.h=o,this.g={}}m(Ba,b);var J_=[];function W_(o){ye(o.g,function(h,f){this.g.hasOwnProperty(f)&&Ef(h)},o),o.g={}}Ba.prototype.N=function(){Ba.Z.N.call(this),W_(this)},Ba.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bf=a.JSON.stringify,TI=a.JSON.parse,SI=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function Z_(){}function ey(){}var ja={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Af(){w.call(this,"d")}m(Af,w);function wf(){w.call(this,"c")}m(wf,w);var wi={},ty=null;function Zl(){return ty=ty||new Ct}wi.Ia="serverreachability";function ny(o){w.call(this,wi.Ia,o)}m(ny,w);function qa(o){const h=Zl();xt(h,new ny(h))}wi.STAT_EVENT="statevent";function sy(o,h){w.call(this,wi.STAT_EVENT,o),this.stat=h}m(sy,w);function Vt(o){const h=Zl();xt(h,new sy(h,o))}wi.Ja="timingevent";function iy(o,h){w.call(this,wi.Ja,o),this.size=h}m(iy,w);function Ha(o,h){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},h)}function Fa(){this.g=!0}Fa.prototype.ua=function(){this.g=!1};function bI(o,h,f,_,N,V){o.info(function(){if(o.g)if(V){var q="",ue=V.split("&");for(let Re=0;Re<ue.length;Re++){var Ze=ue[Re].split("=");if(Ze.length>1){const lt=Ze[0];Ze=Ze[1];const Vn=lt.split("_");q=Vn.length>=2&&Vn[1]=="type"?q+(lt+"="+Ze+"&"):q+(lt+"=redacted&")}}}else q=null;else q=V;return"XMLHTTP REQ ("+_+") [attempt "+N+"]: "+h+`
`+f+`
`+q})}function AI(o,h,f,_,N,V,q){o.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+N+"]: "+h+`
`+f+`
`+V+" "+q})}function gr(o,h,f,_){o.info(function(){return"XMLHTTP TEXT ("+h+"): "+RI(o,f)+(_?" "+_:"")})}function wI(o,h){o.info(function(){return"TIMEOUT: "+h})}Fa.prototype.info=function(){};function RI(o,h){if(!o.g)return h;if(!h)return null;try{const V=JSON.parse(h);if(V){for(o=0;o<V.length;o++)if(Array.isArray(V[o])){var f=V[o];if(!(f.length<2)){var _=f[1];if(Array.isArray(_)&&!(_.length<1)){var N=_[0];if(N!="noop"&&N!="stop"&&N!="close")for(let q=1;q<_.length;q++)_[q]=""}}}}return bf(V)}catch{return h}}var eu={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ry={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ay;function Rf(){}m(Rf,Z_),Rf.prototype.g=function(){return new XMLHttpRequest},ay=new Rf;function $a(o){return encodeURIComponent(String(o))}function II(o){var h=1;o=o.split(":");const f=[];for(;h>0&&o.length;)f.push(o.shift()),h--;return o.length&&f.push(o.join(":")),f}function Cs(o,h,f,_){this.j=o,this.i=h,this.l=f,this.S=_||1,this.V=new Ba(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new oy}function oy(){this.i=null,this.g="",this.h=!1}var ly={},If={};function Cf(o,h,f){o.M=1,o.A=nu(xn(h)),o.u=f,o.R=!0,uy(o,null)}function uy(o,h){o.F=Date.now(),tu(o),o.B=xn(o.A);var f=o.B,_=o.S;Array.isArray(_)||(_=[String(_)]),Sy(f.i,"t",_),o.C=0,f=o.j.L,o.h=new oy,o.g=By(o.j,f?h:null,!o.u),o.P>0&&(o.O=new EI(c(o.Y,o,o.g),o.P)),h=o.V,f=o.g,_=o.ba;var N="readystatechange";Array.isArray(N)||(N&&(J_[0]=N.toString()),N=J_);for(let V=0;V<N.length;V++){const q=G_(f,N[V],_||h.handleEvent,!1,h.h||h);if(!q)break;h.g[q.key]=q}h=o.J?J(o.J):{},o.u?(o.v||(o.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,h)):(o.v="GET",o.g.ea(o.B,o.v,null,h)),qa(),bI(o.i,o.v,o.B,o.l,o.S,o.u)}Cs.prototype.ba=function(o){o=o.target;const h=this.O;h&&Ns(o)==3?h.j():this.Y(o)},Cs.prototype.Y=function(o){try{if(o==this.g)e:{const ue=Ns(this.g),Ze=this.g.ya(),Re=this.g.ca();if(!(ue<3)&&(ue!=3||this.g&&(this.h.h||this.g.la()||Oy(this.g)))){this.K||ue!=4||Ze==7||(Ze==8||Re<=0?qa(3):qa(2)),Of(this);var h=this.g.ca();this.X=h;var f=CI(this);if(this.o=h==200,AI(this.i,this.v,this.B,this.l,this.S,ue,h),this.o){if(this.U&&!this.L){t:{if(this.g){var _,N=this.g;if((_=N.g?N.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(_)){var V=_;break t}}V=null}if(o=V)gr(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Df(this,o);else{this.o=!1,this.m=3,Vt(12),Ri(this),Ga(this);break e}}if(this.R){o=!0;let lt;for(;!this.K&&this.C<f.length;)if(lt=OI(this,f),lt==If){ue==4&&(this.m=4,Vt(14),o=!1),gr(this.i,this.l,null,"[Incomplete Response]");break}else if(lt==ly){this.m=4,Vt(15),gr(this.i,this.l,f,"[Invalid Chunk]"),o=!1;break}else gr(this.i,this.l,lt,null),Df(this,lt);if(cy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ue!=4||f.length!=0||this.h.h||(this.m=1,Vt(16),o=!1),this.o=this.o&&o,!o)gr(this.i,this.l,f,"[Invalid Chunked Response]"),Ri(this),Ga(this);else if(f.length>0&&!this.W){this.W=!0;var q=this.j;q.g==this&&q.aa&&!q.P&&(q.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),Uf(q),q.P=!0,Vt(11))}}else gr(this.i,this.l,f,null),Df(this,f);ue==4&&Ri(this),this.o&&!this.K&&(ue==4?Py(this.j,this):(this.o=!1,tu(this)))}else HI(this.g),h==400&&f.indexOf("Unknown SID")>0?(this.m=3,Vt(12)):(this.m=0,Vt(13)),Ri(this),Ga(this)}}}catch{}finally{}};function CI(o){if(!cy(o))return o.g.la();const h=Oy(o.g);if(h==="")return"";let f="";const _=h.length,N=Ns(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return Ri(o),Ga(o),"";o.h.i=new a.TextDecoder}for(let V=0;V<_;V++)o.h.h=!0,f+=o.h.i.decode(h[V],{stream:!(N&&V==_-1)});return h.length=0,o.h.g+=f,o.C=0,o.h.g}function cy(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function OI(o,h){var f=o.C,_=h.indexOf(`
`,f);return _==-1?If:(f=Number(h.substring(f,_)),isNaN(f)?ly:(_+=1,_+f>h.length?If:(h=h.slice(_,_+f),o.C=_+f,h)))}Cs.prototype.cancel=function(){this.K=!0,Ri(this)};function tu(o){o.T=Date.now()+o.H,hy(o,o.H)}function hy(o,h){if(o.D!=null)throw Error("WatchDog timer not null");o.D=Ha(c(o.aa,o),h)}function Of(o){o.D&&(a.clearTimeout(o.D),o.D=null)}Cs.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(wI(this.i,this.B),this.M!=2&&(qa(),Vt(17)),Ri(this),this.m=2,Ga(this)):hy(this,this.T-o)};function Ga(o){o.j.I==0||o.K||Py(o.j,o)}function Ri(o){Of(o);var h=o.O;h&&typeof h.dispose=="function"&&h.dispose(),o.O=null,W_(o.V),o.g&&(h=o.g,o.g=null,h.abort(),h.dispose())}function Df(o,h){try{var f=o.j;if(f.I!=0&&(f.g==o||Nf(f.h,o))){if(!o.L&&Nf(f.h,o)&&f.I==3){try{var _=f.Ba.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var N=_;if(N[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<o.F)ou(f),ru(f);else break e;Lf(f),Vt(18)}}else f.xa=N[1],0<f.xa-f.K&&N[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=Ha(c(f.Va,f),6e3));my(f.h)<=1&&f.ta&&(f.ta=void 0)}else Ci(f,11)}else if((o.L||f.g==o)&&ou(f),!R(h))for(N=f.Ba.g.parse(h),h=0;h<N.length;h++){let Re=N[h];const lt=Re[0];if(!(lt<=f.K))if(f.K=lt,Re=Re[1],f.I==2)if(Re[0]=="c"){f.M=Re[1],f.ba=Re[2];const Vn=Re[3];Vn!=null&&(f.ka=Vn,f.j.info("VER="+f.ka));const Oi=Re[4];Oi!=null&&(f.za=Oi,f.j.info("SVER="+f.za));const Ms=Re[5];Ms!=null&&typeof Ms=="number"&&Ms>0&&(_=1.5*Ms,f.O=_,f.j.info("backChannelRequestTimeoutMs_="+_)),_=f;const xs=o.g;if(xs){const uu=xs.g?xs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(uu){var V=_.h;V.g||uu.indexOf("spdy")==-1&&uu.indexOf("quic")==-1&&uu.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Mf(V,V.h),V.h=null))}if(_.G){const zf=xs.g?xs.g.getResponseHeader("X-HTTP-Session-Id"):null;zf&&(_.wa=zf,Oe(_.J,_.G,zf))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-o.F,f.j.info("Handshake RTT: "+f.T+"ms")),_=f;var q=o;if(_.na=zy(_,_.L?_.ba:null,_.W),q.L){gy(_.h,q);var ue=q,Ze=_.O;Ze&&(ue.H=Ze),ue.D&&(Of(ue),tu(ue)),_.g=q}else Vy(_);f.i.length>0&&au(f)}else Re[0]!="stop"&&Re[0]!="close"||Ci(f,7);else f.I==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?Ci(f,7):Pf(f):Re[0]!="noop"&&f.l&&f.l.qa(Re),f.A=0)}}qa(4)}catch{}}var DI=class{constructor(o,h){this.g=o,this.map=h}};function fy(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function dy(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function my(o){return o.h?1:o.g?o.g.size:0}function Nf(o,h){return o.h?o.h==h:o.g?o.g.has(h):!1}function Mf(o,h){o.g?o.g.add(h):o.h=h}function gy(o,h){o.h&&o.h==h?o.h=null:o.g&&o.g.has(h)&&o.g.delete(h)}fy.prototype.cancel=function(){if(this.i=py(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function py(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let h=o.i;for(const f of o.g.values())h=h.concat(f.G);return h}return p(o.i)}var _y=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function NI(o,h){if(o){o=o.split("&");for(let f=0;f<o.length;f++){const _=o[f].indexOf("=");let N,V=null;_>=0?(N=o[f].substring(0,_),V=o[f].substring(_+1)):N=o[f],h(N,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Os(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;o instanceof Os?(this.l=o.l,Ka(this,o.j),this.o=o.o,this.g=o.g,Qa(this,o.u),this.h=o.h,xf(this,by(o.i)),this.m=o.m):o&&(h=String(o).match(_y))?(this.l=!1,Ka(this,h[1]||"",!0),this.o=Ya(h[2]||""),this.g=Ya(h[3]||"",!0),Qa(this,h[4]),this.h=Ya(h[5]||"",!0),xf(this,h[6]||"",!0),this.m=Ya(h[7]||"")):(this.l=!1,this.i=new Ja(null,this.l))}Os.prototype.toString=function(){const o=[];var h=this.j;h&&o.push(Xa(h,yy,!0),":");var f=this.g;return(f||h=="file")&&(o.push("//"),(h=this.o)&&o.push(Xa(h,yy,!0),"@"),o.push($a(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&o.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Xa(f,f.charAt(0)=="/"?VI:xI,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Xa(f,PI)),o.join("")},Os.prototype.resolve=function(o){const h=xn(this);let f=!!o.j;f?Ka(h,o.j):f=!!o.o,f?h.o=o.o:f=!!o.g,f?h.g=o.g:f=o.u!=null;var _=o.h;if(f)Qa(h,o.u);else if(f=!!o.h){if(_.charAt(0)!="/")if(this.g&&!this.h)_="/"+_;else{var N=h.h.lastIndexOf("/");N!=-1&&(_=h.h.slice(0,N+1)+_)}if(N=_,N==".."||N==".")_="";else if(N.indexOf("./")!=-1||N.indexOf("/.")!=-1){_=N.lastIndexOf("/",0)==0,N=N.split("/");const V=[];for(let q=0;q<N.length;){const ue=N[q++];ue=="."?_&&q==N.length&&V.push(""):ue==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),_&&q==N.length&&V.push("")):(V.push(ue),_=!0)}_=V.join("/")}else _=N}return f?h.h=_:f=o.i.toString()!=="",f?xf(h,by(o.i)):f=!!o.m,f&&(h.m=o.m),h};function xn(o){return new Os(o)}function Ka(o,h,f){o.j=f?Ya(h,!0):h,o.j&&(o.j=o.j.replace(/:$/,""))}function Qa(o,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);o.u=h}else o.u=null}function xf(o,h,f){h instanceof Ja?(o.i=h,LI(o.i,o.l)):(f||(h=Xa(h,kI)),o.i=new Ja(h,o.l))}function Oe(o,h,f){o.i.set(h,f)}function nu(o){return Oe(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function Ya(o,h){return o?h?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Xa(o,h,f){return typeof o=="string"?(o=encodeURI(o).replace(h,MI),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function MI(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var yy=/[#\/\?@]/g,xI=/[#\?:]/g,VI=/[#\?]/g,kI=/[#\?@]/g,PI=/#/g;function Ja(o,h){this.h=this.g=null,this.i=o||null,this.j=!!h}function Ii(o){o.g||(o.g=new Map,o.h=0,o.i&&NI(o.i,function(h,f){o.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=Ja.prototype,t.add=function(o,h){Ii(this),this.i=null,o=pr(this,o);let f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(h),this.h+=1,this};function vy(o,h){Ii(o),h=pr(o,h),o.g.has(h)&&(o.i=null,o.h-=o.g.get(h).length,o.g.delete(h))}function Ey(o,h){return Ii(o),h=pr(o,h),o.g.has(h)}t.forEach=function(o,h){Ii(this),this.g.forEach(function(f,_){f.forEach(function(N){o.call(h,N,_,this)},this)},this)};function Ty(o,h){Ii(o);let f=[];if(typeof h=="string")Ey(o,h)&&(f=f.concat(o.g.get(pr(o,h))));else for(o=Array.from(o.g.values()),h=0;h<o.length;h++)f=f.concat(o[h]);return f}t.set=function(o,h){return Ii(this),this.i=null,o=pr(this,o),Ey(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[h]),this.h+=1,this},t.get=function(o,h){return o?(o=Ty(this,o),o.length>0?String(o[0]):h):h};function Sy(o,h,f){vy(o,h),f.length>0&&(o.i=null,o.g.set(pr(o,h),p(f)),o.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],h=Array.from(this.g.keys());for(let _=0;_<h.length;_++){var f=h[_];const N=$a(f);f=Ty(this,f);for(let V=0;V<f.length;V++){let q=N;f[V]!==""&&(q+="="+$a(f[V])),o.push(q)}}return this.i=o.join("&")};function by(o){const h=new Ja;return h.i=o.i,o.g&&(h.g=new Map(o.g),h.h=o.h),h}function pr(o,h){return h=String(h),o.j&&(h=h.toLowerCase()),h}function LI(o,h){h&&!o.j&&(Ii(o),o.i=null,o.g.forEach(function(f,_){const N=_.toLowerCase();_!=N&&(vy(this,_),Sy(this,N,f))},o)),o.j=h}function UI(o,h){const f=new Fa;if(a.Image){const _=new Image;_.onload=d(Ds,f,"TestLoadImage: loaded",!0,h,_),_.onerror=d(Ds,f,"TestLoadImage: error",!1,h,_),_.onabort=d(Ds,f,"TestLoadImage: abort",!1,h,_),_.ontimeout=d(Ds,f,"TestLoadImage: timeout",!1,h,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=o}else h(!1)}function zI(o,h){const f=new Fa,_=new AbortController,N=setTimeout(()=>{_.abort(),Ds(f,"TestPingServer: timeout",!1,h)},1e4);fetch(o,{signal:_.signal}).then(V=>{clearTimeout(N),V.ok?Ds(f,"TestPingServer: ok",!0,h):Ds(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(N),Ds(f,"TestPingServer: error",!1,h)})}function Ds(o,h,f,_,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),_(f)}catch{}}function BI(){this.g=new SI}function Vf(o){this.i=o.Sb||null,this.h=o.ab||!1}m(Vf,Z_),Vf.prototype.g=function(){return new su(this.i,this.h)};function su(o,h){Ct.call(this),this.H=o,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(su,Ct),t=su.prototype,t.open=function(o,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=h,this.readyState=1,Za(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(h.body=o),(this.H||a).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Wa(this)),this.readyState=0},t.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Za(this)),this.g&&(this.readyState=3,Za(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ay(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ay(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}t.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var h=o.value?o.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!o.done}))&&(this.response=this.responseText+=h)}o.done?Wa(this):Za(this),this.readyState==3&&Ay(this)}},t.Oa=function(o){this.g&&(this.response=this.responseText=o,Wa(this))},t.Na=function(o){this.g&&(this.response=o,Wa(this))},t.ga=function(){this.g&&Wa(this)};function Wa(o){o.readyState=4,o.l=null,o.j=null,o.B=null,Za(o)}t.setRequestHeader=function(o,h){this.A.append(o,h)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=h.next();return o.join(`\r
`)};function Za(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(su.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function wy(o){let h="";return ye(o,function(f,_){h+=_,h+=":",h+=f,h+=`\r
`}),h}function kf(o,h,f){e:{for(_ in f){var _=!1;break e}_=!0}_||(f=wy(f),typeof o=="string"?f!=null&&$a(f):Oe(o,h,f))}function ze(o){Ct.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(ze,Ct);var jI=/^https?$/i,qI=["POST","PUT"];t=ze.prototype,t.Fa=function(o){this.H=o},t.ea=function(o,h,f,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);h=h?h.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ay.g(),this.g.onreadystatechange=g(c(this.Ca,this));try{this.B=!0,this.g.open(h,String(o),!0),this.B=!1}catch(V){Ry(this,V);return}if(o=f||"",f=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var N in _)f.set(N,_[N]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const V of _.keys())f.set(V,_.get(V));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(f.keys()).find(V=>V.toLowerCase()=="content-type"),N=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(qI,h,void 0)>=0)||_||N||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,q]of f)this.g.setRequestHeader(V,q);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(V){Ry(this,V)}};function Ry(o,h){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=h,o.o=5,Iy(o),iu(o)}function Iy(o){o.A||(o.A=!0,xt(o,"complete"),xt(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,xt(this,"complete"),xt(this,"abort"),iu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),iu(this,!0)),ze.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Cy(this):this.Xa())},t.Xa=function(){Cy(this)};function Cy(o){if(o.h&&typeof r<"u"){if(o.v&&Ns(o)==4)setTimeout(o.Ca.bind(o),0);else if(xt(o,"readystatechange"),Ns(o)==4){o.h=!1;try{const V=o.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var _;if(_=V===0){let q=String(o.D).match(_y)[1]||null;!q&&a.self&&a.self.location&&(q=a.self.location.protocol.slice(0,-1)),_=!jI.test(q?q.toLowerCase():"")}f=_}if(f)xt(o,"complete"),xt(o,"success");else{o.o=6;try{var N=Ns(o)>2?o.g.statusText:""}catch{N=""}o.l=N+" ["+o.ca()+"]",Iy(o)}}finally{iu(o)}}}}function iu(o,h){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const f=o.g;o.g=null,h||xt(o,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ns(o){return o.g?o.g.readyState:0}t.ca=function(){try{return Ns(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(o){if(this.g){var h=this.g.responseText;return o&&h.indexOf(o)==0&&(h=h.substring(o.length)),TI(h)}};function Oy(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function HI(o){const h={};o=(o.g&&Ns(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<o.length;_++){if(R(o[_]))continue;var f=II(o[_]);const N=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const V=h[N]||[];h[N]=V,V.push(f)}H(h,function(_){return _.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function eo(o,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||h}function Dy(o){this.za=0,this.i=[],this.j=new Fa,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=eo("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=eo("baseRetryDelayMs",5e3,o),this.Za=eo("retryDelaySeedMs",1e4,o),this.Ta=eo("forwardChannelMaxRetries",2,o),this.va=eo("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new fy(o&&o.concurrentRequestLimit),this.Ba=new BI,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Dy.prototype,t.ka=8,t.I=1,t.connect=function(o,h,f,_){Vt(0),this.W=o,this.H=h||{},f&&_!==void 0&&(this.H.OSID=f,this.H.OAID=_),this.F=this.X,this.J=zy(this,null,this.W),au(this)};function Pf(o){if(Ny(o),o.I==3){var h=o.V++,f=xn(o.J);if(Oe(f,"SID",o.M),Oe(f,"RID",h),Oe(f,"TYPE","terminate"),to(o,f),h=new Cs(o,o.j,h),h.M=2,h.A=nu(xn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(h.A.toString(),"")}catch{}!f&&a.Image&&(new Image().src=h.A,f=!0),f||(h.g=By(h.j,null),h.g.ea(h.A)),h.F=Date.now(),tu(h)}Uy(o)}function ru(o){o.g&&(Uf(o),o.g.cancel(),o.g=null)}function Ny(o){ru(o),o.v&&(a.clearTimeout(o.v),o.v=null),ou(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function au(o){if(!dy(o.h)&&!o.m){o.m=!0;var h=o.Ea;U||v(),j||(U(),j=!0),E.add(h,o),o.D=0}}function FI(o,h){return my(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=h.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=Ha(c(o.Ea,o,h),Ly(o,o.D)),o.D++,!0)}t.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const N=new Cs(this,this.j,o);let V=this.o;if(this.U&&(V?(V=J(V),at(V,this.U)):V=this.U),this.u!==null||this.R||(N.J=V,V=null),this.S)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var _=this.i[f];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,h>4096){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=xy(this,N,h),f=xn(this.J),Oe(f,"RID",o),Oe(f,"CVER",22),this.G&&Oe(f,"X-HTTP-Session-Id",this.G),to(this,f),V&&(this.R?h="headers="+$a(wy(V))+"&"+h:this.u&&kf(f,this.u,V)),Mf(this.h,N),this.Ra&&Oe(f,"TYPE","init"),this.S?(Oe(f,"$req",h),Oe(f,"SID","null"),N.U=!0,Cf(N,f,null)):Cf(N,f,h),this.I=2}}else this.I==3&&(o?My(this,o):this.i.length==0||dy(this.h)||My(this))};function My(o,h){var f;h?f=h.l:f=o.V++;const _=xn(o.J);Oe(_,"SID",o.M),Oe(_,"RID",f),Oe(_,"AID",o.K),to(o,_),o.u&&o.o&&kf(_,o.u,o.o),f=new Cs(o,o.j,f,o.D+1),o.u===null&&(f.J=o.o),h&&(o.i=h.G.concat(o.i)),h=xy(o,f,1e3),f.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),Mf(o.h,f),Cf(f,_,h)}function to(o,h){o.H&&ye(o.H,function(f,_){Oe(h,_,f)}),o.l&&ye({},function(f,_){Oe(h,_,f)})}function xy(o,h,f){f=Math.min(o.i.length,f);const _=o.l?c(o.l.Ka,o.l,o):null;e:{var N=o.i;let ue=-1;for(;;){const Ze=["count="+f];ue==-1?f>0?(ue=N[0].g,Ze.push("ofs="+ue)):ue=0:Ze.push("ofs="+ue);let Re=!0;for(let lt=0;lt<f;lt++){var V=N[lt].g;const Vn=N[lt].map;if(V-=ue,V<0)ue=Math.max(0,N[lt].g-100),Re=!1;else try{V="req"+V+"_"||"";try{var q=Vn instanceof Map?Vn:Object.entries(Vn);for(const[Oi,Ms]of q){let xs=Ms;l(Ms)&&(xs=bf(Ms)),Ze.push(V+Oi+"="+encodeURIComponent(xs))}}catch(Oi){throw Ze.push(V+"type="+encodeURIComponent("_badmap")),Oi}}catch{_&&_(Vn)}}if(Re){q=Ze.join("&");break e}}q=void 0}return o=o.i.splice(0,f),h.G=o,q}function Vy(o){if(!o.g&&!o.v){o.Y=1;var h=o.Da;U||v(),j||(U(),j=!0),E.add(h,o),o.A=0}}function Lf(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=Ha(c(o.Da,o),Ly(o,o.A)),o.A++,!0)}t.Da=function(){if(this.v=null,ky(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=Ha(c(this.Wa,this),o)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Vt(10),ru(this),ky(this))};function Uf(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function ky(o){o.g=new Cs(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var h=xn(o.na);Oe(h,"RID","rpc"),Oe(h,"SID",o.M),Oe(h,"AID",o.K),Oe(h,"CI",o.F?"0":"1"),!o.F&&o.ia&&Oe(h,"TO",o.ia),Oe(h,"TYPE","xmlhttp"),to(o,h),o.u&&o.o&&kf(h,o.u,o.o),o.O&&(o.g.H=o.O);var f=o.g;o=o.ba,f.M=1,f.A=nu(xn(h)),f.u=null,f.R=!0,uy(f,o)}t.Va=function(){this.C!=null&&(this.C=null,ru(this),Lf(this),Vt(19))};function ou(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function Py(o,h){var f=null;if(o.g==h){ou(o),Uf(o),o.g=null;var _=2}else if(Nf(o.h,h))f=h.G,gy(o.h,h),_=1;else return;if(o.I!=0){if(h.o)if(_==1){f=h.u?h.u.length:0,h=Date.now()-h.F;var N=o.D;_=Zl(),xt(_,new iy(_,f)),au(o)}else Vy(o);else if(N=h.m,N==3||N==0&&h.X>0||!(_==1&&FI(o,h)||_==2&&Lf(o)))switch(f&&f.length>0&&(h=o.h,h.i=h.i.concat(f)),N){case 1:Ci(o,5);break;case 4:Ci(o,10);break;case 3:Ci(o,6);break;default:Ci(o,2)}}}function Ly(o,h){let f=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(f*=2),f*h}function Ci(o,h){if(o.j.info("Error code "+h),h==2){var f=c(o.bb,o),_=o.Ua;const N=!_;_=new Os(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ka(_,"https"),nu(_),N?UI(_.toString(),f):zI(_.toString(),f)}else Vt(2);o.I=0,o.l&&o.l.pa(h),Uy(o),Ny(o)}t.bb=function(o){o?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function Uy(o){if(o.I=0,o.ja=[],o.l){const h=py(o.h);(h.length!=0||o.i.length!=0)&&(C(o.ja,h),C(o.ja,o.i),o.h.i.length=0,p(o.i),o.i.length=0),o.l.oa()}}function zy(o,h,f){var _=f instanceof Os?xn(f):new Os(f);if(_.g!="")h&&(_.g=h+"."+_.g),Qa(_,_.u);else{var N=a.location;_=N.protocol,h=h?h+"."+N.hostname:N.hostname,N=+N.port;const V=new Os(null);_&&Ka(V,_),h&&(V.g=h),N&&Qa(V,N),f&&(V.h=f),_=V}return f=o.G,h=o.wa,f&&h&&Oe(_,f,h),Oe(_,"VER",o.ka),to(o,_),_}function By(o,h,f){if(h&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=o.Aa&&!o.ma?new ze(new Vf({ab:f})):new ze(o.ma),h.Fa(o.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function jy(){}t=jy.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function lu(){}lu.prototype.g=function(o,h){return new Qt(o,h)};function Qt(o,h){Ct.call(this),this.g=new Dy(h),this.l=o,this.h=h&&h.messageUrlParams||null,o=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(o?o["X-WebChannel-Content-Type"]=h.messageContentType:o={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(o?o["X-WebChannel-Client-Profile"]=h.sa:o={"X-WebChannel-Client-Profile":h.sa}),this.g.U=o,(o=h&&h.Qb)&&!R(o)&&(this.g.u=o),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!R(h)&&(this.g.G=h,o=this.h,o!==null&&h in o&&(o=this.h,h in o&&delete o[h])),this.j=new _r(this)}m(Qt,Ct),Qt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Qt.prototype.close=function(){Pf(this.g)},Qt.prototype.o=function(o){var h=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.v&&(f={},f.__data__=bf(o),o=f);h.i.push(new DI(h.Ya++,o)),h.I==3&&au(h)},Qt.prototype.N=function(){this.g.l=null,delete this.j,Pf(this.g),delete this.g,Qt.Z.N.call(this)};function qy(o){Af.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var h=o.__sm__;if(h){e:{for(const f in h){o=f;break e}o=void 0}(this.i=o)&&(o=this.i,h=h!==null&&o in h?h[o]:void 0),this.data=h}else this.data=o}m(qy,Af);function Hy(){wf.call(this),this.status=1}m(Hy,wf);function _r(o){this.g=o}m(_r,jy),_r.prototype.ra=function(){xt(this.g,"a")},_r.prototype.qa=function(o){xt(this.g,new qy(o))},_r.prototype.pa=function(o){xt(this.g,new Hy)},_r.prototype.oa=function(){xt(this.g,"b")},lu.prototype.createWebChannel=lu.prototype.g,Qt.prototype.send=Qt.prototype.o,Qt.prototype.open=Qt.prototype.m,Qt.prototype.close=Qt.prototype.close,K1=function(){return new lu},G1=function(){return Zl()},$1=wi,dg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},eu.NO_ERROR=0,eu.TIMEOUT=8,eu.HTTP_ERROR=6,mc=eu,ry.COMPLETE="complete",F1=ry,ey.EventType=ja,ja.OPEN="a",ja.CLOSE="b",ja.ERROR="c",ja.MESSAGE="d",Ct.prototype.listen=Ct.prototype.J,Ro=ey,ze.prototype.listenOnce=ze.prototype.K,ze.prototype.getLastError=ze.prototype.Ha,ze.prototype.getLastErrorCode=ze.prototype.ya,ze.prototype.getStatus=ze.prototype.ca,ze.prototype.getResponseJson=ze.prototype.La,ze.prototype.getResponseText=ze.prototype.la,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Fa,H1=ze}).apply(typeof Vu<"u"?Vu:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dt.UNAUTHENTICATED=new Dt(null),Dt.GOOGLE_CREDENTIALS=new Dt("google-credentials-uid"),Dt.FIRST_PARTY=new Dt("first-party-uid"),Dt.MOCK_USER=new Dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pa="12.9.0";function x4(t){Pa=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr=new e_("@firebase/firestore");function Or(){return sr.logLevel}function $(t,...e){if(sr.logLevel<=fe.DEBUG){const n=e.map(d_);sr.debug(`Firestore (${Pa}): ${t}`,...n)}}function As(t,...e){if(sr.logLevel<=fe.ERROR){const n=e.map(d_);sr.error(`Firestore (${Pa}): ${t}`,...n)}}function ir(t,...e){if(sr.logLevel<=fe.WARN){const n=e.map(d_);sr.warn(`Firestore (${Pa}): ${t}`,...n)}}function d_(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,Q1(t,s,n)}function Q1(t,e,n){let s=`FIRESTORE (${Pa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw As(s),new Error(s)}function Te(t,e,n,s){let i="Unexpected state";typeof n=="string"?i=n:s=n,t||Q1(e,i,s)}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends Is{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class V4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Dt.UNAUTHENTICATED))}shutdown(){}}class k4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class P4{constructor(e){this.t=e,this.currentUser=Dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Te(this.o===void 0,42304);let s=this.i;const i=u=>this.i!==s?(s=this.i,n(u)):Promise.resolve();let r=new fi;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new fi,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const u=r;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new fi)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Te(typeof s.accessToken=="string",31837,{l:s}),new Y1(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string",2055,{h:e}),new Dt(e)}}class L4{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Dt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class U4{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new L4(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ET{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class z4{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Te(this.o===void 0,3512);const s=r=>{r.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.m;return this.m=r.token,$("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>s(r))};const i=r=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>i(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?i(r):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ET(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Te(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ET(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=B4(40);for(let r=0;r<i.length;++r)s.length<20&&i[r]<n&&(s+=e.charAt(i[r]%62))}return s}}function de(t,e){return t<e?-1:t>e?1:0}function mg(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const i=t.charAt(s),r=e.charAt(s);if(i!==r)return zd(i)===zd(r)?de(i,r):zd(i)?1:-1}return de(t.length,e.length)}const j4=55296,q4=57343;function zd(t){const e=t.charCodeAt(0);return e>=j4&&e<=q4}function ya(t,e,n){return t.length===e.length&&t.every((s,i)=>n(s,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="__name__";class Ln{constructor(e,n,s){n===void 0?n=0:n>e.length&&W(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&W(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Ln.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ln?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let i=0;i<s;i++){const r=Ln.compareSegments(e.get(i),n.get(i));if(r!==0)return r}return de(e.length,n.length)}static compareSegments(e,n){const s=Ln.isNumericId(e),i=Ln.isNumericId(n);return s&&!i?-1:!s&&i?1:s&&i?Ln.extractNumericId(e).compare(Ln.extractNumericId(n)):mg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hi.fromString(e.substring(4,e.length-2))}}class Le extends Ln{construct(e,n,s){return new Le(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Q(z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(i=>i.length>0))}return new Le(n)}static emptyPath(){return new Le([])}}const H4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends Ln{construct(e,n,s){return new St(e,n,s)}static isValidIdentifier(e){return H4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===TT}static keyField(){return new St([TT])}static fromServerFormat(e){const n=[];let s="",i=0;const r=()=>{if(s.length===0)throw new Q(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Q(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Q(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=u,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(s+=l,i++):(r(),i++)}if(r(),a)throw new Q(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new St(n)}static emptyPath(){return new St([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(Le.fromString(e))}static fromName(e){return new X(Le.fromString(e).popFirst(5))}static empty(){return new X(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Le.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new Le(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(t,e,n){if(!n)throw new Q(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $4(t,e,n,s){if(e===!0&&s===!0)throw new Q(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ST(t){if(!X.isDocumentKey(t))throw new Q(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function X1(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function g_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":W(12329,{type:typeof t})}function yl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=g_(t);throw new Q(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(t,e){const n={typeString:t};return e&&(n.value=e),n}function Kl(t,e){if(!X1(t))throw new Q(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const i=e[s].typeString,r="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const a=t[s];if(i&&typeof a!==i){n=`JSON field '${s}' must be a ${i}.`;break}if(r!==void 0&&a!==r.value){n=`Expected '${s}' field to equal '${r.value}'`;break}}if(n)throw new Q(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT=-62135596800,AT=1e6;class Me{static now(){return Me.fromMillis(Date.now())}static fromDate(e){return Me.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*AT);return new Me(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<bT)throw new Q(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/AT}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Me._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Kl(e,Me._jsonSchema))return new Me(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-bT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Me._jsonSchemaVersion="firestore/timestamp/1.0",Me._jsonSchema={type:We("string",Me._jsonSchemaVersion),seconds:We("number"),nanoseconds:We("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{static fromTimestamp(e){return new se(e)}static min(){return new se(new Me(0,0))}static max(){return new se(new Me(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl=-1;function G4(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,i=se.fromTimestamp(s===1e9?new Me(n+1,0):new Me(n,s));return new _i(i,X.empty(),e)}function K4(t){return new _i(t.readTime,t.key,vl)}class _i{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new _i(se.min(),X.empty(),vl)}static max(){return new _i(se.max(),X.empty(),vl)}}function Q4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class X4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function La(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==Y4)throw t;$("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&W(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new P((s,i)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(s,i)},this.catchCallback=r=>{this.wrapFailure(n,r).next(s,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):P.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):P.reject(n)}static resolve(e){return new P((n,s)=>{n(e)})}static reject(e){return new P((n,s)=>{s(e)})}static waitFor(e){return new P((n,s)=>{let i=0,r=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++r,a&&r===i&&n()},u=>s(u))}),a=!0,r===i&&n()})}static or(e){let n=P.resolve(!1);for(const s of e)n=n.next(i=>i?P.resolve(i):s());return n}static forEach(e,n){const s=[];return e.forEach((i,r)=>{s.push(n.call(this,i,r))}),this.waitFor(s)}static mapArray(e,n){return new P((s,i)=>{const r=e.length,a=new Array(r);let l=0;for(let u=0;u<r;u++){const c=u;n(e[c]).next(d=>{a[c]=d,++l,l===r&&s(a)},d=>i(d))}})}static doWhile(e,n){return new P((s,i)=>{const r=()=>{e()===!0?n().next(()=>{r()},i):s()};r()})}}function J4(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ua(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}rf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_=-1;function af(t){return t==null}function dh(t){return t===0&&1/t==-1/0}function W4(t){return typeof t=="number"&&Number.isInteger(t)&&!dh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="";function Z4(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=wT(e)),e=eV(t.get(n),e);return wT(e)}function eV(t,e){let n=e;const s=t.length;for(let i=0;i<s;i++){const r=t.charAt(i);switch(r){case"\0":n+="";break;case J1:n+="";break;default:n+=r}}return n}function wT(t){return t+J1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function hr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function W1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.comparator=e,this.root=n||vt.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vt.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ku(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ku(this.root,e,this.comparator,!1)}getReverseIterator(){return new ku(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ku(this.root,e,this.comparator,!0)}}class ku{constructor(e,n,s,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?s(e.key,n):1,n&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vt{constructor(e,n,s,i,r){this.key=e,this.value=n,this.color=s??vt.RED,this.left=i??vt.EMPTY,this.right=r??vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,i,r){return new vt(e??this.key,n??this.value,s??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let i=this;const r=s(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,n,s),null):r===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return vt.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw W(43730,{key:this.key,value:this.value});if(this.right.isRed())throw W(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw W(27949);return e+(this.isRed()?0:1)}}vt.EMPTY=null,vt.RED=!0,vt.BLACK=!1;vt.EMPTY=new class{constructor(){this.size=0}get key(){throw W(57766)}get value(){throw W(16141)}get color(){throw W(16727)}get left(){throw W(29726)}get right(){throw W(36894)}copy(e,n,s,i,r){return this}insert(e,n,s){return new vt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new IT(this.data.getIterator())}getIteratorFrom(e){return new IT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof it)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new it(this.comparator);return n.data=e,n}}class IT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new Cn([])}unionWith(e){let n=new it(St.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ya(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new Z1("Invalid base64 string: "+r):r}}(e);return new Rt(n)}static fromUint8Array(e){const n=function(i){let r="";for(let a=0;a<i.length;++a)r+=String.fromCharCode(i[a]);return r}(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const tV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yi(t){if(Te(!!t,39018),typeof t=="string"){let e=0;const n=tV.exec(t);if(Te(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:He(t.seconds),nanos:He(t.nanos)}}function He(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vi(t){return typeof t=="string"?Rt.fromBase64String(t):Rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR="server_timestamp",tR="__type__",nR="__previous_value__",sR="__local_write_time__";function __(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[tR])==null?void 0:s.stringValue)===eR}function of(t){const e=t.mapValue.fields[nR];return __(e)?of(e):e}function El(t){const e=yi(t.mapValue.fields[sR].timestampValue);return new Me(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,n,s,i,r,a,l,u,c,d,m){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=d,this.apiKey=m}}const mh="(default)";class Tl{constructor(e,n){this.projectId=e,this.database=n||mh}static empty(){return new Tl("","")}get isDefaultDatabase(){return this.database===mh}isEqual(e){return e instanceof Tl&&e.projectId===this.projectId&&e.database===this.database}}function sV(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Q(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tl(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR="__type__",iV="__max__",Pu={mapValue:{}},rR="__vector__",gh="value";function Ei(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?__(t)?4:aV(t)?9007199254740991:rV(t)?10:11:W(28295,{value:t})}function Qn(t,e){if(t===e)return!0;const n=Ei(t);if(n!==Ei(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return El(t).isEqual(El(e));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const a=yi(i.timestampValue),l=yi(r.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,r){return vi(i.bytesValue).isEqual(vi(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,r){return He(i.geoPointValue.latitude)===He(r.geoPointValue.latitude)&&He(i.geoPointValue.longitude)===He(r.geoPointValue.longitude)}(t,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return He(i.integerValue)===He(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const a=He(i.doubleValue),l=He(r.doubleValue);return a===l?dh(a)===dh(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return ya(t.arrayValue.values||[],e.arrayValue.values||[],Qn);case 10:case 11:return function(i,r){const a=i.mapValue.fields||{},l=r.mapValue.fields||{};if(RT(a)!==RT(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Qn(a[u],l[u])))return!1;return!0}(t,e);default:return W(52216,{left:t})}}function Sl(t,e){return(t.values||[]).find(n=>Qn(n,e))!==void 0}function va(t,e){if(t===e)return 0;const n=Ei(t),s=Ei(e);if(n!==s)return de(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return function(r,a){const l=He(r.integerValue||r.doubleValue),u=He(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return CT(t.timestampValue,e.timestampValue);case 4:return CT(El(t),El(e));case 5:return mg(t.stringValue,e.stringValue);case 6:return function(r,a){const l=vi(r),u=vi(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(r,a){const l=r.split("/"),u=a.split("/");for(let c=0;c<l.length&&c<u.length;c++){const d=de(l[c],u[c]);if(d!==0)return d}return de(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,a){const l=de(He(r.latitude),He(a.latitude));return l!==0?l:de(He(r.longitude),He(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return OT(t.arrayValue,e.arrayValue);case 10:return function(r,a){var g,p,C,O;const l=r.fields||{},u=a.fields||{},c=(g=l[gh])==null?void 0:g.arrayValue,d=(p=u[gh])==null?void 0:p.arrayValue,m=de(((C=c==null?void 0:c.values)==null?void 0:C.length)||0,((O=d==null?void 0:d.values)==null?void 0:O.length)||0);return m!==0?m:OT(c,d)}(t.mapValue,e.mapValue);case 11:return function(r,a){if(r===Pu.mapValue&&a===Pu.mapValue)return 0;if(r===Pu.mapValue)return 1;if(a===Pu.mapValue)return-1;const l=r.fields||{},u=Object.keys(l),c=a.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let m=0;m<u.length&&m<d.length;++m){const g=mg(u[m],d[m]);if(g!==0)return g;const p=va(l[u[m]],c[d[m]]);if(p!==0)return p}return de(u.length,d.length)}(t.mapValue,e.mapValue);default:throw W(23264,{he:n})}}function CT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);const n=yi(t),s=yi(e),i=de(n.seconds,s.seconds);return i!==0?i:de(n.nanos,s.nanos)}function OT(t,e){const n=t.values||[],s=e.values||[];for(let i=0;i<n.length&&i<s.length;++i){const r=va(n[i],s[i]);if(r)return r}return de(n.length,s.length)}function Ea(t){return gg(t)}function gg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=yi(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return vi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",i=!0;for(const r of n.values||[])i?i=!1:s+=",",s+=gg(r);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let i="{",r=!0;for(const a of s)r?r=!1:i+=",",i+=`${a}:${gg(n.fields[a])}`;return i+"}"}(t.mapValue):W(61005,{value:t})}function gc(t){switch(Ei(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=of(t);return e?16+gc(e):16;case 5:return 2*t.stringValue.length;case 6:return vi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((i,r)=>i+gc(r),0)}(t.arrayValue);case 10:case 11:return function(s){let i=0;return hr(s.fields,(r,a)=>{i+=r.length+gc(a)}),i}(t.mapValue);default:throw W(13486,{value:t})}}function pg(t){return!!t&&"integerValue"in t}function y_(t){return!!t&&"arrayValue"in t}function DT(t){return!!t&&"nullValue"in t}function NT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pc(t){return!!t&&"mapValue"in t}function rV(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[iR])==null?void 0:s.stringValue)===rR}function Yo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return hr(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Yo(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Yo(t.arrayValue.values[n]);return e}return{...t}}function aV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===iV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.value=e}static empty(){return new pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!pc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yo(n)}setAll(e){let n=St.emptyPath(),s={},i=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,s,i),s={},i=[],n=l.popLast()}a?s[l.lastSegment()]=Yo(a):i.push(l.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,s,i)}delete(e){const n=this.field(e.popLast());pc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=n.mapValue.fields[e.get(s)];pc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,s){hr(n,(i,r)=>e[i]=r);for(const i of s)delete e[i]}clone(){return new pn(Yo(this.value))}}function aR(t){const e=[];return hr(t.fields,(n,s)=>{const i=new St([n]);if(pc(s)){const r=aR(s.mapValue).fields;if(r.length===0)e.push(i);else for(const a of r)e.push(i.child(a))}else e.push(i)}),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,n,s,i,r,a,l){this.key=e,this.documentType=n,this.version=s,this.readTime=i,this.createTime=r,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Nt(e,0,se.min(),se.min(),se.min(),pn.empty(),0)}static newFoundDocument(e,n,s,i){return new Nt(e,1,n,se.min(),s,i,0)}static newNoDocument(e,n){return new Nt(e,2,n,se.min(),se.min(),pn.empty(),0)}static newUnknownDocument(e,n){return new Nt(e,3,n,se.min(),se.min(),pn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n){this.position=e,this.inclusive=n}}function MT(t,e,n){let s=0;for(let i=0;i<t.position.length;i++){const r=e[i],a=t.position[i];if(r.field.isKeyField()?s=X.comparator(X.fromName(a.referenceValue),n.key):s=va(a,n.data.field(r.field)),r.dir==="desc"&&(s*=-1),s!==0)break}return s}function xT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n="asc"){this.field=e,this.dir=n}}function oV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{}class st extends oR{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new uV(e,n,s):n==="array-contains"?new fV(e,s):n==="in"?new dV(e,s):n==="not-in"?new mV(e,s):n==="array-contains-any"?new gV(e,s):new st(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new cV(e,s):new hV(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(va(n,this.value)):n!==null&&Ei(this.value)===Ei(n)&&this.matchesComparison(va(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return W(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yn extends oR{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Yn(e,n)}matches(e){return lR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function lR(t){return t.op==="and"}function uR(t){return lV(t)&&lR(t)}function lV(t){for(const e of t.filters)if(e instanceof Yn)return!1;return!0}function _g(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+Ea(t.value);if(uR(t))return t.filters.map(e=>_g(e)).join(",");{const e=t.filters.map(n=>_g(n)).join(",");return`${t.op}(${e})`}}function cR(t,e){return t instanceof st?function(s,i){return i instanceof st&&s.op===i.op&&s.field.isEqual(i.field)&&Qn(s.value,i.value)}(t,e):t instanceof Yn?function(s,i){return i instanceof Yn&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((r,a,l)=>r&&cR(a,i.filters[l]),!0):!1}(t,e):void W(19439)}function hR(t){return t instanceof st?function(n){return`${n.field.canonicalString()} ${n.op} ${Ea(n.value)}`}(t):t instanceof Yn?function(n){return n.op.toString()+" {"+n.getFilters().map(hR).join(" ,")+"}"}(t):"Filter"}class uV extends st{constructor(e,n,s){super(e,n,s),this.key=X.fromName(s.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class cV extends st{constructor(e,n){super(e,"in",n),this.keys=fR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class hV extends st{constructor(e,n){super(e,"not-in",n),this.keys=fR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function fR(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(s=>X.fromName(s.referenceValue))}class fV extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return y_(n)&&Sl(n.arrayValue,this.value)}}class dV extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Sl(this.value.arrayValue,n)}}class mV extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(Sl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Sl(this.value.arrayValue,n)}}class gV extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!y_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Sl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e,n=null,s=[],i=[],r=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=r,this.startAt=a,this.endAt=l,this.Te=null}}function VT(t,e=null,n=[],s=[],i=null,r=null,a=null){return new pV(t,e,n,s,i,r,a)}function v_(t){const e=ie(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>_g(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),af(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Ea(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Ea(s)).join(",")),e.Te=n}return e.Te}function E_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!oV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!cR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!xT(t.startAt,e.startAt)&&xT(t.endAt,e.endAt)}function yg(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,n=null,s=[],i=[],r=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=r,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function _V(t,e,n,s,i,r,a,l){return new lf(t,e,n,s,i,r,a,l)}function T_(t){return new lf(t)}function kT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function yV(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function vV(t){return t.collectionGroup!==null}function Xo(t){const e=ie(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),n.add(r.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new it(St.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new _h(r,s))}),n.has(St.keyField().canonicalString())||e.Ie.push(new _h(St.keyField(),s))}return e.Ie}function Fn(t){const e=ie(t);return e.Ee||(e.Ee=EV(e,Xo(t))),e.Ee}function EV(t,e){if(t.limitType==="F")return VT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const r=i.dir==="desc"?"asc":"desc";return new _h(i.field,r)});const n=t.endAt?new ph(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new ph(t.startAt.position,t.startAt.inclusive):null;return VT(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function vg(t,e,n){return new lf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function uf(t,e){return E_(Fn(t),Fn(e))&&t.limitType===e.limitType}function dR(t){return`${v_(Fn(t))}|lt:${t.limitType}`}function Dr(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(i=>hR(i)).join(", ")}]`),af(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(i=>Ea(i)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(i=>Ea(i)).join(",")),`Target(${s})`}(Fn(t))}; limitType=${t.limitType})`}function cf(t,e){return e.isFoundDocument()&&function(s,i){const r=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(r):X.isDocumentKey(s.path)?s.path.isEqual(r):s.path.isImmediateParentOf(r)}(t,e)&&function(s,i){for(const r of Xo(s))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(t,e)&&function(s,i){for(const r of s.filters)if(!r.matches(i))return!1;return!0}(t,e)&&function(s,i){return!(s.startAt&&!function(a,l,u){const c=MT(a,l,u);return a.inclusive?c<=0:c<0}(s.startAt,Xo(s),i)||s.endAt&&!function(a,l,u){const c=MT(a,l,u);return a.inclusive?c>=0:c>0}(s.endAt,Xo(s),i))}(t,e)}function TV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mR(t){return(e,n)=>{let s=!1;for(const i of Xo(t)){const r=SV(i,e,n);if(r!==0)return r;s=s||i.field.isKeyField()}return 0}}function SV(t,e,n){const s=t.field.isKeyField()?X.comparator(e.key,n.key):function(r,a,l){const u=a.data.field(r),c=l.data.field(r);return u!==null&&c!==null?va(u,c):W(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return W(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[i,r]of s)if(this.equalsFn(i,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){hr(this.inner,(n,s)=>{for(const[i,r]of s)e(i,r)})}isEmpty(){return W1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV=new Ue(X.comparator);function ws(){return bV}const gR=new Ue(X.comparator);function Io(...t){let e=gR;for(const n of t)e=e.insert(n.key,n);return e}function pR(t){let e=gR;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function ji(){return Jo()}function _R(){return Jo()}function Jo(){return new fr(t=>t.toString(),(t,e)=>t.isEqual(e))}const AV=new Ue(X.comparator),wV=new it(X.comparator);function me(...t){let e=wV;for(const n of t)e=e.add(n);return e}const RV=new it(de);function IV(){return RV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dh(e)?"-0":e}}function yR(t){return{integerValue:""+t}}function vR(t,e){return W4(e)?yR(e):S_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(){this._=void 0}}function CV(t,e,n){return t instanceof yh?function(i,r){const a={fields:{[tR]:{stringValue:eR},[sR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&__(r)&&(r=of(r)),r&&(a.fields[nR]=r),{mapValue:a}}(n,e):t instanceof bl?TR(t,e):t instanceof Al?SR(t,e):function(i,r){const a=ER(i,r),l=PT(a)+PT(i.Ae);return pg(a)&&pg(i.Ae)?yR(l):S_(i.serializer,l)}(t,e)}function OV(t,e,n){return t instanceof bl?TR(t,e):t instanceof Al?SR(t,e):n}function ER(t,e){return t instanceof wl?function(s){return pg(s)||function(r){return!!r&&"doubleValue"in r}(s)}(e)?e:{integerValue:0}:null}class yh extends hf{}class bl extends hf{constructor(e){super(),this.elements=e}}function TR(t,e){const n=bR(e);for(const s of t.elements)n.some(i=>Qn(i,s))||n.push(s);return{arrayValue:{values:n}}}class Al extends hf{constructor(e){super(),this.elements=e}}function SR(t,e){let n=bR(e);for(const s of t.elements)n=n.filter(i=>!Qn(i,s));return{arrayValue:{values:n}}}class wl extends hf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function PT(t){return He(t.integerValue||t.doubleValue)}function bR(t){return y_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(e,n){this.field=e,this.transform=n}}function NV(t,e){return t.field.isEqual(e.field)&&function(s,i){return s instanceof bl&&i instanceof bl||s instanceof Al&&i instanceof Al?ya(s.elements,i.elements,Qn):s instanceof wl&&i instanceof wl?Qn(s.Ae,i.Ae):s instanceof yh&&i instanceof yh}(t.transform,e.transform)}class MV{constructor(e,n){this.version=e,this.transformResults=n}}class ps{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ps}static exists(e){return new ps(void 0,e)}static updateTime(e){return new ps(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _c(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ff{}function AR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new RR(t.key,ps.none()):new Ql(t.key,t.data,ps.none());{const n=t.data,s=pn.empty();let i=new it(St.comparator);for(let r of e.fields)if(!i.has(r)){let a=n.field(r);a===null&&r.length>1&&(r=r.popLast(),a=n.field(r)),a===null?s.delete(r):s.set(r,a),i=i.add(r)}return new dr(t.key,s,new Cn(i.toArray()),ps.none())}}function xV(t,e,n){t instanceof Ql?function(i,r,a){const l=i.value.clone(),u=UT(i.fieldTransforms,r,a.transformResults);l.setAll(u),r.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof dr?function(i,r,a){if(!_c(i.precondition,r))return void r.convertToUnknownDocument(a.version);const l=UT(i.fieldTransforms,r,a.transformResults),u=r.data;u.setAll(wR(i)),u.setAll(l),r.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(i,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Wo(t,e,n,s){return t instanceof Ql?function(r,a,l,u){if(!_c(r.precondition,a))return l;const c=r.value.clone(),d=zT(r.fieldTransforms,u,a);return c.setAll(d),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,n,s):t instanceof dr?function(r,a,l,u){if(!_c(r.precondition,a))return l;const c=zT(r.fieldTransforms,u,a),d=a.data;return d.setAll(wR(r)),d.setAll(c),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(m=>m.field))}(t,e,n,s):function(r,a,l){return _c(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function VV(t,e){let n=null;for(const s of t.fieldTransforms){const i=e.data.field(s.field),r=ER(s.transform,i||null);r!=null&&(n===null&&(n=pn.empty()),n.set(s.field,r))}return n||null}function LT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&ya(s,i,(r,a)=>NV(r,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ql extends ff{constructor(e,n,s,i=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class dr extends ff{constructor(e,n,s,i,r=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function wR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function UT(t,e,n){const s=new Map;Te(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const r=t[i],a=r.transform,l=e.data.field(r.field);s.set(r.field,OV(a,l,n[i]))}return s}function zT(t,e,n){const s=new Map;for(const i of t){const r=i.transform,a=n.data.field(i.field);s.set(i.field,CV(r,a,e))}return s}class RR extends ff{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kV extends ff{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e,n,s,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(e.key)&&xV(r,e,s[i])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Wo(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Wo(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=_R();return this.mutations.forEach(i=>{const r=e.get(i.key),a=r.overlayedDocument;let l=this.applyToLocalView(a,r.mutatedFields);l=n.has(i.key)?null:l;const u=AR(a,l);u!==null&&s.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(se.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&ya(this.mutations,e.mutations,(n,s)=>LT(n,s))&&ya(this.baseMutations,e.baseMutations,(n,s)=>LT(n,s))}}class b_{constructor(e,n,s,i){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(e,n,s){Te(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let i=function(){return AV}();const r=e.mutations;for(let a=0;a<r.length;a++)i=i.insert(r[a].key,s[a].version);return new b_(e,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke,_e;function zV(t){switch(t){case z.OK:return W(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return W(15467,{code:t})}}function IR(t){if(t===void 0)return As("GRPC error has no .code"),z.UNKNOWN;switch(t){case Ke.OK:return z.OK;case Ke.CANCELLED:return z.CANCELLED;case Ke.UNKNOWN:return z.UNKNOWN;case Ke.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case Ke.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case Ke.INTERNAL:return z.INTERNAL;case Ke.UNAVAILABLE:return z.UNAVAILABLE;case Ke.UNAUTHENTICATED:return z.UNAUTHENTICATED;case Ke.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case Ke.NOT_FOUND:return z.NOT_FOUND;case Ke.ALREADY_EXISTS:return z.ALREADY_EXISTS;case Ke.PERMISSION_DENIED:return z.PERMISSION_DENIED;case Ke.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case Ke.ABORTED:return z.ABORTED;case Ke.OUT_OF_RANGE:return z.OUT_OF_RANGE;case Ke.UNIMPLEMENTED:return z.UNIMPLEMENTED;case Ke.DATA_LOSS:return z.DATA_LOSS;default:return W(39323,{code:t})}}(_e=Ke||(Ke={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV=new hi([4294967295,4294967295],0);function BT(t){const e=BV().encode(t),n=new q1;return n.update(e),new Uint8Array(n.digest())}function jT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new hi([n,s],0),new hi([i,r],0)]}class A_{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Co(`Invalid padding: ${n}`);if(s<0)throw new Co(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Co(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Co(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=hi.fromNumber(this.ge)}ye(e,n,s){let i=e.add(n.multiply(hi.fromNumber(s)));return i.compare(jV)===1&&(i=new hi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=BT(e),[s,i]=jT(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(s,i,r);if(!this.we(a))return!1}return!0}static create(e,n,s){const i=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),a=new A_(r,i,n);return s.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=BT(e),[s,i]=jT(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(s,i,r);this.be(a)}}be(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Co extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n,s,i,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const i=new Map;return i.set(e,Yl.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new df(se.min(),i,new Ue(de),ws(),me())}}class Yl{constructor(e,n,s,i,r){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Yl(s,n,me(),me(),me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n,s,i){this.Se=e,this.removedTargetIds=n,this.key=s,this.De=i}}class CR{constructor(e,n){this.targetId=e,this.Ce=n}}class OR{constructor(e,n,s=Rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=i}}class qT{constructor(){this.ve=0,this.Fe=HT(),this.Me=Rt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=me(),n=me(),s=me();return this.Fe.forEach((i,r)=>{switch(r){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:W(38017,{changeType:r})}}),new Yl(this.Me,this.xe,e,n,s)}Ke(){this.Oe=!1,this.Fe=HT()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Te(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class qV{constructor(e){this.Ge=e,this.ze=new Map,this.je=ws(),this.He=Lu(),this.Je=Lu(),this.Ze=new Ue(de)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:W(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,s=e.Ce.count,i=this.ot(n);if(i){const r=i.target;if(yg(r))if(s===0){const a=new X(r.path);this.et(n,a,Nt.newNoDocument(a,se.min()))}else Te(s===1,20013,{expectedCount:s});else{const a=this._t(n);if(a!==s){const l=this.ut(e),u=l?this.ct(l,e,a):1;if(u!==0){this.it(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:r=0}=n;let a,l;try{a=vi(s).toUint8Array()}catch(u){if(u instanceof Z1)return ir("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new A_(a,i,r)}catch(u){return ir(u instanceof Co?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let i=0;return s.forEach(r=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;e.mightContain(l)||(this.et(n,r,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((r,a)=>{const l=this.ot(a);if(l){if(r.current&&yg(l.target)){const u=new X(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,Nt.newNoDocument(u,e))}r.Be&&(n.set(a,r.ke()),r.Ke())}});let s=me();this.Je.forEach((r,a)=>{let l=!0;a.forEachWhile(u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(r))}),this.je.forEach((r,a)=>a.setReadTime(e));const i=new df(e,n,this.Ze,this.je,s);return this.je=ws(),this.He=Lu(),this.Je=Lu(),this.Ze=new Ue(de),i}Ye(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,s),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new qT,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new it(de),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new it(de),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new qT),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Lu(){return new Ue(X.comparator)}function HT(){return new Ue(X.comparator)}const HV={asc:"ASCENDING",desc:"DESCENDING"},FV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$V={and:"AND",or:"OR"};class GV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Eg(t,e){return t.useProto3Json||af(e)?e:{value:e}}function vh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function KV(t,e){return vh(t,e.toTimestamp())}function $n(t){return Te(!!t,49232),se.fromTimestamp(function(n){const s=yi(n);return new Me(s.seconds,s.nanos)}(t))}function w_(t,e){return Tg(t,e).canonicalString()}function Tg(t,e){const n=function(i){return new Le(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function NR(t){const e=Le.fromString(t);return Te(PR(e),10190,{key:e.toString()}),e}function Sg(t,e){return w_(t.databaseId,e.path)}function Bd(t,e){const n=NR(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(xR(n))}function MR(t,e){return w_(t.databaseId,e)}function QV(t){const e=NR(t);return e.length===4?Le.emptyPath():xR(e)}function bg(t){return new Le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function xR(t){return Te(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function FT(t,e,n){return{name:Sg(t,e),fields:n.value.mapValue.fields}}function YV(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:W(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],r=function(c,d){return c.useProto3Json?(Te(d===void 0||typeof d=="string",58123),Rt.fromBase64String(d||"")):(Te(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Rt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(c){const d=c.code===void 0?z.UNKNOWN:IR(c.code);return new Q(d,c.message||"")}(a);n=new OR(s,i,r,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=Bd(t,s.document.name),r=$n(s.document.updateTime),a=s.document.createTime?$n(s.document.createTime):se.min(),l=new pn({mapValue:{fields:s.document.fields}}),u=Nt.newFoundDocument(i,r,a,l),c=s.targetIds||[],d=s.removedTargetIds||[];n=new yc(c,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=Bd(t,s.document),r=s.readTime?$n(s.readTime):se.min(),a=Nt.newNoDocument(i,r),l=s.removedTargetIds||[];n=new yc([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=Bd(t,s.document),r=s.removedTargetIds||[];n=new yc([],r,i,null)}else{if(!("filter"in e))return W(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:r}=s,a=new UV(i,r),l=s.targetId;n=new CR(l,a)}}return n}function XV(t,e){let n;if(e instanceof Ql)n={update:FT(t,e.key,e.value)};else if(e instanceof RR)n={delete:Sg(t,e.key)};else if(e instanceof dr)n={update:FT(t,e.key,e.data),updateMask:rk(e.fieldMask)};else{if(!(e instanceof kV))return W(16599,{dt:e.type});n={verify:Sg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(r,a){const l=a.transform;if(l instanceof yh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof bl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Al)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof wl)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw W(20930,{transform:a.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:KV(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:W(27497)}(t,e.precondition)),n}function JV(t,e){return t&&t.length>0?(Te(e!==void 0,14353),t.map(n=>function(i,r){let a=i.updateTime?$n(i.updateTime):$n(r);return a.isEqual(se.min())&&(a=$n(r)),new MV(a,i.transformResults||[])}(n,e))):[]}function WV(t,e){return{documents:[MR(t,e.path)]}}function ZV(t,e){const n={structuredQuery:{}},s=e.path;let i;e.collectionGroup!==null?(i=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=MR(t,i);const r=function(c){if(c.length!==0)return kR(Yn.create(c,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const a=function(c){if(c.length!==0)return c.map(d=>function(g){return{field:Nr(g.field),direction:nk(g.dir)}}(d))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Eg(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:i}}function ek(t){let e=QV(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){Te(s===1,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let r=[];n.where&&(r=function(m){const g=VR(m);return g instanceof Yn&&uR(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(g=>function(C){return new _h(Mr(C.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,af(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,p=m.values||[];return new ph(p,g)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const g=!m.before,p=m.values||[];return new ph(p,g)}(n.endAt)),_V(e,i,a,r,l,"F",u,c)}function tk(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function VR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Mr(n.unaryFilter.field);return st.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=Mr(n.unaryFilter.field);return st.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Mr(n.unaryFilter.field);return st.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Mr(n.unaryFilter.field);return st.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return W(61313);default:return W(60726)}}(t):t.fieldFilter!==void 0?function(n){return st.create(Mr(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return W(58110);default:return W(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Yn.create(n.compositeFilter.filters.map(s=>VR(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return W(1026)}}(n.compositeFilter.op))}(t):W(30097,{filter:t})}function nk(t){return HV[t]}function sk(t){return FV[t]}function ik(t){return $V[t]}function Nr(t){return{fieldPath:t.canonicalString()}}function Mr(t){return St.fromServerFormat(t.fieldPath)}function kR(t){return t instanceof st?function(n){if(n.op==="=="){if(NT(n.value))return{unaryFilter:{field:Nr(n.field),op:"IS_NAN"}};if(DT(n.value))return{unaryFilter:{field:Nr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(NT(n.value))return{unaryFilter:{field:Nr(n.field),op:"IS_NOT_NAN"}};if(DT(n.value))return{unaryFilter:{field:Nr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nr(n.field),op:sk(n.op),value:n.value}}}(t):t instanceof Yn?function(n){const s=n.getFilters().map(i=>kR(i));return s.length===1?s[0]:{compositeFilter:{op:ik(n.op),filters:s}}}(t):W(54877,{filter:t})}function rk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function PR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function LR(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n,s,i,r=se.min(),a=se.min(),l=Rt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Ws(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e){this.yt=e}}function ok(t){const e=ek({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(){this.Sn=new uk}addToCollectionParentIndex(e,n){return this.Sn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(_i.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(_i.min())}updateCollectionGroup(e,n,s){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}}class uk{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n]||new it(Le.comparator),r=!i.has(s);return this.index[n]=i.add(s),r}has(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(e){return(this.index[e]||new it(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},UR=41943040;class Ht{static withCacheSize(e){return new Ht(e,Ht.DEFAULT_COLLECTION_PERCENTILE,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ht.DEFAULT_COLLECTION_PERCENTILE=10,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ht.DEFAULT=new Ht(UR,Ht.DEFAULT_COLLECTION_PERCENTILE,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ht.DISABLED=new Ht(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ta(0)}static ar(){return new Ta(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="LruGarbageCollector",ck=1048576;function KT([t,e],[n,s]){const i=de(t,n);return i===0?de(e,s):i}class hk{constructor(e){this.Pr=e,this.buffer=new it(KT),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();KT(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class fk{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){$(GT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ua(n)?$(GT,"Ignoring IndexedDB error during garbage collection: ",n):await La(n)}await this.Ar(3e5)})}}class dk{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return P.resolve(rf.ce);const s=new hk(n);return this.Vr.forEachTarget(e,i=>s.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>s.Er(i))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.Vr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve($T)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$T):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let s,i,r,a,l,u,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,a=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(s=m,l=Date.now(),this.removeTargets(e,s,n))).next(m=>(r=m,u=Date.now(),this.removeOrphanedDocuments(e,s))).next(m=>(c=Date.now(),Or()<=fe.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${i} in `+(l-a)+`ms
	Removed ${r} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(c-u)+`ms
Total Duration: ${c-d}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:m})))}}function mk(t,e){return new dk(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(){this.changes=new fr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Nt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?P.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e,n,s,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(s=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(s!==null&&Wo(s.mutation,i,Cn.empty(),Me.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,me()).next(()=>s))}getLocalViewOfDocuments(e,n,s=me()){const i=ji();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,s).next(r=>{let a=Io();return r.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const s=ji();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,me()))}populateOverlays(e,n,s){const i=[];return s.forEach(r=>{n.has(r)||i.push(r)}),this.documentOverlayCache.getOverlays(e,i).next(r=>{r.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,s,i){let r=ws();const a=Jo(),l=function(){return Jo()}();return n.forEach((u,c)=>{const d=s.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof dr)?r=r.insert(c.key,c):d!==void 0?(a.set(c.key,d.mutation.getFieldMask()),Wo(d.mutation,c,d.mutation.getFieldMask(),Me.now())):a.set(c.key,Cn.empty())}),this.recalculateAndSaveOverlays(e,r).next(u=>(u.forEach((c,d)=>a.set(c,d)),n.forEach((c,d)=>l.set(c,new pk(d,a.get(c)??null))),l))}recalculateAndSaveOverlays(e,n){const s=Jo();let i=new Ue((a,l)=>a-l),r=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let d=s.get(u)||Cn.empty();d=l.applyToLocalView(c,d),s.set(u,d);const m=(i.get(l.batchId)||me()).add(u);i=i.insert(l.batchId,m)})}).next(()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,d=u.value,m=_R();d.forEach(g=>{if(!r.has(g)){const p=AR(n.get(g),s.get(g));p!==null&&m.set(g,p),r=r.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,m))}return P.waitFor(a)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,i){return yV(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):vV(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,i):this.getDocumentsMatchingCollectionQuery(e,n,s,i)}getNextDocuments(e,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,i).next(r=>{const a=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,i-r.size):P.resolve(ji());let l=vl,u=r;return a.next(c=>P.forEach(c,(d,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),r.get(d)?P.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{u=u.insert(d,g)}))).next(()=>this.populateOverlays(e,c,r)).next(()=>this.computeViews(e,u,c,me())).next(d=>({batchId:l,changes:pR(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(s=>{let i=Io();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,s,i){const r=n.collectionGroup;let a=Io();return this.indexManager.getCollectionParents(e,r).next(l=>P.forEach(l,u=>{const c=function(m,g){return new lf(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(r));return this.getDocumentsMatchingCollectionQuery(e,c,s,i).next(d=>{d.forEach((m,g)=>{a=a.insert(m,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,s,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,r,i))).next(a=>{r.forEach((u,c)=>{const d=c.getKey();a.get(d)===null&&(a=a.insert(d,Nt.newInvalidDocument(d)))});let l=Io();return a.forEach((u,c)=>{const d=r.get(u);d!==void 0&&Wo(d.mutation,c,Cn.empty(),Me.now()),cf(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return P.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:$n(i.createTime)}}(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(i){return{name:i.name,query:ok(i.bundledQuery),readTime:$n(i.readTime)}}(n)),P.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(){this.overlays=new Ue(X.comparator),this.Lr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){const s=ji();return P.forEach(n,i=>this.getOverlay(e,i).next(r=>{r!==null&&s.set(i,r)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((i,r)=>{this.bt(e,n,r)}),P.resolve()}removeOverlaysForBatchId(e,n,s){const i=this.Lr.get(s);return i!==void 0&&(i.forEach(r=>this.overlays=this.overlays.remove(r)),this.Lr.delete(s)),P.resolve()}getOverlaysForCollection(e,n,s){const i=ji(),r=n.length+1,a=new X(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===r&&u.largestBatchId>s&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,s,i){let r=new Ue((c,d)=>c-d);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>s){let d=r.get(c.largestBatchId);d===null&&(d=ji(),r=r.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const l=ji(),u=r.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>l.set(c,d)),!(l.size()>=i)););return P.resolve(l)}bt(e,n,s){const i=this.overlays.get(s.key);if(i!==null){const a=this.Lr.get(i.largestBatchId).delete(s.key);this.Lr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(s.key,new LV(n,s));let r=this.Lr.get(n);r===void 0&&(r=me(),this.Lr.set(n,r)),this.Lr.set(n,r.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(){this.kr=new it(ht.Kr),this.qr=new it(ht.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const s=new ht(e,n);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Wr(new ht(e,n))}Qr(e,n){e.forEach(s=>this.removeReference(s,n))}Gr(e){const n=new X(new Le([])),s=new ht(n,e),i=new ht(n,e+1),r=[];return this.qr.forEachInRange([s,i],a=>{this.Wr(a),r.push(a.key)}),r}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new X(new Le([])),s=new ht(n,e),i=new ht(n,e+1);let r=me();return this.qr.forEachInRange([s,i],a=>{r=r.add(a.key)}),r}containsKey(e){const n=new ht(e,0),s=this.kr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class ht{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return X.comparator(e.key,n.key)||de(e.Hr,n.Hr)}static Ur(e,n){return de(e.Hr,n.Hr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new it(ht.Kr)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,i){const r=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new PV(r,n,s,i);this.mutationQueue.push(a);for(const l of i)this.Jr=this.Jr.add(new ht(l.key,r)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return P.resolve(a)}lookupMutationBatch(e,n){return P.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,i=this.Xr(s),r=i<0?0:i;return P.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?p_:this.Yn-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new ht(n,0),i=new ht(n,Number.POSITIVE_INFINITY),r=[];return this.Jr.forEachInRange([s,i],a=>{const l=this.Zr(a.Hr);r.push(l)}),P.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new it(de);return n.forEach(i=>{const r=new ht(i,0),a=new ht(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([r,a],l=>{s=s.add(l.Hr)})}),P.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,i=s.length+1;let r=s;X.isDocumentKey(r)||(r=r.child(""));const a=new ht(new X(r),0);let l=new it(de);return this.Jr.forEachWhile(u=>{const c=u.key.path;return!!s.isPrefixOf(c)&&(c.length===i&&(l=l.add(u.Hr)),!0)},a),P.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach(s=>{const i=this.Zr(s);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Te(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return P.forEach(n.mutations,i=>{const r=new ht(i.key,n.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=s})}nr(e){}containsKey(e,n){const s=new ht(n,0),i=this.Jr.firstAfterOrEqual(s);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e){this.ti=e,this.docs=function(){return new Ue(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,i=this.docs.get(s),r=i?i.size:0,a=this.ti(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return P.resolve(s?s.document.mutableCopy():Nt.newInvalidDocument(n))}getEntries(e,n){let s=ws();return n.forEach(i=>{const r=this.docs.get(i);s=s.insert(i,r?r.document.mutableCopy():Nt.newInvalidDocument(i))}),P.resolve(s)}getDocumentsMatchingQuery(e,n,s,i){let r=ws();const a=n.path,l=new X(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Q4(K4(d),s)<=0||(i.has(d.key)||cf(n,d))&&(r=r.insert(d.key,d.mutableCopy()))}return P.resolve(r)}getAllFromCollectionGroup(e,n,s,i){W(9500)}ni(e,n){return P.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new bk(this)}getSize(e){return P.resolve(this.size)}}class bk extends gk{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(s)}),P.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e){this.persistence=e,this.ri=new fr(n=>v_(n),E_),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.ii=0,this.si=new R_,this.targetCount=0,this.oi=Ta._r()}forEachTarget(e,n){return this.ri.forEach((s,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.ii&&(this.ii=n),P.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Ta(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.lr(n),P.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,s){let i=0;const r=[];return this.ri.forEach((a,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.ri.delete(a),r.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),P.waitFor(r).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){const s=this.ri.get(n)||null;return P.resolve(s)}addMatchingKeys(e,n,s){return this.si.$r(n,s),P.resolve()}removeMatchingKeys(e,n,s){this.si.Qr(n,s);const i=this.persistence.referenceDelegate,r=[];return i&&n.forEach(a=>{r.push(i.markPotentiallyOrphaned(e,a))}),P.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),P.resolve()}getMatchingKeysForTargetId(e,n){const s=this.si.jr(n);return P.resolve(s)}containsKey(e,n){return P.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n){this._i={},this.overlays={},this.ai=new rf(0),this.ui=!1,this.ui=!0,this.ci=new Ek,this.referenceDelegate=e(this),this.li=new Ak(this),this.indexManager=new lk,this.remoteDocumentCache=function(i){return new Sk(i)}(s=>this.referenceDelegate.hi(s)),this.serializer=new ak(n),this.Pi=new yk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new vk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this._i[e.toKey()];return s||(s=new Tk(n,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,s){$("MemoryPersistence","Starting transaction:",e);const i=new wk(this.ai.next());return this.referenceDelegate.Ti(),s(i).next(r=>this.referenceDelegate.Ii(i).next(()=>r)).toPromise().then(r=>(i.raiseOnCommittedEvent(),r))}Ei(e,n){return P.or(Object.values(this._i).map(s=>()=>s.containsKey(e,n)))}}class wk extends X4{constructor(e){super(),this.currentSequenceNumber=e}}class I_{constructor(e){this.persistence=e,this.Ri=new R_,this.Ai=null}static Vi(e){return new I_(e)}get di(){if(this.Ai)return this.Ai;throw W(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.di.delete(s.toString()),P.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.di.add(s.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),P.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(i=>this.di.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(r=>this.di.add(r.toString()))}).next(()=>s.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.di,s=>{const i=X.fromPath(s);return this.mi(e,i).next(r=>{r||n.removeEntry(i,se.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(s=>{s?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return P.or([()=>P.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Eh{constructor(e,n){this.persistence=e,this.fi=new fr(s=>Z4(s.path),(s,i)=>s.isEqual(i)),this.garbageCollector=mk(this,n)}static Vi(e,n){return new Eh(e,n)}Ti(){}Ii(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(i=>s+i))}pr(e){let n=0;return this.mr(e,s=>{n++}).next(()=>n)}mr(e,n){return P.forEach(this.fi,(s,i)=>this.wr(e,s,i).next(r=>r?P.resolve():n(i)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.ni(e,a=>this.wr(e,a,n).next(l=>{l||(s++,r.removeEntry(a,se.min()))})).next(()=>r.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),P.resolve()}removeReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),P.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=gc(e.data.value)),n}wr(e,n,s){return P.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return P.resolve(i!==void 0&&i>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,n,s,i){this.targetId=e,this.fromCache=n,this.Ts=s,this.Is=i}static Es(e,n){let s=me(),i=me();for(const r of n.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new C_(e,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return fN()?8:J4(Mt())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,i){const r={result:null};return this.gs(e,n).next(a=>{r.result=a}).next(()=>{if(!r.result)return this.ps(e,n,i,s).next(a=>{r.result=a})}).next(()=>{if(r.result)return;const a=new Rk;return this.ys(e,n,a).next(l=>{if(r.result=l,this.As)return this.ws(e,n,a,l.size)})}).next(()=>r.result)}ws(e,n,s,i){return s.documentReadCount<this.Vs?(Or()<=fe.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",Dr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),P.resolve()):(Or()<=fe.DEBUG&&$("QueryEngine","Query:",Dr(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.ds*i?(Or()<=fe.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",Dr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fn(n))):P.resolve())}gs(e,n){if(kT(n))return P.resolve(null);let s=Fn(n);return this.indexManager.getIndexType(e,s).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=vg(n,null,"F"),s=Fn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(r=>{const a=me(...r);return this.fs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,s).next(u=>{const c=this.bs(n,l);return this.Ss(n,c,a,u.readTime)?this.gs(e,vg(n,null,"F")):this.Ds(e,c,n,u)}))})))}ps(e,n,s,i){return kT(n)||i.isEqual(se.min())?P.resolve(null):this.fs.getDocuments(e,s).next(r=>{const a=this.bs(n,r);return this.Ss(n,a,s,i)?P.resolve(null):(Or()<=fe.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Dr(n)),this.Ds(e,a,n,G4(i,vl)).next(l=>l))})}bs(e,n){let s=new it(mR(e));return n.forEach((i,r)=>{cf(e,r)&&(s=s.add(r))}),s}Ss(e,n,s,i){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}ys(e,n,s){return Or()<=fe.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",Dr(n)),this.fs.getDocumentsMatchingQuery(e,n,_i.min(),s)}Ds(e,n,s,i){return this.fs.getDocumentsMatchingQuery(e,s,i).next(r=>(n.forEach(a=>{r=r.insert(a.key,a)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="LocalStore",Ck=3e8;class Ok{constructor(e,n,s,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new Ue(de),this.Fs=new fr(r=>v_(r),E_),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _k(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function Dk(t,e,n,s){return new Ok(t,e,n,s)}async function BR(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next(r=>(i=r,n.Os(e),n.mutationQueue.getAllMutationBatches(s))).next(r=>{const a=[],l=[];let u=me();for(const c of i){a.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of r){l.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(s,u).next(c=>({Ns:c,removedBatchIds:a,addedBatchIds:l}))})})}function Nk(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=e.batch.keys(),r=n.xs.newChangeBuffer({trackRemovals:!0});return function(l,u,c,d){const m=c.batch,g=m.keys();let p=P.resolve();return g.forEach(C=>{p=p.next(()=>d.getEntry(u,C)).next(O=>{const x=c.docVersions.get(C);Te(x!==null,48541),O.version.compareTo(x)<0&&(m.applyToRemoteDocument(O,c),O.isValidDocument()&&(O.setReadTime(c.commitVersion),d.addEntry(O)))})}),p.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,s,e,r).next(()=>r.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let u=me();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(s,i))})}function jR(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function Mk(t,e){const n=ie(t),s=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const a=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const l=[];e.targetChanges.forEach((d,m)=>{const g=i.get(m);if(!g)return;l.push(n.li.removeMatchingKeys(r,d.removedDocuments,m).next(()=>n.li.addMatchingKeys(r,d.addedDocuments,m)));let p=g.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(m)!==null?p=p.withResumeToken(Rt.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,s)),i=i.insert(m,p),function(O,x,S){return O.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=Ck?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(g,p,d)&&l.push(n.li.updateTargetData(r,p))});let u=ws(),c=me();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(r,d))}),l.push(xk(r,a,e.documentUpdates).next(d=>{u=d.Bs,c=d.Ls})),!s.isEqual(se.min())){const d=n.li.getLastRemoteSnapshotVersion(r).next(m=>n.li.setTargetsMetadata(r,r.currentSequenceNumber,s));l.push(d)}return P.waitFor(l).next(()=>a.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,u,c)).next(()=>u)}).then(r=>(n.vs=i,r))}function xk(t,e,n){let s=me(),i=me();return n.forEach(r=>s=s.add(r)),e.getEntries(t,s).next(r=>{let a=ws();return n.forEach((l,u)=>{const c=r.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(se.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):$(O_,"Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Bs:a,Ls:i}})}function Vk(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=p_),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function kk(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return n.li.getTargetData(s,e).next(r=>r?(i=r,P.resolve(i)):n.li.allocateTargetId(s).next(a=>(i=new Ws(e,a,"TargetPurposeListen",s.currentSequenceNumber),n.li.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=n.vs.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(s.targetId,s),n.Fs.set(e,s.targetId)),s})}async function Ag(t,e,n){const s=ie(t),i=s.vs.get(e),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,a=>s.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Ua(a))throw a;$(O_,`Failed to update sequence numbers for target ${e}: ${a}`)}s.vs=s.vs.remove(e),s.Fs.delete(i.target)}function QT(t,e,n){const s=ie(t);let i=se.min(),r=me();return s.persistence.runTransaction("Execute query","readwrite",a=>function(u,c,d){const m=ie(u),g=m.Fs.get(d);return g!==void 0?P.resolve(m.vs.get(g)):m.li.getTargetData(c,d)}(s,a,Fn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(a,l.targetId).next(u=>{r=u})}).next(()=>s.Cs.getDocumentsMatchingQuery(a,e,n?i:se.min(),n?r:me())).next(l=>(Pk(s,TV(e),l),{documents:l,ks:r})))}function Pk(t,e,n){let s=t.Ms.get(e)||se.min();n.forEach((i,r)=>{r.readTime.compareTo(s)>0&&(s=r.readTime)}),t.Ms.set(e,s)}class YT{constructor(){this.activeTargetIds=IV()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Lk{constructor(){this.vo=new YT,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,s){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new YT,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="ConnectivityMonitor";class JT{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){$(XT,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){$(XT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu=null;function wg(){return Uu===null?Uu=function(){return 268435456+Math.round(2147483648*Math.random())}():Uu++,"0x"+Uu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd="RestConnection",zk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Bk{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${s}/databases/${i}`,this.$o=this.databaseId.database===mh?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Wo(e,n,s,i,r){const a=wg(),l=this.Qo(e,n.toUriEncodedString());$(jd,`Sending RPC '${e}' ${a}:`,l,s);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,i,r);const{host:c}=new URL(l),d=xa(c);return this.zo(e,l,u,s,d).then(m=>($(jd,`Received RPC '${e}' ${a}: `,m),m),m=>{throw ir(jd,`RPC '${e}' ${a} failed with error: `,m,"url: ",l,"request:",s),m})}jo(e,n,s,i,r,a){return this.Wo(e,n,s,i,r)}Go(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Pa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,r)=>e[r]=i),s&&s.headers.forEach((i,r)=>e[r]=i)}Qo(e,n){const s=zk[e];let i=`${this.qo}/v1/${n}:${s}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot="WebChannelConnection",co=(t,e,n)=>{t.listen(e,s=>{try{n(s)}catch(i){setTimeout(()=>{throw i},0)}})};class na extends Bk{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!na.c_){const e=G1();co(e,$1.STAT_EVENT,n=>{n.stat===dg.PROXY?$(Ot,"STAT_EVENT: detected buffering proxy"):n.stat===dg.NOPROXY&&$(Ot,"STAT_EVENT: detected no buffering proxy")}),na.c_=!0}}zo(e,n,s,i,r){const a=wg();return new Promise((l,u)=>{const c=new H1;c.setWithCredentials(!0),c.listenOnce(F1.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case mc.NO_ERROR:const m=c.getResponseJson();$(Ot,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),l(m);break;case mc.TIMEOUT:$(Ot,`RPC '${e}' ${a} timed out`),u(new Q(z.DEADLINE_EXCEEDED,"Request time out"));break;case mc.HTTP_ERROR:const g=c.getStatus();if($(Ot,`RPC '${e}' ${a} failed with status:`,g,"response text:",c.getResponseText()),g>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const C=p==null?void 0:p.error;if(C&&C.status&&C.message){const O=function(S){const y=S.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(y)>=0?y:z.UNKNOWN}(C.status);u(new Q(O,C.message))}else u(new Q(z.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new Q(z.UNAVAILABLE,"Connection failed."));break;default:W(9055,{l_:e,streamId:a,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{$(Ot,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(i);$(Ot,`RPC '${e}' ${a} sending request:`,i),c.send(n,"POST",d,s,15)})}T_(e,n,s){const i=wg(),r=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const c=r.join("");$(Ot,`Creating RPC '${e}' stream ${i}: ${c}`,l);const d=a.createWebChannel(c,l);this.I_(d);let m=!1,g=!1;const p=new jk({Ho:C=>{g?$(Ot,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(m||($(Ot,`Opening RPC '${e}' stream ${i} transport.`),d.open(),m=!0),$(Ot,`RPC '${e}' stream ${i} sending:`,C),d.send(C))},Jo:()=>d.close()});return co(d,Ro.EventType.OPEN,()=>{g||($(Ot,`RPC '${e}' stream ${i} transport opened.`),p.i_())}),co(d,Ro.EventType.CLOSE,()=>{g||(g=!0,$(Ot,`RPC '${e}' stream ${i} transport closed`),p.o_(),this.E_(d))}),co(d,Ro.EventType.ERROR,C=>{g||(g=!0,ir(Ot,`RPC '${e}' stream ${i} transport errored. Name:`,C.name,"Message:",C.message),p.o_(new Q(z.UNAVAILABLE,"The operation could not be completed")))}),co(d,Ro.EventType.MESSAGE,C=>{var O;if(!g){const x=C.data[0];Te(!!x,16349);const S=x,y=(S==null?void 0:S.error)||((O=S[0])==null?void 0:O.error);if(y){$(Ot,`RPC '${e}' stream ${i} received error:`,y);const A=y.status;let I=function(E){const v=Ke[E];if(v!==void 0)return IR(v)}(A),U=y.message;A==="NOT_FOUND"&&U.includes("database")&&U.includes("does not exist")&&U.includes(this.databaseId.database)&&ir(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),I===void 0&&(I=z.INTERNAL,U="Unknown error status: "+A+" with message "+y.message),g=!0,p.o_(new Q(I,U)),d.close()}else $(Ot,`RPC '${e}' stream ${i} received:`,x),p.__(x)}}),na.u_(),setTimeout(()=>{p.s_()},0),p}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,s){super.Go(e,n,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return K1()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(t){return new na(t)}function qd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(t){return new GV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */na.c_=!1;class qR{constructor(e,n,s=1e3,i=1.5,r=6e4){this.Ci=e,this.timerId=n,this.R_=s,this.A_=i,this.V_=r,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-s);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="PersistentStream";class HR{constructor(e,n,s,i,r,a,l,u){this.Ci=e,this.b_=s,this.S_=i,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qR(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(As(n.toString()),As("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.D_===n&&this.G_(s,i)},s=>{e(()=>{const i=new Q(z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(i)})})}G_(e,n){const s=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{s(()=>this.listener.Zo())}),this.stream.Yo(()=>{s(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{s(()=>this.z_(i))}),this.stream.onMessage(i=>{s(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return $(WT,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():($(WT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Hk extends HR{constructor(e,n,s,i,r,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,a),this.serializer=r}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=YV(this.serializer,e),s=function(r){if(!("targetChange"in r))return se.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?se.min():a.readTime?$n(a.readTime):se.min()}(e);return this.listener.J_(n,s)}Z_(e){const n={};n.database=bg(this.serializer),n.addTarget=function(r,a){let l;const u=a.target;if(l=yg(u)?{documents:WV(r,u)}:{query:ZV(r,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=DR(r,a.resumeToken);const c=Eg(r,a.expectedCount);c!==null&&(l.expectedCount=c)}else if(a.snapshotVersion.compareTo(se.min())>0){l.readTime=vh(r,a.snapshotVersion.toTimestamp());const c=Eg(r,a.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const s=tk(this.serializer,e);s&&(n.labels=s),this.K_(n)}X_(e){const n={};n.database=bg(this.serializer),n.removeTarget=e,this.K_(n)}}class Fk extends HR{constructor(e,n,s,i,r,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,a),this.serializer=r}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Te(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Te(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=JV(e.writeResults,e.commitTime),s=$n(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=bg(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>XV(this.serializer,s))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{}class Gk extends $k{constructor(e,n,s,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Q(z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.Wo(e,Tg(n,s),i,r,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Q(z.UNKNOWN,r.toString())})}jo(e,n,s,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.jo(e,Tg(n,s),i,a,l,r)).catch(a=>{throw a.name==="FirebaseError"?(a.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Q(z.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function Kk(t,e,n,s){return new Gk(t,e,n,s)}class Qk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(As(n),this.aa=!1):$("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr="RemoteStore";class Yk{constructor(e,n,s,i,r){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=r,this.Aa.Mo(a=>{s.enqueueAndForget(async()=>{mr(this)&&($(rr,"Restarting streams for network reachability change."),await async function(u){const c=ie(u);c.Ea.add(4),await Xl(c),c.Va.set("Unknown"),c.Ea.delete(4),await gf(c)}(this))})}),this.Va=new Qk(s,i)}}async function gf(t){if(mr(t))for(const e of t.Ra)await e(!0)}async function Xl(t){for(const e of t.Ra)await e(!1)}function FR(t,e){const n=ie(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),x_(n)?M_(n):za(n).O_()&&N_(n,e))}function D_(t,e){const n=ie(t),s=za(n);n.Ia.delete(e),s.O_()&&$R(n,e),n.Ia.size===0&&(s.O_()?s.L_():mr(n)&&n.Va.set("Unknown"))}function N_(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}za(t).Z_(e)}function $R(t,e){t.da.$e(e),za(t).X_(e)}function M_(t){t.da=new qV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),za(t).start(),t.Va.ua()}function x_(t){return mr(t)&&!za(t).x_()&&t.Ia.size>0}function mr(t){return ie(t).Ea.size===0}function GR(t){t.da=void 0}async function Xk(t){t.Va.set("Online")}async function Jk(t){t.Ia.forEach((e,n)=>{N_(t,e)})}async function Wk(t,e){GR(t),x_(t)?(t.Va.ha(e),M_(t)):t.Va.set("Unknown")}async function Zk(t,e,n){if(t.Va.set("Online"),e instanceof OR&&e.state===2&&e.cause)try{await async function(i,r){const a=r.cause;for(const l of r.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.Ia.delete(l),i.da.removeTarget(l))}(t,e)}catch(s){$(rr,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Th(t,s)}else if(e instanceof yc?t.da.Xe(e):e instanceof CR?t.da.st(e):t.da.tt(e),!n.isEqual(se.min()))try{const s=await jR(t.localStore);n.compareTo(s)>=0&&await function(r,a){const l=r.da.Tt(a);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=r.Ia.get(c);d&&r.Ia.set(c,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,c)=>{const d=r.Ia.get(u);if(!d)return;r.Ia.set(u,d.withResumeToken(Rt.EMPTY_BYTE_STRING,d.snapshotVersion)),$R(r,u);const m=new Ws(d.target,u,c,d.sequenceNumber);N_(r,m)}),r.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(s){$(rr,"Failed to raise snapshot:",s),await Th(t,s)}}async function Th(t,e,n){if(!Ua(e))throw e;t.Ea.add(1),await Xl(t),t.Va.set("Offline"),n||(n=()=>jR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{$(rr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await gf(t)})}function KR(t,e){return e().catch(n=>Th(t,n,e))}async function pf(t){const e=ie(t),n=Ti(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:p_;for(;e6(e);)try{const i=await Vk(e.localStore,s);if(i===null){e.Ta.length===0&&n.L_();break}s=i.batchId,t6(e,i)}catch(i){await Th(e,i)}QR(e)&&YR(e)}function e6(t){return mr(t)&&t.Ta.length<10}function t6(t,e){t.Ta.push(e);const n=Ti(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function QR(t){return mr(t)&&!Ti(t).x_()&&t.Ta.length>0}function YR(t){Ti(t).start()}async function n6(t){Ti(t).ra()}async function s6(t){const e=Ti(t);for(const n of t.Ta)e.ea(n.mutations)}async function i6(t,e,n){const s=t.Ta.shift(),i=b_.from(s,e,n);await KR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await pf(t)}async function r6(t,e){e&&Ti(t).Y_&&await async function(s,i){if(function(a){return zV(a)&&a!==z.ABORTED}(i.code)){const r=s.Ta.shift();Ti(s).B_(),await KR(s,()=>s.remoteSyncer.rejectFailedWrite(r.batchId,i)),await pf(s)}}(t,e),QR(t)&&YR(t)}async function ZT(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),$(rr,"RemoteStore received new credentials");const s=mr(n);n.Ea.add(3),await Xl(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await gf(n)}async function a6(t,e){const n=ie(t);e?(n.Ea.delete(2),await gf(n)):e||(n.Ea.add(2),await Xl(n),n.Va.set("Unknown"))}function za(t){return t.ma||(t.ma=function(n,s,i){const r=ie(n);return r.sa(),new Hk(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{Zo:Xk.bind(null,t),Yo:Jk.bind(null,t),t_:Wk.bind(null,t),J_:Zk.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),x_(t)?M_(t):t.Va.set("Unknown")):(await t.ma.stop(),GR(t))})),t.ma}function Ti(t){return t.fa||(t.fa=function(n,s,i){const r=ie(n);return r.sa(),new Fk(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:n6.bind(null,t),t_:r6.bind(null,t),ta:s6.bind(null,t),na:i6.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await pf(t)):(await t.fa.stop(),t.Ta.length>0&&($(rr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e,n,s,i,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=r,this.deferred=new fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,i,r){const a=Date.now()+s,l=new V_(e,n,a,i,r);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function k_(t,e){if(As("AsyncQueue",`${e}: ${t}`),Ua(t))return new Q(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{static emptySet(e){return new sa(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||X.comparator(n.key,s.key):(n,s)=>X.comparator(n.key,s.key),this.keyedMap=Io(),this.sortedSet=new Ue(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof sa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new sa;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(){this.ga=new Ue(X.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):W(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class Sa{constructor(e,n,s,i,r,a,l,u,c){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,s,i,r){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Sa(e,n,sa.emptySet(n),a,s,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class l6{constructor(){this.queries=t0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const i=ie(n),r=i.queries;i.queries=t0(),r.forEach((a,l)=>{for(const u of l.ba)u.onError(s)})})(this,new Q(z.ABORTED,"Firestore shutting down"))}}function t0(){return new fr(t=>dR(t),uf)}async function u6(t,e){const n=ie(t);let s=3;const i=e.query;let r=n.queries.get(i);r?!r.Sa()&&e.Da()&&(s=2):(r=new o6,s=e.Da()?0:1);try{switch(s){case 0:r.wa=await n.onListen(i,!0);break;case 1:r.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const l=k_(a,`Initialization of query '${Dr(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,r),r.ba.push(e),e.va(n.onlineState),r.wa&&e.Fa(r.wa)&&P_(n)}async function c6(t,e){const n=ie(t),s=e.query;let i=3;const r=n.queries.get(s);if(r){const a=r.ba.indexOf(e);a>=0&&(r.ba.splice(a,1),r.ba.length===0?i=e.Da()?0:1:!r.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function h6(t,e){const n=ie(t);let s=!1;for(const i of e){const r=i.query,a=n.queries.get(r);if(a){for(const l of a.ba)l.Fa(i)&&(s=!0);a.wa=i}}s&&P_(n)}function f6(t,e,n){const s=ie(t),i=s.queries.get(e);if(i)for(const r of i.ba)r.onError(n);s.queries.delete(e)}function P_(t){t.Ca.forEach(e=>{e.next()})}var Rg,n0;(n0=Rg||(Rg={})).Ma="default",n0.Cache="cache";class d6{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new Sa(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Sa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Rg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e){this.key=e}}class JR{constructor(e){this.key=e}}class m6{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=me(),this.mutatedKeys=me(),this.eu=mR(e),this.tu=new sa(this.eu)}get nu(){return this.Za}ru(e,n){const s=n?n.iu:new e0,i=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,a=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,m)=>{const g=i.get(d),p=cf(this.query,m)?m:null,C=!!g&&this.mutatedKeys.has(g.key),O=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let x=!1;g&&p?g.data.isEqual(p.data)?C!==O&&(s.track({type:3,doc:p}),x=!0):this.su(g,p)||(s.track({type:2,doc:p}),x=!0,(u&&this.eu(p,u)>0||c&&this.eu(p,c)<0)&&(l=!0)):!g&&p?(s.track({type:0,doc:p}),x=!0):g&&!p&&(s.track({type:1,doc:g}),x=!0,(u||c)&&(l=!0)),x&&(p?(a=a.add(p),r=O?r.add(d):r.delete(d)):(a=a.delete(d),r=r.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),r=r.delete(d.key),s.track({type:1,doc:d})}return{tu:a,iu:s,Ss:l,mutatedKeys:r}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,i){const r=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((d,m)=>function(p,C){const O=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W(20277,{Vt:x})}};return O(p)-O(C)}(d.type,m.type)||this.eu(d.doc,m.doc)),this.ou(s),i=i??!1;const l=n&&!i?this._u():[],u=this.Ya.size===0&&this.current&&!i?1:0,c=u!==this.Xa;return this.Xa=u,a.length!==0||c?{snapshot:new Sa(this.query,e.tu,r,a,e.mutatedKeys,u===0,c,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new e0,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=me(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))});const n=[];return e.forEach(s=>{this.Ya.has(s)||n.push(new JR(s))}),this.Ya.forEach(s=>{e.has(s)||n.push(new XR(s))}),n}cu(e){this.Za=e.ks,this.Ya=me();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Sa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const L_="SyncEngine";class g6{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class p6{constructor(e){this.key=e,this.hu=!1}}class _6{constructor(e,n,s,i,r,a){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new fr(l=>dR(l),uf),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ue(X.comparator),this.Au=new Map,this.Vu=new R_,this.du={},this.mu=new Map,this.fu=Ta.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function y6(t,e,n=!0){const s=sI(t);let i;const r=s.Tu.get(e);return r?(s.sharedClientState.addLocalQueryTarget(r.targetId),i=r.view.lu()):i=await WR(s,e,n,!0),i}async function v6(t,e){const n=sI(t);await WR(n,e,!0,!1)}async function WR(t,e,n,s){const i=await kk(t.localStore,Fn(e)),r=i.targetId,a=t.sharedClientState.addLocalQueryTarget(r,n);let l;return s&&(l=await E6(t,e,r,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&FR(t.remoteStore,i),l}async function E6(t,e,n,s,i){t.pu=(m,g,p)=>async function(O,x,S,y){let A=x.view.ru(S);A.Ss&&(A=await QT(O.localStore,x.query,!1).then(({documents:E})=>x.view.ru(E,A)));const I=y&&y.targetChanges.get(x.targetId),U=y&&y.targetMismatches.get(x.targetId)!=null,j=x.view.applyChanges(A,O.isPrimaryClient,I,U);return i0(O,x.targetId,j.au),j.snapshot}(t,m,g,p);const r=await QT(t.localStore,e,!0),a=new m6(e,r.ks),l=a.ru(r.documents),u=Yl.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",i),c=a.applyChanges(l,t.isPrimaryClient,u);i0(t,n,c.au);const d=new g6(e,n,a);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function T6(t,e,n){const s=ie(t),i=s.Tu.get(e),r=s.Iu.get(i.targetId);if(r.length>1)return s.Iu.set(i.targetId,r.filter(a=>!uf(a,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await Ag(s.localStore,i.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(i.targetId),n&&D_(s.remoteStore,i.targetId),Ig(s,i.targetId)}).catch(La)):(Ig(s,i.targetId),await Ag(s.localStore,i.targetId,!0))}async function S6(t,e){const n=ie(t),s=n.Tu.get(e),i=n.Iu.get(s.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),D_(n.remoteStore,s.targetId))}async function b6(t,e,n){const s=D6(t);try{const i=await function(a,l){const u=ie(a),c=Me.now(),d=l.reduce((p,C)=>p.add(C.key),me());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",p=>{let C=ws(),O=me();return u.xs.getEntries(p,d).next(x=>{C=x,C.forEach((S,y)=>{y.isValidDocument()||(O=O.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(p,C)).next(x=>{m=x;const S=[];for(const y of l){const A=VV(y,m.get(y.key).overlayedDocument);A!=null&&S.push(new dr(y.key,A,aR(A.value.mapValue),ps.exists(!0)))}return u.mutationQueue.addMutationBatch(p,c,S,l)}).next(x=>{g=x;const S=x.applyToLocalDocumentSet(m,O);return u.documentOverlayCache.saveOverlays(p,x.batchId,S)})}).then(()=>({batchId:g.batchId,changes:pR(m)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),function(a,l,u){let c=a.du[a.currentUser.toKey()];c||(c=new Ue(de)),c=c.insert(l,u),a.du[a.currentUser.toKey()]=c}(s,i.batchId,n),await Jl(s,i.changes),await pf(s.remoteStore)}catch(i){const r=k_(i,"Failed to persist write");n.reject(r)}}async function ZR(t,e){const n=ie(t);try{const s=await Mk(n.localStore,e);e.targetChanges.forEach((i,r)=>{const a=n.Au.get(r);a&&(Te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?Te(a.hu,14607):i.removedDocuments.size>0&&(Te(a.hu,42227),a.hu=!1))}),await Jl(n,s,e)}catch(s){await La(s)}}function s0(t,e,n){const s=ie(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.Tu.forEach((r,a)=>{const l=a.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(a,l){const u=ie(a);u.onlineState=l;let c=!1;u.queries.forEach((d,m)=>{for(const g of m.ba)g.va(l)&&(c=!0)}),c&&P_(u)}(s.eventManager,e),i.length&&s.Pu.J_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function A6(t,e,n){const s=ie(t);s.sharedClientState.updateQueryState(e,"rejected",n);const i=s.Au.get(e),r=i&&i.key;if(r){let a=new Ue(X.comparator);a=a.insert(r,Nt.newNoDocument(r,se.min()));const l=me().add(r),u=new df(se.min(),new Map,new Ue(de),a,l);await ZR(s,u),s.Ru=s.Ru.remove(r),s.Au.delete(e),U_(s)}else await Ag(s.localStore,e,!1).then(()=>Ig(s,e,n)).catch(La)}async function w6(t,e){const n=ie(t),s=e.batch.batchId;try{const i=await Nk(n.localStore,e);tI(n,s,null),eI(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Jl(n,i)}catch(i){await La(i)}}async function R6(t,e,n){const s=ie(t);try{const i=await function(a,l){const u=ie(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,l).next(m=>(Te(m!==null,37113),d=m.keys(),u.mutationQueue.removeMutationBatch(c,m))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(s.localStore,e);tI(s,e,n),eI(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Jl(s,i)}catch(i){await La(i)}}function eI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function tI(t,e,n){const s=ie(t);let i=s.du[s.currentUser.toKey()];if(i){const r=i.get(e);r&&(n?r.reject(n):r.resolve(),i=i.remove(e)),s.du[s.currentUser.toKey()]=i}}function Ig(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(s=>{t.Vu.containsKey(s)||nI(t,s)})}function nI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(D_(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),U_(t))}function i0(t,e,n){for(const s of n)s instanceof XR?(t.Vu.addReference(s.key,e),I6(t,s)):s instanceof JR?($(L_,"Document no longer in limbo: "+s.key),t.Vu.removeReference(s.key,e),t.Vu.containsKey(s.key)||nI(t,s.key)):W(19791,{wu:s})}function I6(t,e){const n=e.key,s=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(s)||($(L_,"New document in limbo: "+n),t.Eu.add(s),U_(t))}function U_(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new X(Le.fromString(e)),s=t.fu.next();t.Au.set(s,new p6(n)),t.Ru=t.Ru.insert(n,s),FR(t.remoteStore,new Ws(Fn(T_(n.path)),s,"TargetPurposeLimboResolution",rf.ce))}}async function Jl(t,e,n){const s=ie(t),i=[],r=[],a=[];s.Tu.isEmpty()||(s.Tu.forEach((l,u)=>{a.push(s.pu(u,e,n).then(c=>{var d;if((c||n)&&s.isPrimaryClient){const m=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;s.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(c){i.push(c);const m=C_.Es(u.targetId,c);r.push(m)}}))}),await Promise.all(a),s.Pu.J_(i),await async function(u,c){const d=ie(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>P.forEach(c,g=>P.forEach(g.Ts,p=>d.persistence.referenceDelegate.addReference(m,g.targetId,p)).next(()=>P.forEach(g.Is,p=>d.persistence.referenceDelegate.removeReference(m,g.targetId,p)))))}catch(m){if(!Ua(m))throw m;$(O_,"Failed to update sequence numbers: "+m)}for(const m of c){const g=m.targetId;if(!m.fromCache){const p=d.vs.get(g),C=p.snapshotVersion,O=p.withLastLimboFreeSnapshotVersion(C);d.vs=d.vs.insert(g,O)}}}(s.localStore,r))}async function C6(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){$(L_,"User change. New user:",e.toKey());const s=await BR(n.localStore,e);n.currentUser=e,function(r,a){r.mu.forEach(l=>{l.forEach(u=>{u.reject(new Q(z.CANCELLED,a))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Jl(n,s.Ns)}}function O6(t,e){const n=ie(t),s=n.Au.get(e);if(s&&s.hu)return me().add(s.key);{let i=me();const r=n.Iu.get(e);if(!r)return i;for(const a of r){const l=n.Tu.get(a);i=i.unionWith(l.view.nu)}return i}}function sI(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=O6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=A6.bind(null,e),e.Pu.J_=h6.bind(null,e.eventManager),e.Pu.yu=f6.bind(null,e.eventManager),e}function D6(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=w6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=R6.bind(null,e),e}class Sh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Dk(this.persistence,new Ik,e.initialUser,this.serializer)}Cu(e){return new zR(I_.Vi,this.serializer)}Du(e){return new Lk}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sh.provider={build:()=>new Sh};class N6 extends Sh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Te(this.persistence.referenceDelegate instanceof Eh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new fk(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ht.withCacheSize(this.cacheSizeBytes):Ht.DEFAULT;return new zR(s=>Eh.Vi(s,n),this.serializer)}}class Cg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>s0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=C6.bind(null,this.syncEngine),await a6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new l6}()}createDatastore(e){const n=mf(e.databaseInfo.databaseId),s=qk(e.databaseInfo);return Kk(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,i,r,a,l){return new Yk(s,i,r,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>s0(this.syncEngine,n,0),function(){return JT.v()?new JT:new Uk}())}createSyncEngine(e,n){return function(i,r,a,l,u,c,d){const m=new _6(i,r,a,l,u,c);return d&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const r=ie(i);$(rr,"RemoteStore shutting down."),r.Ea.add(5),await Xl(r),r.Aa.shutdown(),r.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Cg.provider={build:()=>new Cg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):As("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si="FirestoreClient";class x6{constructor(e,n,s,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this._databaseInfo=i,this.user=Dt.UNAUTHENTICATED,this.clientId=m_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(s,async a=>{$(Si,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(s,a=>($(Si,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=k_(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Hd(t,e){t.asyncQueue.verifyOperationInProgress(),$(Si,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async i=>{s.isEqual(i)||(await BR(e.localStore,i),s=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function r0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await V6(t);$(Si,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>ZT(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>ZT(e.remoteStore,i)),t._onlineComponents=e}async function V6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$(Si,"Using user provided OfflineComponentProvider");try{await Hd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ir("Error using user provided cache. Falling back to memory cache: "+n),await Hd(t,new Sh)}}else $(Si,"Using default OfflineComponentProvider"),await Hd(t,new N6(void 0));return t._offlineComponents}async function iI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($(Si,"Using user provided OnlineComponentProvider"),await r0(t,t._uninitializedComponentsProvider._online)):($(Si,"Using default OnlineComponentProvider"),await r0(t,new Cg))),t._onlineComponents}function k6(t){return iI(t).then(e=>e.syncEngine)}async function P6(t){const e=await iI(t),n=e.eventManager;return n.onListen=y6.bind(null,e.syncEngine),n.onUnlisten=T6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=v6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=S6.bind(null,e.syncEngine),n}function L6(t,e,n={}){const s=new fi;return t.asyncQueue.enqueueAndForget(async()=>function(r,a,l,u,c){const d=new M6({next:g=>{d.Nu(),a.enqueueAndForget(()=>c6(r,m));const p=g.docs.has(l);!p&&g.fromCache?c.reject(new Q(z.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&g.fromCache&&u&&u.source==="server"?c.reject(new Q(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new d6(T_(l.path),d,{includeMetadataChanges:!0,Ka:!0});return u6(r,m)}(await P6(t),t.asyncQueue,e,n,s)),s.promise}function U6(t,e){const n=new fi;return t.asyncQueue.enqueueAndForget(async()=>b6(await k6(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6="ComponentProvider",a0=new Map;function B6(t,e,n,s,i){return new nV(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,rI(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI="firestore.googleapis.com",o0=!0;class l0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Q(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aI,this.ssl=o0}else this.host=e.host,this.ssl=e.ssl??o0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=UR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ck)throw new Q(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rI(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Q(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Q(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Q(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class z_{constructor(e,n,s,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new V4;switch(s.type){case"firstParty":return new U4(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Q(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=a0.get(n);s&&($(z6,"Removing Datastore"),a0.delete(n),s.terminate())}(this),Promise.resolve()}}function j6(t,e,n,s={}){var c;t=yl(t,z_);const i=xa(e),r=t._getSettings(),a={...r,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(i1(`https://${l}`),r1("Firestore",!0)),r.host!==aI&&r.host!==l&&ir("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...r,host:l,ssl:i,emulatorOptions:s};if(!er(u,a)&&(t._setSettings(u),s.mockUserToken)){let d,m;if(typeof s.mockUserToken=="string")d=s.mockUserToken,m=Dt.MOCK_USER;else{d=sN(s.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const g=s.mockUserToken.sub||s.mockUserToken.user_id;if(!g)throw new Q(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Dt(g)}t._authCredentials=new k4(new Y1(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new B_(this.firestore,e,this._query)}}class mt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mt(this.firestore,e,this._key)}toJSON(){return{type:mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Kl(n,mt._jsonSchema))return new mt(e,s||null,new X(Le.fromString(n.referencePath)))}}mt._jsonSchemaVersion="firestore/documentReference/1.0",mt._jsonSchema={type:We("string",mt._jsonSchemaVersion),referencePath:We("string")};class Rl extends B_{constructor(e,n,s){super(e,n,T_(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new X(e))}withConverter(e){return new Rl(this.firestore,e,this._path)}}function Fd(t,e,...n){if(t=Sn(t),arguments.length===1&&(e=m_.newId()),F4("doc","path",e),t instanceof z_){const s=Le.fromString(e,...n);return ST(s),new mt(t,null,new X(s))}{if(!(t instanceof mt||t instanceof Rl))throw new Q(z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Le.fromString(e,...n));return ST(s),new mt(t.firestore,t instanceof Rl?t.converter:null,new X(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0="AsyncQueue";class c0{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qR(this,"async_queue_retry"),this._c=()=>{const s=qd();s&&$(u0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=qd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=qd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new fi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ua(e))throw e;$(u0,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,As("INTERNAL UNHANDLED ERROR: ",h0(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=V_.createAndSchedule(this,e,n,s,r=>this.hc(r));return this.tc.push(i),i}uc(){this.nc&&W(47125,{Pc:h0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function h0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class j_ extends z_{constructor(e,n,s,i){super(e,n,s,i),this.type="firestore",this._queue=new c0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new c0(e),this._firestoreClient=void 0,await e}}}function q6(t,e){const n=typeof t=="object"?t:u1(),s=typeof t=="string"?t:mh,i=n_(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const r=tN("firestore");r&&j6(i,...r)}return i}function oI(t){if(t._terminated)throw new Q(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||H6(t),t._firestoreClient}function H6(t){var s,i,r,a;const e=t._freezeSettings(),n=B6(t._databaseId,((s=t._app)==null?void 0:s.options.appId)||"",t._persistenceKey,(i=t._app)==null?void 0:i.options.apiKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new x6(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _n(Rt.fromBase64String(e))}catch(n){throw new Q(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _n(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Kl(e,_n._jsonSchema))return _n.fromBase64String(e.bytes)}}_n._jsonSchemaVersion="firestore/bytes/1.0",_n._jsonSchema={type:We("string",_n._jsonSchemaVersion),bytes:We("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gn._jsonSchemaVersion}}static fromJSON(e){if(Kl(e,Gn._jsonSchema))return new Gn(e.latitude,e.longitude)}}Gn._jsonSchemaVersion="firestore/geoPoint/1.0",Gn._jsonSchema={type:We("string",Gn._jsonSchemaVersion),latitude:We("number"),longitude:We("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,i){if(s.length!==i.length)return!1;for(let r=0;r<s.length;++r)if(s[r]!==i[r])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Dn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Kl(e,Dn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Dn(e.vectorValues);throw new Q(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Dn._jsonSchemaVersion="firestore/vectorValue/1.0",Dn._jsonSchema={type:We("string",Dn._jsonSchemaVersion),vectorValues:We("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6=/^__.*__$/;class $6{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new dr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ql(e,this.data,n,this.fieldTransforms)}}function uI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W(40011,{dataSource:t})}}class H_{constructor(e,n,s,i,r,a){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,r===void 0&&this.validatePath(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new H_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var i;const n=(i=this.path)==null?void 0:i.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){var i;const n=(i=this.path)==null?void 0:i.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return bh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(uI(this.dataSource)&&F6.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class G6{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||mf(e)}createContext(e,n,s,i=!1){return new H_({dataSource:e,methodName:n,targetDoc:s,path:St.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function K6(t){const e=t._freezeSettings(),n=mf(t._databaseId);return new G6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Q6(t,e,n,s,i,r={}){const a=t.createContext(r.merge||r.mergeFields?2:0,e,n,i);dI("Data must be an object, but it was:",a,s);const l=hI(s,a);let u,c;if(r.merge)u=new Cn(a.fieldMask),c=a.fieldTransforms;else if(r.mergeFields){const d=[];for(const m of r.mergeFields){const g=$_(e,m,n);if(!a.contains(g))throw new Q(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);J6(d,g)||d.push(g)}u=new Cn(d),c=a.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,c=a.fieldTransforms;return new $6(new pn(l),u,c)}class F_ extends q_{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new wl(e.serializer,vR(e.serializer,this.Vc));return new DV(e.path,n)}isEqual(e){return e instanceof F_&&this.Vc===e.Vc}}function cI(t,e){if(fI(t=Sn(t)))return dI("Unsupported field value:",e,t),hI(t,e);if(t instanceof q_)return function(s,i){if(!uI(i.dataSource))throw i.createError(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${s._methodName}() is not currently supported inside arrays`);const r=s._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(s,i){const r=[];let a=0;for(const l of s){let u=cI(l,i.childContextForArray(a));u==null&&(u={nullValue:"NULL_VALUE"}),r.push(u),a++}return{arrayValue:{values:r}}}(t,e)}return function(s,i){if((s=Sn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return vR(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const r=Me.fromDate(s);return{timestampValue:vh(i.serializer,r)}}if(s instanceof Me){const r=new Me(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:vh(i.serializer,r)}}if(s instanceof Gn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof _n)return{bytesValue:DR(i.serializer,s._byteString)};if(s instanceof mt){const r=i.databaseId,a=s.firestore._databaseId;if(!a.isEqual(r))throw i.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:w_(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof Dn)return function(a,l){const u=a instanceof Dn?a.toArray():a;return{mapValue:{fields:{[iR]:{stringValue:rR},[gh]:{arrayValue:{values:u.map(d=>{if(typeof d!="number")throw l.createError("VectorValues must only contain numeric values.");return S_(l.serializer,d)})}}}}}}(s,i);if(LR(s))return s._toProto(i.serializer);throw i.createError(`Unsupported field value: ${g_(s)}`)}(t,e)}function hI(t,e){const n={};return W1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hr(t,(s,i)=>{const r=cI(i,e.childContextForField(s));r!=null&&(n[s]=r)}),{mapValue:{fields:n}}}function fI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Me||t instanceof Gn||t instanceof _n||t instanceof mt||t instanceof q_||t instanceof Dn||LR(t))}function dI(t,e,n){if(!fI(n)||!X1(n)){const s=g_(n);throw s==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+s)}}function $_(t,e,n){if((e=Sn(e))instanceof lI)return e._internalPath;if(typeof e=="string")return X6(t,e);throw bh("Field path arguments must be of type string or ",t,!1,void 0,n)}const Y6=new RegExp("[~\\*/\\[\\]]");function X6(t,e,n){if(e.search(Y6)>=0)throw bh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new lI(...e.split("."))._internalPath}catch{throw bh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function bh(t,e,n,s,i){const r=s&&!s.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(r||a)&&(u+=" (found",r&&(u+=` in field ${s}`),a&&(u+=` in document ${i}`),u+=")"),new Q(z.INVALID_ARGUMENT,l+t+u)}function J6(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{convertValue(e,n="none"){switch(Ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw W(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return hr(e,(i,r)=>{s[i]=this.convertValue(r,n)}),s}convertVectorValue(e){var s,i,r;const n=(r=(i=(s=e.fields)==null?void 0:s[gh].arrayValue)==null?void 0:i.values)==null?void 0:r.map(a=>He(a.doubleValue));return new Dn(n)}convertGeoPoint(e){return new Gn(He(e.latitude),He(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=of(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(El(e));default:return null}}convertTimestamp(e){const n=yi(e);return new Me(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Le.fromString(e);Te(PR(s),9688,{name:e});const i=new Tl(s.get(1),s.get(3)),r=new X(s.popFirst(5));return i.isEqual(n)||As(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6 extends W6{constructor(e){super(),this.firestore=e}convertBytes(e){return new _n(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,n)}}function e3(t){return new F_("increment",t)}const f0="@firebase/firestore",d0="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n,s,i,r){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new t3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field($_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class t3 extends mI{data(){return super.data()}}function n3(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class Oo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qi extends mI{constructor(e,n,s,i,r,a){super(e,n,s,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field($_("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Qi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Qi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qi._jsonSchema={type:We("string",Qi._jsonSchemaVersion),bundleSource:We("string","DocumentSnapshot"),bundleName:We("string"),bundle:We("string")};class vc extends Qi{data(e={}){return super.data(e)}}class Zo{constructor(e,n,s,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Oo(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new vc(this._firestore,this._userDataWriter,s.key,s,new Oo(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(l=>{const u=new vc(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Oo(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>r||l.type!==3).map(l=>{const u=new vc(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Oo(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return l.type!==0&&(c=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:s3(l.type),doc:u,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Zo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=m_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],i=[];return this.docs.forEach(r=>{r._document!==null&&(n.push(r._document),s.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),i.push(r.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function s3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zo._jsonSchemaVersion="firestore/querySnapshot/1.0",Zo._jsonSchema={type:We("string",Zo._jsonSchemaVersion),bundleSource:We("string","QuerySnapshot"),bundleName:We("string"),bundle:We("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i3(t){t=yl(t,mt);const e=yl(t.firestore,j_),n=oI(e);return L6(n,t._key).then(s=>a3(e,t,s))}function $d(t,e,n){t=yl(t,mt);const s=yl(t.firestore,j_),i=n3(t.converter,e,n),r=K6(s);return r3(s,[Q6(r,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ps.none())])}function r3(t,e){const n=oI(t);return U6(n,e)}function a3(t,e,n){const s=n.docs.get(e._key),i=new Z6(t);return new Qi(t,i,e._key,s,new Oo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){x4(Va),pa(new tr("firestore",(s,{instanceIdentifier:i,options:r})=>{const a=s.getProvider("app").getImmediate(),l=new j_(new P4(s.getProvider("auth-internal")),new z4(a,s.getProvider("app-check-internal")),sV(a,i),a);return r={useFetchStreams:n,...r},l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),ci(f0,d0,e),ci(f0,d0,"esm2020")})();const o3={apiKey:"AIzaSyCo9JCoN0BRb2dB6a5Wm6itU3Fsr0G3fd0",authDomain:"my-react-app-90516368-4aea3.firebaseapp.com",projectId:"my-react-app-90516368-4aea3",storageBucket:"my-react-app-90516368-4aea3.firebasestorage.app",messagingSenderId:"1055850855092",appId:"1:1055850855092:web:4c429dcf291ab5df7ab5e1"},gI=l1(o3),Gd=N4(gI),Kd=q6(gI),l3="your_api_key_here";let Ec=null;Ec=new le({apiKey:l3,dangerouslyAllowBrowser:!0});function u3(t){const e=t;return typeof e=="object"&&e!==null&&(e.image===null||typeof e.image=="string")&&typeof e.diagnosis=="string"&&typeof e.date=="string"}const zu=5,Qd=20,m0=20,c3=(t,e)=>new Promise((n,s)=>{const i=new FileReader;i.onload=r=>{var l;const a=new Image;a.onload=()=>{const u=document.createElement("canvas"),c=e/a.width;u.width=e,u.height=a.height*c;const d=u.getContext("2d");d?(d.drawImage(a,0,0,u.width,u.height),n(u.toDataURL("image/jpeg",.8))):s("Failed to get canvas context")},a.onerror=s,a.src=(l=r.target)==null?void 0:l.result},i.onerror=s,i.readAsDataURL(t)}),g0=t=>{try{localStorage.setItem("diagnosisHistory",JSON.stringify(t))}catch(e){console.error("Could not save history to localStorage:",e),e instanceof DOMException&&(e.name==="QuotaExceededError"||e.name==="NS_ERROR_DOM_QUOTA_REACHED")&&alert("       .       .")}};function h3(){return B.jsx("div",{className:"container",children:B.jsxs("div",{className:"api-key-missing content-card",children:[B.jsx("h2",{children:"OpenAI API  "}),B.jsx("p",{children:"       ."}),B.jsx("p",{children:"     :"}),B.jsxs("p",{children:[B.jsx("strong",{children:":"})," ",B.jsx("code",{children:"VITE_OPENAI_API_KEY"})]}),B.jsxs("p",{children:[B.jsx("strong",{children:":"})," ",B.jsx("code",{children:"sk-..."}),"  OpenAI API "]})]})})}function f3(){const[t,e]=ut.useState(null),[n,s]=ut.useState(""),[i,r]=ut.useState(!1),[a,l]=ut.useState([]),u=ut.useRef(null),[c,d]=ut.useState(!1),[m,g]=ut.useState(null),[p,C]=ut.useState(null),[O,x]=ut.useState(0),[S,y]=ut.useState(zu),[A,I]=ut.useState(()=>localStorage.getItem("theme")||"light"),U=ut.useCallback(async H=>{if(H){const J=Fd(Kd,"users",H.uid),Pe=await i3(J);if(Pe.exists()){const at=Pe.data();x(at.diagnosisCount||0),at.hasPaid?y(1/0):y(at.diagnosisLimit||Qd)}else await $d(J,{email:H.email,displayName:H.displayName,diagnosisCount:0,diagnosisLimit:Qd,hasPaid:!1,createdAt:new Date}),x(0),y(Qd)}else{const J=parseInt(localStorage.getItem("guestDiagnosisCount")||"0",10);x(J),y(zu)}},[]);ut.useEffect(()=>{const H=vx(Gd,J=>{C(J),U(J)});return()=>H()},[U]),ut.useEffect(()=>{document.body.setAttribute("data-theme",A),localStorage.setItem("theme",A)},[A]),ut.useEffect(()=>{const H=localStorage.getItem("diagnosisHistory");if(H)try{const J=JSON.parse(H);if(Array.isArray(J)){const Pe=J.filter(u3).map((at,ot)=>({...at,id:at.id||Date.now()+ot}));l(Pe.slice(0,m0))}}catch(J){console.error("Error parsing history, clearing it.",J),localStorage.removeItem("diagnosisHistory")}},[]);const j=()=>{I(H=>H==="light"?"dark":"light")};if(!Ec)return B.jsx(h3,{});const E=async()=>{const H=new os;try{const J=await Bx(Gd,H);console.log("Login popup successful for user:",J.user.displayName)}catch(J){console.error("Google login popup error:",J),J.code==="auth/popup-closed-by-user"?alert("  .   ."):J.code==="auth/cancelled-popup-request"||alert(`   : ${J.message}`)}},v=async()=>{try{await Ex(Gd)}catch(H){console.error("Logout error:",H)}},T=async H=>{if(H&&H.type.startsWith("image/"))try{const J=await c3(H,400);e(J),s("")}catch(J){console.error("Image resizing failed:",J);const Pe=new FileReader;Pe.onloadend=()=>{e(Pe.result)},Pe.readAsDataURL(H)}},b=()=>{e(null),s(""),u.current&&(u.current.value="")},w=H=>{var Pe;const J=(Pe=H.target.files)==null?void 0:Pe[0];J&&T(J)},D=H=>{H.preventDefault(),H.stopPropagation(),d(!0)},R=H=>{H.preventDefault(),H.stopPropagation(),d(!1)},Ge=H=>{H.preventDefault(),H.stopPropagation()},It=H=>{H.preventDefault(),H.stopPropagation(),d(!1);const J=H.dataTransfer.files[0];J&&T(J)},F=async()=>{if(!(!t||!Ec)){if(O>=S){const H=p?"   .    .":`   ${zu}  .     .`;alert(H);return}r(!0),s("");try{const J=(await Ec.chat.completions.create({model:"gpt-4o",messages:[{role:"user",content:[{type:"text",text:"   ,      .   ,        ,    .    ,    ."},{type:"image_url",image_url:{url:t}}]}]})).choices[0].message.content||"    .";if(s(J),p&&S!==1/0){const ot=Fd(Kd,"users",p.uid);await $d(ot,{diagnosisCount:e3(1)},{merge:!0}),x(Mn=>Mn+1)}else p||(localStorage.setItem("guestDiagnosisCount",(O+1).toString()),x(ot=>ot+1));const at=[{id:Date.now(),image:t,diagnosis:J,date:new Date().toLocaleString()},...a].slice(0,m0);l(at),g0(at)}catch(H){let J="    .";H instanceof Error&&(J=H.message),s(` : ${J}`)}finally{r(!1)}}},oe=(H,J)=>{if(H.stopPropagation(),window.confirm("    ?")){const Pe=a.filter(at=>at.id!==J);l(Pe),g0(Pe),(m==null?void 0:m.id)===J&&g(null)}},ne=async()=>{if(!p)return;const H=Fd(Kd,"users",p.uid);try{await $d(H,{hasPaid:!0,diagnosisLimit:1/0},{merge:!0}),await U(p),alert(" !     .")}catch(J){console.error("Payment simulation failed:",J),alert("    .")}},ye=O>=S;return B.jsxs(B.Fragment,{children:[B.jsxs("header",{className:"hero-section",children:[B.jsxs("div",{className:"header-controls",children:[B.jsx("div",{className:"theme-toggle-container",children:B.jsx("button",{onClick:j,className:"theme-toggle-button",children:A==="light"?" ":" "})}),B.jsxs("div",{className:"auth-controls",children:[p?B.jsxs("div",{className:"user-info",children:[B.jsx("img",{src:p.photoURL||"",alt:p.displayName||"User",className:"user-avatar"}),B.jsx("span",{children:p.displayName}),B.jsx("button",{onClick:v,className:"auth-button",children:""})]}):B.jsx("button",{onClick:E,className:"auth-button",children:"Google  "}),B.jsx("a",{href:"https://polar.sh/nmdong-hue",className:"polar-button","data-polar-button-after":"Sponsor",children:B.jsx("img",{src:"https://polar.sh/embed/avatars/nmdong-hue.svg",alt:"nmdong-hue Polar profile"})})]})]}),B.jsxs("div",{className:"container",children:[B.jsx("h1",{children:"AI  "}),B.jsx("p",{children:"       ."}),B.jsxs("div",{className:"usage-info",children:["  : ",S===1/0?"":`${Math.max(0,S-O)} / ${S}`,p&&S!==1/0&&B.jsx("button",{onClick:ne,className:"simulate-payment-button",children:"   ()"})]})]})]}),B.jsxs("div",{className:"container",children:[B.jsxs("div",{className:"main-content",children:[B.jsxs("div",{className:"content-card upload-section",children:[B.jsx("h2",{children:"1.  "}),B.jsx("div",{className:`image-placeholder ${c?"dragging":""}`,onClick:()=>{var H;return!ye&&((H=u.current)==null?void 0:H.click())},onDragEnter:D,onDragLeave:R,onDragOver:Ge,onDrop:It,style:{backgroundImage:t?`url(${t})`:"none",cursor:ye?"not-allowed":"pointer"},children:!t&&B.jsxs("div",{className:"placeholder-content",children:[B.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[B.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),B.jsx("polyline",{points:"17 8 12 3 7 8"}),B.jsx("line",{x1:"12",x2:"12",y1:"3",y2:"15"})]}),B.jsx("span",{children:"     "})]})}),B.jsx("input",{type:"file",accept:"image/*",onChange:w,ref:u,style:{display:"none"},disabled:ye}),B.jsxs("div",{className:"upload-actions",children:[B.jsx("button",{onClick:F,disabled:!t||i||ye,className:"action-button",children:i?B.jsxs(B.Fragment,{children:[B.jsx("div",{className:"spinner"}),B.jsx("span",{children:" ..."})]}):ye?" ":""}),t&&!i&&B.jsx("button",{onClick:b,className:"clear-button",children:""})]}),ye&&B.jsx("div",{className:"limit-message",children:p?"   .     !":`   ${zu}  .     !`})]}),B.jsxs("div",{className:"content-card results-section",children:[B.jsxs("div",{className:"card-header",children:[B.jsx("h2",{children:"2.  "}),(n||i)&&B.jsx("button",{onClick:b,className:"reset-button-header",children:""})]}),i||n?B.jsxs(B.Fragment,{children:[i&&!n&&B.jsx("div",{className:"spinner-large"}),n&&t&&B.jsx("img",{src:t,alt:" ",className:"result-image"}),B.jsx("pre",{className:"diagnosis-output",children:n})]}):B.jsx("div",{className:"placeholder-content",style:{height:"100%",justifyContent:"center"},children:B.jsx("p",{children:"       ."})})]})]}),a.length>0&&B.jsxs("div",{className:"content-card history-section",children:[B.jsx("h2",{children:"  "}),B.jsx("ul",{children:a.map(H=>B.jsxs("li",{onClick:()=>g(H),children:[H.image?B.jsx("img",{src:H.image,alt:" "}):B.jsx("div",{className:"history-image-placeholder"}),B.jsxs("div",{className:"history-info",children:[B.jsxs("div",{className:"history-text",children:[B.jsxs("p",{children:[H.diagnosis.substring(0,80),"..."]}),B.jsx("span",{children:H.date})]}),B.jsx("button",{className:"history-delete-button",onClick:J=>oe(J,H.id),children:""})]})]},H.id))})]})]}),m&&B.jsx("div",{className:"modal-backdrop",onClick:()=>g(null),children:B.jsxs("div",{className:"modal-content",onClick:H=>H.stopPropagation(),children:[B.jsx("button",{className:"modal-close-button",onClick:()=>g(null),children:""}),m.image?B.jsx("img",{src:m.image,alt:" ",className:"modal-image"}):B.jsx("div",{className:"modal-image-placeholder"}),B.jsxs("div",{className:"modal-diagnosis",children:[B.jsx("h2",{children:"  "}),B.jsx("pre",{children:m.diagnosis}),B.jsxs("span",{children:[" : ",m.date]})]})]})}),B.jsx("footer",{children:B.jsx("div",{className:"container",children:B.jsxs("p",{children:[" ",new Date().getFullYear()," AI  .   ."]})})})]})}jO.createRoot(document.getElementById("root")).render(B.jsx(ut.StrictMode,{children:B.jsx(f3,{})}));
