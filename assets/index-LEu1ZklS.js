(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();var R0={exports:{}},Vh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iC=Symbol.for("react.transitional.element"),rC=Symbol.for("react.fragment");function I0(t,e,n){var s=null;if(n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),"key"in e){n={};for(var i in e)i!=="key"&&(n[i]=e[i])}else n=e;return e=n.ref,{$$typeof:iC,type:t,key:s,ref:e!==void 0?e:null,props:n}}Vh.Fragment=rC;Vh.jsx=I0;Vh.jsxs=I0;R0.exports=Vh;var L=R0.exports,C0={exports:{}},ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lg=Symbol.for("react.transitional.element"),aC=Symbol.for("react.portal"),oC=Symbol.for("react.fragment"),lC=Symbol.for("react.strict_mode"),uC=Symbol.for("react.profiler"),cC=Symbol.for("react.consumer"),hC=Symbol.for("react.context"),fC=Symbol.for("react.forward_ref"),dC=Symbol.for("react.suspense"),mC=Symbol.for("react.memo"),O0=Symbol.for("react.lazy"),gC=Symbol.for("react.activity"),Wy=Symbol.iterator;function pC(t){return t===null||typeof t!="object"?null:(t=Wy&&t[Wy]||t["@@iterator"],typeof t=="function"?t:null)}var N0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D0=Object.assign,M0={};function Ia(t,e,n){this.props=t,this.context=e,this.refs=M0,this.updater=n||N0}Ia.prototype.isReactComponent={};Ia.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ia.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function x0(){}x0.prototype=Ia.prototype;function Ug(t,e,n){this.props=t,this.context=e,this.refs=M0,this.updater=n||N0}var zg=Ug.prototype=new x0;zg.constructor=Ug;D0(zg,Ia.prototype);zg.isPureReactComponent=!0;var Zy=Array.isArray;function nm(){}var Ve={H:null,A:null,T:null,S:null},V0=Object.prototype.hasOwnProperty;function Bg(t,e,n){var s=n.ref;return{$$typeof:Lg,type:t,key:e,ref:s!==void 0?s:null,props:n}}function _C(t,e){return Bg(t.type,e,t.props)}function jg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Lg}function yC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ev=/\/+/g;function Qf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?yC(""+t.key):e.toString(36)}function vC(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(nm,nm):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Cr(t,e,n,s,i){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(r){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Lg:case aC:a=!0;break;case O0:return a=t._init,Cr(a(t._payload),e,n,s,i)}}if(a)return i=i(t),a=s===""?"."+Qf(t,0):s,Zy(i)?(n="",a!=null&&(n=a.replace(ev,"$&/")+"/"),Cr(i,e,n,"",function(c){return c})):i!=null&&(jg(i)&&(i=_C(i,n+(i.key==null||t&&t.key===i.key?"":(""+i.key).replace(ev,"$&/")+"/")+a)),e.push(i)),1;a=0;var l=s===""?".":s+":";if(Zy(t))for(var u=0;u<t.length;u++)s=t[u],r=l+Qf(s,u),a+=Cr(s,e,n,r,i);else if(u=pC(t),typeof u=="function")for(t=u.call(t),u=0;!(s=t.next()).done;)s=s.value,r=l+Qf(s,u++),a+=Cr(s,e,n,r,i);else if(r==="object"){if(typeof t.then=="function")return Cr(vC(t),e,n,s,i);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function Eu(t,e,n){if(t==null)return t;var s=[],i=0;return Cr(t,s,"","",function(r){return e.call(n,r,i++)}),s}function EC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tv=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},TC={map:Eu,forEach:function(t,e,n){Eu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Eu(t,function(){e++}),e},toArray:function(t){return Eu(t,function(e){return e})||[]},only:function(t){if(!jg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Activity=gC;ie.Children=TC;ie.Component=Ia;ie.Fragment=oC;ie.Profiler=uC;ie.PureComponent=Ug;ie.StrictMode=lC;ie.Suspense=dC;ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ve;ie.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Ve.H.useMemoCache(t)}};ie.cache=function(t){return function(){return t.apply(null,arguments)}};ie.cacheSignal=function(){return null};ie.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var s=D0({},t.props),i=t.key;if(e!=null)for(r in e.key!==void 0&&(i=""+e.key),e)!V0.call(e,r)||r==="key"||r==="__self"||r==="__source"||r==="ref"&&e.ref===void 0||(s[r]=e[r]);var r=arguments.length-2;if(r===1)s.children=n;else if(1<r){for(var a=Array(r),l=0;l<r;l++)a[l]=arguments[l+2];s.children=a}return Bg(t.type,i,s)};ie.createContext=function(t){return t={$$typeof:hC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:cC,_context:t},t};ie.createElement=function(t,e,n){var s,i={},r=null;if(e!=null)for(s in e.key!==void 0&&(r=""+e.key),e)V0.call(e,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(i[s]=e[s]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)i[s]===void 0&&(i[s]=a[s]);return Bg(t,r,i)};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:fC,render:t}};ie.isValidElement=jg;ie.lazy=function(t){return{$$typeof:O0,_payload:{_status:-1,_result:t},_init:EC}};ie.memo=function(t,e){return{$$typeof:mC,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=Ve.T,n={};Ve.T=n;try{var s=t(),i=Ve.S;i!==null&&i(n,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(nm,tv)}catch(r){tv(r)}finally{e!==null&&n.types!==null&&(e.types=n.types),Ve.T=e}};ie.unstable_useCacheRefresh=function(){return Ve.H.useCacheRefresh()};ie.use=function(t){return Ve.H.use(t)};ie.useActionState=function(t,e,n){return Ve.H.useActionState(t,e,n)};ie.useCallback=function(t,e){return Ve.H.useCallback(t,e)};ie.useContext=function(t){return Ve.H.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t,e){return Ve.H.useDeferredValue(t,e)};ie.useEffect=function(t,e){return Ve.H.useEffect(t,e)};ie.useEffectEvent=function(t){return Ve.H.useEffectEvent(t)};ie.useId=function(){return Ve.H.useId()};ie.useImperativeHandle=function(t,e,n){return Ve.H.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return Ve.H.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return Ve.H.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return Ve.H.useMemo(t,e)};ie.useOptimistic=function(t,e){return Ve.H.useOptimistic(t,e)};ie.useReducer=function(t,e,n){return Ve.H.useReducer(t,e,n)};ie.useRef=function(t){return Ve.H.useRef(t)};ie.useState=function(t){return Ve.H.useState(t)};ie.useSyncExternalStore=function(t,e,n){return Ve.H.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return Ve.H.useTransition()};ie.version="19.2.4";C0.exports=ie;var Le=C0.exports,k0={exports:{}},kh={},P0={exports:{}},L0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,oe){var te=H.length;H.push(oe);e:for(;0<te;){var Ae=te-1>>>1,Be=H[Ae];if(0<i(Be,oe))H[Ae]=oe,H[te]=Be,te=Ae;else break e}}function n(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var oe=H[0],te=H.pop();if(te!==oe){H[0]=te;e:for(var Ae=0,Be=H.length,zt=Be>>>1;Ae<zt;){var G=2*(Ae+1)-1,re=H[G],be=G+1,Ye=H[be];if(0>i(re,te))be<Be&&0>i(Ye,re)?(H[Ae]=Ye,H[be]=te,Ae=be):(H[Ae]=re,H[G]=te,Ae=G);else if(be<Be&&0>i(Ye,te))H[Ae]=Ye,H[be]=te,Ae=be;else break e}}return oe}function i(H,oe){var te=H.sortIndex-oe.sortIndex;return te!==0?te:H.id-oe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],d=1,m=null,g=3,p=!1,C=!1,N=!1,x=!1,S=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;function I(H){for(var oe=n(c);oe!==null;){if(oe.callback===null)s(c);else if(oe.startTime<=H)s(c),oe.sortIndex=oe.expirationTime,e(u,oe);else break;oe=n(c)}}function B(H){if(N=!1,I(H),!C)if(n(u)!==null)C=!0,j||(j=!0,O());else{var oe=n(c);oe!==null&&It(B,oe.startTime-H)}}var j=!1,v=-1,E=5,T=-1;function A(){return x?!0:!(t.unstable_now()-T<E)}function w(){if(x=!1,j){var H=t.unstable_now();T=H;var oe=!0;try{e:{C=!1,N&&(N=!1,y(v),v=-1),p=!0;var te=g;try{t:{for(I(H),m=n(u);m!==null&&!(m.expirationTime>H&&A());){var Ae=m.callback;if(typeof Ae=="function"){m.callback=null,g=m.priorityLevel;var Be=Ae(m.expirationTime<=H);if(H=t.unstable_now(),typeof Be=="function"){m.callback=Be,I(H),oe=!0;break t}m===n(u)&&s(u),I(H)}else s(u);m=n(u)}if(m!==null)oe=!0;else{var zt=n(c);zt!==null&&It(B,zt.startTime-H),oe=!1}}break e}finally{m=null,g=te,p=!1}oe=void 0}}finally{oe?O():j=!1}}}var O;if(typeof b=="function")O=function(){b(w)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Qe=R.port2;R.port1.onmessage=w,O=function(){Qe.postMessage(null)}}else O=function(){S(w,0)};function It(H,oe){v=S(function(){H(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(H){switch(g){case 1:case 2:case 3:var oe=3;break;default:oe=g}var te=g;g=oe;try{return H()}finally{g=te}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(H,oe){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var te=g;g=H;try{return oe()}finally{g=te}},t.unstable_scheduleCallback=function(H,oe,te){var Ae=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?Ae+te:Ae):te=Ae,H){case 1:var Be=-1;break;case 2:Be=250;break;case 5:Be=1073741823;break;case 4:Be=1e4;break;default:Be=5e3}return Be=te+Be,H={id:d++,callback:oe,priorityLevel:H,startTime:te,expirationTime:Be,sortIndex:-1},te>Ae?(H.sortIndex=te,e(c,H),n(u)===null&&H===n(c)&&(N?(y(v),v=-1):N=!0,It(B,te-Ae))):(H.sortIndex=Be,e(u,H),C||p||(C=!0,j||(j=!0,O()))),H},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(H){var oe=g;return function(){var te=g;g=oe;try{return H.apply(this,arguments)}finally{g=te}}}})(L0);P0.exports=L0;var SC=P0.exports,U0={exports:{}},Ut={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AC=Le;function z0(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ps(){}var Lt={d:{f:Ps,r:function(){throw Error(z0(522))},D:Ps,C:Ps,L:Ps,m:Ps,X:Ps,S:Ps,M:Ps},p:0,findDOMNode:null},bC=Symbol.for("react.portal");function wC(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bC,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}var Lo=AC.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Ph(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Ut.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Lt;Ut.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(z0(299));return wC(t,e,null,n)};Ut.flushSync=function(t){var e=Lo.T,n=Lt.p;try{if(Lo.T=null,Lt.p=2,t)return t()}finally{Lo.T=e,Lt.p=n,Lt.d.f()}};Ut.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Lt.d.C(t,e))};Ut.prefetchDNS=function(t){typeof t=="string"&&Lt.d.D(t)};Ut.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,s=Ph(n,e.crossOrigin),i=typeof e.integrity=="string"?e.integrity:void 0,r=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?Lt.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:s,integrity:i,fetchPriority:r}):n==="script"&&Lt.d.X(t,{crossOrigin:s,integrity:i,fetchPriority:r,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Ut.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Ph(e.as,e.crossOrigin);Lt.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Lt.d.M(t)};Ut.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,s=Ph(n,e.crossOrigin);Lt.d.L(t,n,{crossOrigin:s,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Ut.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Ph(e.as,e.crossOrigin);Lt.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Lt.d.m(t)};Ut.requestFormReset=function(t){Lt.d.r(t)};Ut.unstable_batchedUpdates=function(t,e){return t(e)};Ut.useFormState=function(t,e,n){return Lo.H.useFormState(t,e,n)};Ut.useFormStatus=function(){return Lo.H.useHostTransitionStatus()};Ut.version="19.2.4";function B0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(B0)}catch(t){console.error(t)}}B0(),U0.exports=Ut;var RC=U0.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lt=SC,j0=Le,IC=RC;function k(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function q0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function H0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function F0(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function nv(t){if(Pl(t)!==t)throw Error(k(188))}function CC(t){var e=t.alternate;if(!e){if(e=Pl(t),e===null)throw Error(k(188));return e!==t?null:t}for(var n=t,s=e;;){var i=n.return;if(i===null)break;var r=i.alternate;if(r===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===n)return nv(i),t;if(r===s)return nv(i),e;r=r.sibling}throw Error(k(188))}if(n.return!==s.return)n=i,s=r;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,s=r;break}if(l===s){a=!0,s=i,n=r;break}l=l.sibling}if(!a){for(l=r.child;l;){if(l===n){a=!0,n=r,s=i;break}if(l===s){a=!0,s=r,n=i;break}l=l.sibling}if(!a)throw Error(k(189))}}if(n.alternate!==s)throw Error(k(190))}if(n.tag!==3)throw Error(k(188));return n.stateNode.current===n?t:e}function $0(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=$0(t),e!==null)return e;t=t.sibling}return null}var ke=Object.assign,OC=Symbol.for("react.element"),Tu=Symbol.for("react.transitional.element"),_o=Symbol.for("react.portal"),Ur=Symbol.for("react.fragment"),G0=Symbol.for("react.strict_mode"),sm=Symbol.for("react.profiler"),K0=Symbol.for("react.consumer"),us=Symbol.for("react.context"),qg=Symbol.for("react.forward_ref"),im=Symbol.for("react.suspense"),rm=Symbol.for("react.suspense_list"),Hg=Symbol.for("react.memo"),Bs=Symbol.for("react.lazy"),am=Symbol.for("react.activity"),NC=Symbol.for("react.memo_cache_sentinel"),sv=Symbol.iterator;function oo(t){return t===null||typeof t!="object"?null:(t=sv&&t[sv]||t["@@iterator"],typeof t=="function"?t:null)}var DC=Symbol.for("react.client.reference");function om(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===DC?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ur:return"Fragment";case sm:return"Profiler";case G0:return"StrictMode";case im:return"Suspense";case rm:return"SuspenseList";case am:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case _o:return"Portal";case us:return t.displayName||"Context";case K0:return(t._context.displayName||"Context")+".Consumer";case qg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Hg:return e=t.displayName||null,e!==null?e:om(t.type)||"Memo";case Bs:e=t._payload,t=t._init;try{return om(t(e))}catch{}}return null}var yo=Array.isArray,ee=j0.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve=IC.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ki={pending:!1,data:null,method:null,action:null},lm=[],zr=-1;function Xn(t){return{current:t}}function gt(t){0>zr||(t.current=lm[zr],lm[zr]=null,zr--)}function Oe(t,e){zr++,lm[zr]=t.current,t.current=e}var Hn=Xn(null),ll=Xn(null),ti=Xn(null),Dc=Xn(null);function Mc(t,e){switch(Oe(ti,e),Oe(ll,t),Oe(Hn,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?uE(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=uE(e),t=db(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}gt(Hn),Oe(Hn,t)}function ua(){gt(Hn),gt(ll),gt(ti)}function um(t){t.memoizedState!==null&&Oe(Dc,t);var e=Hn.current,n=db(e,t.type);e!==n&&(Oe(ll,t),Oe(Hn,n))}function xc(t){ll.current===t&&(gt(Hn),gt(ll)),Dc.current===t&&(gt(Dc),vl._currentValue=Ki)}var Yf,iv;function Pi(t){if(Yf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Yf=e&&e[1]||"",iv=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yf+t+iv}var Xf=!1;function Jf(t,e){if(!t||Xf)return"";Xf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(e){var m=function(){throw Error()};if(Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(p){var g=p}Reflect.construct(t,[],m)}else{try{m.call()}catch(p){g=p}t.call(m.prototype)}}else{try{throw Error()}catch(p){g=p}(m=t())&&typeof m.catch=="function"&&m.catch(function(){})}}catch(p){if(p&&g&&typeof p.stack=="string")return[p.stack,g.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=s.DetermineComponentFrameRoot(),a=r[0],l=r[1];if(a&&l){var u=a.split(`
`),c=l.split(`
`);for(i=s=0;s<u.length&&!u[s].includes("DetermineComponentFrameRoot");)s++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(s===u.length||i===c.length)for(s=u.length-1,i=c.length-1;1<=s&&0<=i&&u[s]!==c[i];)i--;for(;1<=s&&0<=i;s--,i--)if(u[s]!==c[i]){if(s!==1||i!==1)do if(s--,i--,0>i||u[s]!==c[i]){var d=`
`+u[s].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=s&&0<=i);break}}}finally{Xf=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Pi(n):""}function MC(t,e){switch(t.tag){case 26:case 27:case 5:return Pi(t.type);case 16:return Pi("Lazy");case 13:return t.child!==e&&e!==null?Pi("Suspense Fallback"):Pi("Suspense");case 19:return Pi("SuspenseList");case 0:case 15:return Jf(t.type,!1);case 11:return Jf(t.type.render,!1);case 1:return Jf(t.type,!0);case 31:return Pi("Activity");default:return""}}function rv(t){try{var e="",n=null;do e+=MC(t,n),n=t,t=t.return;while(t);return e}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var cm=Object.prototype.hasOwnProperty,Fg=lt.unstable_scheduleCallback,Wf=lt.unstable_cancelCallback,xC=lt.unstable_shouldYield,VC=lt.unstable_requestPaint,rn=lt.unstable_now,kC=lt.unstable_getCurrentPriorityLevel,Q0=lt.unstable_ImmediatePriority,Y0=lt.unstable_UserBlockingPriority,Vc=lt.unstable_NormalPriority,PC=lt.unstable_LowPriority,X0=lt.unstable_IdlePriority,LC=lt.log,UC=lt.unstable_setDisableYieldValue,Ll=null,an=null;function Ys(t){if(typeof LC=="function"&&UC(t),an&&typeof an.setStrictMode=="function")try{an.setStrictMode(Ll,t)}catch{}}var on=Math.clz32?Math.clz32:jC,zC=Math.log,BC=Math.LN2;function jC(t){return t>>>=0,t===0?32:31-(zC(t)/BC|0)|0}var Su=256,Au=262144,bu=4194304;function Li(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Lh(t,e,n){var s=t.pendingLanes;if(s===0)return 0;var i=0,r=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var l=s&134217727;return l!==0?(s=l&~r,s!==0?i=Li(s):(a&=l,a!==0?i=Li(a):n||(n=l&~t,n!==0&&(i=Li(n))))):(l=s&~r,l!==0?i=Li(l):a!==0?i=Li(a):n||(n=s&~t,n!==0&&(i=Li(n)))),i===0?0:e!==0&&e!==i&&!(e&r)&&(r=i&-i,n=e&-e,r>=n||r===32&&(n&4194048)!==0)?e:i}function Ul(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function qC(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function J0(){var t=bu;return bu<<=1,!(bu&62914560)&&(bu=4194304),t}function Zf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function zl(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function HC(t,e,n,s,i,r){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,u=t.expirationTimes,c=t.hiddenUpdates;for(n=a&~n;0<n;){var d=31-on(n),m=1<<d;l[d]=0,u[d]=-1;var g=c[d];if(g!==null)for(c[d]=null,d=0;d<g.length;d++){var p=g[d];p!==null&&(p.lane&=-536870913)}n&=~m}s!==0&&W0(t,s,0),r!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=r&~(a&~e))}function W0(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var s=31-on(e);t.entangledLanes|=e,t.entanglements[s]=t.entanglements[s]|1073741824|n&261930}function Z0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-on(n),i=1<<s;i&e|t[s]&e&&(t[s]|=e),n&=~i}}function eS(t,e){var n=e&-e;return n=n&42?1:$g(n),n&(t.suspendedLanes|e)?0:n}function $g(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Gg(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function tS(){var t=ve.p;return t!==0?t:(t=window.event,t===void 0?32:bb(t.type))}function av(t,e){var n=ve.p;try{return ve.p=t,e()}finally{ve.p=n}}var wi=Math.random().toString(36).slice(2),Et="__reactFiber$"+wi,Kt="__reactProps$"+wi,Ca="__reactContainer$"+wi,hm="__reactEvents$"+wi,FC="__reactListeners$"+wi,$C="__reactHandles$"+wi,ov="__reactResources$"+wi,Bl="__reactMarker$"+wi;function Kg(t){delete t[Et],delete t[Kt],delete t[hm],delete t[FC],delete t[$C]}function Br(t){var e=t[Et];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ca]||n[Et]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=mE(t);t!==null;){if(n=t[Et])return n;t=mE(t)}return e}t=n,n=t.parentNode}return null}function Oa(t){if(t=t[Et]||t[Ca]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function vo(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(k(33))}function Jr(t){var e=t[ov];return e||(e=t[ov]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function dt(t){t[Bl]=!0}var nS=new Set,sS={};function hr(t,e){ca(t,e),ca(t+"Capture",e)}function ca(t,e){for(sS[t]=e,t=0;t<e.length;t++)nS.add(e[t])}var GC=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lv={},uv={};function KC(t){return cm.call(uv,t)?!0:cm.call(lv,t)?!1:GC.test(t)?uv[t]=!0:(lv[t]=!0,!1)}function Xu(t,e,n){if(KC(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var s=e.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function wu(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Zn(t,e,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+s)}}function dn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function iS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function QC(t,e,n){var s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,r=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,r.call(this,a)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function fm(t){if(!t._valueTracker){var e=iS(t)?"checked":"value";t._valueTracker=QC(t,e,""+t[e])}}function rS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=iS(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function kc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var YC=/[\n"\\]/g;function pn(t){return t.replace(YC,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function dm(t,e,n,s,i,r,a,l){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+dn(e)):t.value!==""+dn(e)&&(t.value=""+dn(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?mm(t,a,dn(e)):n!=null?mm(t,a,dn(n)):s!=null&&t.removeAttribute("value"),i==null&&r!=null&&(t.defaultChecked=!!r),i!=null&&(t.checked=i&&typeof i!="function"&&typeof i!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+dn(l):t.removeAttribute("name")}function aS(t,e,n,s,i,r,a,l){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.type=r),e!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||e!=null)){fm(t);return}n=n!=null?""+dn(n):"",e=e!=null?""+dn(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}s=s??i,s=typeof s!="function"&&typeof s!="symbol"&&!!s,t.checked=l?t.checked:!!s,t.defaultChecked=!!s,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a),fm(t)}function mm(t,e,n){e==="number"&&kc(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Wr(t,e,n,s){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&s&&(t[n].defaultSelected=!0)}else{for(n=""+dn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,s&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function oS(t,e,n){if(e!=null&&(e=""+dn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+dn(n):""}function lS(t,e,n,s){if(e==null){if(s!=null){if(n!=null)throw Error(k(92));if(yo(s)){if(1<s.length)throw Error(k(93));s=s[0]}n=s}n==null&&(n=""),e=n}n=dn(e),t.defaultValue=n,s=t.textContent,s===n&&s!==""&&s!==null&&(t.value=s),fm(t)}function ha(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var XC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cv(t,e,n){var s=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":s?t.setProperty(e,n):typeof n!="number"||n===0||XC.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function uS(t,e,n){if(e!=null&&typeof e!="object")throw Error(k(62));if(t=t.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||e!=null&&e.hasOwnProperty(s)||(s.indexOf("--")===0?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="");for(var i in e)s=e[i],e.hasOwnProperty(i)&&n[i]!==s&&cv(t,i,s)}else for(var r in e)e.hasOwnProperty(r)&&cv(t,r,e[r])}function Qg(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var JC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),WC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ju(t){return WC.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function cs(){}var gm=null;function Yg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jr=null,Zr=null;function hv(t){var e=Oa(t);if(e&&(t=e.stateNode)){var n=t[Kt]||null;e:switch(t=e.stateNode,e.type){case"input":if(dm(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+pn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var i=s[Kt]||null;if(!i)throw Error(k(90));dm(s,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(e=0;e<n.length;e++)s=n[e],s.form===t.form&&rS(s)}break e;case"textarea":oS(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Wr(t,!!n.multiple,e,!1)}}}var ed=!1;function cS(t,e,n){if(ed)return t(e,n);ed=!0;try{var s=t(e);return s}finally{if(ed=!1,(jr!==null||Zr!==null)&&(Yh(),jr&&(e=jr,t=Zr,Zr=jr=null,hv(e),t)))for(e=0;e<t.length;e++)hv(t[e])}}function ul(t,e){var n=t.stateNode;if(n===null)return null;var s=n[Kt]||null;if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(k(231,e,typeof n));return n}var vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pm=!1;if(vs)try{var lo={};Object.defineProperty(lo,"passive",{get:function(){pm=!0}}),window.addEventListener("test",lo,lo),window.removeEventListener("test",lo,lo)}catch{pm=!1}var Xs=null,Xg=null,Wu=null;function hS(){if(Wu)return Wu;var t,e=Xg,n=e.length,s,i="value"in Xs?Xs.value:Xs.textContent,r=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(s=1;s<=a&&e[n-s]===i[r-s];s++);return Wu=i.slice(t,1<s?1-s:void 0)}function Zu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ru(){return!0}function fv(){return!1}function Qt(t){function e(n,s,i,r,a){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Ru:fv,this.isPropagationStopped=fv,this}return ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ru)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ru)},persist:function(){},isPersistent:Ru}),e}var fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uh=Qt(fr),jl=ke({},fr,{view:0,detail:0}),ZC=Qt(jl),td,nd,uo,zh=ke({},jl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==uo&&(uo&&t.type==="mousemove"?(td=t.screenX-uo.screenX,nd=t.screenY-uo.screenY):nd=td=0,uo=t),td)},movementY:function(t){return"movementY"in t?t.movementY:nd}}),dv=Qt(zh),e2=ke({},zh,{dataTransfer:0}),t2=Qt(e2),n2=ke({},jl,{relatedTarget:0}),sd=Qt(n2),s2=ke({},fr,{animationName:0,elapsedTime:0,pseudoElement:0}),i2=Qt(s2),r2=ke({},fr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),a2=Qt(r2),o2=ke({},fr,{data:0}),mv=Qt(o2),l2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},u2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},c2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function h2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=c2[t])?!!e[t]:!1}function Jg(){return h2}var f2=ke({},jl,{key:function(t){if(t.key){var e=l2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?u2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jg,charCode:function(t){return t.type==="keypress"?Zu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),d2=Qt(f2),m2=ke({},zh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gv=Qt(m2),g2=ke({},jl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jg}),p2=Qt(g2),_2=ke({},fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),y2=Qt(_2),v2=ke({},zh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),E2=Qt(v2),T2=ke({},fr,{newState:0,oldState:0}),S2=Qt(T2),A2=[9,13,27,32],Wg=vs&&"CompositionEvent"in window,Uo=null;vs&&"documentMode"in document&&(Uo=document.documentMode);var b2=vs&&"TextEvent"in window&&!Uo,fS=vs&&(!Wg||Uo&&8<Uo&&11>=Uo),pv=" ",_v=!1;function dS(t,e){switch(t){case"keyup":return A2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qr=!1;function w2(t,e){switch(t){case"compositionend":return mS(e);case"keypress":return e.which!==32?null:(_v=!0,pv);case"textInput":return t=e.data,t===pv&&_v?null:t;default:return null}}function R2(t,e){if(qr)return t==="compositionend"||!Wg&&dS(t,e)?(t=hS(),Wu=Xg=Xs=null,qr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fS&&e.locale!=="ko"?null:e.data;default:return null}}var I2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!I2[t.type]:e==="textarea"}function gS(t,e,n,s){jr?Zr?Zr.push(s):Zr=[s]:jr=s,e=Zc(e,"onChange"),0<e.length&&(n=new Uh("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var zo=null,cl=null;function C2(t){cb(t,0)}function Bh(t){var e=vo(t);if(rS(e))return t}function vv(t,e){if(t==="change")return e}var pS=!1;if(vs){var id;if(vs){var rd="oninput"in document;if(!rd){var Ev=document.createElement("div");Ev.setAttribute("oninput","return;"),rd=typeof Ev.oninput=="function"}id=rd}else id=!1;pS=id&&(!document.documentMode||9<document.documentMode)}function Tv(){zo&&(zo.detachEvent("onpropertychange",_S),cl=zo=null)}function _S(t){if(t.propertyName==="value"&&Bh(cl)){var e=[];gS(e,cl,t,Yg(t)),cS(C2,e)}}function O2(t,e,n){t==="focusin"?(Tv(),zo=e,cl=n,zo.attachEvent("onpropertychange",_S)):t==="focusout"&&Tv()}function N2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bh(cl)}function D2(t,e){if(t==="click")return Bh(e)}function M2(t,e){if(t==="input"||t==="change")return Bh(e)}function x2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var un=typeof Object.is=="function"?Object.is:x2;function hl(t,e){if(un(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!cm.call(e,i)||!un(t[i],e[i]))return!1}return!0}function Sv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Av(t,e){var n=Sv(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sv(n)}}function yS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?yS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function vS(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=kc(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=kc(t.document)}return e}function Zg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var V2=vs&&"documentMode"in document&&11>=document.documentMode,Hr=null,_m=null,Bo=null,ym=!1;function bv(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ym||Hr==null||Hr!==kc(s)||(s=Hr,"selectionStart"in s&&Zg(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Bo&&hl(Bo,s)||(Bo=s,s=Zc(_m,"onSelect"),0<s.length&&(e=new Uh("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Hr)))}function ki(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fr={animationend:ki("Animation","AnimationEnd"),animationiteration:ki("Animation","AnimationIteration"),animationstart:ki("Animation","AnimationStart"),transitionrun:ki("Transition","TransitionRun"),transitionstart:ki("Transition","TransitionStart"),transitioncancel:ki("Transition","TransitionCancel"),transitionend:ki("Transition","TransitionEnd")},ad={},ES={};vs&&(ES=document.createElement("div").style,"AnimationEvent"in window||(delete Fr.animationend.animation,delete Fr.animationiteration.animation,delete Fr.animationstart.animation),"TransitionEvent"in window||delete Fr.transitionend.transition);function dr(t){if(ad[t])return ad[t];if(!Fr[t])return t;var e=Fr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ES)return ad[t]=e[n];return t}var TS=dr("animationend"),SS=dr("animationiteration"),AS=dr("animationstart"),k2=dr("transitionrun"),P2=dr("transitionstart"),L2=dr("transitioncancel"),bS=dr("transitionend"),wS=new Map,vm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vm.push("scrollEnd");function xn(t,e){wS.set(t,e),hr(e,[t])}var Pc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},fn=[],$r=0,ep=0;function jh(){for(var t=$r,e=ep=$r=0;e<t;){var n=fn[e];fn[e++]=null;var s=fn[e];fn[e++]=null;var i=fn[e];fn[e++]=null;var r=fn[e];if(fn[e++]=null,s!==null&&i!==null){var a=s.pending;a===null?i.next=i:(i.next=a.next,a.next=i),s.pending=i}r!==0&&RS(n,i,r)}}function qh(t,e,n,s){fn[$r++]=t,fn[$r++]=e,fn[$r++]=n,fn[$r++]=s,ep|=s,t.lanes|=s,t=t.alternate,t!==null&&(t.lanes|=s)}function tp(t,e,n,s){return qh(t,e,n,s),Lc(t)}function mr(t,e){return qh(t,null,null,e),Lc(t)}function RS(t,e,n){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n);for(var i=!1,r=t.return;r!==null;)r.childLanes|=n,s=r.alternate,s!==null&&(s.childLanes|=n),r.tag===22&&(t=r.stateNode,t===null||t._visibility&1||(i=!0)),t=r,r=r.return;return t.tag===3?(r=t.stateNode,i&&e!==null&&(i=31-on(n),t=r.hiddenUpdates,s=t[i],s===null?t[i]=[e]:s.push(e),e.lane=n|536870912),r):null}function Lc(t){if(50<Yo)throw Yo=0,Bm=null,Error(k(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Gr={};function U2(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tn(t,e,n,s){return new U2(t,e,n,s)}function np(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ms(t,e){var n=t.alternate;return n===null?(n=tn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function IS(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function ec(t,e,n,s,i,r){var a=0;if(s=t,typeof t=="function")np(t)&&(a=1);else if(typeof t=="string")a=HO(t,n,Hn.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case am:return t=tn(31,n,e,i),t.elementType=am,t.lanes=r,t;case Ur:return Qi(n.children,i,r,e);case G0:a=8,i|=24;break;case sm:return t=tn(12,n,e,i|2),t.elementType=sm,t.lanes=r,t;case im:return t=tn(13,n,e,i),t.elementType=im,t.lanes=r,t;case rm:return t=tn(19,n,e,i),t.elementType=rm,t.lanes=r,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case us:a=10;break e;case K0:a=9;break e;case qg:a=11;break e;case Hg:a=14;break e;case Bs:a=16,s=null;break e}a=29,n=Error(k(130,t===null?"null":typeof t,"")),s=null}return e=tn(a,n,e,i),e.elementType=t,e.type=s,e.lanes=r,e}function Qi(t,e,n,s){return t=tn(7,t,s,e),t.lanes=n,t}function od(t,e,n){return t=tn(6,t,null,e),t.lanes=n,t}function CS(t){var e=tn(18,null,null,0);return e.stateNode=t,e}function ld(t,e,n){return e=tn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var wv=new WeakMap;function _n(t,e){if(typeof t=="object"&&t!==null){var n=wv.get(t);return n!==void 0?n:(e={value:t,source:e,stack:rv(e)},wv.set(t,e),e)}return{value:t,source:e,stack:rv(e)}}var Kr=[],Qr=0,Uc=null,fl=0,mn=[],gn=0,gi=null,zn=1,Bn="";function as(t,e){Kr[Qr++]=fl,Kr[Qr++]=Uc,Uc=t,fl=e}function OS(t,e,n){mn[gn++]=zn,mn[gn++]=Bn,mn[gn++]=gi,gi=t;var s=zn;t=Bn;var i=32-on(s)-1;s&=~(1<<i),n+=1;var r=32-on(e)+i;if(30<r){var a=i-i%5;r=(s&(1<<a)-1).toString(32),s>>=a,i-=a,zn=1<<32-on(e)+i|n<<i|s,Bn=r+t}else zn=1<<r|n<<i|s,Bn=t}function sp(t){t.return!==null&&(as(t,1),OS(t,1,0))}function ip(t){for(;t===Uc;)Uc=Kr[--Qr],Kr[Qr]=null,fl=Kr[--Qr],Kr[Qr]=null;for(;t===gi;)gi=mn[--gn],mn[gn]=null,Bn=mn[--gn],mn[gn]=null,zn=mn[--gn],mn[gn]=null}function NS(t,e){mn[gn++]=zn,mn[gn++]=Bn,mn[gn++]=gi,zn=e.id,Bn=e.overflow,gi=t}var Tt=null,Me=null,pe=!1,ni=null,yn=!1,Em=Error(k(519));function pi(t){var e=Error(k(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw dl(_n(e,t)),Em}function Rv(t){var e=t.stateNode,n=t.type,s=t.memoizedProps;switch(e[Et]=t,e[Kt]=s,n){case"dialog":ce("cancel",e),ce("close",e);break;case"iframe":case"object":case"embed":ce("load",e);break;case"video":case"audio":for(n=0;n<_l.length;n++)ce(_l[n],e);break;case"source":ce("error",e);break;case"img":case"image":case"link":ce("error",e),ce("load",e);break;case"details":ce("toggle",e);break;case"input":ce("invalid",e),aS(e,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":ce("invalid",e);break;case"textarea":ce("invalid",e),lS(e,s.value,s.defaultValue,s.children)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||s.suppressHydrationWarning===!0||fb(e.textContent,n)?(s.popover!=null&&(ce("beforetoggle",e),ce("toggle",e)),s.onScroll!=null&&ce("scroll",e),s.onScrollEnd!=null&&ce("scrollend",e),s.onClick!=null&&(e.onclick=cs),e=!0):e=!1,e||pi(t,!0)}function Iv(t){for(Tt=t.return;Tt;)switch(Tt.tag){case 5:case 31:case 13:yn=!1;return;case 27:case 3:yn=!0;return;default:Tt=Tt.return}}function Ar(t){if(t!==Tt)return!1;if(!pe)return Iv(t),pe=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||$m(t.type,t.memoizedProps)),n=!n),n&&Me&&pi(t),Iv(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(k(317));Me=dE(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(k(317));Me=dE(t)}else e===27?(e=Me,Ri(t.type)?(t=Ym,Ym=null,Me=t):Me=e):Me=Tt?An(t.stateNode.nextSibling):null;return!0}function Zi(){Me=Tt=null,pe=!1}function ud(){var t=ni;return t!==null&&(Ht===null?Ht=t:Ht.push.apply(Ht,t),ni=null),t}function dl(t){ni===null?ni=[t]:ni.push(t)}var Tm=Xn(null),gr=null,hs=null;function qs(t,e,n){Oe(Tm,e._currentValue),e._currentValue=n}function gs(t){t._currentValue=Tm.current,gt(Tm)}function Sm(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Am(t,e,n,s){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var r=i.dependencies;if(r!==null){var a=i.child;r=r.firstContext;e:for(;r!==null;){var l=r;r=i;for(var u=0;u<e.length;u++)if(l.context===e[u]){r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),Sm(r.return,n,t),s||(a=null);break e}r=l.next}}else if(i.tag===18){if(a=i.return,a===null)throw Error(k(341));a.lanes|=n,r=a.alternate,r!==null&&(r.lanes|=n),Sm(a,n,t),a=null}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}}function Na(t,e,n,s){t=null;for(var i=e,r=!1;i!==null;){if(!r){if(i.flags&524288)r=!0;else if(i.flags&262144)break}if(i.tag===10){var a=i.alternate;if(a===null)throw Error(k(387));if(a=a.memoizedProps,a!==null){var l=i.type;un(i.pendingProps.value,a.value)||(t!==null?t.push(l):t=[l])}}else if(i===Dc.current){if(a=i.alternate,a===null)throw Error(k(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push(vl):t=[vl])}i=i.return}t!==null&&Am(e,t,n,s),e.flags|=262144}function zc(t){for(t=t.firstContext;t!==null;){if(!un(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function er(t){gr=t,hs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function At(t){return DS(gr,t)}function Iu(t,e){return gr===null&&er(t),DS(t,e)}function DS(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},hs===null){if(t===null)throw Error(k(308));hs=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else hs=hs.next=e;return n}var z2=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,s){t.push(s)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},B2=lt.unstable_scheduleCallback,j2=lt.unstable_NormalPriority,Ze={$$typeof:us,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rp(){return{controller:new z2,data:new Map,refCount:0}}function ql(t){t.refCount--,t.refCount===0&&B2(j2,function(){t.controller.abort()})}var jo=null,bm=0,fa=0,ea=null;function q2(t,e){if(jo===null){var n=jo=[];bm=0,fa=Np(),ea={status:"pending",value:void 0,then:function(s){n.push(s)}}}return bm++,e.then(Cv,Cv),e}function Cv(){if(--bm===0&&jo!==null){ea!==null&&(ea.status="fulfilled");var t=jo;jo=null,fa=0,ea=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function H2(t,e){var n=[],s={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return t.then(function(){s.status="fulfilled",s.value=e;for(var i=0;i<n.length;i++)(0,n[i])(e)},function(i){for(s.status="rejected",s.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),s}var Ov=ee.S;ee.S=function(t,e){$A=rn(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&q2(t,e),Ov!==null&&Ov(t,e)};var Yi=Xn(null);function ap(){var t=Yi.current;return t!==null?t:Ce.pooledCache}function tc(t,e){e===null?Oe(Yi,Yi.current):Oe(Yi,e.pool)}function MS(){var t=ap();return t===null?null:{parent:Ze._currentValue,pool:t}}var Da=Error(k(460)),op=Error(k(474)),Hh=Error(k(542)),Bc={then:function(){}};function Nv(t){return t=t.status,t==="fulfilled"||t==="rejected"}function xS(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(cs,cs),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Mv(t),t;default:if(typeof e.status=="string")e.then(cs,cs);else{if(t=Ce,t!==null&&100<t.shellSuspendCounter)throw Error(k(482));t=e,t.status="pending",t.then(function(s){if(e.status==="pending"){var i=e;i.status="fulfilled",i.value=s}},function(s){if(e.status==="pending"){var i=e;i.status="rejected",i.reason=s}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Mv(t),t}throw Xi=e,Da}}function Ui(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Xi=n,Da):n}}var Xi=null;function Dv(){if(Xi===null)throw Error(k(459));var t=Xi;return Xi=null,t}function Mv(t){if(t===Da||t===Hh)throw Error(k(483))}var ta=null,ml=0;function Cu(t){var e=ml;return ml+=1,ta===null&&(ta=[]),xS(ta,t,e)}function co(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Ou(t,e){throw e.$$typeof===OC?Error(k(525)):(t=Object.prototype.toString.call(e),Error(k(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function VS(t){function e(S,y){if(t){var b=S.deletions;b===null?(S.deletions=[y],S.flags|=16):b.push(y)}}function n(S,y){if(!t)return null;for(;y!==null;)e(S,y),y=y.sibling;return null}function s(S){for(var y=new Map;S!==null;)S.key!==null?y.set(S.key,S):y.set(S.index,S),S=S.sibling;return y}function i(S,y){return S=ms(S,y),S.index=0,S.sibling=null,S}function r(S,y,b){return S.index=b,t?(b=S.alternate,b!==null?(b=b.index,b<y?(S.flags|=67108866,y):b):(S.flags|=67108866,y)):(S.flags|=1048576,y)}function a(S){return t&&S.alternate===null&&(S.flags|=67108866),S}function l(S,y,b,I){return y===null||y.tag!==6?(y=od(b,S.mode,I),y.return=S,y):(y=i(y,b),y.return=S,y)}function u(S,y,b,I){var B=b.type;return B===Ur?d(S,y,b.props.children,I,b.key):y!==null&&(y.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===Bs&&Ui(B)===y.type)?(y=i(y,b.props),co(y,b),y.return=S,y):(y=ec(b.type,b.key,b.props,null,S.mode,I),co(y,b),y.return=S,y)}function c(S,y,b,I){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=ld(b,S.mode,I),y.return=S,y):(y=i(y,b.children||[]),y.return=S,y)}function d(S,y,b,I,B){return y===null||y.tag!==7?(y=Qi(b,S.mode,I,B),y.return=S,y):(y=i(y,b),y.return=S,y)}function m(S,y,b){if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return y=od(""+y,S.mode,b),y.return=S,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Tu:return b=ec(y.type,y.key,y.props,null,S.mode,b),co(b,y),b.return=S,b;case _o:return y=ld(y,S.mode,b),y.return=S,y;case Bs:return y=Ui(y),m(S,y,b)}if(yo(y)||oo(y))return y=Qi(y,S.mode,b,null),y.return=S,y;if(typeof y.then=="function")return m(S,Cu(y),b);if(y.$$typeof===us)return m(S,Iu(S,y),b);Ou(S,y)}return null}function g(S,y,b,I){var B=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return B!==null?null:l(S,y,""+b,I);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Tu:return b.key===B?u(S,y,b,I):null;case _o:return b.key===B?c(S,y,b,I):null;case Bs:return b=Ui(b),g(S,y,b,I)}if(yo(b)||oo(b))return B!==null?null:d(S,y,b,I,null);if(typeof b.then=="function")return g(S,y,Cu(b),I);if(b.$$typeof===us)return g(S,y,Iu(S,b),I);Ou(S,b)}return null}function p(S,y,b,I,B){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return S=S.get(b)||null,l(y,S,""+I,B);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Tu:return S=S.get(I.key===null?b:I.key)||null,u(y,S,I,B);case _o:return S=S.get(I.key===null?b:I.key)||null,c(y,S,I,B);case Bs:return I=Ui(I),p(S,y,b,I,B)}if(yo(I)||oo(I))return S=S.get(b)||null,d(y,S,I,B,null);if(typeof I.then=="function")return p(S,y,b,Cu(I),B);if(I.$$typeof===us)return p(S,y,b,Iu(y,I),B);Ou(y,I)}return null}function C(S,y,b,I){for(var B=null,j=null,v=y,E=y=0,T=null;v!==null&&E<b.length;E++){v.index>E?(T=v,v=null):T=v.sibling;var A=g(S,v,b[E],I);if(A===null){v===null&&(v=T);break}t&&v&&A.alternate===null&&e(S,v),y=r(A,y,E),j===null?B=A:j.sibling=A,j=A,v=T}if(E===b.length)return n(S,v),pe&&as(S,E),B;if(v===null){for(;E<b.length;E++)v=m(S,b[E],I),v!==null&&(y=r(v,y,E),j===null?B=v:j.sibling=v,j=v);return pe&&as(S,E),B}for(v=s(v);E<b.length;E++)T=p(v,S,E,b[E],I),T!==null&&(t&&T.alternate!==null&&v.delete(T.key===null?E:T.key),y=r(T,y,E),j===null?B=T:j.sibling=T,j=T);return t&&v.forEach(function(w){return e(S,w)}),pe&&as(S,E),B}function N(S,y,b,I){if(b==null)throw Error(k(151));for(var B=null,j=null,v=y,E=y=0,T=null,A=b.next();v!==null&&!A.done;E++,A=b.next()){v.index>E?(T=v,v=null):T=v.sibling;var w=g(S,v,A.value,I);if(w===null){v===null&&(v=T);break}t&&v&&w.alternate===null&&e(S,v),y=r(w,y,E),j===null?B=w:j.sibling=w,j=w,v=T}if(A.done)return n(S,v),pe&&as(S,E),B;if(v===null){for(;!A.done;E++,A=b.next())A=m(S,A.value,I),A!==null&&(y=r(A,y,E),j===null?B=A:j.sibling=A,j=A);return pe&&as(S,E),B}for(v=s(v);!A.done;E++,A=b.next())A=p(v,S,E,A.value,I),A!==null&&(t&&A.alternate!==null&&v.delete(A.key===null?E:A.key),y=r(A,y,E),j===null?B=A:j.sibling=A,j=A);return t&&v.forEach(function(O){return e(S,O)}),pe&&as(S,E),B}function x(S,y,b,I){if(typeof b=="object"&&b!==null&&b.type===Ur&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Tu:e:{for(var B=b.key;y!==null;){if(y.key===B){if(B=b.type,B===Ur){if(y.tag===7){n(S,y.sibling),I=i(y,b.props.children),I.return=S,S=I;break e}}else if(y.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===Bs&&Ui(B)===y.type){n(S,y.sibling),I=i(y,b.props),co(I,b),I.return=S,S=I;break e}n(S,y);break}else e(S,y);y=y.sibling}b.type===Ur?(I=Qi(b.props.children,S.mode,I,b.key),I.return=S,S=I):(I=ec(b.type,b.key,b.props,null,S.mode,I),co(I,b),I.return=S,S=I)}return a(S);case _o:e:{for(B=b.key;y!==null;){if(y.key===B)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(S,y.sibling),I=i(y,b.children||[]),I.return=S,S=I;break e}else{n(S,y);break}else e(S,y);y=y.sibling}I=ld(b,S.mode,I),I.return=S,S=I}return a(S);case Bs:return b=Ui(b),x(S,y,b,I)}if(yo(b))return C(S,y,b,I);if(oo(b)){if(B=oo(b),typeof B!="function")throw Error(k(150));return b=B.call(b),N(S,y,b,I)}if(typeof b.then=="function")return x(S,y,Cu(b),I);if(b.$$typeof===us)return x(S,y,Iu(S,b),I);Ou(S,b)}return typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint"?(b=""+b,y!==null&&y.tag===6?(n(S,y.sibling),I=i(y,b),I.return=S,S=I):(n(S,y),I=od(b,S.mode,I),I.return=S,S=I),a(S)):n(S,y)}return function(S,y,b,I){try{ml=0;var B=x(S,y,b,I);return ta=null,B}catch(v){if(v===Da||v===Hh)throw v;var j=tn(29,v,null,S.mode);return j.lanes=I,j.return=S,j}finally{}}}var tr=VS(!0),kS=VS(!1),js=!1;function lp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function si(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ii(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,ye&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,e=Lc(t),RS(t,null,n),e}return qh(t,s,e,n),Lc(t)}function qo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Z0(t,n)}}function cd(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?i=r=a:r=r.next=a,n=n.next}while(n!==null);r===null?i=r=e:r=r.next=e}else i=r=e;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:s.shared,callbacks:s.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Rm=!1;function Ho(){if(Rm){var t=ea;if(t!==null)throw t}}function Fo(t,e,n,s){Rm=!1;var i=t.updateQueue;js=!1;var r=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,a===null?r=c:a.next=c,a=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=u))}if(r!==null){var m=i.baseState;a=0,d=c=u=null,l=r;do{var g=l.lane&-536870913,p=g!==l.lane;if(p?(ge&g)===g:(s&g)===g){g!==0&&g===fa&&(Rm=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var C=t,N=l;g=e;var x=n;switch(N.tag){case 1:if(C=N.payload,typeof C=="function"){m=C.call(x,m,g);break e}m=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=N.payload,g=typeof C=="function"?C.call(x,m,g):C,g==null)break e;m=ke({},m,g);break e;case 2:js=!0}}g=l.callback,g!==null&&(t.flags|=64,p&&(t.flags|=8192),p=i.callbacks,p===null?i.callbacks=[g]:p.push(g))}else p={lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=p,u=m):d=d.next=p,a|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;p=l,l=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);d===null&&(u=m),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,r===null&&(i.shared.lanes=0),yi|=a,t.lanes=a,t.memoizedState=m}}function PS(t,e){if(typeof t!="function")throw Error(k(191,t));t.call(e)}function LS(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)PS(n[t],e)}var da=Xn(null),jc=Xn(0);function xv(t,e){t=As,Oe(jc,t),Oe(da,e),As=t|e.baseLanes}function Im(){Oe(jc,As),Oe(da,da.current)}function up(){As=jc.current,gt(da),gt(jc)}var cn=Xn(null),Sn=null;function Hs(t){var e=t.alternate;Oe(Ge,Ge.current&1),Oe(cn,t),Sn===null&&(e===null||da.current!==null||e.memoizedState!==null)&&(Sn=t)}function Cm(t){Oe(Ge,Ge.current),Oe(cn,t),Sn===null&&(Sn=t)}function US(t){t.tag===22?(Oe(Ge,Ge.current),Oe(cn,t),Sn===null&&(Sn=t)):Fs()}function Fs(){Oe(Ge,Ge.current),Oe(cn,cn.current)}function en(t){gt(cn),Sn===t&&(Sn=null),gt(Ge)}var Ge=Xn(0);function qc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Km(n)||Qm(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Es=0,ae=null,Re=null,Je=null,Hc=!1,na=!1,nr=!1,Fc=0,gl=0,sa=null,F2=0;function qe(){throw Error(k(321))}function cp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!un(t[n],e[n]))return!1;return!0}function hp(t,e,n,s,i,r){return Es=r,ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ee.H=t===null||t.memoizedState===null?gA:Sp,nr=!1,r=n(s,i),nr=!1,na&&(r=BS(e,n,s,i)),zS(t),r}function zS(t){ee.H=pl;var e=Re!==null&&Re.next!==null;if(Es=0,Je=Re=ae=null,Hc=!1,gl=0,sa=null,e)throw Error(k(300));t===null||et||(t=t.dependencies,t!==null&&zc(t)&&(et=!0))}function BS(t,e,n,s){ae=t;var i=0;do{if(na&&(sa=null),gl=0,na=!1,25<=i)throw Error(k(301));if(i+=1,Je=Re=null,t.updateQueue!=null){var r=t.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}ee.H=pA,r=e(n,s)}while(na);return r}function $2(){var t=ee.H,e=t.useState()[0];return e=typeof e.then=="function"?Hl(e):e,t=t.useState()[0],(Re!==null?Re.memoizedState:null)!==t&&(ae.flags|=1024),e}function fp(){var t=Fc!==0;return Fc=0,t}function dp(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function mp(t){if(Hc){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Hc=!1}Es=0,Je=Re=ae=null,na=!1,gl=Fc=0,sa=null}function Pt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?ae.memoizedState=Je=t:Je=Je.next=t,Je}function Ke(){if(Re===null){var t=ae.alternate;t=t!==null?t.memoizedState:null}else t=Re.next;var e=Je===null?ae.memoizedState:Je.next;if(e!==null)Je=e,Re=t;else{if(t===null)throw ae.alternate===null?Error(k(467)):Error(k(310));Re=t,t={memoizedState:Re.memoizedState,baseState:Re.baseState,baseQueue:Re.baseQueue,queue:Re.queue,next:null},Je===null?ae.memoizedState=Je=t:Je=Je.next=t}return Je}function Fh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Hl(t){var e=gl;return gl+=1,sa===null&&(sa=[]),t=xS(sa,t,e),e=ae,(Je===null?e.memoizedState:Je.next)===null&&(e=e.alternate,ee.H=e===null||e.memoizedState===null?gA:Sp),t}function $h(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Hl(t);if(t.$$typeof===us)return At(t)}throw Error(k(438,String(t)))}function gp(t){var e=null,n=ae.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var s=ae.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(e={data:s.data.map(function(i){return i.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=Fh(),ae.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),s=0;s<t;s++)n[s]=NC;return e.index++,n}function Ts(t,e){return typeof e=="function"?e(t):e}function nc(t){var e=Ke();return pp(e,Re,t)}function pp(t,e,n){var s=t.queue;if(s===null)throw Error(k(311));s.lastRenderedReducer=n;var i=t.baseQueue,r=s.pending;if(r!==null){if(i!==null){var a=i.next;i.next=r.next,r.next=a}e.baseQueue=i=r,s.pending=null}if(r=t.baseState,i===null)t.memoizedState=r;else{e=i.next;var l=a=null,u=null,c=e,d=!1;do{var m=c.lane&-536870913;if(m!==c.lane?(ge&m)===m:(Es&m)===m){var g=c.revertLane;if(g===0)u!==null&&(u=u.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),m===fa&&(d=!0);else if((Es&g)===g){c=c.next,g===fa&&(d=!0);continue}else m={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},u===null?(l=u=m,a=r):u=u.next=m,ae.lanes|=g,yi|=g;m=c.action,nr&&n(r,m),r=c.hasEagerState?c.eagerState:n(r,m)}else g={lane:m,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},u===null?(l=u=g,a=r):u=u.next=g,ae.lanes|=m,yi|=m;c=c.next}while(c!==null&&c!==e);if(u===null?a=r:u.next=l,!un(r,t.memoizedState)&&(et=!0,d&&(n=ea,n!==null)))throw n;t.memoizedState=r,t.baseState=a,t.baseQueue=u,s.lastRenderedState=r}return i===null&&(s.lanes=0),[t.memoizedState,s.dispatch]}function hd(t){var e=Ke(),n=e.queue;if(n===null)throw Error(k(311));n.lastRenderedReducer=t;var s=n.dispatch,i=n.pending,r=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do r=t(r,a.action),a=a.next;while(a!==i);un(r,e.memoizedState)||(et=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,s]}function jS(t,e,n){var s=ae,i=Ke(),r=pe;if(r){if(n===void 0)throw Error(k(407));n=n()}else n=e();var a=!un((Re||i).memoizedState,n);if(a&&(i.memoizedState=n,et=!0),i=i.queue,_p(FS.bind(null,s,i,t),[t]),i.getSnapshot!==e||a||Je!==null&&Je.memoizedState.tag&1){if(s.flags|=2048,ma(9,{destroy:void 0},HS.bind(null,s,i,n,e),null),Ce===null)throw Error(k(349));r||Es&127||qS(s,e,n)}return n}function qS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ae.updateQueue,e===null?(e=Fh(),ae.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function HS(t,e,n,s){e.value=n,e.getSnapshot=s,$S(e)&&GS(t)}function FS(t,e,n){return n(function(){$S(e)&&GS(t)})}function $S(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!un(t,n)}catch{return!0}}function GS(t){var e=mr(t,2);e!==null&&Gt(e,t,2)}function Om(t){var e=Pt();if(typeof t=="function"){var n=t;if(t=n(),nr){Ys(!0);try{n()}finally{Ys(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:t},e}function KS(t,e,n,s){return t.baseState=n,pp(t,Re,typeof s=="function"?s:Ts)}function G2(t,e,n,s,i){if(Kh(t))throw Error(k(485));if(t=e.action,t!==null){var r={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){r.listeners.push(a)}};ee.T!==null?n(!0):r.isTransition=!1,s(r),n=e.pending,n===null?(r.next=e.pending=r,QS(e,r)):(r.next=n.next,e.pending=n.next=r)}}function QS(t,e){var n=e.action,s=e.payload,i=t.state;if(e.isTransition){var r=ee.T,a={};ee.T=a;try{var l=n(i,s),u=ee.S;u!==null&&u(a,l),Vv(t,e,l)}catch(c){Nm(t,e,c)}finally{r!==null&&a.types!==null&&(r.types=a.types),ee.T=r}}else try{r=n(i,s),Vv(t,e,r)}catch(c){Nm(t,e,c)}}function Vv(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){kv(t,e,s)},function(s){return Nm(t,e,s)}):kv(t,e,n)}function kv(t,e,n){e.status="fulfilled",e.value=n,YS(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,QS(t,n)))}function Nm(t,e,n){var s=t.pending;if(t.pending=null,s!==null){s=s.next;do e.status="rejected",e.reason=n,YS(e),e=e.next;while(e!==s)}t.action=null}function YS(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function XS(t,e){return e}function Pv(t,e){if(pe){var n=Ce.formState;if(n!==null){e:{var s=ae;if(pe){if(Me){t:{for(var i=Me,r=yn;i.nodeType!==8;){if(!r){i=null;break t}if(i=An(i.nextSibling),i===null){i=null;break t}}r=i.data,i=r==="F!"||r==="F"?i:null}if(i){Me=An(i.nextSibling),s=i.data==="F!";break e}}pi(s)}s=!1}s&&(e=n[0])}}return n=Pt(),n.memoizedState=n.baseState=e,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:XS,lastRenderedState:e},n.queue=s,n=fA.bind(null,ae,s),s.dispatch=n,s=Om(!1),r=Tp.bind(null,ae,!1,s.queue),s=Pt(),i={state:e,dispatch:null,action:t,pending:null},s.queue=i,n=G2.bind(null,ae,i,r,n),i.dispatch=n,s.memoizedState=t,[e,n,!1]}function Lv(t){var e=Ke();return JS(e,Re,t)}function JS(t,e,n){if(e=pp(t,e,XS)[0],t=nc(Ts)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var s=Hl(e)}catch(a){throw a===Da?Hh:a}else s=e;e=Ke();var i=e.queue,r=i.dispatch;return n!==e.memoizedState&&(ae.flags|=2048,ma(9,{destroy:void 0},K2.bind(null,i,n),null)),[s,r,t]}function K2(t,e){t.action=e}function Uv(t){var e=Ke(),n=Re;if(n!==null)return JS(e,n,t);Ke(),e=e.memoizedState,n=Ke();var s=n.queue.dispatch;return n.memoizedState=t,[e,s,!1]}function ma(t,e,n,s){return t={tag:t,create:n,deps:s,inst:e,next:null},e=ae.updateQueue,e===null&&(e=Fh(),ae.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t),t}function WS(){return Ke().memoizedState}function sc(t,e,n,s){var i=Pt();ae.flags|=t,i.memoizedState=ma(1|e,{destroy:void 0},n,s===void 0?null:s)}function Gh(t,e,n,s){var i=Ke();s=s===void 0?null:s;var r=i.memoizedState.inst;Re!==null&&s!==null&&cp(s,Re.memoizedState.deps)?i.memoizedState=ma(e,r,n,s):(ae.flags|=t,i.memoizedState=ma(1|e,r,n,s))}function zv(t,e){sc(8390656,8,t,e)}function _p(t,e){Gh(2048,8,t,e)}function Q2(t){ae.flags|=4;var e=ae.updateQueue;if(e===null)e=Fh(),ae.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function ZS(t){var e=Ke().memoizedState;return Q2({ref:e,nextImpl:t}),function(){if(ye&2)throw Error(k(440));return e.impl.apply(void 0,arguments)}}function eA(t,e){return Gh(4,2,t,e)}function tA(t,e){return Gh(4,4,t,e)}function nA(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function sA(t,e,n){n=n!=null?n.concat([t]):null,Gh(4,4,nA.bind(null,e,t),n)}function yp(){}function iA(t,e){var n=Ke();e=e===void 0?null:e;var s=n.memoizedState;return e!==null&&cp(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function rA(t,e){var n=Ke();e=e===void 0?null:e;var s=n.memoizedState;if(e!==null&&cp(e,s[1]))return s[0];if(s=t(),nr){Ys(!0);try{t()}finally{Ys(!1)}}return n.memoizedState=[s,e],s}function vp(t,e,n){return n===void 0||Es&1073741824&&!(ge&261930)?t.memoizedState=e:(t.memoizedState=n,t=KA(),ae.lanes|=t,yi|=t,n)}function aA(t,e,n,s){return un(n,e)?n:da.current!==null?(t=vp(t,n,s),un(t,e)||(et=!0),t):!(Es&42)||Es&1073741824&&!(ge&261930)?(et=!0,t.memoizedState=n):(t=KA(),ae.lanes|=t,yi|=t,e)}function oA(t,e,n,s,i){var r=ve.p;ve.p=r!==0&&8>r?r:8;var a=ee.T,l={};ee.T=l,Tp(t,!1,e,n);try{var u=i(),c=ee.S;if(c!==null&&c(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=H2(u,s);$o(t,e,d,ln(t))}else $o(t,e,s,ln(t))}catch(m){$o(t,e,{then:function(){},status:"rejected",reason:m},ln())}finally{ve.p=r,a!==null&&l.types!==null&&(a.types=l.types),ee.T=a}}function Y2(){}function Dm(t,e,n,s){if(t.tag!==5)throw Error(k(476));var i=lA(t).queue;oA(t,i,e,Ki,n===null?Y2:function(){return uA(t),n(s)})}function lA(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Ki,baseState:Ki,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:Ki},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function uA(t){var e=lA(t);e.next===null&&(e=t.alternate.memoizedState),$o(t,e.next.queue,{},ln())}function Ep(){return At(vl)}function cA(){return Ke().memoizedState}function hA(){return Ke().memoizedState}function X2(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=ln();t=si(n);var s=ii(e,t,n);s!==null&&(Gt(s,e,n),qo(s,e,n)),e={cache:rp()},t.payload=e;return}e=e.return}}function J2(t,e,n){var s=ln();n={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Kh(t)?dA(e,n):(n=tp(t,e,n,s),n!==null&&(Gt(n,t,s),mA(n,e,s)))}function fA(t,e,n){var s=ln();$o(t,e,n,s)}function $o(t,e,n,s){var i={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Kh(t))dA(e,i);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var a=e.lastRenderedState,l=r(a,n);if(i.hasEagerState=!0,i.eagerState=l,un(l,a))return qh(t,e,i,0),Ce===null&&jh(),!1}catch{}finally{}if(n=tp(t,e,i,s),n!==null)return Gt(n,t,s),mA(n,e,s),!0}return!1}function Tp(t,e,n,s){if(s={lane:2,revertLane:Np(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Kh(t)){if(e)throw Error(k(479))}else e=tp(t,n,s,2),e!==null&&Gt(e,t,2)}function Kh(t){var e=t.alternate;return t===ae||e!==null&&e===ae}function dA(t,e){na=Hc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function mA(t,e,n){if(n&4194048){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Z0(t,n)}}var pl={readContext:At,use:$h,useCallback:qe,useContext:qe,useEffect:qe,useImperativeHandle:qe,useLayoutEffect:qe,useInsertionEffect:qe,useMemo:qe,useReducer:qe,useRef:qe,useState:qe,useDebugValue:qe,useDeferredValue:qe,useTransition:qe,useSyncExternalStore:qe,useId:qe,useHostTransitionStatus:qe,useFormState:qe,useActionState:qe,useOptimistic:qe,useMemoCache:qe,useCacheRefresh:qe};pl.useEffectEvent=qe;var gA={readContext:At,use:$h,useCallback:function(t,e){return Pt().memoizedState=[t,e===void 0?null:e],t},useContext:At,useEffect:zv,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,sc(4194308,4,nA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return sc(4194308,4,t,e)},useInsertionEffect:function(t,e){sc(4,2,t,e)},useMemo:function(t,e){var n=Pt();e=e===void 0?null:e;var s=t();if(nr){Ys(!0);try{t()}finally{Ys(!1)}}return n.memoizedState=[s,e],s},useReducer:function(t,e,n){var s=Pt();if(n!==void 0){var i=n(e);if(nr){Ys(!0);try{n(e)}finally{Ys(!1)}}}else i=e;return s.memoizedState=s.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},s.queue=t,t=t.dispatch=J2.bind(null,ae,t),[s.memoizedState,t]},useRef:function(t){var e=Pt();return t={current:t},e.memoizedState=t},useState:function(t){t=Om(t);var e=t.queue,n=fA.bind(null,ae,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:yp,useDeferredValue:function(t,e){var n=Pt();return vp(n,t,e)},useTransition:function(){var t=Om(!1);return t=oA.bind(null,ae,t.queue,!0,!1),Pt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var s=ae,i=Pt();if(pe){if(n===void 0)throw Error(k(407));n=n()}else{if(n=e(),Ce===null)throw Error(k(349));ge&127||qS(s,e,n)}i.memoizedState=n;var r={value:n,getSnapshot:e};return i.queue=r,zv(FS.bind(null,s,r,t),[t]),s.flags|=2048,ma(9,{destroy:void 0},HS.bind(null,s,r,n,e),null),n},useId:function(){var t=Pt(),e=Ce.identifierPrefix;if(pe){var n=Bn,s=zn;n=(s&~(1<<32-on(s)-1)).toString(32)+n,e="_"+e+"R_"+n,n=Fc++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=F2++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:Ep,useFormState:Pv,useActionState:Pv,useOptimistic:function(t){var e=Pt();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Tp.bind(null,ae,!0,n),n.dispatch=e,[t,e]},useMemoCache:gp,useCacheRefresh:function(){return Pt().memoizedState=X2.bind(null,ae)},useEffectEvent:function(t){var e=Pt(),n={impl:t};return e.memoizedState=n,function(){if(ye&2)throw Error(k(440));return n.impl.apply(void 0,arguments)}}},Sp={readContext:At,use:$h,useCallback:iA,useContext:At,useEffect:_p,useImperativeHandle:sA,useInsertionEffect:eA,useLayoutEffect:tA,useMemo:rA,useReducer:nc,useRef:WS,useState:function(){return nc(Ts)},useDebugValue:yp,useDeferredValue:function(t,e){var n=Ke();return aA(n,Re.memoizedState,t,e)},useTransition:function(){var t=nc(Ts)[0],e=Ke().memoizedState;return[typeof t=="boolean"?t:Hl(t),e]},useSyncExternalStore:jS,useId:cA,useHostTransitionStatus:Ep,useFormState:Lv,useActionState:Lv,useOptimistic:function(t,e){var n=Ke();return KS(n,Re,t,e)},useMemoCache:gp,useCacheRefresh:hA};Sp.useEffectEvent=ZS;var pA={readContext:At,use:$h,useCallback:iA,useContext:At,useEffect:_p,useImperativeHandle:sA,useInsertionEffect:eA,useLayoutEffect:tA,useMemo:rA,useReducer:hd,useRef:WS,useState:function(){return hd(Ts)},useDebugValue:yp,useDeferredValue:function(t,e){var n=Ke();return Re===null?vp(n,t,e):aA(n,Re.memoizedState,t,e)},useTransition:function(){var t=hd(Ts)[0],e=Ke().memoizedState;return[typeof t=="boolean"?t:Hl(t),e]},useSyncExternalStore:jS,useId:cA,useHostTransitionStatus:Ep,useFormState:Uv,useActionState:Uv,useOptimistic:function(t,e){var n=Ke();return Re!==null?KS(n,Re,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:gp,useCacheRefresh:hA};pA.useEffectEvent=ZS;function fd(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Mm={enqueueSetState:function(t,e,n){t=t._reactInternals;var s=ln(),i=si(s);i.payload=e,n!=null&&(i.callback=n),e=ii(t,i,s),e!==null&&(Gt(e,t,s),qo(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=ln(),i=si(s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ii(t,i,s),e!==null&&(Gt(e,t,s),qo(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ln(),s=si(n);s.tag=2,e!=null&&(s.callback=e),e=ii(t,s,n),e!==null&&(Gt(e,t,n),qo(e,t,n))}};function Bv(t,e,n,s,i,r,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,r,a):e.prototype&&e.prototype.isPureReactComponent?!hl(n,s)||!hl(i,r):!0}function jv(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Mm.enqueueReplaceState(e,e.state,null)}function sr(t,e){var n=e;if("ref"in e){n={};for(var s in e)s!=="ref"&&(n[s]=e[s])}if(t=t.defaultProps){n===e&&(n=ke({},n));for(var i in t)n[i]===void 0&&(n[i]=t[i])}return n}function _A(t){Pc(t)}function yA(t){console.error(t)}function vA(t){Pc(t)}function $c(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(s){setTimeout(function(){throw s})}}function qv(t,e,n){try{var s=t.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function xm(t,e,n){return n=si(n),n.tag=3,n.payload={element:null},n.callback=function(){$c(t,e)},n}function EA(t){return t=si(t),t.tag=3,t}function TA(t,e,n,s){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=s.value;t.payload=function(){return i(r)},t.callback=function(){qv(e,n,s)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){qv(e,n,s),typeof i!="function"&&(ri===null?ri=new Set([this]):ri.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})})}function W2(t,e,n,s,i){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(e=n.alternate,e!==null&&Na(e,n,i,!0),n=cn.current,n!==null){switch(n.tag){case 31:case 13:return Sn===null?Xc():n.alternate===null&&He===0&&(He=3),n.flags&=-257,n.flags|=65536,n.lanes=i,s===Bc?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([s]):e.add(s),Ad(t,s,i)),!1;case 22:return n.flags|=65536,s===Bc?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([s]):n.add(s)),Ad(t,s,i)),!1}throw Error(k(435,n.tag))}return Ad(t,s,i),Xc(),!1}if(pe)return e=cn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=i,s!==Em&&(t=Error(k(422),{cause:s}),dl(_n(t,n)))):(s!==Em&&(e=Error(k(423),{cause:s}),dl(_n(e,n))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,s=_n(s,n),i=xm(t.stateNode,s,i),cd(t,i),He!==4&&(He=2)),!1;var r=Error(k(520),{cause:s});if(r=_n(r,n),Qo===null?Qo=[r]:Qo.push(r),He!==4&&(He=2),e===null)return!0;s=_n(s,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=i&-i,n.lanes|=t,t=xm(n.stateNode,s,t),cd(n,t),!1;case 1:if(e=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(ri===null||!ri.has(r))))return n.flags|=65536,i&=-i,n.lanes|=i,i=EA(i),TA(i,t,n,s),cd(n,i),!1}n=n.return}while(n!==null);return!1}var Ap=Error(k(461)),et=!1;function _t(t,e,n,s){e.child=t===null?kS(e,null,n,s):tr(e,t.child,n,s)}function Hv(t,e,n,s,i){n=n.render;var r=e.ref;if("ref"in s){var a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}else a=s;return er(e),s=hp(t,e,n,a,r,i),l=fp(),t!==null&&!et?(dp(t,e,i),Ss(t,e,i)):(pe&&l&&sp(e),e.flags|=1,_t(t,e,s,i),e.child)}function Fv(t,e,n,s,i){if(t===null){var r=n.type;return typeof r=="function"&&!np(r)&&r.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=r,SA(t,e,r,s,i)):(t=ec(n.type,null,s,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!bp(t,i)){var a=r.memoizedProps;if(n=n.compare,n=n!==null?n:hl,n(a,s)&&t.ref===e.ref)return Ss(t,e,i)}return e.flags|=1,t=ms(r,s),t.ref=e.ref,t.return=e,e.child=t}function SA(t,e,n,s,i){if(t!==null){var r=t.memoizedProps;if(hl(r,s)&&t.ref===e.ref)if(et=!1,e.pendingProps=s=r,bp(t,i))t.flags&131072&&(et=!0);else return e.lanes=t.lanes,Ss(t,e,i)}return Vm(t,e,n,s,i)}function AA(t,e,n,s){var i=s.children,r=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if(e.flags&128){if(r=r!==null?r.baseLanes|n:n,t!==null){for(s=e.child=t.child,i=0;s!==null;)i=i|s.lanes|s.childLanes,s=s.sibling;s=i&~r}else s=0,e.child=null;return $v(t,e,r,n,s)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&tc(e,r!==null?r.cachePool:null),r!==null?xv(e,r):Im(),US(e);else return s=e.lanes=536870912,$v(t,e,r!==null?r.baseLanes|n:n,n,s)}else r!==null?(tc(e,r.cachePool),xv(e,r),Fs(),e.memoizedState=null):(t!==null&&tc(e,null),Im(),Fs());return _t(t,e,i,n),e.child}function Eo(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function $v(t,e,n,s,i){var r=ap();return r=r===null?null:{parent:Ze._currentValue,pool:r},e.memoizedState={baseLanes:n,cachePool:r},t!==null&&tc(e,null),Im(),US(e),t!==null&&Na(t,e,s,!0),e.childLanes=i,null}function ic(t,e){return e=Gc({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function Gv(t,e,n){return tr(e,t.child,null,n),t=ic(e,e.pendingProps),t.flags|=2,en(e),e.memoizedState=null,t}function Z2(t,e,n){var s=e.pendingProps,i=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(pe){if(s.mode==="hidden")return t=ic(e,s),e.lanes=536870912,Eo(null,t);if(Cm(e),(t=Me)?(t=gb(t,yn),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:gi!==null?{id:zn,overflow:Bn}:null,retryLane:536870912,hydrationErrors:null},n=CS(t),n.return=e,e.child=n,Tt=e,Me=null)):t=null,t===null)throw pi(e);return e.lanes=536870912,null}return ic(e,s)}var r=t.memoizedState;if(r!==null){var a=r.dehydrated;if(Cm(e),i)if(e.flags&256)e.flags&=-257,e=Gv(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(k(558));else if(et||Na(t,e,n,!1),i=(n&t.childLanes)!==0,et||i){if(s=Ce,s!==null&&(a=eS(s,n),a!==0&&a!==r.retryLane))throw r.retryLane=a,mr(t,a),Gt(s,t,a),Ap;Xc(),e=Gv(t,e,n)}else t=r.treeContext,Me=An(a.nextSibling),Tt=e,pe=!0,ni=null,yn=!1,t!==null&&NS(e,t),e=ic(e,s),e.flags|=4096;return e}return t=ms(t.child,{mode:s.mode,children:s.children}),t.ref=e.ref,e.child=t,t.return=e,t}function rc(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(k(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Vm(t,e,n,s,i){return er(e),n=hp(t,e,n,s,void 0,i),s=fp(),t!==null&&!et?(dp(t,e,i),Ss(t,e,i)):(pe&&s&&sp(e),e.flags|=1,_t(t,e,n,i),e.child)}function Kv(t,e,n,s,i,r){return er(e),e.updateQueue=null,n=BS(e,s,n,i),zS(t),s=fp(),t!==null&&!et?(dp(t,e,r),Ss(t,e,r)):(pe&&s&&sp(e),e.flags|=1,_t(t,e,n,r),e.child)}function Qv(t,e,n,s,i){if(er(e),e.stateNode===null){var r=Gr,a=n.contextType;typeof a=="object"&&a!==null&&(r=At(a)),r=new n(s,r),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Mm,e.stateNode=r,r._reactInternals=e,r=e.stateNode,r.props=s,r.state=e.memoizedState,r.refs={},lp(e),a=n.contextType,r.context=typeof a=="object"&&a!==null?At(a):Gr,r.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(fd(e,n,a,s),r.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(a=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),a!==r.state&&Mm.enqueueReplaceState(r,r.state,null),Fo(e,s,r,i),Ho(),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308),s=!0}else if(t===null){r=e.stateNode;var l=e.memoizedProps,u=sr(n,l);r.props=u;var c=r.context,d=n.contextType;a=Gr,typeof d=="object"&&d!==null&&(a=At(d));var m=n.getDerivedStateFromProps;d=typeof m=="function"||typeof r.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,d||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(l||c!==a)&&jv(e,r,s,a),js=!1;var g=e.memoizedState;r.state=g,Fo(e,s,r,i),Ho(),c=e.memoizedState,l||g!==c||js?(typeof m=="function"&&(fd(e,n,m,s),c=e.memoizedState),(u=js||Bv(e,n,u,s,g,c,a))?(d||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(e.flags|=4194308)):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),r.props=s,r.state=c,r.context=a,s=u):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{r=e.stateNode,wm(t,e),a=e.memoizedProps,d=sr(n,a),r.props=d,m=e.pendingProps,g=r.context,c=n.contextType,u=Gr,typeof c=="object"&&c!==null&&(u=At(c)),l=n.getDerivedStateFromProps,(c=typeof l=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==m||g!==u)&&jv(e,r,s,u),js=!1,g=e.memoizedState,r.state=g,Fo(e,s,r,i),Ho();var p=e.memoizedState;a!==m||g!==p||js||t!==null&&t.dependencies!==null&&zc(t.dependencies)?(typeof l=="function"&&(fd(e,n,l,s),p=e.memoizedState),(d=js||Bv(e,n,d,s,g,p,u)||t!==null&&t.dependencies!==null&&zc(t.dependencies))?(c||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(s,p,u),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(s,p,u)),typeof r.componentDidUpdate=="function"&&(e.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=p),r.props=s,r.state=p,r.context=u,s=d):(typeof r.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),s=!1)}return r=s,rc(t,e),s=(e.flags&128)!==0,r||s?(r=e.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:r.render(),e.flags|=1,t!==null&&s?(e.child=tr(e,t.child,null,i),e.child=tr(e,null,n,i)):_t(t,e,n,i),e.memoizedState=r.state,t=e.child):t=Ss(t,e,i),t}function Yv(t,e,n,s){return Zi(),e.flags|=256,_t(t,e,n,s),e.child}var dd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function md(t){return{baseLanes:t,cachePool:MS()}}function gd(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=sn),t}function bA(t,e,n){var s=e.pendingProps,i=!1,r=(e.flags&128)!==0,a;if((a=r)||(a=t!==null&&t.memoizedState===null?!1:(Ge.current&2)!==0),a&&(i=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(pe){if(i?Hs(e):Fs(),(t=Me)?(t=gb(t,yn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:gi!==null?{id:zn,overflow:Bn}:null,retryLane:536870912,hydrationErrors:null},n=CS(t),n.return=e,e.child=n,Tt=e,Me=null)):t=null,t===null)throw pi(e);return Qm(t)?e.lanes=32:e.lanes=536870912,null}var l=s.children;return s=s.fallback,i?(Fs(),i=e.mode,l=Gc({mode:"hidden",children:l},i),s=Qi(s,i,n,null),l.return=e,s.return=e,l.sibling=s,e.child=l,s=e.child,s.memoizedState=md(n),s.childLanes=gd(t,a,n),e.memoizedState=dd,Eo(null,s)):(Hs(e),km(e,l))}var u=t.memoizedState;if(u!==null&&(l=u.dehydrated,l!==null)){if(r)e.flags&256?(Hs(e),e.flags&=-257,e=pd(t,e,n)):e.memoizedState!==null?(Fs(),e.child=t.child,e.flags|=128,e=null):(Fs(),l=s.fallback,i=e.mode,s=Gc({mode:"visible",children:s.children},i),l=Qi(l,i,n,null),l.flags|=2,s.return=e,l.return=e,s.sibling=l,e.child=s,tr(e,t.child,null,n),s=e.child,s.memoizedState=md(n),s.childLanes=gd(t,a,n),e.memoizedState=dd,e=Eo(null,s));else if(Hs(e),Qm(l)){if(a=l.nextSibling&&l.nextSibling.dataset,a)var c=a.dgst;a=c,s=Error(k(419)),s.stack="",s.digest=a,dl({value:s,source:null,stack:null}),e=pd(t,e,n)}else if(et||Na(t,e,n,!1),a=(n&t.childLanes)!==0,et||a){if(a=Ce,a!==null&&(s=eS(a,n),s!==0&&s!==u.retryLane))throw u.retryLane=s,mr(t,s),Gt(a,t,s),Ap;Km(l)||Xc(),e=pd(t,e,n)}else Km(l)?(e.flags|=192,e.child=t.child,e=null):(t=u.treeContext,Me=An(l.nextSibling),Tt=e,pe=!0,ni=null,yn=!1,t!==null&&NS(e,t),e=km(e,s.children),e.flags|=4096);return e}return i?(Fs(),l=s.fallback,i=e.mode,u=t.child,c=u.sibling,s=ms(u,{mode:"hidden",children:s.children}),s.subtreeFlags=u.subtreeFlags&65011712,c!==null?l=ms(c,l):(l=Qi(l,i,n,null),l.flags|=2),l.return=e,s.return=e,s.sibling=l,e.child=s,Eo(null,s),s=e.child,l=t.child.memoizedState,l===null?l=md(n):(i=l.cachePool,i!==null?(u=Ze._currentValue,i=i.parent!==u?{parent:u,pool:u}:i):i=MS(),l={baseLanes:l.baseLanes|n,cachePool:i}),s.memoizedState=l,s.childLanes=gd(t,a,n),e.memoizedState=dd,Eo(t.child,s)):(Hs(e),n=t.child,t=n.sibling,n=ms(n,{mode:"visible",children:s.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function km(t,e){return e=Gc({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Gc(t,e){return t=tn(22,t,null,e),t.lanes=0,t}function pd(t,e,n){return tr(e,t.child,null,n),t=km(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Xv(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Sm(t.return,e,n)}function _d(t,e,n,s,i,r){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i,treeForkCount:r}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=i,a.treeForkCount=r)}function wA(t,e,n){var s=e.pendingProps,i=s.revealOrder,r=s.tail;s=s.children;var a=Ge.current,l=(a&2)!==0;if(l?(a=a&1|2,e.flags|=128):a&=1,Oe(Ge,a),_t(t,e,s,n),s=pe?fl:0,!l&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xv(t,n,e);else if(t.tag===19)Xv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&qc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),_d(e,!1,i,n,r,s);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&qc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}_d(e,!0,n,null,r,s);break;case"together":_d(e,!1,null,null,void 0,s);break;default:e.memoizedState=null}return e.child}function Ss(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),yi|=e.lanes,!(n&e.childLanes))if(t!==null){if(Na(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(k(153));if(e.child!==null){for(t=e.child,n=ms(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ms(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function bp(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&zc(t)))}function eO(t,e,n){switch(e.tag){case 3:Mc(e,e.stateNode.containerInfo),qs(e,Ze,t.memoizedState.cache),Zi();break;case 27:case 5:um(e);break;case 4:Mc(e,e.stateNode.containerInfo);break;case 10:qs(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Cm(e),null;break;case 13:var s=e.memoizedState;if(s!==null)return s.dehydrated!==null?(Hs(e),e.flags|=128,null):n&e.child.childLanes?bA(t,e,n):(Hs(e),t=Ss(t,e,n),t!==null?t.sibling:null);Hs(e);break;case 19:var i=(t.flags&128)!==0;if(s=(n&e.childLanes)!==0,s||(Na(t,e,n,!1),s=(n&e.childLanes)!==0),i){if(s)return wA(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Oe(Ge,Ge.current),s)break;return null;case 22:return e.lanes=0,AA(t,e,n,e.pendingProps);case 24:qs(e,Ze,t.memoizedState.cache)}return Ss(t,e,n)}function RA(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)et=!0;else{if(!bp(t,n)&&!(e.flags&128))return et=!1,eO(t,e,n);et=!!(t.flags&131072)}else et=!1,pe&&e.flags&1048576&&OS(e,fl,e.index);switch(e.lanes=0,e.tag){case 16:e:{var s=e.pendingProps;if(t=Ui(e.elementType),e.type=t,typeof t=="function")np(t)?(s=sr(t,s),e.tag=1,e=Qv(null,e,t,s,n)):(e.tag=0,e=Vm(null,e,t,s,n));else{if(t!=null){var i=t.$$typeof;if(i===qg){e.tag=11,e=Hv(null,e,t,s,n);break e}else if(i===Hg){e.tag=14,e=Fv(null,e,t,s,n);break e}}throw e=om(t)||t,Error(k(306,e,""))}}return e;case 0:return Vm(t,e,e.type,e.pendingProps,n);case 1:return s=e.type,i=sr(s,e.pendingProps),Qv(t,e,s,i,n);case 3:e:{if(Mc(e,e.stateNode.containerInfo),t===null)throw Error(k(387));s=e.pendingProps;var r=e.memoizedState;i=r.element,wm(t,e),Fo(e,s,null,n);var a=e.memoizedState;if(s=a.cache,qs(e,Ze,s),s!==r.cache&&Am(e,[Ze],n,!0),Ho(),s=a.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){e=Yv(t,e,s,n);break e}else if(s!==i){i=_n(Error(k(424)),e),dl(i),e=Yv(t,e,s,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Me=An(t.firstChild),Tt=e,pe=!0,ni=null,yn=!0,n=kS(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Zi(),s===i){e=Ss(t,e,n);break e}_t(t,e,s,n)}e=e.child}return e;case 26:return rc(t,e),t===null?(n=pE(e.type,null,e.pendingProps,null))?e.memoizedState=n:pe||(n=e.type,t=e.pendingProps,s=eh(ti.current).createElement(n),s[Et]=e,s[Kt]=t,bt(s,n,t),dt(s),e.stateNode=s):e.memoizedState=pE(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return um(e),t===null&&pe&&(s=e.stateNode=pb(e.type,e.pendingProps,ti.current),Tt=e,yn=!0,i=Me,Ri(e.type)?(Ym=i,Me=An(s.firstChild)):Me=i),_t(t,e,e.pendingProps.children,n),rc(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&pe&&((i=s=Me)&&(s=NO(s,e.type,e.pendingProps,yn),s!==null?(e.stateNode=s,Tt=e,Me=An(s.firstChild),yn=!1,i=!0):i=!1),i||pi(e)),um(e),i=e.type,r=e.pendingProps,a=t!==null?t.memoizedProps:null,s=r.children,$m(i,r)?s=null:a!==null&&$m(i,a)&&(e.flags|=32),e.memoizedState!==null&&(i=hp(t,e,$2,null,null,n),vl._currentValue=i),rc(t,e),_t(t,e,s,n),e.child;case 6:return t===null&&pe&&((t=n=Me)&&(n=DO(n,e.pendingProps,yn),n!==null?(e.stateNode=n,Tt=e,Me=null,t=!0):t=!1),t||pi(e)),null;case 13:return bA(t,e,n);case 4:return Mc(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=tr(e,null,s,n):_t(t,e,s,n),e.child;case 11:return Hv(t,e,e.type,e.pendingProps,n);case 7:return _t(t,e,e.pendingProps,n),e.child;case 8:return _t(t,e,e.pendingProps.children,n),e.child;case 12:return _t(t,e,e.pendingProps.children,n),e.child;case 10:return s=e.pendingProps,qs(e,e.type,s.value),_t(t,e,s.children,n),e.child;case 9:return i=e.type._context,s=e.pendingProps.children,er(e),i=At(i),s=s(i),e.flags|=1,_t(t,e,s,n),e.child;case 14:return Fv(t,e,e.type,e.pendingProps,n);case 15:return SA(t,e,e.type,e.pendingProps,n);case 19:return wA(t,e,n);case 31:return Z2(t,e,n);case 22:return AA(t,e,n,e.pendingProps);case 24:return er(e),s=At(Ze),t===null?(i=ap(),i===null&&(i=Ce,r=rp(),i.pooledCache=r,r.refCount++,r!==null&&(i.pooledCacheLanes|=n),i=r),e.memoizedState={parent:s,cache:i},lp(e),qs(e,Ze,i)):(t.lanes&n&&(wm(t,e),Fo(e,null,null,n),Ho()),i=t.memoizedState,r=e.memoizedState,i.parent!==s?(i={parent:s,cache:s},e.memoizedState=i,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=i),qs(e,Ze,s)):(s=r.cache,qs(e,Ze,s),s!==i.cache&&Am(e,[Ze],n,!0))),_t(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(k(156,e.tag))}function es(t){t.flags|=4}function yd(t,e,n,s,i){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(i&335544128)===i)if(t.stateNode.complete)t.flags|=8192;else if(XA())t.flags|=8192;else throw Xi=Bc,op}else t.flags&=-16777217}function Jv(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!vb(e))if(XA())t.flags|=8192;else throw Xi=Bc,op}function Nu(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?J0():536870912,t.lanes|=e,ga|=e)}function ho(t,e){if(!pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function De(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&65011712,s|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function tO(t,e,n){var s=e.pendingProps;switch(ip(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return De(e),null;case 1:return De(e),null;case 3:return n=e.stateNode,s=null,t!==null&&(s=t.memoizedState.cache),e.memoizedState.cache!==s&&(e.flags|=2048),gs(Ze),ua(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ar(e)?es(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ud())),De(e),null;case 26:var i=e.type,r=e.memoizedState;return t===null?(es(e),r!==null?(De(e),Jv(e,r)):(De(e),yd(e,i,null,s,n))):r?r!==t.memoizedState?(es(e),De(e),Jv(e,r)):(De(e),e.flags&=-16777217):(t=t.memoizedProps,t!==s&&es(e),De(e),yd(e,i,t,s,n)),null;case 27:if(xc(e),n=ti.current,i=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&es(e);else{if(!s){if(e.stateNode===null)throw Error(k(166));return De(e),null}t=Hn.current,Ar(e)?Rv(e):(t=pb(i,s,n),e.stateNode=t,es(e))}return De(e),null;case 5:if(xc(e),i=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&es(e);else{if(!s){if(e.stateNode===null)throw Error(k(166));return De(e),null}if(r=Hn.current,Ar(e))Rv(e);else{var a=eh(ti.current);switch(r){case 1:r=a.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:r=a.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":r=a.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":r=a.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":r=a.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof s.is=="string"?a.createElement("select",{is:s.is}):a.createElement("select"),s.multiple?r.multiple=!0:s.size&&(r.size=s.size);break;default:r=typeof s.is=="string"?a.createElement(i,{is:s.is}):a.createElement(i)}}r[Et]=e,r[Kt]=s;e:for(a=e.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}e.stateNode=r;e:switch(bt(r,i,s),i){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&es(e)}}return De(e),yd(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==s&&es(e);else{if(typeof s!="string"&&e.stateNode===null)throw Error(k(166));if(t=ti.current,Ar(e)){if(t=e.stateNode,n=e.memoizedProps,s=null,i=Tt,i!==null)switch(i.tag){case 27:case 5:s=i.memoizedProps}t[Et]=e,t=!!(t.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||fb(t.nodeValue,n)),t||pi(e,!0)}else t=eh(t).createTextNode(s),t[Et]=e,e.stateNode=t}return De(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(s=Ar(e),n!==null){if(t===null){if(!s)throw Error(k(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(k(557));t[Et]=e}else Zi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;De(e),t=!1}else n=ud(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(en(e),e):(en(e),null);if(e.flags&128)throw Error(k(558))}return De(e),null;case 13:if(s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=Ar(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(k(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(k(317));i[Et]=e}else Zi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;De(e),i=!1}else i=ud(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return e.flags&256?(en(e),e):(en(e),null)}return en(e),e.flags&128?(e.lanes=n,e):(n=s!==null,t=t!==null&&t.memoizedState!==null,n&&(s=e.child,i=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(i=s.alternate.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==i&&(s.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),Nu(e,e.updateQueue),De(e),null);case 4:return ua(),t===null&&Dp(e.stateNode.containerInfo),De(e),null;case 10:return gs(e.type),De(e),null;case 19:if(gt(Ge),s=e.memoizedState,s===null)return De(e),null;if(i=(e.flags&128)!==0,r=s.rendering,r===null)if(i)ho(s,!1);else{if(He!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(r=qc(t),r!==null){for(e.flags|=128,ho(s,!1),t=r.updateQueue,e.updateQueue=t,Nu(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)IS(n,t),n=n.sibling;return Oe(Ge,Ge.current&1|2),pe&&as(e,s.treeForkCount),e.child}t=t.sibling}s.tail!==null&&rn()>Qc&&(e.flags|=128,i=!0,ho(s,!1),e.lanes=4194304)}else{if(!i)if(t=qc(r),t!==null){if(e.flags|=128,i=!0,t=t.updateQueue,e.updateQueue=t,Nu(e,t),ho(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!pe)return De(e),null}else 2*rn()-s.renderingStartTime>Qc&&n!==536870912&&(e.flags|=128,i=!0,ho(s,!1),e.lanes=4194304);s.isBackwards?(r.sibling=e.child,e.child=r):(t=s.last,t!==null?t.sibling=r:e.child=r,s.last=r)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=rn(),t.sibling=null,n=Ge.current,Oe(Ge,i?n&1|2:n&1),pe&&as(e,s.treeForkCount),t):(De(e),null);case 22:case 23:return en(e),up(),s=e.memoizedState!==null,t!==null?t.memoizedState!==null!==s&&(e.flags|=8192):s&&(e.flags|=8192),s?n&536870912&&!(e.flags&128)&&(De(e),e.subtreeFlags&6&&(e.flags|=8192)):De(e),n=e.updateQueue,n!==null&&Nu(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),s=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),s!==n&&(e.flags|=2048),t!==null&&gt(Yi),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),gs(Ze),De(e),null;case 25:return null;case 30:return null}throw Error(k(156,e.tag))}function nO(t,e){switch(ip(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return gs(Ze),ua(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return xc(e),null;case 31:if(e.memoizedState!==null){if(en(e),e.alternate===null)throw Error(k(340));Zi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(en(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(k(340));Zi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return gt(Ge),null;case 4:return ua(),null;case 10:return gs(e.type),null;case 22:case 23:return en(e),up(),t!==null&&gt(Yi),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return gs(Ze),null;case 25:return null;default:return null}}function IA(t,e){switch(ip(e),e.tag){case 3:gs(Ze),ua();break;case 26:case 27:case 5:xc(e);break;case 4:ua();break;case 31:e.memoizedState!==null&&en(e);break;case 13:en(e);break;case 19:gt(Ge);break;case 10:gs(e.type);break;case 22:case 23:en(e),up(),t!==null&&gt(Yi);break;case 24:gs(Ze)}}function Fl(t,e){try{var n=e.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var i=s.next;n=i;do{if((n.tag&t)===t){s=void 0;var r=n.create,a=n.inst;s=r(),a.destroy=s}n=n.next}while(n!==i)}}catch(l){Se(e,e.return,l)}}function _i(t,e,n){try{var s=e.updateQueue,i=s!==null?s.lastEffect:null;if(i!==null){var r=i.next;s=r;do{if((s.tag&t)===t){var a=s.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,i=e;var u=n,c=l;try{c()}catch(d){Se(i,u,d)}}}s=s.next}while(s!==r)}}catch(d){Se(e,e.return,d)}}function CA(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{LS(e,n)}catch(s){Se(t,t.return,s)}}}function OA(t,e,n){n.props=sr(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(s){Se(t,e,s)}}function Go(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var s=t.stateNode;break;case 30:s=t.stateNode;break;default:s=t.stateNode}typeof n=="function"?t.refCleanup=n(s):n.current=s}}catch(i){Se(t,e,i)}}function jn(t,e){var n=t.ref,s=t.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(i){Se(t,e,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){Se(t,e,i)}else n.current=null}function NA(t){var e=t.type,n=t.memoizedProps,s=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(i){Se(t,t.return,i)}}function vd(t,e,n){try{var s=t.stateNode;bO(s,t.type,n,e),s[Kt]=e}catch(i){Se(t,t.return,i)}}function DA(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ri(t.type)||t.tag===4}function Ed(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||DA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ri(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Pm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=cs));else if(s!==4&&(s===27&&Ri(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Pm(t,e,n),t=t.sibling;t!==null;)Pm(t,e,n),t=t.sibling}function Kc(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(s===27&&Ri(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Kc(t,e,n),t=t.sibling;t!==null;)Kc(t,e,n),t=t.sibling}function MA(t){var e=t.stateNode,n=t.memoizedProps;try{for(var s=t.type,i=e.attributes;i.length;)e.removeAttributeNode(i[0]);bt(e,s,n),e[Et]=t,e[Kt]=n}catch(r){Se(t,t.return,r)}}var os=!1,We=!1,Td=!1,Wv=typeof WeakSet=="function"?WeakSet:Set,ft=null;function sO(t,e){if(t=t.containerInfo,Hm=ih,t=vS(t),Zg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,c=0,d=0,m=t,g=null;t:for(;;){for(var p;m!==n||i!==0&&m.nodeType!==3||(l=a+i),m!==r||s!==0&&m.nodeType!==3||(u=a+s),m.nodeType===3&&(a+=m.nodeValue.length),(p=m.firstChild)!==null;)g=m,m=p;for(;;){if(m===t)break t;if(g===n&&++c===i&&(l=a),g===r&&++d===s&&(u=a),(p=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=p}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fm={focusedElem:t,selectionRange:n},ih=!1,ft=e;ft!==null;)if(e=ft,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ft=t;else for(;ft!==null;){switch(e=ft,r=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)i=t[n],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&r!==null){t=void 0,n=e,i=r.memoizedProps,r=r.memoizedState,s=n.stateNode;try{var C=sr(n.type,i);t=s.getSnapshotBeforeUpdate(C,r),s.__reactInternalSnapshotBeforeUpdate=t}catch(N){Se(n,n.return,N)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Gm(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Gm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(k(163))}if(t=e.sibling,t!==null){t.return=e.return,ft=t;break}ft=e.return}}function xA(t,e,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:ns(t,n),s&4&&Fl(5,n);break;case 1:if(ns(t,n),s&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){Se(n,n.return,a)}else{var i=sr(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){Se(n,n.return,a)}}s&64&&CA(n),s&512&&Go(n,n.return);break;case 3:if(ns(t,n),s&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{LS(t,e)}catch(a){Se(n,n.return,a)}}break;case 27:e===null&&s&4&&MA(n);case 26:case 5:ns(t,n),e===null&&s&4&&NA(n),s&512&&Go(n,n.return);break;case 12:ns(t,n);break;case 31:ns(t,n),s&4&&PA(t,n);break;case 13:ns(t,n),s&4&&LA(t,n),s&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=fO.bind(null,n),MO(t,n))));break;case 22:if(s=n.memoizedState!==null||os,!s){e=e!==null&&e.memoizedState!==null||We,i=os;var r=We;os=s,(We=e)&&!r?is(t,n,(n.subtreeFlags&8772)!==0):ns(t,n),os=i,We=r}break;case 30:break;default:ns(t,n)}}function VA(t){var e=t.alternate;e!==null&&(t.alternate=null,VA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Kg(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Pe=null,qt=!1;function ts(t,e,n){for(n=n.child;n!==null;)kA(t,e,n),n=n.sibling}function kA(t,e,n){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(Ll,n)}catch{}switch(n.tag){case 26:We||jn(n,e),ts(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:We||jn(n,e);var s=Pe,i=qt;Ri(n.type)&&(Pe=n.stateNode,qt=!1),ts(t,e,n),Xo(n.stateNode),Pe=s,qt=i;break;case 5:We||jn(n,e);case 6:if(s=Pe,i=qt,Pe=null,ts(t,e,n),Pe=s,qt=i,Pe!==null)if(qt)try{(Pe.nodeType===9?Pe.body:Pe.nodeName==="HTML"?Pe.ownerDocument.body:Pe).removeChild(n.stateNode)}catch(r){Se(n,e,r)}else try{Pe.removeChild(n.stateNode)}catch(r){Se(n,e,r)}break;case 18:Pe!==null&&(qt?(t=Pe,hE(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),va(t)):hE(Pe,n.stateNode));break;case 4:s=Pe,i=qt,Pe=n.stateNode.containerInfo,qt=!0,ts(t,e,n),Pe=s,qt=i;break;case 0:case 11:case 14:case 15:_i(2,n,e),We||_i(4,n,e),ts(t,e,n);break;case 1:We||(jn(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"&&OA(n,e,s)),ts(t,e,n);break;case 21:ts(t,e,n);break;case 22:We=(s=We)||n.memoizedState!==null,ts(t,e,n),We=s;break;default:ts(t,e,n)}}function PA(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{va(t)}catch(n){Se(e,e.return,n)}}}function LA(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{va(t)}catch(n){Se(e,e.return,n)}}function iO(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Wv),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Wv),e;default:throw Error(k(435,t.tag))}}function Du(t,e){var n=iO(t);e.forEach(function(s){if(!n.has(s)){n.add(s);var i=dO.bind(null,t,s);s.then(i,i)}})}function Bt(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s],r=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 27:if(Ri(l.type)){Pe=l.stateNode,qt=!1;break e}break;case 5:Pe=l.stateNode,qt=!1;break e;case 3:case 4:Pe=l.stateNode.containerInfo,qt=!0;break e}l=l.return}if(Pe===null)throw Error(k(160));kA(r,a,i),Pe=null,qt=!1,r=i.alternate,r!==null&&(r.return=null),i.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)UA(e,t),e=e.sibling}var Cn=null;function UA(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Bt(e,t),jt(t),s&4&&(_i(3,t,t.return),Fl(3,t),_i(5,t,t.return));break;case 1:Bt(e,t),jt(t),s&512&&(We||n===null||jn(n,n.return)),s&64&&os&&(t=t.updateQueue,t!==null&&(s=t.callbacks,s!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var i=Cn;if(Bt(e,t),jt(t),s&512&&(We||n===null||jn(n,n.return)),s&4){var r=n!==null?n.memoizedState:null;if(s=t.memoizedState,n===null)if(s===null)if(t.stateNode===null){e:{s=t.type,n=t.memoizedProps,i=i.ownerDocument||i;t:switch(s){case"title":r=i.getElementsByTagName("title")[0],(!r||r[Bl]||r[Et]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=i.createElement(s),i.head.insertBefore(r,i.querySelector("head > title"))),bt(r,s,n),r[Et]=t,dt(r),s=r;break e;case"link":var a=yE("link","href",i).get(s+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(r=a[l],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break t}}r=i.createElement(s),bt(r,s,n),i.head.appendChild(r);break;case"meta":if(a=yE("meta","content",i).get(s+(n.content||""))){for(l=0;l<a.length;l++)if(r=a[l],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break t}}r=i.createElement(s),bt(r,s,n),i.head.appendChild(r);break;default:throw Error(k(468,s))}r[Et]=t,dt(r),s=r}t.stateNode=s}else vE(i,t.type,t.stateNode);else t.stateNode=_E(i,s,t.memoizedProps);else r!==s?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,s===null?vE(i,t.type,t.stateNode):_E(i,s,t.memoizedProps)):s===null&&t.stateNode!==null&&vd(t,t.memoizedProps,n.memoizedProps)}break;case 27:Bt(e,t),jt(t),s&512&&(We||n===null||jn(n,n.return)),n!==null&&s&4&&vd(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Bt(e,t),jt(t),s&512&&(We||n===null||jn(n,n.return)),t.flags&32){i=t.stateNode;try{ha(i,"")}catch(C){Se(t,t.return,C)}}s&4&&t.stateNode!=null&&(i=t.memoizedProps,vd(t,i,n!==null?n.memoizedProps:i)),s&1024&&(Td=!0);break;case 6:if(Bt(e,t),jt(t),s&4){if(t.stateNode===null)throw Error(k(162));s=t.memoizedProps,n=t.stateNode;try{n.nodeValue=s}catch(C){Se(t,t.return,C)}}break;case 3:if(lc=null,i=Cn,Cn=th(e.containerInfo),Bt(e,t),Cn=i,jt(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{va(e.containerInfo)}catch(C){Se(t,t.return,C)}Td&&(Td=!1,zA(t));break;case 4:s=Cn,Cn=th(t.stateNode.containerInfo),Bt(e,t),jt(t),Cn=s;break;case 12:Bt(e,t),jt(t);break;case 31:Bt(e,t),jt(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Du(t,s)));break;case 13:Bt(e,t),jt(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Qh=rn()),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Du(t,s)));break;case 22:i=t.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,c=os,d=We;if(os=c||i,We=d||u,Bt(e,t),We=d,os=c,jt(t),s&8192)e:for(e=t.stateNode,e._visibility=i?e._visibility&-2:e._visibility|1,i&&(n===null||u||os||We||zi(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){u=n=e;try{if(r=u.stateNode,i)a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var m=u.memoizedProps.style,g=m!=null&&m.hasOwnProperty("display")?m.display:null;l.style.display=g==null||typeof g=="boolean"?"":(""+g).trim()}}catch(C){Se(u,u.return,C)}}}else if(e.tag===6){if(n===null){u=e;try{u.stateNode.nodeValue=i?"":u.memoizedProps}catch(C){Se(u,u.return,C)}}}else if(e.tag===18){if(n===null){u=e;try{var p=u.stateNode;i?fE(p,!0):fE(u.stateNode,!1)}catch(C){Se(u,u.return,C)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}s&4&&(s=t.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,Du(t,n))));break;case 19:Bt(e,t),jt(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Du(t,s)));break;case 30:break;case 21:break;default:Bt(e,t),jt(t)}}function jt(t){var e=t.flags;if(e&2){try{for(var n,s=t.return;s!==null;){if(DA(s)){n=s;break}s=s.return}if(n==null)throw Error(k(160));switch(n.tag){case 27:var i=n.stateNode,r=Ed(t);Kc(t,r,i);break;case 5:var a=n.stateNode;n.flags&32&&(ha(a,""),n.flags&=-33);var l=Ed(t);Kc(t,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,c=Ed(t);Pm(t,c,u);break;default:throw Error(k(161))}}catch(d){Se(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zA(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;zA(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function ns(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)xA(t,e.alternate,e),e=e.sibling}function zi(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:_i(4,e,e.return),zi(e);break;case 1:jn(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&OA(e,e.return,n),zi(e);break;case 27:Xo(e.stateNode);case 26:case 5:jn(e,e.return),zi(e);break;case 22:e.memoizedState===null&&zi(e);break;case 30:zi(e);break;default:zi(e)}t=t.sibling}}function is(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var s=e.alternate,i=t,r=e,a=r.flags;switch(r.tag){case 0:case 11:case 15:is(i,r,n),Fl(4,r);break;case 1:if(is(i,r,n),s=r,i=s.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(c){Se(s,s.return,c)}if(s=r,i=s.updateQueue,i!==null){var l=s.stateNode;try{var u=i.shared.hiddenCallbacks;if(u!==null)for(i.shared.hiddenCallbacks=null,i=0;i<u.length;i++)PS(u[i],l)}catch(c){Se(s,s.return,c)}}n&&a&64&&CA(r),Go(r,r.return);break;case 27:MA(r);case 26:case 5:is(i,r,n),n&&s===null&&a&4&&NA(r),Go(r,r.return);break;case 12:is(i,r,n);break;case 31:is(i,r,n),n&&a&4&&PA(i,r);break;case 13:is(i,r,n),n&&a&4&&LA(i,r);break;case 22:r.memoizedState===null&&is(i,r,n),Go(r,r.return);break;case 30:break;default:is(i,r,n)}e=e.sibling}}function wp(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&ql(n))}function Rp(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ql(t))}function Rn(t,e,n,s){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)BA(t,e,n,s),e=e.sibling}function BA(t,e,n,s){var i=e.flags;switch(e.tag){case 0:case 11:case 15:Rn(t,e,n,s),i&2048&&Fl(9,e);break;case 1:Rn(t,e,n,s);break;case 3:Rn(t,e,n,s),i&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ql(t)));break;case 12:if(i&2048){Rn(t,e,n,s),t=e.stateNode;try{var r=e.memoizedProps,a=r.id,l=r.onPostCommit;typeof l=="function"&&l(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(u){Se(e,e.return,u)}}else Rn(t,e,n,s);break;case 31:Rn(t,e,n,s);break;case 13:Rn(t,e,n,s);break;case 23:break;case 22:r=e.stateNode,a=e.alternate,e.memoizedState!==null?r._visibility&2?Rn(t,e,n,s):Ko(t,e):r._visibility&2?Rn(t,e,n,s):(r._visibility|=2,Or(t,e,n,s,(e.subtreeFlags&10256)!==0||!1)),i&2048&&wp(a,e);break;case 24:Rn(t,e,n,s),i&2048&&Rp(e.alternate,e);break;default:Rn(t,e,n,s)}}function Or(t,e,n,s,i){for(i=i&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var r=t,a=e,l=n,u=s,c=a.flags;switch(a.tag){case 0:case 11:case 15:Or(r,a,l,u,i),Fl(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&2?Or(r,a,l,u,i):Ko(r,a):(d._visibility|=2,Or(r,a,l,u,i)),i&&c&2048&&wp(a.alternate,a);break;case 24:Or(r,a,l,u,i),i&&c&2048&&Rp(a.alternate,a);break;default:Or(r,a,l,u,i)}e=e.sibling}}function Ko(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,s=e,i=s.flags;switch(s.tag){case 22:Ko(n,s),i&2048&&wp(s.alternate,s);break;case 24:Ko(n,s),i&2048&&Rp(s.alternate,s);break;default:Ko(n,s)}e=e.sibling}}var To=8192;function br(t,e,n){if(t.subtreeFlags&To)for(t=t.child;t!==null;)jA(t,e,n),t=t.sibling}function jA(t,e,n){switch(t.tag){case 26:br(t,e,n),t.flags&To&&t.memoizedState!==null&&FO(n,Cn,t.memoizedState,t.memoizedProps);break;case 5:br(t,e,n);break;case 3:case 4:var s=Cn;Cn=th(t.stateNode.containerInfo),br(t,e,n),Cn=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=To,To=16777216,br(t,e,n),To=s):br(t,e,n));break;default:br(t,e,n)}}function qA(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function fo(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];ft=s,FA(s,t)}qA(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)HA(t),t=t.sibling}function HA(t){switch(t.tag){case 0:case 11:case 15:fo(t),t.flags&2048&&_i(9,t,t.return);break;case 3:fo(t);break;case 12:fo(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,ac(t)):fo(t);break;default:fo(t)}}function ac(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];ft=s,FA(s,t)}qA(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:_i(8,e,e.return),ac(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,ac(e));break;default:ac(e)}t=t.sibling}}function FA(t,e){for(;ft!==null;){var n=ft;switch(n.tag){case 0:case 11:case 15:_i(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:ql(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,ft=s;else e:for(n=t;ft!==null;){s=ft;var i=s.sibling,r=s.return;if(VA(s),s===n){ft=null;break e}if(i!==null){i.return=r,ft=i;break e}ft=r}}}var rO={getCacheForType:function(t){var e=At(Ze),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return At(Ze).controller.signal}},aO=typeof WeakMap=="function"?WeakMap:Map,ye=0,Ce=null,he=null,ge=0,Te=0,Zt=null,Js=!1,Ma=!1,Ip=!1,As=0,He=0,yi=0,Ji=0,Cp=0,sn=0,ga=0,Qo=null,Ht=null,Lm=!1,Qh=0,$A=0,Qc=1/0,Yc=null,ri=null,rt=0,ai=null,pa=null,ps=0,Um=0,zm=null,GA=null,Yo=0,Bm=null;function ln(){return ye&2&&ge!==0?ge&-ge:ee.T!==null?Np():tS()}function KA(){if(sn===0)if(!(ge&536870912)||pe){var t=Au;Au<<=1,!(Au&3932160)&&(Au=262144),sn=t}else sn=536870912;return t=cn.current,t!==null&&(t.flags|=32),sn}function Gt(t,e,n){(t===Ce&&(Te===2||Te===9)||t.cancelPendingCommit!==null)&&(_a(t,0),Ws(t,ge,sn,!1)),zl(t,n),(!(ye&2)||t!==Ce)&&(t===Ce&&(!(ye&2)&&(Ji|=n),He===4&&Ws(t,ge,sn,!1)),Jn(t))}function QA(t,e,n){if(ye&6)throw Error(k(327));var s=!n&&(e&127)===0&&(e&t.expiredLanes)===0||Ul(t,e),i=s?uO(t,e):Sd(t,e,!0),r=s;do{if(i===0){Ma&&!s&&Ws(t,e,0,!1);break}else{if(n=t.current.alternate,r&&!oO(n)){i=Sd(t,e,!1),r=!1;continue}if(i===2){if(r=e,t.errorRecoveryDisabledLanes&r)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var l=t;i=Qo;var u=l.current.memoizedState.isDehydrated;if(u&&(_a(l,a).flags|=256),a=Sd(l,a,!1),a!==2){if(Ip&&!u){l.errorRecoveryDisabledLanes|=r,Ji|=r,i=4;break e}r=Ht,Ht=i,r!==null&&(Ht===null?Ht=r:Ht.push.apply(Ht,r))}i=a}if(r=!1,i!==2)continue}}if(i===1){_a(t,0),Ws(t,e,0,!0);break}e:{switch(s=t,r=i,r){case 0:case 1:throw Error(k(345));case 4:if((e&4194048)!==e)break;case 6:Ws(s,e,sn,!Js);break e;case 2:Ht=null;break;case 3:case 5:break;default:throw Error(k(329))}if((e&62914560)===e&&(i=Qh+300-rn(),10<i)){if(Ws(s,e,sn,!Js),Lh(s,0,!0)!==0)break e;ps=e,s.timeoutHandle=mb(Zv.bind(null,s,n,Ht,Yc,Lm,e,sn,Ji,ga,Js,r,"Throttled",-0,0),i);break e}Zv(s,n,Ht,Yc,Lm,e,sn,Ji,ga,Js,r,null,-0,0)}}break}while(!0);Jn(t)}function Zv(t,e,n,s,i,r,a,l,u,c,d,m,g,p){if(t.timeoutHandle=-1,m=e.subtreeFlags,m&8192||(m&16785408)===16785408){m={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:cs},jA(e,r,m);var C=(r&62914560)===r?Qh-rn():(r&4194048)===r?$A-rn():0;if(C=$O(m,C),C!==null){ps=r,t.cancelPendingCommit=C(tE.bind(null,t,e,r,n,s,i,a,l,u,d,m,null,g,p)),Ws(t,r,a,!c);return}}tE(t,e,r,n,s,i,a,l,u)}function oO(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var i=n[s],r=i.getSnapshot;i=i.value;try{if(!un(r(),i))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ws(t,e,n,s){e&=~Cp,e&=~Ji,t.suspendedLanes|=e,t.pingedLanes&=~e,s&&(t.warmLanes|=e),s=t.expirationTimes;for(var i=e;0<i;){var r=31-on(i),a=1<<r;s[r]=-1,i&=~a}n!==0&&W0(t,n,e)}function Yh(){return ye&6?!0:($l(0),!1)}function Op(){if(he!==null){if(Te===0)var t=he.return;else t=he,hs=gr=null,mp(t),ta=null,ml=0,t=he;for(;t!==null;)IA(t.alternate,t),t=t.return;he=null}}function _a(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,IO(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),ps=0,Op(),Ce=t,he=n=ms(t.current,null),ge=e,Te=0,Zt=null,Js=!1,Ma=Ul(t,e),Ip=!1,ga=sn=Cp=Ji=yi=He=0,Ht=Qo=null,Lm=!1,e&8&&(e|=e&32);var s=t.entangledLanes;if(s!==0)for(t=t.entanglements,s&=e;0<s;){var i=31-on(s),r=1<<i;e|=t[i],s&=~r}return As=e,jh(),n}function YA(t,e){ae=null,ee.H=pl,e===Da||e===Hh?(e=Dv(),Te=3):e===op?(e=Dv(),Te=4):Te=e===Ap?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Zt=e,he===null&&(He=1,$c(t,_n(e,t.current)))}function XA(){var t=cn.current;return t===null?!0:(ge&4194048)===ge?Sn===null:(ge&62914560)===ge||ge&536870912?t===Sn:!1}function JA(){var t=ee.H;return ee.H=pl,t===null?pl:t}function WA(){var t=ee.A;return ee.A=rO,t}function Xc(){He=4,Js||(ge&4194048)!==ge&&cn.current!==null||(Ma=!0),!(yi&134217727)&&!(Ji&134217727)||Ce===null||Ws(Ce,ge,sn,!1)}function Sd(t,e,n){var s=ye;ye|=2;var i=JA(),r=WA();(Ce!==t||ge!==e)&&(Yc=null,_a(t,e)),e=!1;var a=He;e:do try{if(Te!==0&&he!==null){var l=he,u=Zt;switch(Te){case 8:Op(),a=6;break e;case 3:case 2:case 9:case 6:cn.current===null&&(e=!0);var c=Te;if(Te=0,Zt=null,Yr(t,l,u,c),n&&Ma){a=0;break e}break;default:c=Te,Te=0,Zt=null,Yr(t,l,u,c)}}lO(),a=He;break}catch(d){YA(t,d)}while(!0);return e&&t.shellSuspendCounter++,hs=gr=null,ye=s,ee.H=i,ee.A=r,he===null&&(Ce=null,ge=0,jh()),a}function lO(){for(;he!==null;)ZA(he)}function uO(t,e){var n=ye;ye|=2;var s=JA(),i=WA();Ce!==t||ge!==e?(Yc=null,Qc=rn()+500,_a(t,e)):Ma=Ul(t,e);e:do try{if(Te!==0&&he!==null){e=he;var r=Zt;t:switch(Te){case 1:Te=0,Zt=null,Yr(t,e,r,1);break;case 2:case 9:if(Nv(r)){Te=0,Zt=null,eE(e);break}e=function(){Te!==2&&Te!==9||Ce!==t||(Te=7),Jn(t)},r.then(e,e);break e;case 3:Te=7;break e;case 4:Te=5;break e;case 7:Nv(r)?(Te=0,Zt=null,eE(e)):(Te=0,Zt=null,Yr(t,e,r,7));break;case 5:var a=null;switch(he.tag){case 26:a=he.memoizedState;case 5:case 27:var l=he;if(a?vb(a):l.stateNode.complete){Te=0,Zt=null;var u=l.sibling;if(u!==null)he=u;else{var c=l.return;c!==null?(he=c,Xh(c)):he=null}break t}}Te=0,Zt=null,Yr(t,e,r,5);break;case 6:Te=0,Zt=null,Yr(t,e,r,6);break;case 8:Op(),He=6;break e;default:throw Error(k(462))}}cO();break}catch(d){YA(t,d)}while(!0);return hs=gr=null,ee.H=s,ee.A=i,ye=n,he!==null?0:(Ce=null,ge=0,jh(),He)}function cO(){for(;he!==null&&!xC();)ZA(he)}function ZA(t){var e=RA(t.alternate,t,As);t.memoizedProps=t.pendingProps,e===null?Xh(t):he=e}function eE(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=Kv(n,e,e.pendingProps,e.type,void 0,ge);break;case 11:e=Kv(n,e,e.pendingProps,e.type.render,e.ref,ge);break;case 5:mp(e);default:IA(n,e),e=he=IS(e,As),e=RA(n,e,As)}t.memoizedProps=t.pendingProps,e===null?Xh(t):he=e}function Yr(t,e,n,s){hs=gr=null,mp(e),ta=null,ml=0;var i=e.return;try{if(W2(t,i,e,n,ge)){He=1,$c(t,_n(n,t.current)),he=null;return}}catch(r){if(i!==null)throw he=i,r;He=1,$c(t,_n(n,t.current)),he=null;return}e.flags&32768?(pe||s===1?t=!0:Ma||ge&536870912?t=!1:(Js=t=!0,(s===2||s===9||s===3||s===6)&&(s=cn.current,s!==null&&s.tag===13&&(s.flags|=16384))),eb(e,t)):Xh(e)}function Xh(t){var e=t;do{if(e.flags&32768){eb(e,Js);return}t=e.return;var n=tO(e.alternate,e,As);if(n!==null){he=n;return}if(e=e.sibling,e!==null){he=e;return}he=e=t}while(e!==null);He===0&&(He=5)}function eb(t,e){do{var n=nO(t.alternate,t);if(n!==null){n.flags&=32767,he=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){he=t;return}he=t=n}while(t!==null);He=6,he=null}function tE(t,e,n,s,i,r,a,l,u){t.cancelPendingCommit=null;do Jh();while(rt!==0);if(ye&6)throw Error(k(327));if(e!==null){if(e===t.current)throw Error(k(177));if(r=e.lanes|e.childLanes,r|=ep,HC(t,n,r,a,l,u),t===Ce&&(he=Ce=null,ge=0),pa=e,ai=t,ps=n,Um=r,zm=i,GA=s,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,mO(Vc,function(){return rb(),null})):(t.callbackNode=null,t.callbackPriority=0),s=(e.flags&13878)!==0,e.subtreeFlags&13878||s){s=ee.T,ee.T=null,i=ve.p,ve.p=2,a=ye,ye|=4;try{sO(t,e,n)}finally{ye=a,ve.p=i,ee.T=s}}rt=1,tb(),nb(),sb()}}function tb(){if(rt===1){rt=0;var t=ai,e=pa,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=ee.T,ee.T=null;var s=ve.p;ve.p=2;var i=ye;ye|=4;try{UA(e,t);var r=Fm,a=vS(t.containerInfo),l=r.focusedElem,u=r.selectionRange;if(a!==l&&l&&l.ownerDocument&&yS(l.ownerDocument.documentElement,l)){if(u!==null&&Zg(l)){var c=u.start,d=u.end;if(d===void 0&&(d=c),"selectionStart"in l)l.selectionStart=c,l.selectionEnd=Math.min(d,l.value.length);else{var m=l.ownerDocument||document,g=m&&m.defaultView||window;if(g.getSelection){var p=g.getSelection(),C=l.textContent.length,N=Math.min(u.start,C),x=u.end===void 0?N:Math.min(u.end,C);!p.extend&&N>x&&(a=x,x=N,N=a);var S=Av(l,N),y=Av(l,x);if(S&&y&&(p.rangeCount!==1||p.anchorNode!==S.node||p.anchorOffset!==S.offset||p.focusNode!==y.node||p.focusOffset!==y.offset)){var b=m.createRange();b.setStart(S.node,S.offset),p.removeAllRanges(),N>x?(p.addRange(b),p.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),p.addRange(b))}}}}for(m=[],p=l;p=p.parentNode;)p.nodeType===1&&m.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<m.length;l++){var I=m[l];I.element.scrollLeft=I.left,I.element.scrollTop=I.top}}ih=!!Hm,Fm=Hm=null}finally{ye=i,ve.p=s,ee.T=n}}t.current=e,rt=2}}function nb(){if(rt===2){rt=0;var t=ai,e=pa,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=ee.T,ee.T=null;var s=ve.p;ve.p=2;var i=ye;ye|=4;try{xA(t,e.alternate,e)}finally{ye=i,ve.p=s,ee.T=n}}rt=3}}function sb(){if(rt===4||rt===3){rt=0,VC();var t=ai,e=pa,n=ps,s=GA;e.subtreeFlags&10256||e.flags&10256?rt=5:(rt=0,pa=ai=null,ib(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&(ri=null),Gg(n),e=e.stateNode,an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(Ll,e,void 0,(e.current.flags&128)===128)}catch{}if(s!==null){e=ee.T,i=ve.p,ve.p=2,ee.T=null;try{for(var r=t.onRecoverableError,a=0;a<s.length;a++){var l=s[a];r(l.value,{componentStack:l.stack})}}finally{ee.T=e,ve.p=i}}ps&3&&Jh(),Jn(t),i=t.pendingLanes,n&261930&&i&42?t===Bm?Yo++:(Yo=0,Bm=t):Yo=0,$l(0)}}function ib(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,ql(e)))}function Jh(){return tb(),nb(),sb(),rb()}function rb(){if(rt!==5)return!1;var t=ai,e=Um;Um=0;var n=Gg(ps),s=ee.T,i=ve.p;try{ve.p=32>n?32:n,ee.T=null,n=zm,zm=null;var r=ai,a=ps;if(rt=0,pa=ai=null,ps=0,ye&6)throw Error(k(331));var l=ye;if(ye|=4,HA(r.current),BA(r,r.current,a,n),ye=l,$l(0,!1),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(Ll,r)}catch{}return!0}finally{ve.p=i,ee.T=s,ib(t,e)}}function nE(t,e,n){e=_n(n,e),e=xm(t.stateNode,e,2),t=ii(t,e,2),t!==null&&(zl(t,2),Jn(t))}function Se(t,e,n){if(t.tag===3)nE(t,t,n);else for(;e!==null;){if(e.tag===3){nE(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ri===null||!ri.has(s))){t=_n(n,t),n=EA(2),s=ii(e,n,2),s!==null&&(TA(n,s,e,t),zl(s,2),Jn(s));break}}e=e.return}}function Ad(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new aO;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(n)||(Ip=!0,i.add(n),t=hO.bind(null,t,e,n),e.then(t,t))}function hO(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Ce===t&&(ge&n)===n&&(He===4||He===3&&(ge&62914560)===ge&&300>rn()-Qh?!(ye&2)&&_a(t,0):Cp|=n,ga===ge&&(ga=0)),Jn(t)}function ab(t,e){e===0&&(e=J0()),t=mr(t,e),t!==null&&(zl(t,e),Jn(t))}function fO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ab(t,n)}function dO(t,e){var n=0;switch(t.tag){case 31:case 13:var s=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error(k(314))}s!==null&&s.delete(e),ab(t,n)}function mO(t,e){return Fg(t,e)}var Jc=null,Nr=null,jm=!1,Wc=!1,bd=!1,Zs=0;function Jn(t){t!==Nr&&t.next===null&&(Nr===null?Jc=Nr=t:Nr=Nr.next=t),Wc=!0,jm||(jm=!0,pO())}function $l(t,e){if(!bd&&Wc){bd=!0;do for(var n=!1,s=Jc;s!==null;){if(t!==0){var i=s.pendingLanes;if(i===0)var r=0;else{var a=s.suspendedLanes,l=s.pingedLanes;r=(1<<31-on(42|t)+1)-1,r&=i&~(a&~l),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,sE(s,r))}else r=ge,r=Lh(s,s===Ce?r:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(r&3)||Ul(s,r)||(n=!0,sE(s,r));s=s.next}while(n);bd=!1}}function gO(){ob()}function ob(){Wc=jm=!1;var t=0;Zs!==0&&RO()&&(t=Zs);for(var e=rn(),n=null,s=Jc;s!==null;){var i=s.next,r=lb(s,e);r===0?(s.next=null,n===null?Jc=i:n.next=i,i===null&&(Nr=n)):(n=s,(t!==0||r&3)&&(Wc=!0)),s=i}rt!==0&&rt!==5||$l(t),Zs!==0&&(Zs=0)}function lb(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,i=t.expirationTimes,r=t.pendingLanes&-62914561;0<r;){var a=31-on(r),l=1<<a,u=i[a];u===-1?(!(l&n)||l&s)&&(i[a]=qC(l,e)):u<=e&&(t.expiredLanes|=l),r&=~l}if(e=Ce,n=ge,n=Lh(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s=t.callbackNode,n===0||t===e&&(Te===2||Te===9)||t.cancelPendingCommit!==null)return s!==null&&s!==null&&Wf(s),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Ul(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(s!==null&&Wf(s),Gg(n)){case 2:case 8:n=Y0;break;case 32:n=Vc;break;case 268435456:n=X0;break;default:n=Vc}return s=ub.bind(null,t),n=Fg(n,s),t.callbackPriority=e,t.callbackNode=n,e}return s!==null&&s!==null&&Wf(s),t.callbackPriority=2,t.callbackNode=null,2}function ub(t,e){if(rt!==0&&rt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Jh()&&t.callbackNode!==n)return null;var s=ge;return s=Lh(t,t===Ce?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s===0?null:(QA(t,s,e),lb(t,rn()),t.callbackNode!=null&&t.callbackNode===n?ub.bind(null,t):null)}function sE(t,e){if(Jh())return null;QA(t,e,!0)}function pO(){CO(function(){ye&6?Fg(Q0,gO):ob()})}function Np(){if(Zs===0){var t=fa;t===0&&(t=Su,Su<<=1,!(Su&261888)&&(Su=256)),Zs=t}return Zs}function iE(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ju(""+t)}function rE(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function _O(t,e,n,s,i){if(e==="submit"&&n&&n.stateNode===i){var r=iE((i[Kt]||null).action),a=s.submitter;a&&(e=(e=a[Kt]||null)?iE(e.formAction):a.getAttribute("formAction"),e!==null&&(r=e,a=null));var l=new Uh("action","action",null,s,i);t.push({event:l,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Zs!==0){var u=a?rE(i,a):new FormData(i);Dm(n,{pending:!0,data:u,method:i.method,action:r},null,u)}}else typeof r=="function"&&(l.preventDefault(),u=a?rE(i,a):new FormData(i),Dm(n,{pending:!0,data:u,method:i.method,action:r},r,u))},currentTarget:i}]})}}for(var wd=0;wd<vm.length;wd++){var Rd=vm[wd],yO=Rd.toLowerCase(),vO=Rd[0].toUpperCase()+Rd.slice(1);xn(yO,"on"+vO)}xn(TS,"onAnimationEnd");xn(SS,"onAnimationIteration");xn(AS,"onAnimationStart");xn("dblclick","onDoubleClick");xn("focusin","onFocus");xn("focusout","onBlur");xn(k2,"onTransitionRun");xn(P2,"onTransitionStart");xn(L2,"onTransitionCancel");xn(bS,"onTransitionEnd");ca("onMouseEnter",["mouseout","mouseover"]);ca("onMouseLeave",["mouseout","mouseover"]);ca("onPointerEnter",["pointerout","pointerover"]);ca("onPointerLeave",["pointerout","pointerover"]);hr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hr("onBeforeInput",["compositionend","keypress","textInput","paste"]);hr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_l));function cb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],i=s.event;s=s.listeners;e:{var r=void 0;if(e)for(var a=s.length-1;0<=a;a--){var l=s[a],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==r&&i.isPropagationStopped())break e;r=l,i.currentTarget=c;try{r(i)}catch(d){Pc(d)}i.currentTarget=null,r=u}else for(a=0;a<s.length;a++){if(l=s[a],u=l.instance,c=l.currentTarget,l=l.listener,u!==r&&i.isPropagationStopped())break e;r=l,i.currentTarget=c;try{r(i)}catch(d){Pc(d)}i.currentTarget=null,r=u}}}}function ce(t,e){var n=e[hm];n===void 0&&(n=e[hm]=new Set);var s=t+"__bubble";n.has(s)||(hb(e,t,2,!1),n.add(s))}function Id(t,e,n){var s=0;e&&(s|=4),hb(n,t,s,e)}var Mu="_reactListening"+Math.random().toString(36).slice(2);function Dp(t){if(!t[Mu]){t[Mu]=!0,nS.forEach(function(n){n!=="selectionchange"&&(EO.has(n)||Id(n,!1,t),Id(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Mu]||(e[Mu]=!0,Id("selectionchange",!1,e))}}function hb(t,e,n,s){switch(bb(e)){case 2:var i=QO;break;case 8:i=YO;break;default:i=kp}n=i.bind(null,e,n,t),i=void 0,!pm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Cd(t,e,n,s,i){var r=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var l=s.stateNode.containerInfo;if(l===i)break;if(a===4)for(a=s.return;a!==null;){var u=a.tag;if((u===3||u===4)&&a.stateNode.containerInfo===i)return;a=a.return}for(;l!==null;){if(a=Br(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){s=r=a;continue e}l=l.parentNode}}s=s.return}cS(function(){var c=r,d=Yg(n),m=[];e:{var g=wS.get(t);if(g!==void 0){var p=Uh,C=t;switch(t){case"keypress":if(Zu(n)===0)break e;case"keydown":case"keyup":p=d2;break;case"focusin":C="focus",p=sd;break;case"focusout":C="blur",p=sd;break;case"beforeblur":case"afterblur":p=sd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=dv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=t2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=p2;break;case TS:case SS:case AS:p=i2;break;case bS:p=y2;break;case"scroll":case"scrollend":p=ZC;break;case"wheel":p=E2;break;case"copy":case"cut":case"paste":p=a2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=gv;break;case"toggle":case"beforetoggle":p=S2}var N=(e&4)!==0,x=!N&&(t==="scroll"||t==="scrollend"),S=N?g!==null?g+"Capture":null:g;N=[];for(var y=c,b;y!==null;){var I=y;if(b=I.stateNode,I=I.tag,I!==5&&I!==26&&I!==27||b===null||S===null||(I=ul(y,S),I!=null&&N.push(yl(y,I,b))),x)break;y=y.return}0<N.length&&(g=new p(g,C,null,n,d),m.push({event:g,listeners:N}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",g&&n!==gm&&(C=n.relatedTarget||n.fromElement)&&(Br(C)||C[Ca]))break e;if((p||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,p?(C=n.relatedTarget||n.toElement,p=c,C=C?Br(C):null,C!==null&&(x=Pl(C),N=C.tag,C!==x||N!==5&&N!==27&&N!==6)&&(C=null)):(p=null,C=c),p!==C)){if(N=dv,I="onMouseLeave",S="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(N=gv,I="onPointerLeave",S="onPointerEnter",y="pointer"),x=p==null?g:vo(p),b=C==null?g:vo(C),g=new N(I,y+"leave",p,n,d),g.target=x,g.relatedTarget=b,I=null,Br(d)===c&&(N=new N(S,y+"enter",C,n,d),N.target=b,N.relatedTarget=x,I=N),x=I,p&&C)t:{for(N=TO,S=p,y=C,b=0,I=S;I;I=N(I))b++;I=0;for(var B=y;B;B=N(B))I++;for(;0<b-I;)S=N(S),b--;for(;0<I-b;)y=N(y),I--;for(;b--;){if(S===y||y!==null&&S===y.alternate){N=S;break t}S=N(S),y=N(y)}N=null}else N=null;p!==null&&aE(m,g,p,N,!1),C!==null&&x!==null&&aE(m,x,C,N,!0)}}e:{if(g=c?vo(c):window,p=g.nodeName&&g.nodeName.toLowerCase(),p==="select"||p==="input"&&g.type==="file")var j=vv;else if(yv(g))if(pS)j=M2;else{j=N2;var v=O2}else p=g.nodeName,!p||p.toLowerCase()!=="input"||g.type!=="checkbox"&&g.type!=="radio"?c&&Qg(c.elementType)&&(j=vv):j=D2;if(j&&(j=j(t,c))){gS(m,j,n,d);break e}v&&v(t,g,c),t==="focusout"&&c&&g.type==="number"&&c.memoizedProps.value!=null&&mm(g,"number",g.value)}switch(v=c?vo(c):window,t){case"focusin":(yv(v)||v.contentEditable==="true")&&(Hr=v,_m=c,Bo=null);break;case"focusout":Bo=_m=Hr=null;break;case"mousedown":ym=!0;break;case"contextmenu":case"mouseup":case"dragend":ym=!1,bv(m,n,d);break;case"selectionchange":if(V2)break;case"keydown":case"keyup":bv(m,n,d)}var E;if(Wg)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else qr?dS(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(fS&&n.locale!=="ko"&&(qr||T!=="onCompositionStart"?T==="onCompositionEnd"&&qr&&(E=hS()):(Xs=d,Xg="value"in Xs?Xs.value:Xs.textContent,qr=!0)),v=Zc(c,T),0<v.length&&(T=new mv(T,t,null,n,d),m.push({event:T,listeners:v}),E?T.data=E:(E=mS(n),E!==null&&(T.data=E)))),(E=b2?w2(t,n):R2(t,n))&&(T=Zc(c,"onBeforeInput"),0<T.length&&(v=new mv("onBeforeInput","beforeinput",null,n,d),m.push({event:v,listeners:T}),v.data=E)),_O(m,t,c,n,d)}cb(m,e)})}function yl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zc(t,e){for(var n=e+"Capture",s=[];t!==null;){var i=t,r=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||r===null||(i=ul(t,n),i!=null&&s.unshift(yl(t,i,r)),i=ul(t,e),i!=null&&s.push(yl(t,i,r))),t.tag===3)return s;t=t.return}return[]}function TO(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function aE(t,e,n,s,i){for(var r=e._reactName,a=[];n!==null&&n!==s;){var l=n,u=l.alternate,c=l.stateNode;if(l=l.tag,u!==null&&u===s)break;l!==5&&l!==26&&l!==27||c===null||(u=c,i?(c=ul(n,r),c!=null&&a.unshift(yl(n,c,u))):i||(c=ul(n,r),c!=null&&a.push(yl(n,c,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var SO=/\r\n?/g,AO=/\u0000|\uFFFD/g;function oE(t){return(typeof t=="string"?t:""+t).replace(SO,`
`).replace(AO,"")}function fb(t,e){return e=oE(e),oE(t)===e}function we(t,e,n,s,i,r){switch(n){case"children":typeof s=="string"?e==="body"||e==="textarea"&&s===""||ha(t,s):(typeof s=="number"||typeof s=="bigint")&&e!=="body"&&ha(t,""+s);break;case"className":wu(t,"class",s);break;case"tabIndex":wu(t,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":wu(t,n,s);break;case"style":uS(t,s,r);break;case"data":if(e!=="object"){wu(t,"data",s);break}case"src":case"href":if(s===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=Ju(""+s),t.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(e!=="input"&&we(t,e,"name",i.name,i,null),we(t,e,"formEncType",i.formEncType,i,null),we(t,e,"formMethod",i.formMethod,i,null),we(t,e,"formTarget",i.formTarget,i,null)):(we(t,e,"encType",i.encType,i,null),we(t,e,"method",i.method,i,null),we(t,e,"target",i.target,i,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=Ju(""+s),t.setAttribute(n,s);break;case"onClick":s!=null&&(t.onclick=cs);break;case"onScroll":s!=null&&ce("scroll",t);break;case"onScrollEnd":s!=null&&ce("scrollend",t);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(k(61));if(n=s.__html,n!=null){if(i.children!=null)throw Error(k(60));t.innerHTML=n}}break;case"multiple":t.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":t.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){t.removeAttribute("xlink:href");break}n=Ju(""+s),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""+s):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":s===!0?t.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,s):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?t.setAttribute(n,s):t.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?t.removeAttribute(n):t.setAttribute(n,s);break;case"popover":ce("beforetoggle",t),ce("toggle",t),Xu(t,"popover",s);break;case"xlinkActuate":Zn(t,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Zn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Zn(t,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Zn(t,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Zn(t,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Zn(t,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Zn(t,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Zn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Zn(t,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Xu(t,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=JC.get(n)||n,Xu(t,n,s))}}function qm(t,e,n,s,i,r){switch(n){case"style":uS(t,s,r);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(k(61));if(n=s.__html,n!=null){if(i.children!=null)throw Error(k(60));t.innerHTML=n}}break;case"children":typeof s=="string"?ha(t,s):(typeof s=="number"||typeof s=="bigint")&&ha(t,""+s);break;case"onScroll":s!=null&&ce("scroll",t);break;case"onScrollEnd":s!=null&&ce("scrollend",t);break;case"onClick":s!=null&&(t.onclick=cs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sS.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),e=n.slice(2,i?n.length-7:void 0),r=t[Kt]||null,r=r!=null?r[n]:null,typeof r=="function"&&t.removeEventListener(e,r,i),typeof s=="function")){typeof r!="function"&&r!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,s,i);break e}n in t?t[n]=s:s===!0?t.setAttribute(n,""):Xu(t,n,s)}}}function bt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ce("error",t),ce("load",t);var s=!1,i=!1,r;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(a!=null)switch(r){case"src":s=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(k(137,e));default:we(t,e,r,a,n,null)}}i&&we(t,e,"srcSet",n.srcSet,n,null),s&&we(t,e,"src",n.src,n,null);return;case"input":ce("invalid",t);var l=r=a=i=null,u=null,c=null;for(s in n)if(n.hasOwnProperty(s)){var d=n[s];if(d!=null)switch(s){case"name":i=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":c=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(k(137,e));break;default:we(t,e,s,d,n,null)}}aS(t,r,l,u,c,a,i,!1);return;case"select":ce("invalid",t),s=a=r=null;for(i in n)if(n.hasOwnProperty(i)&&(l=n[i],l!=null))switch(i){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":s=l;default:we(t,e,i,l,n,null)}e=r,n=a,t.multiple=!!s,e!=null?Wr(t,!!s,e,!1):n!=null&&Wr(t,!!s,n,!0);return;case"textarea":ce("invalid",t),r=i=s=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":s=l;break;case"defaultValue":i=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(k(91));break;default:we(t,e,a,l,n,null)}lS(t,s,i,r);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(s=n[u],s!=null))switch(u){case"selected":t.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:we(t,e,u,s,n,null)}return;case"dialog":ce("beforetoggle",t),ce("toggle",t),ce("cancel",t),ce("close",t);break;case"iframe":case"object":ce("load",t);break;case"video":case"audio":for(s=0;s<_l.length;s++)ce(_l[s],t);break;case"image":ce("error",t),ce("load",t);break;case"details":ce("toggle",t);break;case"embed":case"source":case"link":ce("error",t),ce("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(s=n[c],s!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(k(137,e));default:we(t,e,c,s,n,null)}return;default:if(Qg(e)){for(d in n)n.hasOwnProperty(d)&&(s=n[d],s!==void 0&&qm(t,e,d,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(s=n[l],s!=null&&we(t,e,l,s,n,null))}function bO(t,e,n,s){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,r=null,a=null,l=null,u=null,c=null,d=null;for(p in n){var m=n[p];if(n.hasOwnProperty(p)&&m!=null)switch(p){case"checked":break;case"value":break;case"defaultValue":u=m;default:s.hasOwnProperty(p)||we(t,e,p,null,s,m)}}for(var g in s){var p=s[g];if(m=n[g],s.hasOwnProperty(g)&&(p!=null||m!=null))switch(g){case"type":r=p;break;case"name":i=p;break;case"checked":c=p;break;case"defaultChecked":d=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(k(137,e));break;default:p!==m&&we(t,e,g,p,s,m)}}dm(t,a,l,u,c,d,r,i);return;case"select":p=a=l=g=null;for(r in n)if(u=n[r],n.hasOwnProperty(r)&&u!=null)switch(r){case"value":break;case"multiple":p=u;default:s.hasOwnProperty(r)||we(t,e,r,null,s,u)}for(i in s)if(r=s[i],u=n[i],s.hasOwnProperty(i)&&(r!=null||u!=null))switch(i){case"value":g=r;break;case"defaultValue":l=r;break;case"multiple":a=r;default:r!==u&&we(t,e,i,r,s,u)}e=l,n=a,s=p,g!=null?Wr(t,!!n,g,!1):!!s!=!!n&&(e!=null?Wr(t,!!n,e,!0):Wr(t,!!n,n?[]:"",!1));return;case"textarea":p=g=null;for(l in n)if(i=n[l],n.hasOwnProperty(l)&&i!=null&&!s.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:we(t,e,l,null,s,i)}for(a in s)if(i=s[a],r=n[a],s.hasOwnProperty(a)&&(i!=null||r!=null))switch(a){case"value":g=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(k(91));break;default:i!==r&&we(t,e,a,i,s,r)}oS(t,g,p);return;case"option":for(var C in n)if(g=n[C],n.hasOwnProperty(C)&&g!=null&&!s.hasOwnProperty(C))switch(C){case"selected":t.selected=!1;break;default:we(t,e,C,null,s,g)}for(u in s)if(g=s[u],p=n[u],s.hasOwnProperty(u)&&g!==p&&(g!=null||p!=null))switch(u){case"selected":t.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:we(t,e,u,g,s,p)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var N in n)g=n[N],n.hasOwnProperty(N)&&g!=null&&!s.hasOwnProperty(N)&&we(t,e,N,null,s,g);for(c in s)if(g=s[c],p=n[c],s.hasOwnProperty(c)&&g!==p&&(g!=null||p!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(k(137,e));break;default:we(t,e,c,g,s,p)}return;default:if(Qg(e)){for(var x in n)g=n[x],n.hasOwnProperty(x)&&g!==void 0&&!s.hasOwnProperty(x)&&qm(t,e,x,void 0,s,g);for(d in s)g=s[d],p=n[d],!s.hasOwnProperty(d)||g===p||g===void 0&&p===void 0||qm(t,e,d,g,s,p);return}}for(var S in n)g=n[S],n.hasOwnProperty(S)&&g!=null&&!s.hasOwnProperty(S)&&we(t,e,S,null,s,g);for(m in s)g=s[m],p=n[m],!s.hasOwnProperty(m)||g===p||g==null&&p==null||we(t,e,m,g,s,p)}function lE(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function wO(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),s=0;s<n.length;s++){var i=n[s],r=i.transferSize,a=i.initiatorType,l=i.duration;if(r&&l&&lE(a)){for(a=0,l=i.responseEnd,s+=1;s<n.length;s++){var u=n[s],c=u.startTime;if(c>l)break;var d=u.transferSize,m=u.initiatorType;d&&lE(m)&&(u=u.responseEnd,a+=d*(u<l?1:(l-c)/(u-c)))}if(--s,e+=8*(r+a)/(i.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Hm=null,Fm=null;function eh(t){return t.nodeType===9?t:t.ownerDocument}function uE(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function db(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function $m(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Od=null;function RO(){var t=window.event;return t&&t.type==="popstate"?t===Od?!1:(Od=t,!0):(Od=null,!1)}var mb=typeof setTimeout=="function"?setTimeout:void 0,IO=typeof clearTimeout=="function"?clearTimeout:void 0,cE=typeof Promise=="function"?Promise:void 0,CO=typeof queueMicrotask=="function"?queueMicrotask:typeof cE<"u"?function(t){return cE.resolve(null).then(t).catch(OO)}:mb;function OO(t){setTimeout(function(){throw t})}function Ri(t){return t==="head"}function hE(t,e){var n=e,s=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"||n==="/&"){if(s===0){t.removeChild(i),va(e);return}s--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")s++;else if(n==="html")Xo(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Xo(n);for(var r=n.firstChild;r;){var a=r.nextSibling,l=r.nodeName;r[Bl]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&r.rel.toLowerCase()==="stylesheet"||n.removeChild(r),r=a}}else n==="body"&&Xo(t.ownerDocument.body);n=i}while(n);va(e)}function fE(t,e){var n=t;t=0;do{var s=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=s}while(n)}function Gm(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Gm(n),Kg(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function NO(t,e,n,s){for(;t.nodeType===1;){var i=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!s&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(s){if(!t[Bl])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(r=t.getAttribute("rel"),r==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(r!==i.rel||t.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||t.getAttribute("title")!==(i.title==null?null:i.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(r=t.getAttribute("src"),(r!==(i.src==null?null:i.src)||t.getAttribute("type")!==(i.type==null?null:i.type)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&r&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var r=i.name==null?null:""+i.name;if(i.type==="hidden"&&t.getAttribute("name")===r)return t}else return t;if(t=An(t.nextSibling),t===null)break}return null}function DO(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=An(t.nextSibling),t===null))return null;return t}function gb(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=An(t.nextSibling),t===null))return null;return t}function Km(t){return t.data==="$?"||t.data==="$~"}function Qm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function MO(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var s=function(){e(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),t._reactRetry=s}}function An(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Ym=null;function dE(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return An(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function mE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function pb(t,e,n){switch(e=eh(n),t){case"html":if(t=e.documentElement,!t)throw Error(k(452));return t;case"head":if(t=e.head,!t)throw Error(k(453));return t;case"body":if(t=e.body,!t)throw Error(k(454));return t;default:throw Error(k(451))}}function Xo(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Kg(t)}var bn=new Map,gE=new Set;function th(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Cs=ve.d;ve.d={f:xO,r:VO,D:kO,C:PO,L:LO,m:UO,X:BO,S:zO,M:jO};function xO(){var t=Cs.f(),e=Yh();return t||e}function VO(t){var e=Oa(t);e!==null&&e.tag===5&&e.type==="form"?uA(e):Cs.r(t)}var xa=typeof document>"u"?null:document;function _b(t,e,n){var s=xa;if(s&&typeof e=="string"&&e){var i=pn(e);i='link[rel="'+t+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),gE.has(i)||(gE.add(i),t={rel:t,crossOrigin:n,href:e},s.querySelector(i)===null&&(e=s.createElement("link"),bt(e,"link",t),dt(e),s.head.appendChild(e)))}}function kO(t){Cs.D(t),_b("dns-prefetch",t,null)}function PO(t,e){Cs.C(t,e),_b("preconnect",t,e)}function LO(t,e,n){Cs.L(t,e,n);var s=xa;if(s&&t&&e){var i='link[rel="preload"][as="'+pn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+pn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+pn(n.imageSizes)+'"]')):i+='[href="'+pn(t)+'"]';var r=i;switch(e){case"style":r=ya(t);break;case"script":r=Va(t)}bn.has(r)||(t=ke({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),bn.set(r,t),s.querySelector(i)!==null||e==="style"&&s.querySelector(Gl(r))||e==="script"&&s.querySelector(Kl(r))||(e=s.createElement("link"),bt(e,"link",t),dt(e),s.head.appendChild(e)))}}function UO(t,e){Cs.m(t,e);var n=xa;if(n&&t){var s=e&&typeof e.as=="string"?e.as:"script",i='link[rel="modulepreload"][as="'+pn(s)+'"][href="'+pn(t)+'"]',r=i;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Va(t)}if(!bn.has(r)&&(t=ke({rel:"modulepreload",href:t},e),bn.set(r,t),n.querySelector(i)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Kl(r)))return}s=n.createElement("link"),bt(s,"link",t),dt(s),n.head.appendChild(s)}}}function zO(t,e,n){Cs.S(t,e,n);var s=xa;if(s&&t){var i=Jr(s).hoistableStyles,r=ya(t);e=e||"default";var a=i.get(r);if(!a){var l={loading:0,preload:null};if(a=s.querySelector(Gl(r)))l.loading=5;else{t=ke({rel:"stylesheet",href:t,"data-precedence":e},n),(n=bn.get(r))&&Mp(t,n);var u=a=s.createElement("link");dt(u),bt(u,"link",t),u._p=new Promise(function(c,d){u.onload=c,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,oc(a,e,s)}a={type:"stylesheet",instance:a,count:1,state:l},i.set(r,a)}}}function BO(t,e){Cs.X(t,e);var n=xa;if(n&&t){var s=Jr(n).hoistableScripts,i=Va(t),r=s.get(i);r||(r=n.querySelector(Kl(i)),r||(t=ke({src:t,async:!0},e),(e=bn.get(i))&&xp(t,e),r=n.createElement("script"),dt(r),bt(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(i,r))}}function jO(t,e){Cs.M(t,e);var n=xa;if(n&&t){var s=Jr(n).hoistableScripts,i=Va(t),r=s.get(i);r||(r=n.querySelector(Kl(i)),r||(t=ke({src:t,async:!0,type:"module"},e),(e=bn.get(i))&&xp(t,e),r=n.createElement("script"),dt(r),bt(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(i,r))}}function pE(t,e,n,s){var i=(i=ti.current)?th(i):null;if(!i)throw Error(k(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=ya(n.href),n=Jr(i).hoistableStyles,s=n.get(e),s||(s={type:"style",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=ya(n.href);var r=Jr(i).hoistableStyles,a=r.get(t);if(a||(i=i.ownerDocument||i,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(t,a),(r=i.querySelector(Gl(t)))&&!r._p&&(a.instance=r,a.state.loading=5),bn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},bn.set(t,n),r||qO(i,t,n,a.state))),e&&s===null)throw Error(k(528,""));return a}if(e&&s!==null)throw Error(k(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Va(n),n=Jr(i).hoistableScripts,s=n.get(e),s||(s={type:"script",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(k(444,t))}}function ya(t){return'href="'+pn(t)+'"'}function Gl(t){return'link[rel="stylesheet"]['+t+"]"}function yb(t){return ke({},t,{"data-precedence":t.precedence,precedence:null})}function qO(t,e,n,s){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?s.loading=1:(e=t.createElement("link"),s.preload=e,e.addEventListener("load",function(){return s.loading|=1}),e.addEventListener("error",function(){return s.loading|=2}),bt(e,"link",n),dt(e),t.head.appendChild(e))}function Va(t){return'[src="'+pn(t)+'"]'}function Kl(t){return"script[async]"+t}function _E(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var s=t.querySelector('style[data-href~="'+pn(n.href)+'"]');if(s)return e.instance=s,dt(s),s;var i=ke({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(t.ownerDocument||t).createElement("style"),dt(s),bt(s,"style",i),oc(s,n.precedence,t),e.instance=s;case"stylesheet":i=ya(n.href);var r=t.querySelector(Gl(i));if(r)return e.state.loading|=4,e.instance=r,dt(r),r;s=yb(n),(i=bn.get(i))&&Mp(s,i),r=(t.ownerDocument||t).createElement("link"),dt(r);var a=r;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),bt(r,"link",s),e.state.loading|=4,oc(r,n.precedence,t),e.instance=r;case"script":return r=Va(n.src),(i=t.querySelector(Kl(r)))?(e.instance=i,dt(i),i):(s=n,(i=bn.get(r))&&(s=ke({},n),xp(s,i)),t=t.ownerDocument||t,i=t.createElement("script"),dt(i),bt(i,"link",s),t.head.appendChild(i),e.instance=i);case"void":return null;default:throw Error(k(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(s=e.instance,e.state.loading|=4,oc(s,n.precedence,t));return e.instance}function oc(t,e,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=s.length?s[s.length-1]:null,r=i,a=0;a<s.length;a++){var l=s[a];if(l.dataset.precedence===e)r=l;else if(r!==i)break}r?r.parentNode.insertBefore(t,r.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Mp(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function xp(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var lc=null;function yE(t,e,n){if(lc===null){var s=new Map,i=lc=new Map;i.set(n,s)}else i=lc,s=i.get(n),s||(s=new Map,i.set(n,s));if(s.has(t))return s;for(s.set(t,null),n=n.getElementsByTagName(t),i=0;i<n.length;i++){var r=n[i];if(!(r[Bl]||r[Et]||t==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var a=r.getAttribute(e)||"";a=t+a;var l=s.get(a);l?l.push(r):s.set(a,[r])}}return s}function vE(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function HO(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function vb(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function FO(t,e,n,s){if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var i=ya(s.href),r=e.querySelector(Gl(i));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=nh.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=r,dt(r);return}r=e.ownerDocument||e,s=yb(s),(i=bn.get(i))&&Mp(s,i),r=r.createElement("link"),dt(r);var a=r;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),bt(r,"link",s),n.instance=r}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=nh.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var Nd=0;function $O(t,e){return t.stylesheets&&t.count===0&&uc(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var s=setTimeout(function(){if(t.stylesheets&&uc(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4+e);0<t.imgBytes&&Nd===0&&(Nd=62500*wO());var i=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&uc(t,t.stylesheets),t.unsuspend)){var r=t.unsuspend;t.unsuspend=null,r()}},(t.imgBytes>Nd?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s),clearTimeout(i)}}:null}function nh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)uc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var sh=null;function uc(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,sh=new Map,e.forEach(GO,t),sh=null,nh.call(t))}function GO(t,e){if(!(e.state.loading&4)){var n=sh.get(t);if(n)var s=n.get(null);else{n=new Map,sh.set(t,n);for(var i=t.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<i.length;r++){var a=i[r];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),s=a)}s&&n.set(null,s)}i=e.instance,a=i.getAttribute("data-precedence"),r=n.get(a)||s,r===s&&n.set(null,i),n.set(a,i),this.count++,s=nh.bind(this),i.addEventListener("load",s),i.addEventListener("error",s),r?r.parentNode.insertBefore(i,r.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(i,t.firstChild)),e.state.loading|=4}}var vl={$$typeof:us,Provider:null,Consumer:null,_currentValue:Ki,_currentValue2:Ki,_threadCount:0};function KO(t,e,n,s,i,r,a,l,u){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zf(0),this.hiddenUpdates=Zf(null),this.identifierPrefix=s,this.onUncaughtError=i,this.onCaughtError=r,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=u,this.incompleteTransitions=new Map}function Eb(t,e,n,s,i,r,a,l,u,c,d,m){return t=new KO(t,e,n,a,u,c,d,m,l),e=1,r===!0&&(e|=24),r=tn(3,null,null,e),t.current=r,r.stateNode=t,e=rp(),e.refCount++,t.pooledCache=e,e.refCount++,r.memoizedState={element:s,isDehydrated:n,cache:e},lp(r),t}function Tb(t){return t?(t=Gr,t):Gr}function Sb(t,e,n,s,i,r){i=Tb(i),s.context===null?s.context=i:s.pendingContext=i,s=si(e),s.payload={element:n},r=r===void 0?null:r,r!==null&&(s.callback=r),n=ii(t,s,e),n!==null&&(Gt(n,t,e),qo(n,t,e))}function EE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Vp(t,e){EE(t,e),(t=t.alternate)&&EE(t,e)}function Ab(t){if(t.tag===13||t.tag===31){var e=mr(t,67108864);e!==null&&Gt(e,t,67108864),Vp(t,67108864)}}function TE(t){if(t.tag===13||t.tag===31){var e=ln();e=$g(e);var n=mr(t,e);n!==null&&Gt(n,t,e),Vp(t,e)}}var ih=!0;function QO(t,e,n,s){var i=ee.T;ee.T=null;var r=ve.p;try{ve.p=2,kp(t,e,n,s)}finally{ve.p=r,ee.T=i}}function YO(t,e,n,s){var i=ee.T;ee.T=null;var r=ve.p;try{ve.p=8,kp(t,e,n,s)}finally{ve.p=r,ee.T=i}}function kp(t,e,n,s){if(ih){var i=Xm(s);if(i===null)Cd(t,e,s,rh,n),SE(t,s);else if(JO(i,t,e,n,s))s.stopPropagation();else if(SE(t,s),e&4&&-1<XO.indexOf(t)){for(;i!==null;){var r=Oa(i);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var a=Li(r.pendingLanes);if(a!==0){var l=r;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-on(a);l.entanglements[1]|=u,a&=~u}Jn(r),!(ye&6)&&(Qc=rn()+500,$l(0))}}break;case 31:case 13:l=mr(r,2),l!==null&&Gt(l,r,2),Yh(),Vp(r,2)}if(r=Xm(s),r===null&&Cd(t,e,s,rh,n),r===i)break;i=r}i!==null&&s.stopPropagation()}else Cd(t,e,s,null,n)}}function Xm(t){return t=Yg(t),Pp(t)}var rh=null;function Pp(t){if(rh=null,t=Br(t),t!==null){var e=Pl(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=H0(e),t!==null)return t;t=null}else if(n===31){if(t=F0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return rh=t,null}function bb(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kC()){case Q0:return 2;case Y0:return 8;case Vc:case PC:return 32;case X0:return 268435456;default:return 32}default:return 32}}var Jm=!1,oi=null,li=null,ui=null,El=new Map,Tl=new Map,$s=[],XO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function SE(t,e){switch(t){case"focusin":case"focusout":oi=null;break;case"dragenter":case"dragleave":li=null;break;case"mouseover":case"mouseout":ui=null;break;case"pointerover":case"pointerout":El.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tl.delete(e.pointerId)}}function mo(t,e,n,s,i,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:r,targetContainers:[i]},e!==null&&(e=Oa(e),e!==null&&Ab(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function JO(t,e,n,s,i){switch(e){case"focusin":return oi=mo(oi,t,e,n,s,i),!0;case"dragenter":return li=mo(li,t,e,n,s,i),!0;case"mouseover":return ui=mo(ui,t,e,n,s,i),!0;case"pointerover":var r=i.pointerId;return El.set(r,mo(El.get(r)||null,t,e,n,s,i)),!0;case"gotpointercapture":return r=i.pointerId,Tl.set(r,mo(Tl.get(r)||null,t,e,n,s,i)),!0}return!1}function wb(t){var e=Br(t.target);if(e!==null){var n=Pl(e);if(n!==null){if(e=n.tag,e===13){if(e=H0(n),e!==null){t.blockedOn=e,av(t.priority,function(){TE(n)});return}}else if(e===31){if(e=F0(n),e!==null){t.blockedOn=e,av(t.priority,function(){TE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function cc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xm(t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);gm=s,n.target.dispatchEvent(s),gm=null}else return e=Oa(n),e!==null&&Ab(e),t.blockedOn=n,!1;e.shift()}return!0}function AE(t,e,n){cc(t)&&n.delete(e)}function WO(){Jm=!1,oi!==null&&cc(oi)&&(oi=null),li!==null&&cc(li)&&(li=null),ui!==null&&cc(ui)&&(ui=null),El.forEach(AE),Tl.forEach(AE)}function xu(t,e){t.blockedOn===e&&(t.blockedOn=null,Jm||(Jm=!0,lt.unstable_scheduleCallback(lt.unstable_NormalPriority,WO)))}var Vu=null;function bE(t){Vu!==t&&(Vu=t,lt.unstable_scheduleCallback(lt.unstable_NormalPriority,function(){Vu===t&&(Vu=null);for(var e=0;e<t.length;e+=3){var n=t[e],s=t[e+1],i=t[e+2];if(typeof s!="function"){if(Pp(s||n)===null)continue;break}var r=Oa(n);r!==null&&(t.splice(e,3),e-=3,Dm(r,{pending:!0,data:i,method:n.method,action:s},s,i))}}))}function va(t){function e(u){return xu(u,t)}oi!==null&&xu(oi,t),li!==null&&xu(li,t),ui!==null&&xu(ui,t),El.forEach(e),Tl.forEach(e);for(var n=0;n<$s.length;n++){var s=$s[n];s.blockedOn===t&&(s.blockedOn=null)}for(;0<$s.length&&(n=$s[0],n.blockedOn===null);)wb(n),n.blockedOn===null&&$s.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var i=n[s],r=n[s+1],a=i[Kt]||null;if(typeof r=="function")a||bE(n);else if(a){var l=null;if(r&&r.hasAttribute("formAction")){if(i=r,a=r[Kt]||null)l=a.formAction;else if(Pp(i)!==null)continue}else l=a.action;typeof l=="function"?n[s+1]=l:(n.splice(s,3),s-=3),bE(n)}}}function Rb(){function t(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(a){return i=a})},focusReset:"manual",scroll:"manual"})}function e(){i!==null&&(i(),i=null),s||setTimeout(n,20)}function n(){if(!s&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,i=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){s=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),i!==null&&(i(),i=null)}}}function Lp(t){this._internalRoot=t}Wh.prototype.render=Lp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(k(409));var n=e.current,s=ln();Sb(n,s,t,e,null,null)};Wh.prototype.unmount=Lp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Sb(t.current,2,null,t,null,null),Yh(),e[Ca]=null}};function Wh(t){this._internalRoot=t}Wh.prototype.unstable_scheduleHydration=function(t){if(t){var e=tS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<$s.length&&e!==0&&e<$s[n].priority;n++);$s.splice(n,0,t),n===0&&wb(t)}};var wE=j0.version;if(wE!=="19.2.4")throw Error(k(527,wE,"19.2.4"));ve.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(k(188)):(t=Object.keys(t).join(","),Error(k(268,t)));return t=CC(e),t=t!==null?$0(t):null,t=t===null?null:t.stateNode,t};var ZO={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ku=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ku.isDisabled&&ku.supportsFiber)try{Ll=ku.inject(ZO),an=ku}catch{}}kh.createRoot=function(t,e){if(!q0(t))throw Error(k(299));var n=!1,s="",i=_A,r=yA,a=vA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onUncaughtError!==void 0&&(i=e.onUncaughtError),e.onCaughtError!==void 0&&(r=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=Eb(t,1,!1,null,null,n,s,null,i,r,a,Rb),t[Ca]=e.current,Dp(t),new Lp(e)};kh.hydrateRoot=function(t,e,n){if(!q0(t))throw Error(k(299));var s=!1,i="",r=_A,a=yA,l=vA,u=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.formState!==void 0&&(u=n.formState)),e=Eb(t,1,!0,e,n??null,s,i,u,r,a,l,Rb),e.context=Tb(null),n=e.current,s=ln(),s=$g(s),i=si(s),i.callback=null,ii(n,i,s),n=s,e.current.lanes=n,zl(e,n),Jn(e),t[Ca]=e.current,Dp(t),new Wh(e)};kh.version="19.2.4";function Ib(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ib)}catch(t){console.error(t)}}Ib(),k0.exports=kh;var eN=k0.exports;function Z(t,e,n,s,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function M(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)}let Cb=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Cb=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^n()&15>>+s/4).toString(16))};function Wm(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Zm=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Y extends Error{}class wt extends Y{constructor(e,n,s,i){super(`${wt.makeMessage(e,n,s)}`),this.status=e,this.headers=i,this.requestID=i==null?void 0:i.get("x-request-id"),this.error=n;const r=n;this.code=r==null?void 0:r.code,this.param=r==null?void 0:r.param,this.type=r==null?void 0:r.type}static makeMessage(e,n,s){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):s;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,s,i){if(!e||!i)return new Zh({message:s,cause:Zm(n)});const r=n==null?void 0:n.error;return e===400?new Ob(e,r,s,i):e===401?new Nb(e,r,s,i):e===403?new Db(e,r,s,i):e===404?new Mb(e,r,s,i):e===409?new xb(e,r,s,i):e===422?new Vb(e,r,s,i):e===429?new kb(e,r,s,i):e>=500?new Pb(e,r,s,i):new wt(e,r,s,i)}}class Tn extends wt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Zh extends wt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Up extends Zh{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Ob extends wt{}class Nb extends wt{}class Db extends wt{}class Mb extends wt{}class xb extends wt{}class Vb extends wt{}class kb extends wt{}class Pb extends wt{}class Lb extends Y{constructor(){super("Could not parse response content as the length limit was reached")}}class Ub extends Y{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class So extends Error{constructor(e){super(e)}}const tN=/^[a-z][a-z0-9+.-]*:/i,nN=t=>tN.test(t);let $t=t=>($t=Array.isArray,$t(t)),RE=$t;function zb(t){return typeof t!="object"?{}:t??{}}function sN(t){if(!t)return!0;for(const e in t)return!1;return!0}function iN(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Dd(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const rN=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Y(`${t} must be an integer`);if(e<0)throw new Y(`${t} must be a positive integer`);return e},aN=t=>{try{return JSON.parse(t)}catch{return}},Ql=t=>new Promise(e=>setTimeout(e,t)),Dr="6.22.0",oN=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function lN(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const uN=()=>{var n;const t=lN();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Dr,"X-Stainless-OS":CE(Deno.build.os),"X-Stainless-Arch":IE(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((n=Deno.version)==null?void 0:n.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Dr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Dr,"X-Stainless-OS":CE(globalThis.process.platform??"unknown"),"X-Stainless-Arch":IE(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=cN();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Dr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Dr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function cN(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const s=n.exec(navigator.userAgent);if(s){const i=s[1]||0,r=s[2]||0,a=s[3]||0;return{browser:e,version:`${i}.${r}.${a}`}}}return null}const IE=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",CE=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let OE;const hN=()=>OE??(OE=uN());function fN(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Bb(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function jb(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Bb({start(){},async pull(n){const{done:s,value:i}=await e.next();s?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)==null?void 0:n.call(e))}})}function qb(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function dN(t){var s,i;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((i=(s=t[Symbol.asyncIterator]()).return)==null?void 0:i.call(s));return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const mN=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),Hb="RFC3986",Fb=t=>String(t),NE={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:Fb},gN="RFC1738";let eg=(t,e)=>(eg=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),eg(t,e));const Pn=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),Md=1024,pN=(t,e,n,s,i)=>{if(t.length===0)return t;let r=t;if(typeof t=="symbol"?r=Symbol.prototype.toString.call(t):typeof t!="string"&&(r=String(t)),n==="iso-8859-1")return escape(r).replace(/%u[0-9a-f]{4}/gi,function(l){return"%26%23"+parseInt(l.slice(2),16)+"%3B"});let a="";for(let l=0;l<r.length;l+=Md){const u=r.length>=Md?r.slice(l,l+Md):r,c=[];for(let d=0;d<u.length;++d){let m=u.charCodeAt(d);if(m===45||m===46||m===95||m===126||m>=48&&m<=57||m>=65&&m<=90||m>=97&&m<=122||i===gN&&(m===40||m===41)){c[c.length]=u.charAt(d);continue}if(m<128){c[c.length]=Pn[m];continue}if(m<2048){c[c.length]=Pn[192|m>>6]+Pn[128|m&63];continue}if(m<55296||m>=57344){c[c.length]=Pn[224|m>>12]+Pn[128|m>>6&63]+Pn[128|m&63];continue}d+=1,m=65536+((m&1023)<<10|u.charCodeAt(d)&1023),c[c.length]=Pn[240|m>>18]+Pn[128|m>>12&63]+Pn[128|m>>6&63]+Pn[128|m&63]}a+=c.join("")}return a};function _N(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function DE(t,e){if($t(t)){const n=[];for(let s=0;s<t.length;s+=1)n.push(e(t[s]));return n}return e(t)}const $b={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},Gb=function(t,e){Array.prototype.push.apply(t,$t(e)?e:[e])};let ME;const it={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:pN,encodeValuesOnly:!1,format:Hb,formatter:Fb,indices:!1,serializeDate(t){return(ME??(ME=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function yN(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const xd={};function Kb(t,e,n,s,i,r,a,l,u,c,d,m,g,p,C,N,x,S){let y=t,b=S,I=0,B=!1;for(;(b=b.get(xd))!==void 0&&!B;){const A=b.get(t);if(I+=1,typeof A<"u"){if(A===I)throw new RangeError("Cyclic object value");B=!0}typeof b.get(xd)>"u"&&(I=0)}if(typeof c=="function"?y=c(e,y):y instanceof Date?y=g==null?void 0:g(y):n==="comma"&&$t(y)&&(y=DE(y,function(A){return A instanceof Date?g==null?void 0:g(A):A})),y===null){if(r)return u&&!N?u(e,it.encoder,x,"key",p):e;y=""}if(yN(y)||_N(y)){if(u){const A=N?e:u(e,it.encoder,x,"key",p);return[(C==null?void 0:C(A))+"="+(C==null?void 0:C(u(y,it.encoder,x,"value",p)))]}return[(C==null?void 0:C(e))+"="+(C==null?void 0:C(String(y)))]}const j=[];if(typeof y>"u")return j;let v;if(n==="comma"&&$t(y))N&&u&&(y=DE(y,u)),v=[{value:y.length>0?y.join(",")||null:void 0}];else if($t(c))v=c;else{const A=Object.keys(y);v=d?A.sort(d):A}const E=l?String(e).replace(/\./g,"%2E"):String(e),T=s&&$t(y)&&y.length===1?E+"[]":E;if(i&&$t(y)&&y.length===0)return T+"[]";for(let A=0;A<v.length;++A){const w=v[A],O=typeof w=="object"&&typeof w.value<"u"?w.value:y[w];if(a&&O===null)continue;const R=m&&l?w.replace(/\./g,"%2E"):w,Qe=$t(y)?typeof n=="function"?n(T,R):T:T+(m?"."+R:"["+R+"]");S.set(t,I);const It=new WeakMap;It.set(xd,S),Gb(j,Kb(O,Qe,n,s,i,r,a,l,n==="comma"&&N&&$t(y)?null:u,c,d,m,g,p,C,N,x,It))}return j}function vN(t=it){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||it.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=Hb;if(typeof t.format<"u"){if(!eg(NE,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const s=NE[n];let i=it.filter;(typeof t.filter=="function"||$t(t.filter))&&(i=t.filter);let r;if(t.arrayFormat&&t.arrayFormat in $b?r=t.arrayFormat:"indices"in t?r=t.indices?"indices":"repeat":r=it.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const a=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:it.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:it.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:it.allowEmptyArrays,arrayFormat:r,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:it.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?it.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:it.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:it.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:it.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:it.encodeValuesOnly,filter:i,format:n,formatter:s,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:it.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:it.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:it.strictNullHandling}}function EN(t,e={}){let n=t;const s=vN(e);let i,r;typeof s.filter=="function"?(r=s.filter,n=r("",n)):$t(s.filter)&&(r=s.filter,i=r);const a=[];if(typeof n!="object"||n===null)return"";const l=$b[s.arrayFormat],u=l==="comma"&&s.commaRoundTrip;i||(i=Object.keys(n)),s.sort&&i.sort(s.sort);const c=new WeakMap;for(let g=0;g<i.length;++g){const p=i[g];s.skipNulls&&n[p]===null||Gb(a,Kb(n[p],p,l,u,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,c))}const d=a.join(s.delimiter);let m=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),d.length>0?m+d:""}function TN(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let s=0;for(const i of t)n.set(i,s),s+=i.length;return n}let xE;function zp(t){let e;return(xE??(e=new globalThis.TextEncoder,xE=e.encode.bind(e)))(t)}let VE;function kE(t){let e;return(VE??(e=new globalThis.TextDecoder,VE=e.decode.bind(e)))(t)}var Xt,Jt;class ef{constructor(){Xt.set(this,void 0),Jt.set(this,void 0),Z(this,Xt,new Uint8Array),Z(this,Jt,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?zp(e):e;Z(this,Xt,TN([M(this,Xt,"f"),n]));const s=[];let i;for(;(i=SN(M(this,Xt,"f"),M(this,Jt,"f")))!=null;){if(i.carriage&&M(this,Jt,"f")==null){Z(this,Jt,i.index);continue}if(M(this,Jt,"f")!=null&&(i.index!==M(this,Jt,"f")+1||i.carriage)){s.push(kE(M(this,Xt,"f").subarray(0,M(this,Jt,"f")-1))),Z(this,Xt,M(this,Xt,"f").subarray(M(this,Jt,"f"))),Z(this,Jt,null);continue}const r=M(this,Jt,"f")!==null?i.preceding-1:i.preceding,a=kE(M(this,Xt,"f").subarray(0,r));s.push(a),Z(this,Xt,M(this,Xt,"f").subarray(i.index)),Z(this,Jt,null)}return s}flush(){return M(this,Xt,"f").length?this.decode(`
`):[]}}Xt=new WeakMap,Jt=new WeakMap;ef.NEWLINE_CHARS=new Set([`
`,"\r"]);ef.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function SN(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function AN(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}const ah={off:0,error:200,warn:300,info:400,debug:500},PE=(t,e,n)=>{if(t){if(iN(ah,t))return t;pt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(ah))}`)}};function Ao(){}function Pu(t,e,n){return!e||ah[t]>ah[n]?Ao:e[t].bind(e)}const bN={error:Ao,warn:Ao,info:Ao,debug:Ao};let LE=new WeakMap;function pt(t){const e=t.logger,n=t.logLevel??"off";if(!e)return bN;const s=LE.get(e);if(s&&s[0]===n)return s[1];const i={error:Pu("error",e,n),warn:Pu("warn",e,n),info:Pu("info",e,n),debug:Pu("debug",e,n)};return LE.set(e,[n,i]),i}const Bi=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var go;class qn{constructor(e,n,s){this.iterator=e,go.set(this,void 0),this.controller=n,Z(this,go,s)}static fromSSEResponse(e,n,s){let i=!1;const r=s?pt(s):console;async function*a(){if(i)throw new Y("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let l=!1;try{for await(const u of wN(e,n))if(!l){if(u.data.startsWith("[DONE]")){l=!0;continue}if(u.event===null||!u.event.startsWith("thread.")){let c;try{c=JSON.parse(u.data)}catch(d){throw r.error("Could not parse message into JSON:",u.data),r.error("From chunk:",u.raw),d}if(c&&c.error)throw new wt(void 0,c.error,void 0,e.headers);yield c}else{let c;try{c=JSON.parse(u.data)}catch(d){throw console.error("Could not parse message into JSON:",u.data),console.error("From chunk:",u.raw),d}if(u.event=="error")throw new wt(void 0,c.error,c.message,void 0);yield{event:u.event,data:c}}}l=!0}catch(u){if(Wm(u))return;throw u}finally{l||n.abort()}}return new qn(a,n,s)}static fromReadableStream(e,n,s){let i=!1;async function*r(){const l=new ef,u=qb(e);for await(const c of u)for(const d of l.decode(c))yield d;for(const c of l.flush())yield c}async function*a(){if(i)throw new Y("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let l=!1;try{for await(const u of r())l||u&&(yield JSON.parse(u));l=!0}catch(u){if(Wm(u))return;throw u}finally{l||n.abort()}}return new qn(a,n,s)}[(go=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],s=this.iterator(),i=r=>({next:()=>{if(r.length===0){const a=s.next();e.push(a),n.push(a)}return r.shift()}});return[new qn(()=>i(e),this.controller,M(this,go,"f")),new qn(()=>i(n),this.controller,M(this,go,"f"))]}toReadableStream(){const e=this;let n;return Bb({async start(){n=e[Symbol.asyncIterator]()},async pull(s){try{const{value:i,done:r}=await n.next();if(r)return s.close();const a=zp(JSON.stringify(i)+`
`);s.enqueue(a)}catch(i){s.error(i)}},async cancel(){var s;await((s=n.return)==null?void 0:s.call(n))}})}}async function*wN(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Y("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Y("Attempted to iterate over a response with no body");const n=new IN,s=new ef,i=qb(t.body);for await(const r of RN(i))for(const a of s.decode(r)){const l=n.decode(a);l&&(yield l)}for(const r of s.flush()){const a=n.decode(r);a&&(yield a)}}async function*RN(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const s=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?zp(n):n;let i=new Uint8Array(e.length+s.length);i.set(e),i.set(s,e.length),e=i;let r;for(;(r=AN(e))!==-1;)yield e.slice(0,r),e=e.slice(r)}e.length>0&&(yield e)}class IN{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const r={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],r}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,s,i]=CN(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function CN(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function Qb(t,e){const{response:n,requestLogID:s,retryOfRequestLogID:i,startTime:r}=e,a=await(async()=>{var m;if(e.options.stream)return pt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):qn.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),u=(m=l==null?void 0:l.split(";")[0])==null?void 0:m.trim();if((u==null?void 0:u.includes("application/json"))||(u==null?void 0:u.endsWith("+json"))){if(n.headers.get("content-length")==="0")return;const p=await n.json();return Yb(p,n)}return await n.text()})();return pt(t).debug(`[${s}] response parsed`,Bi({retryOfRequestLogID:i,url:n.url,status:n.status,body:a,durationMs:Date.now()-r})),a}function Yb(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var bo;class tf extends Promise{constructor(e,n,s=Qb){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=s,bo.set(this,void 0),Z(this,bo,e)}_thenUnwrap(e){return new tf(M(this,bo,"f"),this.responsePromise,async(n,s)=>Yb(e(await this.parseResponse(n,s),s),s.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(M(this,bo,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}bo=new WeakMap;var Lu;class Bp{constructor(e,n,s,i){Lu.set(this,void 0),Z(this,Lu,e),this.options=i,this.response=n,this.body=s}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Y("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await M(this,Lu,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Lu=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class ON extends tf{constructor(e,n,s){super(e,n,async(i,r)=>new s(i,r.response,await Qb(i,r),r.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class nf extends Bp{constructor(e,n,s,i){super(e,n,s,i),this.data=s.data||[],this.object=s.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Fe extends Bp{constructor(e,n,s,i){super(e,n,s,i),this.data=s.data||[],this.has_more=s.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var s;const e=this.getPaginatedItems(),n=(s=e[e.length-1])==null?void 0:s.id;return n?{...this.options,query:{...zb(this.options.query),after:n}}:null}}class oh extends Bp{constructor(e,n,s,i){super(e,n,s,i),this.data=s.data||[],this.has_more=s.has_more||!1,this.last_id=s.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...zb(this.options.query),after:e}}:null}}const Xb=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Jo(t,e,n){return Xb(),new File(t,e??"unknown_file",n)}function hc(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const jp=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",Sl=async(t,e)=>tg(t.body)?{...t,body:await Jb(t.body,e)}:t,Ea=async(t,e)=>({...t,body:await Jb(t.body,e)}),UE=new WeakMap;function NN(t){const e=typeof t=="function"?t:t.fetch,n=UE.get(e);if(n)return n;const s=(async()=>{try{const i="Response"in e?e.Response:(await e("data:,")).constructor,r=new FormData;return r.toString()!==await new i(r).text()}catch{return!0}})();return UE.set(e,s),s}const Jb=async(t,e)=>{if(!await NN(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([s,i])=>ng(n,s,i))),n},Wb=t=>t instanceof Blob&&"name"in t,DN=t=>typeof t=="object"&&t!==null&&(t instanceof Response||jp(t)||Wb(t)),tg=t=>{if(DN(t))return!0;if(Array.isArray(t))return t.some(tg);if(t&&typeof t=="object"){for(const e in t)if(tg(t[e]))return!0}return!1},ng=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,Jo([await n.blob()],hc(n)));else if(jp(n))t.append(e,Jo([await new Response(jb(n)).blob()],hc(n)));else if(Wb(n))t.append(e,n,hc(n));else if(Array.isArray(n))await Promise.all(n.map(s=>ng(t,e+"[]",s)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([s,i])=>ng(t,`${e}[${s}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},Zb=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",MN=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Zb(t),xN=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function VN(t,e,n){if(Xb(),t=await t,MN(t))return t instanceof File?t:Jo([await t.arrayBuffer()],t.name);if(xN(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Jo(await sg(i),e,n)}const s=await sg(t);if(e||(e=hc(t)),!(n!=null&&n.type)){const i=s.find(r=>typeof r=="object"&&"type"in r&&r.type);typeof i=="string"&&(n={...n,type:i})}return Jo(s,e,n)}async function sg(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(Zb(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(jp(t))for await(const s of t)e.push(...await sg(s));else{const s=(n=t==null?void 0:t.constructor)==null?void 0:n.name;throw new Error(`Unexpected data type: ${typeof t}${s?`; constructor: ${s}`:""}${kN(t)}`)}return e}function kN(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class K{constructor(e){this._client=e}}function ew(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const zE=Object.freeze(Object.create(null)),PN=(t=ew)=>function(n,...s){if(n.length===1)return n[0];let i=!1;const r=[],a=n.reduce((d,m,g)=>{var N;/[?#]/.test(m)&&(i=!0);const p=s[g];let C=(i?encodeURIComponent:t)(""+p);return g!==s.length&&(p==null||typeof p=="object"&&p.toString===((N=Object.getPrototypeOf(Object.getPrototypeOf(p.hasOwnProperty??zE)??zE))==null?void 0:N.toString))&&(C=p+"",r.push({start:d.length+m.length,length:C.length,error:`Value of type ${Object.prototype.toString.call(p).slice(8,-1)} is not a valid path parameter`})),d+m+(g===s.length?"":C)},""),l=a.split(/[?#]/,1)[0],u=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=u.exec(l))!==null;)r.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(r.sort((d,m)=>d.start-m.start),r.length>0){let d=0;const m=r.reduce((g,p)=>{const C=" ".repeat(p.start-d),N="^".repeat(p.length);return d=p.start+p.length,g+C+N},"");throw new Y(`Path parameters result in path with invalid segments:
${r.map(g=>g.error).join(`
`)}
${a}
${m}`)}return a},U=PN(ew);let tw=class extends K{list(e,n={},s){return this._client.getAPIList(U`/chat/completions/${e}/messages`,Fe,{query:n,...s})}};function lh(t){return t!==void 0&&"function"in t&&t.function!==void 0}function qp(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function Yl(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function LN(t,e){return!e||!nw(e)?{...t,choices:t.choices.map(n=>(sw(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:Hp(t,e)}function Hp(t,e){const n=t.choices.map(s=>{var i;if(s.finish_reason==="length")throw new Lb;if(s.finish_reason==="content_filter")throw new Ub;return sw(s.message.tool_calls),{...s,message:{...s.message,...s.message.tool_calls?{tool_calls:((i=s.message.tool_calls)==null?void 0:i.map(r=>zN(e,r)))??void 0}:void 0,parsed:s.message.content&&!s.message.refusal?UN(e,s.message.content):null}}});return{...t,choices:n}}function UN(t,e){var n,s;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((s=t.response_format)==null?void 0:s.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function zN(t,e){var s;const n=(s=t.tools)==null?void 0:s.find(i=>{var r;return lh(i)&&((r=i.function)==null?void 0:r.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Yl(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function BN(t,e){var s;if(!t||!("tools"in t)||!t.tools)return!1;const n=(s=t.tools)==null?void 0:s.find(i=>{var r;return lh(i)&&((r=i.function)==null?void 0:r.name)===e.function.name});return lh(n)&&(Yl(n)||(n==null?void 0:n.function.strict)||!1)}function nw(t){var e;return qp(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(n=>Yl(n)||n.type==="function"&&n.function.strict===!0))??!1}function sw(t){for(const e of t||[])if(e.type!=="function")throw new Y(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function jN(t){for(const e of t??[]){if(e.type!=="function")throw new Y(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Y(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const uh=t=>(t==null?void 0:t.role)==="assistant",iw=t=>(t==null?void 0:t.role)==="tool";var ig,fc,dc,wo,Ro,mc,Io,rs,Co,ch,hh,Mr,rw;class Fp{constructor(){ig.add(this),this.controller=new AbortController,fc.set(this,void 0),dc.set(this,()=>{}),wo.set(this,()=>{}),Ro.set(this,void 0),mc.set(this,()=>{}),Io.set(this,()=>{}),rs.set(this,{}),Co.set(this,!1),ch.set(this,!1),hh.set(this,!1),Mr.set(this,!1),Z(this,fc,new Promise((e,n)=>{Z(this,dc,e,"f"),Z(this,wo,n,"f")})),Z(this,Ro,new Promise((e,n)=>{Z(this,mc,e,"f"),Z(this,Io,n,"f")})),M(this,fc,"f").catch(()=>{}),M(this,Ro,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},M(this,ig,"m",rw).bind(this))},0)}_connected(){this.ended||(M(this,dc,"f").call(this),this._emit("connect"))}get ended(){return M(this,Co,"f")}get errored(){return M(this,ch,"f")}get aborted(){return M(this,hh,"f")}abort(){this.controller.abort()}on(e,n){return(M(this,rs,"f")[e]||(M(this,rs,"f")[e]=[])).push({listener:n}),this}off(e,n){const s=M(this,rs,"f")[e];if(!s)return this;const i=s.findIndex(r=>r.listener===n);return i>=0&&s.splice(i,1),this}once(e,n){return(M(this,rs,"f")[e]||(M(this,rs,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,s)=>{Z(this,Mr,!0),e!=="error"&&this.once("error",s),this.once(e,n)})}async done(){Z(this,Mr,!0),await M(this,Ro,"f")}_emit(e,...n){if(M(this,Co,"f"))return;e==="end"&&(Z(this,Co,!0),M(this,mc,"f").call(this));const s=M(this,rs,"f")[e];if(s&&(M(this,rs,"f")[e]=s.filter(i=>!i.once),s.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!M(this,Mr,"f")&&!(s!=null&&s.length)&&Promise.reject(i),M(this,wo,"f").call(this,i),M(this,Io,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!M(this,Mr,"f")&&!(s!=null&&s.length)&&Promise.reject(i),M(this,wo,"f").call(this,i),M(this,Io,"f").call(this,i),this._emit("end")}}_emitFinal(){}}fc=new WeakMap,dc=new WeakMap,wo=new WeakMap,Ro=new WeakMap,mc=new WeakMap,Io=new WeakMap,rs=new WeakMap,Co=new WeakMap,ch=new WeakMap,hh=new WeakMap,Mr=new WeakMap,ig=new WeakSet,rw=function(e){if(Z(this,ch,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Tn),e instanceof Tn)return Z(this,hh,!0),this._emit("abort",e);if(e instanceof Y)return this._emit("error",e);if(e instanceof Error){const n=new Y(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Y(String(e)))};function qN(t){return typeof t.parse=="function"}var kt,rg,fh,ag,og,lg,aw,ow;const HN=10;class lw extends Fp{constructor(){super(...arguments),kt.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var s;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(s=e.choices[0])==null?void 0:s.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),iw(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(uh(e)&&e.tool_calls)for(const s of e.tool_calls)s.type==="function"&&this._emit("functionToolCall",s.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Y("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),M(this,kt,"m",rg).call(this)}async finalMessage(){return await this.done(),M(this,kt,"m",fh).call(this)}async finalFunctionToolCall(){return await this.done(),M(this,kt,"m",ag).call(this)}async finalFunctionToolCallResult(){return await this.done(),M(this,kt,"m",og).call(this)}async totalUsage(){return await this.done(),M(this,kt,"m",lg).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=M(this,kt,"m",fh).call(this);n&&this._emit("finalMessage",n);const s=M(this,kt,"m",rg).call(this);s&&this._emit("finalContent",s);const i=M(this,kt,"m",ag).call(this);i&&this._emit("finalFunctionToolCall",i);const r=M(this,kt,"m",og).call(this);r!=null&&this._emit("finalFunctionToolCallResult",r),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",M(this,kt,"m",lg).call(this))}async _createChatCompletion(e,n,s){const i=s==null?void 0:s.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),M(this,kt,"m",aw).call(this,n);const r=await e.chat.completions.create({...n,stream:!1},{...s,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Hp(r,n))}async _runChatCompletion(e,n,s){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,n,s)}async _runTools(e,n,s){var p,C,N;const i="tool",{tool_choice:r="auto",stream:a,...l}=n,u=typeof r!="string"&&r.type==="function"&&((p=r==null?void 0:r.function)==null?void 0:p.name),{maxChatCompletions:c=HN}=s||{},d=n.tools.map(x=>{if(Yl(x)){if(!x.$callback)throw new Y("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:x.$callback,name:x.function.name,description:x.function.description||"",parameters:x.function.parameters,parse:x.$parseRaw,strict:!0}}}return x}),m={};for(const x of d)x.type==="function"&&(m[x.function.name||x.function.function.name]=x.function);const g="tools"in n?d.map(x=>x.type==="function"?{type:"function",function:{name:x.function.name||x.function.function.name,parameters:x.function.parameters,description:x.function.description,strict:x.function.strict}}:x):void 0;for(const x of n.messages)this._addMessage(x,!1);for(let x=0;x<c;++x){const y=(C=(await this._createChatCompletion(e,{...l,tool_choice:r,tools:g,messages:[...this.messages]},s)).choices[0])==null?void 0:C.message;if(!y)throw new Y("missing message in ChatCompletion response");if(!((N=y.tool_calls)!=null&&N.length))return;for(const b of y.tool_calls){if(b.type!=="function")continue;const I=b.id,{name:B,arguments:j}=b.function,v=m[B];if(v){if(u&&u!==B){const w=`Invalid tool_call: ${JSON.stringify(B)}. ${JSON.stringify(u)} requested. Please try again`;this._addMessage({role:i,tool_call_id:I,content:w});continue}}else{const w=`Invalid tool_call: ${JSON.stringify(B)}. Available options are: ${Object.keys(m).map(O=>JSON.stringify(O)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:I,content:w});continue}let E;try{E=qN(v)?await v.parse(j):j}catch(w){const O=w instanceof Error?w.message:String(w);this._addMessage({role:i,tool_call_id:I,content:O});continue}const T=await v.function(E,this),A=M(this,kt,"m",ow).call(this,T);if(this._addMessage({role:i,tool_call_id:I,content:A}),u)return}}}}kt=new WeakSet,rg=function(){return M(this,kt,"m",fh).call(this).content??null},fh=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(uh(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Y("stream ended without producing a ChatCompletionMessage with role=assistant")},ag=function(){var e,n;for(let s=this.messages.length-1;s>=0;s--){const i=this.messages[s];if(uh(i)&&((e=i==null?void 0:i.tool_calls)!=null&&e.length))return(n=i.tool_calls.filter(r=>r.type==="function").at(-1))==null?void 0:n.function}},og=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(iw(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(s=>{var i;return s.role==="assistant"&&((i=s.tool_calls)==null?void 0:i.some(r=>r.type==="function"&&r.id===n.tool_call_id))}))return n.content}},lg=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},aw=function(e){if(e.n!=null&&e.n>1)throw new Y("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},ow=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class $p extends lw{static runTools(e,n,s){const i=new $p,r={...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,r)),i}_addMessage(e,n=!0){super._addMessage(e,n),uh(e)&&e.content&&this._emit("content",e.content)}}const uw=1,cw=2,hw=4,fw=8,dw=16,mw=32,gw=64,pw=128,_w=256,yw=pw|_w,vw=dw|mw|yw|gw,Ew=uw|cw|vw,Tw=hw|fw,FN=Ew|Tw,ct={STR:uw,NUM:cw,ARR:hw,OBJ:fw,NULL:dw,BOOL:mw,NAN:gw,INFINITY:pw,MINUS_INFINITY:_w,INF:yw,SPECIAL:vw,ATOM:Ew,COLLECTION:Tw,ALL:FN};class $N extends Error{}class GN extends Error{}function KN(t,e=ct.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return QN(t.trim(),e)}const QN=(t,e)=>{const n=t.length;let s=0;const i=g=>{throw new $N(`${g} at position ${s}`)},r=g=>{throw new GN(`${g} at position ${s}`)},a=()=>(m(),s>=n&&i("Unexpected end of input"),t[s]==='"'?l():t[s]==="{"?u():t[s]==="["?c():t.substring(s,s+4)==="null"||ct.NULL&e&&n-s<4&&"null".startsWith(t.substring(s))?(s+=4,null):t.substring(s,s+4)==="true"||ct.BOOL&e&&n-s<4&&"true".startsWith(t.substring(s))?(s+=4,!0):t.substring(s,s+5)==="false"||ct.BOOL&e&&n-s<5&&"false".startsWith(t.substring(s))?(s+=5,!1):t.substring(s,s+8)==="Infinity"||ct.INFINITY&e&&n-s<8&&"Infinity".startsWith(t.substring(s))?(s+=8,1/0):t.substring(s,s+9)==="-Infinity"||ct.MINUS_INFINITY&e&&1<n-s&&n-s<9&&"-Infinity".startsWith(t.substring(s))?(s+=9,-1/0):t.substring(s,s+3)==="NaN"||ct.NAN&e&&n-s<3&&"NaN".startsWith(t.substring(s))?(s+=3,NaN):d()),l=()=>{const g=s;let p=!1;for(s++;s<n&&(t[s]!=='"'||p&&t[s-1]==="\\");)p=t[s]==="\\"?!p:!1,s++;if(t.charAt(s)=='"')try{return JSON.parse(t.substring(g,++s-Number(p)))}catch(C){r(String(C))}else if(ct.STR&e)try{return JSON.parse(t.substring(g,s-Number(p))+'"')}catch{return JSON.parse(t.substring(g,t.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},u=()=>{s++,m();const g={};try{for(;t[s]!=="}";){if(m(),s>=n&&ct.OBJ&e)return g;const p=l();m(),s++;try{const C=a();Object.defineProperty(g,p,{value:C,writable:!0,enumerable:!0,configurable:!0})}catch(C){if(ct.OBJ&e)return g;throw C}m(),t[s]===","&&s++}}catch{if(ct.OBJ&e)return g;i("Expected '}' at end of object")}return s++,g},c=()=>{s++;const g=[];try{for(;t[s]!=="]";)g.push(a()),m(),t[s]===","&&s++}catch{if(ct.ARR&e)return g;i("Expected ']' at end of array")}return s++,g},d=()=>{if(s===0){t==="-"&&ct.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t)}catch(p){if(ct.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}r(String(p))}}const g=s;for(t[s]==="-"&&s++;t[s]&&!",]}".includes(t[s]);)s++;s==n&&!(ct.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(t.substring(g,s))}catch{t.substring(g,s)==="-"&&ct.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t.substring(g,t.lastIndexOf("e")))}catch(C){r(String(C))}}},m=()=>{for(;s<n&&` 
\r	`.includes(t[s]);)s++};return a()},BE=t=>KN(t,ct.ALL^ct.NUM);var st,ss,wr,Ls,Vd,Uu,kd,Pd,Ld,zu,Ud,jE;class Al extends lw{constructor(e){super(),st.add(this),ss.set(this,void 0),wr.set(this,void 0),Ls.set(this,void 0),Z(this,ss,e),Z(this,wr,[])}get currentChatCompletionSnapshot(){return M(this,Ls,"f")}static fromReadableStream(e){const n=new Al(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,s){const i=new Al(n);return i._run(()=>i._runChatCompletion(e,{...n,stream:!0},{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,n,s){var a;super._createChatCompletion;const i=s==null?void 0:s.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),M(this,st,"m",Vd).call(this);const r=await e.chat.completions.create({...n,stream:!0},{...s,signal:this.controller.signal});this._connected();for await(const l of r)M(this,st,"m",kd).call(this,l);if((a=r.controller.signal)!=null&&a.aborted)throw new Tn;return this._addChatCompletion(M(this,st,"m",zu).call(this))}async _fromReadableStream(e,n){var a;const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),M(this,st,"m",Vd).call(this),this._connected();const i=qn.fromReadableStream(e,this.controller);let r;for await(const l of i)r&&r!==l.id&&this._addChatCompletion(M(this,st,"m",zu).call(this)),M(this,st,"m",kd).call(this,l),r=l.id;if((a=i.controller.signal)!=null&&a.aborted)throw new Tn;return this._addChatCompletion(M(this,st,"m",zu).call(this))}[(ss=new WeakMap,wr=new WeakMap,Ls=new WeakMap,st=new WeakSet,Vd=function(){this.ended||Z(this,Ls,void 0)},Uu=function(n){let s=M(this,wr,"f")[n.index];return s||(s={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},M(this,wr,"f")[n.index]=s,s)},kd=function(n){var i,r,a,l,u,c,d,m,g,p,C,N,x,S,y;if(this.ended)return;const s=M(this,st,"m",jE).call(this,n);this._emit("chunk",n,s);for(const b of n.choices){const I=s.choices[b.index];b.delta.content!=null&&((i=I.message)==null?void 0:i.role)==="assistant"&&((r=I.message)!=null&&r.content)&&(this._emit("content",b.delta.content,I.message.content),this._emit("content.delta",{delta:b.delta.content,snapshot:I.message.content,parsed:I.message.parsed})),b.delta.refusal!=null&&((a=I.message)==null?void 0:a.role)==="assistant"&&((l=I.message)!=null&&l.refusal)&&this._emit("refusal.delta",{delta:b.delta.refusal,snapshot:I.message.refusal}),((u=b.logprobs)==null?void 0:u.content)!=null&&((c=I.message)==null?void 0:c.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(d=b.logprobs)==null?void 0:d.content,snapshot:((m=I.logprobs)==null?void 0:m.content)??[]}),((g=b.logprobs)==null?void 0:g.refusal)!=null&&((p=I.message)==null?void 0:p.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(C=b.logprobs)==null?void 0:C.refusal,snapshot:((N=I.logprobs)==null?void 0:N.refusal)??[]});const B=M(this,st,"m",Uu).call(this,I);I.finish_reason&&(M(this,st,"m",Ld).call(this,I),B.current_tool_call_index!=null&&M(this,st,"m",Pd).call(this,I,B.current_tool_call_index));for(const j of b.delta.tool_calls??[])B.current_tool_call_index!==j.index&&(M(this,st,"m",Ld).call(this,I),B.current_tool_call_index!=null&&M(this,st,"m",Pd).call(this,I,B.current_tool_call_index)),B.current_tool_call_index=j.index;for(const j of b.delta.tool_calls??[]){const v=(x=I.message.tool_calls)==null?void 0:x[j.index];v!=null&&v.type&&((v==null?void 0:v.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(S=v.function)==null?void 0:S.name,index:j.index,arguments:v.function.arguments,parsed_arguments:v.function.parsed_arguments,arguments_delta:((y=j.function)==null?void 0:y.arguments)??""}):(v==null||v.type,void 0))}}},Pd=function(n,s){var a,l,u;if(M(this,st,"m",Uu).call(this,n).done_tool_calls.has(s))return;const r=(a=n.message.tool_calls)==null?void 0:a[s];if(!r)throw new Error("no tool call snapshot");if(!r.type)throw new Error("tool call snapshot missing `type`");if(r.type==="function"){const c=(u=(l=M(this,ss,"f"))==null?void 0:l.tools)==null?void 0:u.find(d=>lh(d)&&d.function.name===r.function.name);this._emit("tool_calls.function.arguments.done",{name:r.function.name,index:s,arguments:r.function.arguments,parsed_arguments:Yl(c)?c.$parseRaw(r.function.arguments):c!=null&&c.function.strict?JSON.parse(r.function.arguments):null})}else r.type},Ld=function(n){var i,r;const s=M(this,st,"m",Uu).call(this,n);if(n.message.content&&!s.content_done){s.content_done=!0;const a=M(this,st,"m",Ud).call(this);this._emit("content.done",{content:n.message.content,parsed:a?a.$parseRaw(n.message.content):null})}n.message.refusal&&!s.refusal_done&&(s.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(i=n.logprobs)!=null&&i.content&&!s.logprobs_content_done&&(s.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(r=n.logprobs)!=null&&r.refusal&&!s.logprobs_refusal_done&&(s.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},zu=function(){if(this.ended)throw new Y("stream has ended, this shouldn't happen");const n=M(this,Ls,"f");if(!n)throw new Y("request ended without sending any chunks");return Z(this,Ls,void 0),Z(this,wr,[]),YN(n,M(this,ss,"f"))},Ud=function(){var s;const n=(s=M(this,ss,"f"))==null?void 0:s.response_format;return qp(n)?n:null},jE=function(n){var s,i,r,a;let l=M(this,Ls,"f");const{choices:u,...c}=n;l?Object.assign(l,c):l=Z(this,Ls,{...c,choices:[]});for(const{delta:d,finish_reason:m,index:g,logprobs:p=null,...C}of n.choices){let N=l.choices[g];if(N||(N=l.choices[g]={finish_reason:m,index:g,message:{},logprobs:p,...C}),p)if(!N.logprobs)N.logprobs=Object.assign({},p);else{const{content:j,refusal:v,...E}=p;Object.assign(N.logprobs,E),j&&((s=N.logprobs).content??(s.content=[]),N.logprobs.content.push(...j)),v&&((i=N.logprobs).refusal??(i.refusal=[]),N.logprobs.refusal.push(...v))}if(m&&(N.finish_reason=m,M(this,ss,"f")&&nw(M(this,ss,"f")))){if(m==="length")throw new Lb;if(m==="content_filter")throw new Ub}if(Object.assign(N,C),!d)continue;const{content:x,refusal:S,function_call:y,role:b,tool_calls:I,...B}=d;if(Object.assign(N.message,B),S&&(N.message.refusal=(N.message.refusal||"")+S),b&&(N.message.role=b),y&&(N.message.function_call?(y.name&&(N.message.function_call.name=y.name),y.arguments&&((r=N.message.function_call).arguments??(r.arguments=""),N.message.function_call.arguments+=y.arguments)):N.message.function_call=y),x&&(N.message.content=(N.message.content||"")+x,!N.message.refusal&&M(this,st,"m",Ud).call(this)&&(N.message.parsed=BE(N.message.content))),I){N.message.tool_calls||(N.message.tool_calls=[]);for(const{index:j,id:v,type:E,function:T,...A}of I){const w=(a=N.message.tool_calls)[j]??(a[j]={});Object.assign(w,A),v&&(w.id=v),E&&(w.type=E),T&&(w.function??(w.function={name:T.name??"",arguments:""})),T!=null&&T.name&&(w.function.name=T.name),T!=null&&T.arguments&&(w.function.arguments+=T.arguments,BN(M(this,ss,"f"),w)&&(w.function.parsed_arguments=BE(w.function.arguments)))}}}return l},Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("chunk",i=>{const r=n.shift();r?r.resolve(i):e.push(i)}),this.on("end",()=>{s=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{s=!0;for(const r of n)r.reject(i);n.length=0}),this.on("error",i=>{s=!0;for(const r of n)r.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((r,a)=>n.push({resolve:r,reject:a})).then(r=>r?{value:r,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new qn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function YN(t,e){const{id:n,choices:s,created:i,model:r,system_fingerprint:a,...l}=t,u={...l,id:n,choices:s.map(({message:c,finish_reason:d,index:m,logprobs:g,...p})=>{if(!d)throw new Y(`missing finish_reason for choice ${m}`);const{content:C=null,function_call:N,tool_calls:x,...S}=c,y=c.role;if(!y)throw new Y(`missing role for choice ${m}`);if(N){const{arguments:b,name:I}=N;if(b==null)throw new Y(`missing function_call.arguments for choice ${m}`);if(!I)throw new Y(`missing function_call.name for choice ${m}`);return{...p,message:{content:C,function_call:{arguments:b,name:I},role:y,refusal:c.refusal??null},finish_reason:d,index:m,logprobs:g}}return x?{...p,index:m,finish_reason:d,logprobs:g,message:{...S,role:y,content:C,refusal:c.refusal??null,tool_calls:x.map((b,I)=>{const{function:B,type:j,id:v,...E}=b,{arguments:T,name:A,...w}=B||{};if(v==null)throw new Y(`missing choices[${m}].tool_calls[${I}].id
${Bu(t)}`);if(j==null)throw new Y(`missing choices[${m}].tool_calls[${I}].type
${Bu(t)}`);if(A==null)throw new Y(`missing choices[${m}].tool_calls[${I}].function.name
${Bu(t)}`);if(T==null)throw new Y(`missing choices[${m}].tool_calls[${I}].function.arguments
${Bu(t)}`);return{...E,id:v,type:j,function:{...w,name:A,arguments:T}}})}}:{...p,message:{...S,content:C,role:y,refusal:c.refusal??null},finish_reason:d,index:m,logprobs:g}}),created:i,model:r,object:"chat.completion",...a?{system_fingerprint:a}:{}};return LN(u,e)}function Bu(t){return JSON.stringify(t)}class dh extends Al{static fromReadableStream(e){const n=new dh(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,s){const i=new dh(n),r={...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,r)),i}}let Gp=class extends K{constructor(){super(...arguments),this.messages=new tw(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(U`/chat/completions/${e}`,n)}update(e,n,s){return this._client.post(U`/chat/completions/${e}`,{body:n,...s})}list(e={},n){return this._client.getAPIList("/chat/completions",Fe,{query:e,...n})}delete(e,n){return this._client.delete(U`/chat/completions/${e}`,n)}parse(e,n){return jN(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(s=>Hp(s,e))}runTools(e,n){return e.stream?dh.runTools(this._client,e,n):$p.runTools(this._client,e,n)}stream(e,n){return Al.createChatCompletion(this._client,e,n)}};Gp.Messages=tw;class Kp extends K{constructor(){super(...arguments),this.completions=new Gp(this._client)}}Kp.Completions=Gp;const Sw=Symbol("brand.privateNullableHeaders");function*XN(t){if(!t)return;if(Sw in t){const{values:s,nulls:i}=t;yield*s.entries();for(const r of i)yield[r,null];return}let e=!1,n;t instanceof Headers?n=t.entries():RE(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let s of n){const i=s[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const r=RE(s[1])?s[1]:[s[1]];let a=!1;for(const l of r)l!==void 0&&(e&&!a&&(a=!0,yield[i,null]),yield[i,l])}}const $=t=>{const e=new Headers,n=new Set;for(const s of t){const i=new Set;for(const[r,a]of XN(s)){const l=r.toLowerCase();i.has(l)||(e.delete(r),i.add(l)),a===null?(e.delete(r),n.add(l)):(e.append(r,a),n.delete(l))}}return{[Sw]:!0,values:e,nulls:n}};class Aw extends K{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:$([{Accept:"application/octet-stream"},n==null?void 0:n.headers]),__binaryResponse:!0})}}class bw extends K{create(e,n){return this._client.post("/audio/transcriptions",Ea({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class ww extends K{create(e,n){return this._client.post("/audio/translations",Ea({body:e,...n,__metadata:{model:e.model}},this._client))}}class Xl extends K{constructor(){super(...arguments),this.transcriptions=new bw(this._client),this.translations=new ww(this._client),this.speech=new Aw(this._client)}}Xl.Transcriptions=bw;Xl.Translations=ww;Xl.Speech=Aw;class Rw extends K{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(U`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",Fe,{query:e,...n})}cancel(e,n){return this._client.post(U`/batches/${e}/cancel`,n)}}class Iw extends K{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:$([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(U`/assistants/${e}`,{...n,headers:$([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,s){return this._client.post(U`/assistants/${e}`,{body:n,...s,headers:$([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e={},n){return this._client.getAPIList("/assistants",Fe,{query:e,...n,headers:$([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(U`/assistants/${e}`,{...n,headers:$([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}let Cw=class extends K{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:$([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}};class Ow extends K{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:$([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}let sf=class extends K{constructor(){super(...arguments),this.sessions=new Cw(this._client),this.transcriptionSessions=new Ow(this._client)}};sf.Sessions=Cw;sf.TranscriptionSessions=Ow;class Nw extends K{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:$([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}cancel(e,n){return this._client.post(U`/chatkit/sessions/${e}/cancel`,{...n,headers:$([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}}let Dw=class extends K{retrieve(e,n){return this._client.get(U`/chatkit/threads/${e}`,{...n,headers:$([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",oh,{query:e,...n,headers:$([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(U`/chatkit/threads/${e}`,{...n,headers:$([{"OpenAI-Beta":"chatkit_beta=v1"},n==null?void 0:n.headers])})}listItems(e,n={},s){return this._client.getAPIList(U`/chatkit/threads/${e}/items`,oh,{query:n,...s,headers:$([{"OpenAI-Beta":"chatkit_beta=v1"},s==null?void 0:s.headers])})}};class rf extends K{constructor(){super(...arguments),this.sessions=new Nw(this._client),this.threads=new Dw(this._client)}}rf.Sessions=Nw;rf.Threads=Dw;class Mw extends K{create(e,n,s){return this._client.post(U`/threads/${e}/messages`,{body:n,...s,headers:$([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,n,s){const{thread_id:i}=n;return this._client.get(U`/threads/${i}/messages/${e}`,{...s,headers:$([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,n,s){const{thread_id:i,...r}=n;return this._client.post(U`/threads/${i}/messages/${e}`,{body:r,...s,headers:$([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,n={},s){return this._client.getAPIList(U`/threads/${e}/messages`,Fe,{query:n,...s,headers:$([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,n,s){const{thread_id:i}=n;return this._client.delete(U`/threads/${i}/messages/${e}`,{...s,headers:$([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}class xw extends K{retrieve(e,n,s){const{thread_id:i,run_id:r,...a}=n;return this._client.get(U`/threads/${i}/runs/${r}/steps/${e}`,{query:a,...s,headers:$([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,n,s){const{thread_id:i,...r}=n;return this._client.getAPIList(U`/threads/${i}/runs/${e}/steps`,Fe,{query:r,...s,headers:$([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}const JN=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,s=new Uint8Array(n);for(let i=0;i<n;i++)s[i]=e.charCodeAt(i);return Array.from(new Float32Array(s.buffer))}};var zd={};const Rr=t=>{var e,n,s,i;if(typeof globalThis.process<"u")return((e=zd==null?void 0:zd[t])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(i=(s=(n=globalThis.Deno.env)==null?void 0:n.get)==null?void 0:s.call(n,t))==null?void 0:i.trim()};var yt,Hi,ug,Ln,gc,In,Fi,Xr,qi,mh,Wt,pc,_c,Wo,Oo,No,qE,HE,FE,$E,GE,KE,QE;class Zo extends Fp{constructor(){super(...arguments),yt.add(this),ug.set(this,[]),Ln.set(this,{}),gc.set(this,{}),In.set(this,void 0),Fi.set(this,void 0),Xr.set(this,void 0),qi.set(this,void 0),mh.set(this,void 0),Wt.set(this,void 0),pc.set(this,void 0),_c.set(this,void 0),Wo.set(this,void 0)}[(ug=new WeakMap,Ln=new WeakMap,gc=new WeakMap,In=new WeakMap,Fi=new WeakMap,Xr=new WeakMap,qi=new WeakMap,mh=new WeakMap,Wt=new WeakMap,pc=new WeakMap,_c=new WeakMap,Wo=new WeakMap,yt=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("event",i=>{const r=n.shift();r?r.resolve(i):e.push(i)}),this.on("end",()=>{s=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{s=!0;for(const r of n)r.reject(i);n.length=0}),this.on("error",i=>{s=!0;for(const r of n)r.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((r,a)=>n.push({resolve:r,reject:a})).then(r=>r?{value:r,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new Hi;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var r;const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=qn.fromReadableStream(e,this.controller);for await(const a of i)M(this,yt,"m",Oo).call(this,a);if((r=i.controller.signal)!=null&&r.aborted)throw new Tn;return this._addRun(M(this,yt,"m",No).call(this))}toReadableStream(){return new qn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,s,i){const r=new Hi;return r._run(()=>r._runToolAssistantStream(e,n,s,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createToolAssistantStream(e,n,s,i){var u;const r=i==null?void 0:i.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const a={...s,stream:!0},l=await e.submitToolOutputs(n,a,{...i,signal:this.controller.signal});this._connected();for await(const c of l)M(this,yt,"m",Oo).call(this,c);if((u=l.controller.signal)!=null&&u.aborted)throw new Tn;return this._addRun(M(this,yt,"m",No).call(this))}static createThreadAssistantStream(e,n,s){const i=new Hi;return i._run(()=>i._threadAssistantStream(e,n,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,n,s,i){const r=new Hi;return r._run(()=>r._runAssistantStream(e,n,s,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),r}currentEvent(){return M(this,pc,"f")}currentRun(){return M(this,_c,"f")}currentMessageSnapshot(){return M(this,In,"f")}currentRunStepSnapshot(){return M(this,Wo,"f")}async finalRunSteps(){return await this.done(),Object.values(M(this,Ln,"f"))}async finalMessages(){return await this.done(),Object.values(M(this,gc,"f"))}async finalRun(){if(await this.done(),!M(this,Fi,"f"))throw Error("Final run was not received.");return M(this,Fi,"f")}async _createThreadAssistantStream(e,n,s){var l;const i=s==null?void 0:s.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const r={...n,stream:!0},a=await e.createAndRun(r,{...s,signal:this.controller.signal});this._connected();for await(const u of a)M(this,yt,"m",Oo).call(this,u);if((l=a.controller.signal)!=null&&l.aborted)throw new Tn;return this._addRun(M(this,yt,"m",No).call(this))}async _createAssistantStream(e,n,s,i){var u;const r=i==null?void 0:i.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const a={...s,stream:!0},l=await e.create(n,a,{...i,signal:this.controller.signal});this._connected();for await(const c of l)M(this,yt,"m",Oo).call(this,c);if((u=l.controller.signal)!=null&&u.aborted)throw new Tn;return this._addRun(M(this,yt,"m",No).call(this))}static accumulateDelta(e,n){for(const[s,i]of Object.entries(n)){if(!e.hasOwnProperty(s)){e[s]=i;continue}let r=e[s];if(r==null){e[s]=i;continue}if(s==="index"||s==="type"){e[s]=i;continue}if(typeof r=="string"&&typeof i=="string")r+=i;else if(typeof r=="number"&&typeof i=="number")r+=i;else if(Dd(r)&&Dd(i))r=this.accumulateDelta(r,i);else if(Array.isArray(r)&&Array.isArray(i)){if(r.every(a=>typeof a=="string"||typeof a=="number")){r.push(...i);continue}for(const a of i){if(!Dd(a))throw new Error(`Expected array delta entry to be an object but got: ${a}`);const l=a.index;if(l==null)throw console.error(a),new Error("Expected array delta entry to have an `index` property");if(typeof l!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${l}`);const u=r[l];u==null?r.push(a):r[l]=this.accumulateDelta(u,a)}continue}else throw Error(`Unhandled record type: ${s}, deltaValue: ${i}, accValue: ${r}`);e[s]=r}return e}_addRun(e){return e}async _threadAssistantStream(e,n,s){return await this._createThreadAssistantStream(n,e,s)}async _runAssistantStream(e,n,s,i){return await this._createAssistantStream(n,e,s,i)}async _runToolAssistantStream(e,n,s,i){return await this._createToolAssistantStream(n,e,s,i)}}Hi=Zo,Oo=function(e){if(!this.ended)switch(Z(this,pc,e),M(this,yt,"m",FE).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":M(this,yt,"m",QE).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":M(this,yt,"m",HE).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":M(this,yt,"m",qE).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},No=function(){if(this.ended)throw new Y("stream has ended, this shouldn't happen");if(!M(this,Fi,"f"))throw Error("Final run has not been received");return M(this,Fi,"f")},qE=function(e){const[n,s]=M(this,yt,"m",GE).call(this,e,M(this,In,"f"));Z(this,In,n),M(this,gc,"f")[n.id]=n;for(const i of s){const r=n.content[i.index];(r==null?void 0:r.type)=="text"&&this._emit("textCreated",r.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let r=i.text,a=n.content[i.index];if(a&&a.type=="text")this._emit("textDelta",r,a.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=M(this,Xr,"f")){if(M(this,qi,"f"))switch(M(this,qi,"f").type){case"text":this._emit("textDone",M(this,qi,"f").text,M(this,In,"f"));break;case"image_file":this._emit("imageFileDone",M(this,qi,"f").image_file,M(this,In,"f"));break}Z(this,Xr,i.index)}Z(this,qi,n.content[i.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(M(this,Xr,"f")!==void 0){const i=e.data.content[M(this,Xr,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,M(this,In,"f"));break;case"text":this._emit("textDone",i.text,M(this,In,"f"));break}}M(this,In,"f")&&this._emit("messageDone",e.data),Z(this,In,void 0)}},HE=function(e){const n=M(this,yt,"m",$E).call(this,e);switch(Z(this,Wo,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const s=e.data.delta;if(s.step_details&&s.step_details.type=="tool_calls"&&s.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const r of s.step_details.tool_calls)r.index==M(this,mh,"f")?this._emit("toolCallDelta",r,n.step_details.tool_calls[r.index]):(M(this,Wt,"f")&&this._emit("toolCallDone",M(this,Wt,"f")),Z(this,mh,r.index),Z(this,Wt,n.step_details.tool_calls[r.index]),M(this,Wt,"f")&&this._emit("toolCallCreated",M(this,Wt,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Z(this,Wo,void 0),e.data.step_details.type=="tool_calls"&&M(this,Wt,"f")&&(this._emit("toolCallDone",M(this,Wt,"f")),Z(this,Wt,void 0)),this._emit("runStepDone",e.data,n);break}},FE=function(e){M(this,ug,"f").push(e),this._emit("event",e)},$E=function(e){switch(e.event){case"thread.run.step.created":return M(this,Ln,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=M(this,Ln,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let s=e.data;if(s.delta){const i=Hi.accumulateDelta(n,s.delta);M(this,Ln,"f")[e.data.id]=i}return M(this,Ln,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":M(this,Ln,"f")[e.data.id]=e.data;break}if(M(this,Ln,"f")[e.data.id])return M(this,Ln,"f")[e.data.id];throw new Error("No snapshot available")},GE=function(e,n){let s=[];switch(e.event){case"thread.message.created":return[e.data,s];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const r of i.delta.content)if(r.index in n.content){let a=n.content[r.index];n.content[r.index]=M(this,yt,"m",KE).call(this,r,a)}else n.content[r.index]=r,s.push(r);return[n,s];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,s];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},KE=function(e,n){return Hi.accumulateDelta(n,e)},QE=function(e){switch(Z(this,_c,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Z(this,Fi,e.data),M(this,Wt,"f")&&(this._emit("toolCallDone",M(this,Wt,"f")),Z(this,Wt,void 0));break}};let Qp=class extends K{constructor(){super(...arguments),this.steps=new xw(this._client)}create(e,n,s){const{include:i,...r}=n;return this._client.post(U`/threads/${e}/runs`,{query:{include:i},body:r,...s,headers:$([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers]),stream:n.stream??!1})}retrieve(e,n,s){const{thread_id:i}=n;return this._client.get(U`/threads/${i}/runs/${e}`,{...s,headers:$([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,n,s){const{thread_id:i,...r}=n;return this._client.post(U`/threads/${i}/runs/${e}`,{body:r,...s,headers:$([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,n={},s){return this._client.getAPIList(U`/threads/${e}/runs`,Fe,{query:n,...s,headers:$([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}cancel(e,n,s){const{thread_id:i}=n;return this._client.post(U`/threads/${i}/runs/${e}/cancel`,{...s,headers:$([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async createAndPoll(e,n,s){const i=await this.create(e,n,s);return await this.poll(i.id,{thread_id:e},s)}createAndStream(e,n,s){return Zo.createAssistantStream(e,this._client.beta.threads.runs,n,s)}async poll(e,n,s){var r;const i=$([s==null?void 0:s.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((r=s==null?void 0:s.pollIntervalMs)==null?void 0:r.toString())??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(e,n,{...s,headers:{...s==null?void 0:s.headers,...i}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let u=5e3;if(s!=null&&s.pollIntervalMs)u=s.pollIntervalMs;else{const c=l.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(u=d)}}await Ql(u);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,n,s){return Zo.createAssistantStream(e,this._client.beta.threads.runs,n,s)}submitToolOutputs(e,n,s){const{thread_id:i,...r}=n;return this._client.post(U`/threads/${i}/runs/${e}/submit_tool_outputs`,{body:r,...s,headers:$([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,s){const i=await this.submitToolOutputs(e,n,s);return await this.poll(i.id,n,s)}submitToolOutputsStream(e,n,s){return Zo.createToolAssistantStream(e,this._client.beta.threads.runs,n,s)}};Qp.Steps=xw;class af extends K{constructor(){super(...arguments),this.runs=new Qp(this._client),this.messages=new Mw(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:$([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(U`/threads/${e}`,{...n,headers:$([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,s){return this._client.post(U`/threads/${e}`,{body:n,...s,headers:$([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,n){return this._client.delete(U`/threads/${e}`,{...n,headers:$([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:$([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const s=await this.createAndRun(e,n);return await this.runs.poll(s.id,{thread_id:s.thread_id},n)}createAndRunStream(e,n){return Zo.createThreadAssistantStream(e,this._client.beta.threads,n)}}af.Runs=Qp;af.Messages=Mw;class ka extends K{constructor(){super(...arguments),this.realtime=new sf(this._client),this.chatkit=new rf(this._client),this.assistants=new Iw(this._client),this.threads=new af(this._client)}}ka.Realtime=sf;ka.ChatKit=rf;ka.Assistants=Iw;ka.Threads=af;class Vw extends K{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}let kw=class extends K{retrieve(e,n,s){const{container_id:i}=n;return this._client.get(U`/containers/${i}/files/${e}/content`,{...s,headers:$([{Accept:"application/binary"},s==null?void 0:s.headers]),__binaryResponse:!0})}},Yp=class extends K{constructor(){super(...arguments),this.content=new kw(this._client)}create(e,n,s){return this._client.post(U`/containers/${e}/files`,Sl({body:n,...s},this._client))}retrieve(e,n,s){const{container_id:i}=n;return this._client.get(U`/containers/${i}/files/${e}`,s)}list(e,n={},s){return this._client.getAPIList(U`/containers/${e}/files`,Fe,{query:n,...s})}delete(e,n,s){const{container_id:i}=n;return this._client.delete(U`/containers/${i}/files/${e}`,{...s,headers:$([{Accept:"*/*"},s==null?void 0:s.headers])})}};Yp.Content=kw;class Xp extends K{constructor(){super(...arguments),this.files=new Yp(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(U`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",Fe,{query:e,...n})}delete(e,n){return this._client.delete(U`/containers/${e}`,{...n,headers:$([{Accept:"*/*"},n==null?void 0:n.headers])})}}Xp.Files=Yp;class Pw extends K{create(e,n,s){const{include:i,...r}=n;return this._client.post(U`/conversations/${e}/items`,{query:{include:i},body:r,...s})}retrieve(e,n,s){const{conversation_id:i,...r}=n;return this._client.get(U`/conversations/${i}/items/${e}`,{query:r,...s})}list(e,n={},s){return this._client.getAPIList(U`/conversations/${e}/items`,oh,{query:n,...s})}delete(e,n,s){const{conversation_id:i}=n;return this._client.delete(U`/conversations/${i}/items/${e}`,s)}}class Jp extends K{constructor(){super(...arguments),this.items=new Pw(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(U`/conversations/${e}`,n)}update(e,n,s){return this._client.post(U`/conversations/${e}`,{body:n,...s})}delete(e,n){return this._client.delete(U`/conversations/${e}`,n)}}Jp.Items=Pw;class Lw extends K{create(e,n){const s=!!e.encoding_format;let i=s?e.encoding_format:"base64";s&&pt(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const r=this._client.post("/embeddings",{body:{...e,encoding_format:i},...n});return s?r:(pt(this._client).debug("embeddings/decoding base64 embeddings from base64"),r._thenUnwrap(a=>(a&&a.data&&a.data.forEach(l=>{const u=l.embedding;l.embedding=JN(u)}),a)))}}class Uw extends K{retrieve(e,n,s){const{eval_id:i,run_id:r}=n;return this._client.get(U`/evals/${i}/runs/${r}/output_items/${e}`,s)}list(e,n,s){const{eval_id:i,...r}=n;return this._client.getAPIList(U`/evals/${i}/runs/${e}/output_items`,Fe,{query:r,...s})}}class Wp extends K{constructor(){super(...arguments),this.outputItems=new Uw(this._client)}create(e,n,s){return this._client.post(U`/evals/${e}/runs`,{body:n,...s})}retrieve(e,n,s){const{eval_id:i}=n;return this._client.get(U`/evals/${i}/runs/${e}`,s)}list(e,n={},s){return this._client.getAPIList(U`/evals/${e}/runs`,Fe,{query:n,...s})}delete(e,n,s){const{eval_id:i}=n;return this._client.delete(U`/evals/${i}/runs/${e}`,s)}cancel(e,n,s){const{eval_id:i}=n;return this._client.post(U`/evals/${i}/runs/${e}`,s)}}Wp.OutputItems=Uw;class Zp extends K{constructor(){super(...arguments),this.runs=new Wp(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(U`/evals/${e}`,n)}update(e,n,s){return this._client.post(U`/evals/${e}`,{body:n,...s})}list(e={},n){return this._client.getAPIList("/evals",Fe,{query:e,...n})}delete(e,n){return this._client.delete(U`/evals/${e}`,n)}}Zp.Runs=Wp;let zw=class extends K{create(e,n){return this._client.post("/files",Ea({body:e,...n},this._client))}retrieve(e,n){return this._client.get(U`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",Fe,{query:e,...n})}delete(e,n){return this._client.delete(U`/files/${e}`,n)}content(e,n){return this._client.get(U`/files/${e}/content`,{...n,headers:$([{Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:s=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),r=Date.now();let a=await this.retrieve(e);for(;!a.status||!i.has(a.status);)if(await Ql(n),a=await this.retrieve(e),Date.now()-r>s)throw new Up({message:`Giving up on waiting for file ${e} to finish processing after ${s} milliseconds.`});return a}};class Bw extends K{}let jw=class extends K{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class e_ extends K{constructor(){super(...arguments),this.graders=new jw(this._client)}}e_.Graders=jw;class qw extends K{create(e,n,s){return this._client.getAPIList(U`/fine_tuning/checkpoints/${e}/permissions`,nf,{body:n,method:"post",...s})}retrieve(e,n={},s){return this._client.get(U`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...s})}delete(e,n,s){const{fine_tuned_model_checkpoint:i}=n;return this._client.delete(U`/fine_tuning/checkpoints/${i}/permissions/${e}`,s)}}let t_=class extends K{constructor(){super(...arguments),this.permissions=new qw(this._client)}};t_.Permissions=qw;class Hw extends K{list(e,n={},s){return this._client.getAPIList(U`/fine_tuning/jobs/${e}/checkpoints`,Fe,{query:n,...s})}}class n_ extends K{constructor(){super(...arguments),this.checkpoints=new Hw(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(U`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",Fe,{query:e,...n})}cancel(e,n){return this._client.post(U`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},s){return this._client.getAPIList(U`/fine_tuning/jobs/${e}/events`,Fe,{query:n,...s})}pause(e,n){return this._client.post(U`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(U`/fine_tuning/jobs/${e}/resume`,n)}}n_.Checkpoints=Hw;class Pa extends K{constructor(){super(...arguments),this.methods=new Bw(this._client),this.jobs=new n_(this._client),this.checkpoints=new t_(this._client),this.alpha=new e_(this._client)}}Pa.Methods=Bw;Pa.Jobs=n_;Pa.Checkpoints=t_;Pa.Alpha=e_;class Fw extends K{}class s_ extends K{constructor(){super(...arguments),this.graderModels=new Fw(this._client)}}s_.GraderModels=Fw;class $w extends K{createVariation(e,n){return this._client.post("/images/variations",Ea({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",Ea({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class Gw extends K{retrieve(e,n){return this._client.get(U`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",nf,e)}delete(e,n){return this._client.delete(U`/models/${e}`,n)}}class Kw extends K{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class Qw extends K{accept(e,n,s){return this._client.post(U`/realtime/calls/${e}/accept`,{body:n,...s,headers:$([{Accept:"*/*"},s==null?void 0:s.headers])})}hangup(e,n){return this._client.post(U`/realtime/calls/${e}/hangup`,{...n,headers:$([{Accept:"*/*"},n==null?void 0:n.headers])})}refer(e,n,s){return this._client.post(U`/realtime/calls/${e}/refer`,{body:n,...s,headers:$([{Accept:"*/*"},s==null?void 0:s.headers])})}reject(e,n={},s){return this._client.post(U`/realtime/calls/${e}/reject`,{body:n,...s,headers:$([{Accept:"*/*"},s==null?void 0:s.headers])})}}class Yw extends K{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class of extends K{constructor(){super(...arguments),this.clientSecrets=new Yw(this._client),this.calls=new Qw(this._client)}}of.ClientSecrets=Yw;of.Calls=Qw;function WN(t,e){return!e||!eD(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(s=>({...s,parsed:null}))}:n)}:Xw(t,e)}function Xw(t,e){const n=t.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:sD(e,i)};if(i.type==="message"){const r=i.content.map(a=>a.type==="output_text"?{...a,parsed:ZN(e,a.text)}:a);return{...i,content:r}}return i}),s=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||cg(s),Object.defineProperty(s,"output_parsed",{enumerable:!0,get(){for(const i of s.output)if(i.type==="message"){for(const r of i.content)if(r.type==="output_text"&&r.parsed!==null)return r.parsed}return null}}),s}function ZN(t,e){var n,s,i,r;return((s=(n=t.text)==null?void 0:n.format)==null?void 0:s.type)!=="json_schema"?null:"$parseRaw"in((i=t.text)==null?void 0:i.format)?((r=t.text)==null?void 0:r.format).$parseRaw(e):JSON.parse(e)}function eD(t){var e;return!!qp((e=t.text)==null?void 0:e.format)}function tD(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function nD(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function sD(t,e){const n=nD(t.tools??[],e.name);return{...e,...e,parsed_arguments:tD(n)?n.$parseRaw(e.arguments):n!=null&&n.strict?JSON.parse(e.arguments):null}}function cg(t){const e=[];for(const n of t.output)if(n.type==="message")for(const s of n.content)s.type==="output_text"&&e.push(s.text);t.output_text=e.join("")}var Ir,ju,Us,qu,YE,XE,JE,WE;class i_ extends Fp{constructor(e){super(),Ir.add(this),ju.set(this,void 0),Us.set(this,void 0),qu.set(this,void 0),Z(this,ju,e)}static createResponse(e,n,s){const i=new i_(n);return i._run(()=>i._createOrRetrieveResponse(e,n,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,n,s){var l;const i=s==null?void 0:s.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),M(this,Ir,"m",YE).call(this);let r,a=null;"response_id"in n?(r=await e.responses.retrieve(n.response_id,{stream:!0},{...s,signal:this.controller.signal,stream:!0}),a=n.starting_after??null):r=await e.responses.create({...n,stream:!0},{...s,signal:this.controller.signal}),this._connected();for await(const u of r)M(this,Ir,"m",XE).call(this,u,a);if((l=r.controller.signal)!=null&&l.aborted)throw new Tn;return M(this,Ir,"m",JE).call(this)}[(ju=new WeakMap,Us=new WeakMap,qu=new WeakMap,Ir=new WeakSet,YE=function(){this.ended||Z(this,Us,void 0)},XE=function(n,s){if(this.ended)return;const i=(a,l)=>{(s==null||l.sequence_number>s)&&this._emit(a,l)},r=M(this,Ir,"m",WE).call(this,n);switch(i("event",n),n.type){case"response.output_text.delta":{const a=r.output[n.output_index];if(!a)throw new Y(`missing output at index ${n.output_index}`);if(a.type==="message"){const l=a.content[n.content_index];if(!l)throw new Y(`missing content at index ${n.content_index}`);if(l.type!=="output_text")throw new Y(`expected content to be 'output_text', got ${l.type}`);i("response.output_text.delta",{...n,snapshot:l.text})}break}case"response.function_call_arguments.delta":{const a=r.output[n.output_index];if(!a)throw new Y(`missing output at index ${n.output_index}`);a.type==="function_call"&&i("response.function_call_arguments.delta",{...n,snapshot:a.arguments});break}default:i(n.type,n);break}},JE=function(){if(this.ended)throw new Y("stream has ended, this shouldn't happen");const n=M(this,Us,"f");if(!n)throw new Y("request ended without sending any events");Z(this,Us,void 0);const s=iD(n,M(this,ju,"f"));return Z(this,qu,s),s},WE=function(n){var i;let s=M(this,Us,"f");if(!s){if(n.type!=="response.created")throw new Y(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return s=Z(this,Us,n.response),s}switch(n.type){case"response.output_item.added":{s.output.push(n.item);break}case"response.content_part.added":{const r=s.output[n.output_index];if(!r)throw new Y(`missing output at index ${n.output_index}`);const a=r.type,l=n.part;a==="message"&&l.type!=="reasoning_text"?r.content.push(l):a==="reasoning"&&l.type==="reasoning_text"&&(r.content||(r.content=[]),r.content.push(l));break}case"response.output_text.delta":{const r=s.output[n.output_index];if(!r)throw new Y(`missing output at index ${n.output_index}`);if(r.type==="message"){const a=r.content[n.content_index];if(!a)throw new Y(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new Y(`expected content to be 'output_text', got ${a.type}`);a.text+=n.delta}break}case"response.function_call_arguments.delta":{const r=s.output[n.output_index];if(!r)throw new Y(`missing output at index ${n.output_index}`);r.type==="function_call"&&(r.arguments+=n.delta);break}case"response.reasoning_text.delta":{const r=s.output[n.output_index];if(!r)throw new Y(`missing output at index ${n.output_index}`);if(r.type==="reasoning"){const a=(i=r.content)==null?void 0:i[n.content_index];if(!a)throw new Y(`missing content at index ${n.content_index}`);if(a.type!=="reasoning_text")throw new Y(`expected content to be 'reasoning_text', got ${a.type}`);a.text+=n.delta}break}case"response.completed":{Z(this,Us,n.response);break}}return s},Symbol.asyncIterator)](){const e=[],n=[];let s=!1;return this.on("event",i=>{const r=n.shift();r?r.resolve(i):e.push(i)}),this.on("end",()=>{s=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{s=!0;for(const r of n)r.reject(i);n.length=0}),this.on("error",i=>{s=!0;for(const r of n)r.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((r,a)=>n.push({resolve:r,reject:a})).then(r=>r?{value:r,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=M(this,qu,"f");if(!e)throw new Y("stream ended without producing a ChatCompletion");return e}}function iD(t,e){return WN(t,e)}class Jw extends K{list(e,n={},s){return this._client.getAPIList(U`/responses/${e}/input_items`,Fe,{query:n,...s})}}class Ww extends K{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class lf extends K{constructor(){super(...arguments),this.inputItems=new Jw(this._client),this.inputTokens=new Ww(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&cg(s),s))}retrieve(e,n={},s){return this._client.get(U`/responses/${e}`,{query:n,...s,stream:(n==null?void 0:n.stream)??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&cg(i),i))}delete(e,n){return this._client.delete(U`/responses/${e}`,{...n,headers:$([{Accept:"*/*"},n==null?void 0:n.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(s=>Xw(s,e))}stream(e,n){return i_.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(U`/responses/${e}/cancel`,n)}compact(e,n){return this._client.post("/responses/compact",{body:e,...n})}}lf.InputItems=Jw;lf.InputTokens=Ww;let Zw=class extends K{retrieve(e,n){return this._client.get(U`/skills/${e}/content`,{...n,headers:$([{Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}};class e1 extends K{retrieve(e,n,s){const{skill_id:i}=n;return this._client.get(U`/skills/${i}/versions/${e}/content`,{...s,headers:$([{Accept:"application/binary"},s==null?void 0:s.headers]),__binaryResponse:!0})}}class r_ extends K{constructor(){super(...arguments),this.content=new e1(this._client)}create(e,n={},s){return this._client.post(U`/skills/${e}/versions`,Sl({body:n,...s},this._client))}retrieve(e,n,s){const{skill_id:i}=n;return this._client.get(U`/skills/${i}/versions/${e}`,s)}list(e,n={},s){return this._client.getAPIList(U`/skills/${e}/versions`,Fe,{query:n,...s})}delete(e,n,s){const{skill_id:i}=n;return this._client.delete(U`/skills/${i}/versions/${e}`,s)}}r_.Content=e1;class uf extends K{constructor(){super(...arguments),this.content=new Zw(this._client),this.versions=new r_(this._client)}create(e={},n){return this._client.post("/skills",Sl({body:e,...n},this._client))}retrieve(e,n){return this._client.get(U`/skills/${e}`,n)}update(e,n,s){return this._client.post(U`/skills/${e}`,{body:n,...s})}list(e={},n){return this._client.getAPIList("/skills",Fe,{query:e,...n})}delete(e,n){return this._client.delete(U`/skills/${e}`,n)}}uf.Content=Zw;uf.Versions=r_;class t1 extends K{create(e,n,s){return this._client.post(U`/uploads/${e}/parts`,Ea({body:n,...s},this._client))}}class a_ extends K{constructor(){super(...arguments),this.parts=new t1(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(U`/uploads/${e}/cancel`,n)}complete(e,n,s){return this._client.post(U`/uploads/${e}/complete`,{body:n,...s})}}a_.Parts=t1;const rD=async t=>{const e=await Promise.allSettled(t),n=e.filter(i=>i.status==="rejected");if(n.length){for(const i of n)console.error(i.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const s=[];for(const i of e)i.status==="fulfilled"&&s.push(i.value);return s};class n1 extends K{create(e,n,s){return this._client.post(U`/vector_stores/${e}/file_batches`,{body:n,...s,headers:$([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,n,s){const{vector_store_id:i}=n;return this._client.get(U`/vector_stores/${i}/file_batches/${e}`,{...s,headers:$([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}cancel(e,n,s){const{vector_store_id:i}=n;return this._client.post(U`/vector_stores/${i}/file_batches/${e}/cancel`,{...s,headers:$([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async createAndPoll(e,n,s){const i=await this.create(e,n);return await this.poll(e,i.id,s)}listFiles(e,n,s){const{vector_store_id:i,...r}=n;return this._client.getAPIList(U`/vector_stores/${i}/file_batches/${e}/files`,Fe,{query:r,...s,headers:$([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async poll(e,n,s){var r;const i=$([s==null?void 0:s.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((r=s==null?void 0:s.pollIntervalMs)==null?void 0:r.toString())??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(n,{vector_store_id:e},{...s,headers:i}).withResponse();switch(a.status){case"in_progress":let u=5e3;if(s!=null&&s.pollIntervalMs)u=s.pollIntervalMs;else{const c=l.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(u=d)}}await Ql(u);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:n,fileIds:s=[]},i){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const r=(i==null?void 0:i.maxConcurrency)??5,a=Math.min(r,n.length),l=this._client,u=n.values(),c=[...s];async function d(g){for(let p of g){const C=await l.files.create({file:p,purpose:"assistants"},i);c.push(C.id)}}const m=Array(a).fill(u).map(d);return await rD(m),await this.createAndPoll(e,{file_ids:c})}}class s1 extends K{create(e,n,s){return this._client.post(U`/vector_stores/${e}/files`,{body:n,...s,headers:$([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,n,s){const{vector_store_id:i}=n;return this._client.get(U`/vector_stores/${i}/files/${e}`,{...s,headers:$([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,n,s){const{vector_store_id:i,...r}=n;return this._client.post(U`/vector_stores/${i}/files/${e}`,{body:r,...s,headers:$([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,n={},s){return this._client.getAPIList(U`/vector_stores/${e}/files`,Fe,{query:n,...s,headers:$([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,n,s){const{vector_store_id:i}=n;return this._client.delete(U`/vector_stores/${i}/files/${e}`,{...s,headers:$([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async createAndPoll(e,n,s){const i=await this.create(e,n,s);return await this.poll(e,i.id,s)}async poll(e,n,s){var r;const i=$([s==null?void 0:s.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((r=s==null?void 0:s.pollIntervalMs)==null?void 0:r.toString())??void 0}]);for(;;){const a=await this.retrieve(n,{vector_store_id:e},{...s,headers:i}).withResponse(),l=a.data;switch(l.status){case"in_progress":let u=5e3;if(s!=null&&s.pollIntervalMs)u=s.pollIntervalMs;else{const c=a.response.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(u=d)}}await Ql(u);break;case"failed":case"completed":return l}}}async upload(e,n,s){const i=await this._client.files.create({file:n,purpose:"assistants"},s);return this.create(e,{file_id:i.id},s)}async uploadAndPoll(e,n,s){const i=await this.upload(e,n,s);return await this.poll(e,i.id,s)}content(e,n,s){const{vector_store_id:i}=n;return this._client.getAPIList(U`/vector_stores/${i}/files/${e}/content`,nf,{...s,headers:$([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}class cf extends K{constructor(){super(...arguments),this.files=new s1(this._client),this.fileBatches=new n1(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:$([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(U`/vector_stores/${e}`,{...n,headers:$([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,s){return this._client.post(U`/vector_stores/${e}`,{body:n,...s,headers:$([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",Fe,{query:e,...n,headers:$([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(U`/vector_stores/${e}`,{...n,headers:$([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}search(e,n,s){return this._client.getAPIList(U`/vector_stores/${e}/search`,nf,{body:n,method:"post",...s,headers:$([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}cf.Files=s1;cf.FileBatches=n1;class i1 extends K{create(e,n){return this._client.post("/videos",Sl({body:e,...n},this._client))}retrieve(e,n){return this._client.get(U`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",oh,{query:e,...n})}delete(e,n){return this._client.delete(U`/videos/${e}`,n)}downloadContent(e,n={},s){return this._client.get(U`/videos/${e}/content`,{query:n,...s,headers:$([{Accept:"application/binary"},s==null?void 0:s.headers]),__binaryResponse:!0})}remix(e,n,s){return this._client.post(U`/videos/${e}/remix`,Sl({body:n,...s},this._client))}}var xr,r1,yc;class a1 extends K{constructor(){super(...arguments),xr.add(this)}async unwrap(e,n,s=this._client.webhookSecret,i=300){return await this.verifySignature(e,n,s,i),JSON.parse(e)}async verifySignature(e,n,s=this._client.webhookSecret,i=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");M(this,xr,"m",r1).call(this,s);const r=$([n]).values,a=M(this,xr,"m",yc).call(this,r,"webhook-signature"),l=M(this,xr,"m",yc).call(this,r,"webhook-timestamp"),u=M(this,xr,"m",yc).call(this,r,"webhook-id"),c=parseInt(l,10);if(isNaN(c))throw new So("Invalid webhook timestamp format");const d=Math.floor(Date.now()/1e3);if(d-c>i)throw new So("Webhook timestamp is too old");if(c>d+i)throw new So("Webhook timestamp is too new");const m=a.split(" ").map(N=>N.startsWith("v1,")?N.substring(3):N),g=s.startsWith("whsec_")?Buffer.from(s.replace("whsec_",""),"base64"):Buffer.from(s,"utf-8"),p=u?`${u}.${l}.${e}`:`${l}.${e}`,C=await crypto.subtle.importKey("raw",g,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const N of m)try{const x=Buffer.from(N,"base64");if(await crypto.subtle.verify("HMAC",C,x,new TextEncoder().encode(p)))return}catch{continue}throw new So("The given webhook signature does not match the expected signature")}}xr=new WeakSet,r1=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},yc=function(e,n){if(!e)throw new Error("Headers are required");const s=e.get(n);if(s==null)throw new Error(`Missing required header: ${n}`);return s};var hg,o_,vc,o1;class le{constructor({baseURL:e=Rr("OPENAI_BASE_URL"),apiKey:n=Rr("OPENAI_API_KEY"),organization:s=Rr("OPENAI_ORG_ID")??null,project:i=Rr("OPENAI_PROJECT_ID")??null,webhookSecret:r=Rr("OPENAI_WEBHOOK_SECRET")??null,...a}={}){if(hg.add(this),vc.set(this,void 0),this.completions=new Vw(this),this.chat=new Kp(this),this.embeddings=new Lw(this),this.files=new zw(this),this.images=new $w(this),this.audio=new Xl(this),this.moderations=new Kw(this),this.models=new Gw(this),this.fineTuning=new Pa(this),this.graders=new s_(this),this.vectorStores=new cf(this),this.webhooks=new a1(this),this.beta=new ka(this),this.batches=new Rw(this),this.uploads=new a_(this),this.responses=new lf(this),this.realtime=new of(this),this.conversations=new Jp(this),this.evals=new Zp(this),this.containers=new Xp(this),this.skills=new uf(this),this.videos=new i1(this),n===void 0)throw new Y("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const l={apiKey:n,organization:s,project:i,webhookSecret:r,...a,baseURL:e||"https://api.openai.com/v1"};if(!l.dangerouslyAllowBrowser&&oN())throw new Y(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=l.baseURL,this.timeout=l.timeout??o_.DEFAULT_TIMEOUT,this.logger=l.logger??console;const u="warn";this.logLevel=u,this.logLevel=PE(l.logLevel,"ClientOptions.logLevel",this)??PE(Rr("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??u,this.fetchOptions=l.fetchOptions,this.maxRetries=l.maxRetries??2,this.fetch=l.fetch??fN(),Z(this,vc,mN),this._options=l,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=s,this.project=i,this.webhookSecret=r}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return $([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return EN(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Dr}`}defaultIdempotencyKey(){return`stainless-node-retry-${Cb()}`}makeStatusError(e,n,s,i){return wt.generate(e,n,s,i)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(s){throw s instanceof Y?s:new Y(`Failed to get token from 'apiKey' function: ${s.message}`,{cause:s})}if(typeof n!="string"||!n)throw new Y(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,s){const i=!M(this,hg,"m",o1).call(this)&&s||this.baseURL,r=nN(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return sN(a)||(n={...a,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:s}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,s){return this.request(Promise.resolve(s).then(i=>({method:e,path:n,...i})))}request(e,n=null){return new tf(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,s){var S,y;const i=await e,r=i.maxRetries??this.maxRetries;n==null&&(n=r),await this.prepareOptions(i);const{req:a,url:l,timeout:u}=await this.buildRequest(i,{retryCount:r-n});await this.prepareRequest(a,{url:l,options:i});const c="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),d=s===void 0?"":`, retryOf: ${s}`,m=Date.now();if(pt(this).debug(`[${c}] sending request`,Bi({retryOfRequestLogID:s,method:i.method,url:l,options:i,headers:a.headers})),(S=i.signal)!=null&&S.aborted)throw new Tn;const g=new AbortController,p=await this.fetchWithTimeout(l,a,u,g).catch(Zm),C=Date.now();if(p instanceof globalThis.Error){const b=`retrying, ${n} attempts remaining`;if((y=i.signal)!=null&&y.aborted)throw new Tn;const I=Wm(p)||/timed? ?out/i.test(String(p)+("cause"in p?String(p.cause):""));if(n)return pt(this).info(`[${c}] connection ${I?"timed out":"failed"} - ${b}`),pt(this).debug(`[${c}] connection ${I?"timed out":"failed"} (${b})`,Bi({retryOfRequestLogID:s,url:l,durationMs:C-m,message:p.message})),this.retryRequest(i,n,s??c);throw pt(this).info(`[${c}] connection ${I?"timed out":"failed"} - error; no more retries left`),pt(this).debug(`[${c}] connection ${I?"timed out":"failed"} (error; no more retries left)`,Bi({retryOfRequestLogID:s,url:l,durationMs:C-m,message:p.message})),I?new Up:new Zh({cause:p})}const N=[...p.headers.entries()].filter(([b])=>b==="x-request-id").map(([b,I])=>", "+b+": "+JSON.stringify(I)).join(""),x=`[${c}${d}${N}] ${a.method} ${l} ${p.ok?"succeeded":"failed"} with status ${p.status} in ${C-m}ms`;if(!p.ok){const b=await this.shouldRetry(p);if(n&&b){const T=`retrying, ${n} attempts remaining`;return await dN(p.body),pt(this).info(`${x} - ${T}`),pt(this).debug(`[${c}] response error (${T})`,Bi({retryOfRequestLogID:s,url:p.url,status:p.status,headers:p.headers,durationMs:C-m})),this.retryRequest(i,n,s??c,p.headers)}const I=b?"error; no more retries left":"error; not retryable";pt(this).info(`${x} - ${I}`);const B=await p.text().catch(T=>Zm(T).message),j=aN(B),v=j?void 0:B;throw pt(this).debug(`[${c}] response error (${I})`,Bi({retryOfRequestLogID:s,url:p.url,status:p.status,headers:p.headers,message:v,durationMs:Date.now()-m})),this.makeStatusError(p.status,j,v,p.headers)}return pt(this).info(x),pt(this).debug(`[${c}] response start`,Bi({retryOfRequestLogID:s,url:p.url,status:p.status,headers:p.headers,durationMs:C-m})),{response:p,options:i,controller:g,requestLogID:c,retryOfRequestLogID:s,startTime:m}}getAPIList(e,n,s){return this.requestAPIList(n,s&&"then"in s?s.then(i=>({method:"get",path:e,...i})):{method:"get",path:e,...s})}requestAPIList(e,n){const s=this.makeRequest(n,null,void 0);return new ON(this,s,e)}async fetchWithTimeout(e,n,s,i){const{signal:r,method:a,...l}=n||{},u=this._makeAbort(i);r&&r.addEventListener("abort",u,{once:!0});const c=setTimeout(u,s),d=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,m={signal:i.signal,...d?{duplex:"half"}:{},method:"GET",...l};a&&(m.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,s,i){let r;const a=i==null?void 0:i.get("retry-after-ms");if(a){const u=parseFloat(a);Number.isNaN(u)||(r=u)}const l=i==null?void 0:i.get("retry-after");if(l&&!r){const u=parseFloat(l);Number.isNaN(u)?r=Date.parse(l)-Date.now():r=u*1e3}if(!(r&&0<=r&&r<60*1e3)){const u=e.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(n,u)}return await Ql(r),this.makeRequest(e,n-1,s)}calculateDefaultRetryTimeoutMillis(e,n){const r=n-e,a=Math.min(.5*Math.pow(2,r),8),l=1-Math.random()*.25;return a*l*1e3}async buildRequest(e,{retryCount:n=0}={}){const s={...e},{method:i,path:r,query:a,defaultBaseURL:l}=s,u=this.buildURL(r,a,l);"timeout"in s&&rN("timeout",s.timeout),s.timeout=s.timeout??this.timeout;const{bodyHeaders:c,body:d}=this.buildBody({options:s}),m=await this.buildHeaders({options:e,method:i,bodyHeaders:c,retryCount:n});return{req:{method:i,headers:m,...s.signal&&{signal:s.signal},...globalThis.ReadableStream&&d instanceof globalThis.ReadableStream&&{duplex:"half"},...d&&{body:d},...this.fetchOptions??{},...s.fetchOptions??{}},url:u,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:s,retryCount:i}){let r={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),r[this.idempotencyHeader]=e.idempotencyKey);const a=$([r,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...hN(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,s,e.headers]);return this.validateHeaders(a),a.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=$([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:jb(e)}:M(this,vc,"f").call(this,{body:e,headers:s})}}o_=le,vc=new WeakMap,hg=new WeakSet,o1=function(){return this.baseURL!=="https://api.openai.com/v1"};le.OpenAI=o_;le.DEFAULT_TIMEOUT=6e5;le.OpenAIError=Y;le.APIError=wt;le.APIConnectionError=Zh;le.APIConnectionTimeoutError=Up;le.APIUserAbortError=Tn;le.NotFoundError=Mb;le.ConflictError=xb;le.RateLimitError=kb;le.BadRequestError=Ob;le.AuthenticationError=Nb;le.InternalServerError=Pb;le.PermissionDeniedError=Db;le.UnprocessableEntityError=Vb;le.InvalidWebhookSignatureError=So;le.toFile=VN;le.Completions=Vw;le.Chat=Kp;le.Embeddings=Lw;le.Files=zw;le.Images=$w;le.Audio=Xl;le.Moderations=Kw;le.Models=Gw;le.FineTuning=Pa;le.Graders=s_;le.VectorStores=cf;le.Webhooks=a1;le.Beta=ka;le.Batches=Rw;le.Uploads=a_;le.Responses=lf;le.Realtime=of;le.Conversations=Jp;le.Evals=Zp;le.Containers=Xp;le.Skills=uf;le.Videos=i1;const aD=()=>{};var ZE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},oD=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const i=t[n++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=t[n++];e[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=t[n++],a=t[n++],l=t[n++],u=((i&7)<<18|(r&63)<<12|(a&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(u>>10)),e[s++]=String.fromCharCode(56320+(u&1023))}else{const r=t[n++],a=t[n++];e[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|a&63)}}return e.join("")},u1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<t.length;i+=3){const r=t[i],a=i+1<t.length,l=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,d=r>>2,m=(r&3)<<4|l>>4;let g=(l&15)<<2|c>>6,p=c&63;u||(p=64,a||(g=64)),s.push(n[d],n[m],n[g],n[p])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(l1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):oD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<t.length;){const r=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,r==null||l==null||c==null||m==null)throw new lD;const g=r<<2|l>>4;if(s.push(g),c!==64){const p=l<<4&240|c>>2;if(s.push(p),m!==64){const C=c<<6&192|m;s.push(C)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uD=function(t){const e=l1(t);return u1.encodeByteArray(e,!0)},gh=function(t){return uD(t).replace(/\./g,"")},c1=function(t){try{return u1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=()=>cD().__FIREBASE_DEFAULTS__,fD=()=>{if(typeof process>"u"||typeof ZE>"u")return;const t=ZE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},dD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&c1(t[1]);return e&&JSON.parse(e)},hf=()=>{try{return aD()||hD()||fD()||dD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},h1=t=>{var e,n;return(n=(e=hf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},mD=t=>{const e=h1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},f1=()=>{var t;return(t=hf())==null?void 0:t.config},d1=t=>{var e;return(e=hf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function m1(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...t};return[gh(JSON.stringify(n)),gh(JSON.stringify(a)),""].join(".")}const el={};function _D(){const t={prod:[],emulator:[]};for(const e of Object.keys(el))el[e]?t.emulator.push(e):t.prod.push(e);return t}function yD(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let eT=!1;function g1(t,e){if(typeof window>"u"||typeof document>"u"||!La(window.location.host)||el[t]===e||el[t]||eT)return;el[t]=e;function n(g){return`__firebase__banner__${g}`}const s="__firebase__banner",r=_D().prod.length>0;function a(){const g=document.getElementById(s);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,p){g.setAttribute("width","24"),g.setAttribute("id",p),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function c(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{eT=!0,a()},g}function d(g,p){g.setAttribute("id",p),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=yD(s),p=n("text"),C=document.getElementById(p)||document.createElement("span"),N=n("learnmore"),x=document.getElementById(N)||document.createElement("a"),S=n("preprendIcon"),y=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const b=g.element;l(b),d(x,N);const I=c();u(y,S),b.append(y,C,x,I),document.body.appendChild(b)}r?(C.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mt())}function ED(){var e;const t=(e=hf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function AD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bD(){const t=Mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function wD(){return!ED()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function RD(){try{return typeof indexedDB=="object"}catch{return!1}}function ID(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var r;e(((r=i.error)==null?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD="FirebaseError";class Os extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=CD,Object.setPrototypeOf(this,Os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jl.prototype.create)}}class Jl{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},i=`${this.service}/${e}`,r=this.errors[e],a=r?OD(r,s):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new Os(i,l,s)}}function OD(t,e){return t.replace(ND,(n,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const ND=/\{\$([^}]+)}/g;function DD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ir(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const i of n){if(!s.includes(i))return!1;const r=t[i],a=e[i];if(tT(r)&&tT(a)){if(!ir(r,a))return!1}else if(r!==a)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function tT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Do(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,r]=s.split("=");e[decodeURIComponent(i)]=decodeURIComponent(r)}}),e}function Mo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function MD(t,e){const n=new xD(t,e);return n.subscribe.bind(n)}class xD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let i;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");VD(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:s},i.next===void 0&&(i.next=Bd),i.error===void 0&&(i.error=Bd),i.complete===void 0&&(i.complete=Bd);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function VD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Bd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(t){return t&&t._delegate?t._delegate:t}class rr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new gD;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LD(e))try{this.getOrInitializeService({instanceIdentifier:ji})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(e=ji){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ji){return this.instances.has(e)}getOptions(e=ji){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[r,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);s===l&&a.resolve(i)}return i}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(s)??new Set;i.add(e),this.onInitCallbacks.set(s,i);const r=this.instances.get(s);return r&&e(r,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:PD(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ji){return this.component?this.component.multipleInstances?e:ji:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PD(t){return t===ji?void 0:t}function LD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new kD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(fe||(fe={}));const zD={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},BD=fe.INFO,jD={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},qD=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),i=jD[e];if(i)console[i](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class l_{constructor(e){this.name=e,this._logLevel=BD,this._logHandler=qD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}}const HD=(t,e)=>e.some(n=>t instanceof n);let nT,sT;function FD(){return nT||(nT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $D(){return sT||(sT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const p1=new WeakMap,fg=new WeakMap,_1=new WeakMap,jd=new WeakMap,u_=new WeakMap;function GD(t){const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",a)},r=()=>{n(ci(t.result)),i()},a=()=>{s(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&p1.set(n,t)}).catch(()=>{}),u_.set(e,t),e}function KD(t){if(fg.has(t))return;const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",a),t.removeEventListener("abort",a)},r=()=>{n(),i()},a=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",a),t.addEventListener("abort",a)});fg.set(t,e)}let dg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||_1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ci(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function QD(t){dg=t(dg)}function YD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(qd(this),e,...n);return _1.set(s,e.sort?e.sort():[e]),ci(s)}:$D().includes(t)?function(...e){return t.apply(qd(this),e),ci(p1.get(this))}:function(...e){return ci(t.apply(qd(this),e))}}function XD(t){return typeof t=="function"?YD(t):(t instanceof IDBTransaction&&KD(t),HD(t,FD())?new Proxy(t,dg):t)}function ci(t){if(t instanceof IDBRequest)return GD(t);if(jd.has(t))return jd.get(t);const e=XD(t);return e!==t&&(jd.set(t,e),u_.set(e,t)),e}const qd=t=>u_.get(t);function JD(t,e,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const a=indexedDB.open(t,e),l=ci(a);return s&&a.addEventListener("upgradeneeded",u=>{s(ci(a.result),u.oldVersion,u.newVersion,ci(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{r&&u.addEventListener("close",()=>r()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const WD=["get","getKey","getAll","getAllKeys","count"],ZD=["put","add","delete","clear"],Hd=new Map;function iT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hd.get(e))return Hd.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,i=ZD.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||WD.includes(n)))return;const r=async function(a,...l){const u=this.transaction(a,i?"readwrite":"readonly");let c=u.store;return s&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&u.done]))[0]};return Hd.set(e,r),r}QD(t=>({...t,get:(e,n,s)=>iT(e,n)||t.get(e,n,s),has:(e,n)=>!!iT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tM(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function tM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mg="@firebase/app",rT="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=new l_("@firebase/app"),nM="@firebase/app-compat",sM="@firebase/analytics-compat",iM="@firebase/analytics",rM="@firebase/app-check-compat",aM="@firebase/app-check",oM="@firebase/auth",lM="@firebase/auth-compat",uM="@firebase/database",cM="@firebase/data-connect",hM="@firebase/database-compat",fM="@firebase/functions",dM="@firebase/functions-compat",mM="@firebase/installations",gM="@firebase/installations-compat",pM="@firebase/messaging",_M="@firebase/messaging-compat",yM="@firebase/performance",vM="@firebase/performance-compat",EM="@firebase/remote-config",TM="@firebase/remote-config-compat",SM="@firebase/storage",AM="@firebase/storage-compat",bM="@firebase/firestore",wM="@firebase/ai",RM="@firebase/firestore-compat",IM="firebase",CM="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg="[DEFAULT]",OM={[mg]:"fire-core",[nM]:"fire-core-compat",[iM]:"fire-analytics",[sM]:"fire-analytics-compat",[aM]:"fire-app-check",[rM]:"fire-app-check-compat",[oM]:"fire-auth",[lM]:"fire-auth-compat",[uM]:"fire-rtdb",[cM]:"fire-data-connect",[hM]:"fire-rtdb-compat",[fM]:"fire-fn",[dM]:"fire-fn-compat",[mM]:"fire-iid",[gM]:"fire-iid-compat",[pM]:"fire-fcm",[_M]:"fire-fcm-compat",[yM]:"fire-perf",[vM]:"fire-perf-compat",[EM]:"fire-rc",[TM]:"fire-rc-compat",[SM]:"fire-gcs",[AM]:"fire-gcs-compat",[bM]:"fire-fst",[RM]:"fire-fst-compat",[wM]:"fire-vertex","fire-js":"fire-js",[IM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph=new Map,NM=new Map,pg=new Map;function aT(t,e){try{t.container.addComponent(e)}catch(n){bs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ta(t){const e=t.name;if(pg.has(e))return bs.debug(`There were multiple attempts to register component ${e}.`),!1;pg.set(e,t);for(const n of ph.values())aT(n,t);for(const n of NM.values())aT(n,t);return!0}function c_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function nn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hi=new Jl("app","Firebase",DM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new rr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua=CM;function y1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:gg,automaticDataCollectionEnabled:!0,...e},i=s.name;if(typeof i!="string"||!i)throw hi.create("bad-app-name",{appName:String(i)});if(n||(n=f1()),!n)throw hi.create("no-options");const r=ph.get(i);if(r){if(ir(n,r.options)&&ir(s,r.config))return r;throw hi.create("duplicate-app",{appName:i})}const a=new UD(i);for(const u of pg.values())a.addComponent(u);const l=new MM(n,s,a);return ph.set(i,l),l}function v1(t=gg){const e=ph.get(t);if(!e&&t===gg&&f1())return y1();if(!e)throw hi.create("no-app",{appName:t});return e}function fi(t,e,n){let s=OM[t]??t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),r=e.match(/\s|\//);if(i||r){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&r&&a.push("and"),r&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bs.warn(a.join(" "));return}Ta(new rr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM="firebase-heartbeat-database",VM=1,bl="firebase-heartbeat-store";let Fd=null;function E1(){return Fd||(Fd=JD(xM,VM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(bl)}catch(n){console.warn(n)}}}}).catch(t=>{throw hi.create("idb-open",{originalErrorMessage:t.message})})),Fd}async function kM(t){try{const n=(await E1()).transaction(bl),s=await n.objectStore(bl).get(T1(t));return await n.done,s}catch(e){if(e instanceof Os)bs.warn(e.message);else{const n=hi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bs.warn(n.message)}}}async function oT(t,e){try{const s=(await E1()).transaction(bl,"readwrite");await s.objectStore(bl).put(e,T1(t)),await s.done}catch(n){if(n instanceof Os)bs.warn(n.message);else{const s=hi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});bs.warn(s.message)}}}function T1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM=1024,LM=30;class UM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new BM(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=lT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>LM){const a=jM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){bs.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=lT(),{heartbeatsToSend:s,unsentEntries:i}=zM(this._heartbeatsCache.heartbeats),r=gh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return bs.warn(n),""}}}function lT(){return new Date().toISOString().substring(0,10)}function zM(t,e=PM){const n=[];let s=t.slice();for(const i of t){const r=n.find(a=>a.agent===i.agent);if(r){if(r.dates.push(i.date),uT(n)>e){r.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),uT(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class BM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RD()?ID().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await kM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return oT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return oT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function uT(t){return gh(JSON.stringify({version:2,heartbeats:t})).length}function jM(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qM(t){Ta(new rr("platform-logger",e=>new eM(e),"PRIVATE")),Ta(new rr("heartbeat",e=>new UM(e),"PRIVATE")),fi(mg,rT,t),fi(mg,rT,"esm2020"),fi("fire-js","")}qM("");var HM="firebase",FM="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fi(HM,FM,"app");function S1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $M=S1,A1=new Jl("auth","Firebase",S1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=new l_("@firebase/auth");function GM(t,...e){_h.logLevel<=fe.WARN&&_h.warn(`Auth (${Ua}): ${t}`,...e)}function Ec(t,...e){_h.logLevel<=fe.ERROR&&_h.error(`Auth (${Ua}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(t,...e){throw f_(t,...e)}function Dn(t,...e){return f_(t,...e)}function h_(t,e,n){const s={...$M(),[e]:n};return new Jl("auth","Firebase",s).create(e,{appName:t.name})}function _s(t){return h_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function KM(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&wn(t,"argument-error"),h_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function f_(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return A1.create(t,...e)}function J(t,e,...n){if(!t)throw f_(e,...n)}function fs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ec(e),new Error(e)}function ws(t,e){t||fs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function QM(){return cT()==="http:"||cT()==="https:"}function cT(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QM()||SD()||"connection"in navigator)?navigator.onLine:!0}function XM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n){this.shortDelay=e,this.longDelay=n,ws(n>e,"Short delay should be less than long delay!"),this.isMobile=vD()||AD()}get(){return YM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(t,e){ws(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ZM=new Zl(3e4,6e4);function Ii(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ci(t,e,n,s,i={}){return w1(t,i,async()=>{let r={},a={};s&&(e==="GET"?a=s:r={body:JSON.stringify(s)});const l=Wl({key:t.config.apiKey,...a}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:u,...r};return TD()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&La(t.emulatorConfig.host)&&(c.credentials="include"),b1.fetch()(await R1(t,t.config.apiHost,n,l),c)})}async function w1(t,e,n){t._canInitEmulator=!1;const s={...JM,...e};try{const i=new tx(t),r=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await r.json();if("needConfirmation"in a)throw Hu(t,"account-exists-with-different-credential",a);if(r.ok&&!("errorMessage"in a))return a;{const l=r.ok?a.errorMessage:a.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hu(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Hu(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw Hu(t,"user-disabled",a);const d=s[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw h_(t,d,c);wn(t,d)}}catch(i){if(i instanceof Os)throw i;wn(t,"network-request-failed",{message:String(i)})}}async function eu(t,e,n,s,i={}){const r=await Ci(t,e,n,s,i);return"mfaPendingCredential"in r&&wn(t,"multi-factor-auth-required",{_serverResponse:r}),r}async function R1(t,e,n,s){const i=`${e}${n}?${s}`,r=t,a=r.config.emulator?d_(t.config,i):`${t.config.apiScheme}://${i}`;return WM.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(a).toString():a}function ex(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Dn(this.auth,"network-request-failed")),ZM.get())})}}function Hu(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=Dn(t,e,s);return i.customData._tokenResponse=n,i}function hT(t){return t!==void 0&&t.enterprise!==void 0}class nx{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ex(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function sx(t,e){return Ci(t,"GET","/v2/recaptchaConfig",Ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ix(t,e){return Ci(t,"POST","/v1/accounts:delete",e)}async function yh(t,e){return Ci(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rx(t,e=!1){const n=hn(t),s=await n.getIdToken(e),i=m_(s);J(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const r=typeof i.firebase=="object"?i.firebase:void 0,a=r==null?void 0:r.sign_in_provider;return{claims:i,token:s,authTime:tl($d(i.auth_time)),issuedAtTime:tl($d(i.iat)),expirationTime:tl($d(i.exp)),signInProvider:a||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function $d(t){return Number(t)*1e3}function m_(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Ec("JWT malformed, contained fewer than 3 sections"),null;try{const i=c1(n);return i?JSON.parse(i):(Ec("Failed to decode base64 JWT payload"),null)}catch(i){return Ec("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function fT(t){const e=m_(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Os&&ax(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function ax({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=tl(this.lastLoginAt),this.creationTime=tl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vh(t){var m;const e=t.auth,n=await t.getIdToken(),s=await wl(t,yh(e,{idToken:n}));J(s==null?void 0:s.users.length,e,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const r=(m=i.providerUserInfo)!=null&&m.length?I1(i.providerUserInfo):[],a=ux(t.providerData,r),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new yg(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function lx(t){const e=hn(t);await vh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ux(t,e){return[...t.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function I1(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cx(t,e){const n=await w1(t,{},async()=>{const s=Wl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,a=await R1(t,i,"/v1/token",`key=${r}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:s};return t.emulatorConfig&&La(t.emulatorConfig.host)&&(u.credentials="include"),b1.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hx(t,e){return Ci(t,"POST","/v2/accounts:revokeToken",Ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");const n=fT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:i,expiresIn:r}=await cx(e,n);this.updateTokensAndExpiration(s,i,Number(r))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:i,expirationTime:r}=n,a=new ia;return s&&(J(typeof s=="string","internal-error",{appName:e}),a.refreshToken=s),i&&(J(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),r&&(J(typeof r=="number","internal-error",{appName:e}),a.expirationTime=r),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ia,this.toJSON())}_performRefresh(){return fs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class On{constructor({uid:e,auth:n,stsTokenManager:s,...i}){this.providerId="firebase",this.proactiveRefresh=new ox(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new yg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await wl(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return rx(this,e)}reload(){return lx(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new On({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await vh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nn(this.auth.app))return Promise.reject(_s(this.auth));const e=await this.getIdToken();return await wl(this,ix(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,i=n.email??void 0,r=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:m,emailVerified:g,isAnonymous:p,providerData:C,stsTokenManager:N}=n;J(m&&N,e,"internal-error");const x=ia.fromJSON(this.name,N);J(typeof m=="string",e,"internal-error"),zs(s,e.name),zs(i,e.name),J(typeof g=="boolean",e,"internal-error"),J(typeof p=="boolean",e,"internal-error"),zs(r,e.name),zs(a,e.name),zs(l,e.name),zs(u,e.name),zs(c,e.name),zs(d,e.name);const S=new On({uid:m,auth:e,email:i,emailVerified:g,displayName:s,isAnonymous:p,photoURL:a,phoneNumber:r,tenantId:l,stsTokenManager:x,createdAt:c,lastLoginAt:d});return C&&Array.isArray(C)&&(S.providerData=C.map(y=>({...y}))),u&&(S._redirectEventId=u),S}static async _fromIdTokenResponse(e,n,s=!1){const i=new ia;i.updateFromServerResponse(n);const r=new On({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await vh(r),r}static async _fromGetAccountInfoResponse(e,n,s){const i=n.users[0];J(i.localId!==void 0,"internal-error");const r=i.providerUserInfo!==void 0?I1(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(r!=null&&r.length),l=new ia;l.updateFromIdToken(s);const u=new On({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:a}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new yg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(r!=null&&r.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT=new Map;function ds(t){ws(t instanceof Function,"Expected a class definition");let e=dT.get(t);return e?(ws(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,dT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}C1.type="NONE";const mT=C1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(t,e,n){return`firebase:${t}:${e}:${n}`}class ra{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:i,name:r}=this.auth;this.fullUserKey=Tc(this.userKey,i.apiKey,r),this.fullPersistenceKey=Tc("persistence",i.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await yh(this.auth,{idToken:e}).catch(()=>{});return n?On._fromGetAccountInfoResponse(this.auth,n,e):null}return On._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new ra(ds(mT),e,s);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let r=i[0]||ds(mT);const a=Tc(s,e.config.apiKey,e.name);let l=null;for(const c of n)try{const d=await c._get(a);if(d){let m;if(typeof d=="string"){const g=await yh(e,{idToken:d}).catch(()=>{});if(!g)break;m=await On._fromGetAccountInfoResponse(e,g,d)}else m=On._fromJSON(e,d);c!==r&&(l=m),r=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!u.length?new ra(r,e,s):(r=u[0],l&&await r._set(a,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==r)try{await c._remove(a)}catch{}})),new ra(r,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(M1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(O1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(V1(e))return"Blackberry";if(k1(e))return"Webos";if(N1(e))return"Safari";if((e.includes("chrome/")||D1(e))&&!e.includes("edge/"))return"Chrome";if(x1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function O1(t=Mt()){return/firefox\//i.test(t)}function N1(t=Mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function D1(t=Mt()){return/crios\//i.test(t)}function M1(t=Mt()){return/iemobile/i.test(t)}function x1(t=Mt()){return/android/i.test(t)}function V1(t=Mt()){return/blackberry/i.test(t)}function k1(t=Mt()){return/webos/i.test(t)}function g_(t=Mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function fx(t=Mt()){var e;return g_(t)&&!!((e=window.navigator)!=null&&e.standalone)}function dx(){return bD()&&document.documentMode===10}function P1(t=Mt()){return g_(t)||x1(t)||k1(t)||V1(t)||/windows phone/i.test(t)||M1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(t,e=[]){let n;switch(t){case"Browser":n=gT(Mt());break;case"Worker":n=`${gT(Mt())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ua}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=r=>new Promise((a,l)=>{try{const u=e(r);a(u)}catch(u){l(u)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gx(t,e={}){return Ci(t,"GET","/v2/passwordPolicy",Ii(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=6;class _x{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??px,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,n,s,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pT(this),this.idTokenSubscription=new pT(this),this.beforeStateQueue=new mx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=A1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ds(n)),this._initializationPromise=this.queue(async()=>{var s,i,r;if(!this._deleted&&(this.persistenceManager=await ra.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)==null?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await yh(this,{idToken:e}),s=await On._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(nn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)==null?void 0:r._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await vh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nn(this.app))return Promise.reject(_s(this));const n=e?hn(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nn(this.app)?Promise.reject(_s(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nn(this.app)?Promise.reject(_s(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gx(this),n=new _x(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Jl("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await hx(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ds(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await ra.create(this,[ds(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,i){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(l,this,"internal-error"),l.then(()=>{a||r(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,s,i);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=L1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&GM(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Oi(t){return hn(t)}class pT{constructor(e){this.auth=e,this.observer=null,this.addObserver=MD(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ff={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vx(t){ff=t}function U1(t){return ff.loadJS(t)}function Ex(){return ff.recaptchaEnterpriseScript}function Tx(){return ff.gapiScript}function Sx(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Ax{constructor(){this.enterprise=new bx}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class bx{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const wx="recaptcha-enterprise",z1="NO_RECAPTCHA";class Rx{constructor(e){this.type=wx,this.auth=Oi(e)}async verify(e="verify",n=!1){async function s(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(a,l)=>{sx(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new nx(u);return r.tenantId==null?r._agentRecaptchaConfig=c:r._tenantRecaptchaConfigs[r.tenantId]=c,a(c.siteKey)}}).catch(u=>{l(u)})})}function i(r,a,l){const u=window.grecaptcha;hT(u)?u.enterprise.ready(()=>{u.enterprise.execute(r,{action:e}).then(c=>{a(c)}).catch(()=>{a(z1)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Ax().execute("siteKey",{action:"verify"}):new Promise((r,a)=>{s(this.auth).then(l=>{if(!n&&hT(window.grecaptcha))i(l,r,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Ex();u.length!==0&&(u+=l),U1(u).then(()=>{i(l,r,a)}).catch(c=>{a(c)})}}).catch(l=>{a(l)})})}}async function _T(t,e,n,s=!1,i=!1){const r=new Rx(t);let a;if(i)a=z1;else try{a=await r.verify(n)}catch{a=await r.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,c=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return s?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function vg(t,e,n,s,i){var r;if((r=t._getRecaptchaConfig())!=null&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await _T(t,e,n,n==="getOobCode");return s(t,a)}else return s(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await _T(t,e,n,n==="getOobCode");return s(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(t,e){const n=c_(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),r=n.getOptions();if(ir(r,e??{}))return i;wn(i,"already-initialized")}return n.initialize({options:e})}function Cx(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(ds);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function Ox(t,e,n){const s=Oi(t);J(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!1,r=B1(e),{host:a,port:l}=Nx(e),u=l===null?"":`:${l}`,c={url:`${r}//${a}${u}/`},d=Object.freeze({host:a,port:l,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){J(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),J(ir(c,s.config.emulator)&&ir(d,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=c,s.emulatorConfig=d,s.settings.appVerificationDisabledForTesting=!0,La(a)?(m1(`${r}//${a}${u}`),g1("Auth",!0)):Dx()}function B1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Nx(t){const e=B1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const r=i[1];return{host:r,port:yT(s.substr(r.length+1))}}else{const[r,a]=s.split(":");return{host:r,port:yT(a)}}}function yT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Dx(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return fs("not implemented")}_getIdTokenResponse(e){return fs("not implemented")}_linkToIdToken(e,n){return fs("not implemented")}_getReauthenticationResolver(e){return fs("not implemented")}}async function Mx(t,e){return Ci(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xx(t,e){return eu(t,"POST","/v1/accounts:signInWithPassword",Ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vx(t,e){return eu(t,"POST","/v1/accounts:signInWithEmailLink",Ii(t,e))}async function kx(t,e){return eu(t,"POST","/v1/accounts:signInWithEmailLink",Ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl extends p_{constructor(e,n,s,i=null){super("password",s),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Rl(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Rl(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vg(e,n,"signInWithPassword",xx);case"emailLink":return Vx(e,{email:this._email,oobCode:this._password});default:wn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vg(e,s,"signUpPassword",Mx);case"emailLink":return kx(e,{idToken:n,email:this._email,oobCode:this._password});default:wn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aa(t,e){return eu(t,"POST","/v1/accounts:signInWithIdp",Ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="http://localhost";class ar extends p_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ar(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):wn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i,...r}=n;if(!s||!i)return null;const a=new ar(s,i);return a.idToken=r.idToken||void 0,a.accessToken=r.accessToken||void 0,a.secret=r.secret,a.nonce=r.nonce,a.pendingToken=r.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return aa(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,aa(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,aa(e,n)}buildRequest(){const e={requestUri:Px,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Wl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ux(t){const e=Do(Mo(t)).link,n=e?Do(Mo(e)).deep_link_id:null,s=Do(Mo(t)).deep_link_id;return(s?Do(Mo(s)).link:null)||s||n||e||t}class __{constructor(e){const n=Do(Mo(e)),s=n.apiKey??null,i=n.oobCode??null,r=Lx(n.mode??null);J(s&&i&&r,"argument-error"),this.apiKey=s,this.operation=r,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Ux(e);try{return new __(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(){this.providerId=za.PROVIDER_ID}static credential(e,n){return Rl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=__.parseLink(n);return J(s,"argument-error"),Rl._fromEmailAndCode(e,s.code,s.tenantId)}}za.PROVIDER_ID="password";za.EMAIL_PASSWORD_SIGN_IN_METHOD="password";za.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu extends y_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends tu{constructor(){super("facebook.com")}static credential(e){return ar._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gs.credential(e.oauthAccessToken)}catch{return null}}}Gs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends tu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ar._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return ls.credential(n,s)}catch{return null}}}ls.GOOGLE_SIGN_IN_METHOD="google.com";ls.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks extends tu{constructor(){super("github.com")}static credential(e){return ar._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ks.credential(e.oauthAccessToken)}catch{return null}}}Ks.GITHUB_SIGN_IN_METHOD="github.com";Ks.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends tu{constructor(){super("twitter.com")}static credential(e,n){return ar._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Qs.credential(n,s)}catch{return null}}}Qs.TWITTER_SIGN_IN_METHOD="twitter.com";Qs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zx(t,e){return eu(t,"POST","/v1/accounts:signUp",Ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,i=!1){const r=await On._fromIdTokenResponse(e,s,i),a=vT(s);return new or({user:r,providerId:a,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const i=vT(s);return new or({user:e,providerId:i,_tokenResponse:s,operationType:n})}}function vT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh extends Os{constructor(e,n,s,i){super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,Eh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,i){return new Eh(e,n,s,i)}}function j1(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Eh._fromErrorAndOperation(t,r,e,s):r})}async function Bx(t,e,n=!1){const s=await wl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return or._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jx(t,e,n=!1){const{auth:s}=t;if(nn(s.app))return Promise.reject(_s(s));const i="reauthenticate";try{const r=await wl(t,j1(s,i,e,t),n);J(r.idToken,s,"internal-error");const a=m_(r.idToken);J(a,s,"internal-error");const{sub:l}=a;return J(t.uid===l,s,"user-mismatch"),or._forOperation(t,i,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&wn(s,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q1(t,e,n=!1){if(nn(t.app))return Promise.reject(_s(t));const s="signIn",i=await j1(t,s,e),r=await or._fromIdTokenResponse(t,s,i);return n||await t._updateCurrentUser(r.user),r}async function qx(t,e){return q1(Oi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H1(t){const e=Oi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Hx(t,e,n){if(nn(t.app))return Promise.reject(_s(t));const s=Oi(t),a=await vg(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zx).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&H1(t),u}),l=await or._fromIdTokenResponse(s,"signIn",a);return await s._updateCurrentUser(l.user),l}function Fx(t,e,n){return nn(t.app)?Promise.reject(_s(t)):qx(hn(t),za.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&H1(t),s})}function $x(t,e,n,s){return hn(t).onIdTokenChanged(e,n,s)}function Gx(t,e,n){return hn(t).beforeAuthStateChanged(e,n)}function Kx(t,e,n,s){return hn(t).onAuthStateChanged(e,n,s)}function Qx(t){return hn(t).signOut()}const Th="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Th,"1"),this.storage.removeItem(Th),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=1e3,Xx=10;class $1 extends F1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=P1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&e(n,i,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const s=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(s);!n&&this.localCache[s]===a||this.notifyListeners(s,a)},r=this.storage.getItem(s);dx()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Xx):i()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Yx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}$1.type="LOCAL";const Jx=$1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1 extends F1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}G1.type="SESSION";const K1=G1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const s=new df(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:i,data:r}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const l=Array.from(a).map(async c=>c(n.origin,r)),u=await Wx(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}df.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,a;return new Promise((l,u)=>{const c=v_("",20);i.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},s);a={messageChannel:i,onMessage(m){const g=m;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(d),r=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),l(g.data.response);break;default:clearTimeout(d),clearTimeout(r),u(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(){return window}function eV(t){Fn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(){return typeof Fn().WorkerGlobalScope<"u"&&typeof Fn().importScripts=="function"}async function tV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nV(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function sV(){return Q1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="firebaseLocalStorageDb",iV=1,Sh="firebaseLocalStorage",X1="fbase_key";class nu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function mf(t,e){return t.transaction([Sh],e?"readwrite":"readonly").objectStore(Sh)}function rV(){const t=indexedDB.deleteDatabase(Y1);return new nu(t).toPromise()}function Eg(){const t=indexedDB.open(Y1,iV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Sh,{keyPath:X1})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Sh)?e(s):(s.close(),await rV(),e(await Eg()))})})}async function ET(t,e,n){const s=mf(t,!0).put({[X1]:e,value:n});return new nu(s).toPromise()}async function aV(t,e){const n=mf(t,!1).get(e),s=await new nu(n).toPromise();return s===void 0?null:s.value}function TT(t,e){const n=mf(t,!0).delete(e);return new nu(n).toPromise()}const oV=800,lV=3;class J1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Eg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>lV)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Q1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=df._getInstance(sV()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await tV(),!this.activeServiceWorker)return;this.sender=new Zx(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Eg();return await ET(e,Th,"1"),await TT(e,Th),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>ET(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>aV(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>TT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const r=mf(i,!1).getAll();return new nu(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:r}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}J1.type="LOCAL";const uV=J1;new Zl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(t,e){return e?ds(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_ extends p_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return aa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return aa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return aa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function cV(t){return q1(t.auth,new E_(t),t.bypassAuthState)}function hV(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),jx(n,new E_(t),t.bypassAuthState)}async function fV(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),Bx(n,new E_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n,s,i,r=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:i,tenantId:r,error:a,type:l}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:s,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cV;case"linkViaPopup":case"linkViaRedirect":return fV;case"reauthViaPopup":case"reauthViaRedirect":return hV;default:wn(this.auth,"internal-error")}}resolve(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV=new Zl(2e3,1e4);async function mV(t,e,n){if(nn(t.app))return Promise.reject(Dn(t,"operation-not-supported-in-this-environment"));const s=Oi(t);KM(t,e,y_);const i=W1(s,n);return new $i(s,"signInViaPopup",e,i).executeNotNull()}class $i extends Z1{constructor(e,n,s,i,r){super(e,n,i,r),this.provider=s,this.authWindow=null,this.pollId=null,$i.currentPopupAction&&$i.currentPopupAction.cancel(),$i.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){ws(this.filter.length===1,"Popup operations only handle one event");const e=v_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Dn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$i.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dV.get())};e()}}$i.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV="pendingRedirect",Sc=new Map;class pV extends Z1{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Sc.get(this.auth._key());if(!e){try{const s=await _V(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Sc.set(this.auth._key(),e)}return this.bypassAuthState||Sc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _V(t,e){const n=EV(e),s=vV(t);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function yV(t,e){Sc.set(t._key(),e)}function vV(t){return ds(t._redirectPersistence)}function EV(t){return Tc(gV,t.config.apiKey,t.name)}async function TV(t,e,n=!1){if(nn(t.app))return Promise.reject(_s(t));const s=Oi(t),i=W1(s,e),a=await new pV(s,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await s._persistUserIfCurrent(a.user),await s._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV=10*60*1e3;class AV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!eR(e)){const i=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(Dn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=SV&&this.cachedEventUids.clear(),this.cachedEventUids.has(ST(e))}saveEventToCache(e){this.cachedEventUids.add(ST(e)),this.lastProcessedEventTime=Date.now()}}function ST(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function eR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function bV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wV(t,e={}){return Ci(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IV=/^https?/;async function CV(t){if(t.config.emulator)return;const{authorizedDomains:e}=await wV(t);for(const n of e)try{if(OV(n))return}catch{}wn(t,"unauthorized-domain")}function OV(t){const e=_g(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===s}if(!IV.test(n))return!1;if(RV.test(t))return s===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV=new Zl(3e4,6e4);function AT(){const t=Fn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function DV(t){return new Promise((e,n)=>{var i,r,a;function s(){AT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{AT(),n(Dn(t,"network-request-failed"))},timeout:NV.get()})}if((r=(i=Fn().gapi)==null?void 0:i.iframes)!=null&&r.Iframe)e(gapi.iframes.getContext());else if((a=Fn().gapi)!=null&&a.load)s();else{const l=Sx("iframefcb");return Fn()[l]=()=>{gapi.load?s():n(Dn(t,"network-request-failed"))},U1(`${Tx()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Ac=null,e})}let Ac=null;function MV(t){return Ac=Ac||DV(t),Ac}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV=new Zl(5e3,15e3),VV="__/auth/iframe",kV="emulator/auth/iframe",PV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UV(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?d_(e,kV):`https://${t.config.authDomain}/${VV}`,s={apiKey:e.apiKey,appName:t.name,v:Ua},i=LV.get(t.config.apiHost);i&&(s.eid=i);const r=t._getFrameworks();return r.length&&(s.fw=r.join(",")),`${n}?${Wl(s).slice(1)}`}async function zV(t){const e=await MV(t),n=Fn().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:UV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:PV,dontclear:!0},s=>new Promise(async(i,r)=>{await s.restyle({setHideOnLeave:!1});const a=Dn(t,"network-request-failed"),l=Fn().setTimeout(()=>{r(a)},xV.get());function u(){Fn().clearTimeout(l),i(s)}s.ping(u).then(u,()=>{r(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jV=500,qV=600,HV="_blank",FV="http://localhost";class bT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $V(t,e,n,s=jV,i=qV){const r=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const u={...BV,width:s.toString(),height:i.toString(),top:r,left:a},c=Mt().toLowerCase();n&&(l=D1(c)?HV:n),O1(c)&&(e=e||FV,u.scrollbars="yes");const d=Object.entries(u).reduce((g,[p,C])=>`${g}${p}=${C},`,"");if(fx(c)&&l!=="_self")return GV(e||"",l),new bT(null);const m=window.open(e||"",l,d);J(m,t,"popup-blocked");try{m.focus()}catch{}return new bT(m)}function GV(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KV="__/auth/handler",QV="emulator/auth/handler",YV=encodeURIComponent("fac");async function wT(t,e,n,s,i,r){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Ua,eventId:i};if(e instanceof y_){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",DD(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,m]of Object.entries({}))a[d]=m}if(e instanceof tu){const d=e.getScopes().filter(m=>m!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await t._getAppCheckToken(),c=u?`#${YV}=${encodeURIComponent(u)}`:"";return`${XV(t)}?${Wl(l).slice(1)}${c}`}function XV({config:t}){return t.emulator?d_(t,QV):`https://${t.authDomain}/${KV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="webStorageSupport";class JV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=K1,this._completeRedirectFn=TV,this._overrideRedirectResult=yV}async _openPopup(e,n,s,i){var a;ws((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const r=await wT(e,n,s,_g(),i);return $V(e,r,v_())}async _openRedirect(e,n,s,i){await this._originValidation(e);const r=await wT(e,n,s,_g(),i);return eV(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:r}=this.eventManagers[n];return i?Promise.resolve(i):(ws(r,"If manager is not set, promise should be"),r)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await zV(e),s=new AV(e);return n.register("authEvent",i=>(J(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gd,{type:Gd},i=>{var a;const r=(a=i==null?void 0:i[0])==null?void 0:a[Gd];r!==void 0&&n(!!r),wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=CV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return P1()||N1()||g_()}}const WV=JV;var RT="@firebase/auth",IT="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function t4(t){Ta(new rr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=s.options;J(a&&!a.includes(":"),"invalid-api-key",{appName:s.name});const u={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:L1(t)},c=new yx(s,i,r,u);return Cx(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Ta(new rr("auth-internal",e=>{const n=Oi(e.getProvider("auth").getImmediate());return(s=>new ZV(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),fi(RT,IT,e4(t)),fi(RT,IT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=5*60,s4=d1("authIdTokenMaxAge")||n4;let CT=null;const i4=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>s4)return;const i=n==null?void 0:n.token;CT!==i&&(CT=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function r4(t=v1()){const e=c_(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Ix(t,{popupRedirectResolver:WV,persistence:[uV,Jx,K1]}),s=d1("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(s,location.origin);if(location.origin===r.origin){const a=i4(r.toString());Gx(n,a,()=>a(n.currentUser)),$x(n,l=>a(l))}}const i=h1("auth");return i&&Ox(n,`http://${i}`),n}function a4(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}vx({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=i=>{const r=Dn("internal-error");r.customData=i,n(r)},s.type="text/javascript",s.charset="UTF-8",a4().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});t4("Browser");var OT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var di,tR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,E){function T(){}T.prototype=E.prototype,v.F=E.prototype,v.prototype=new T,v.prototype.constructor=v,v.D=function(A,w,O){for(var R=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)R[Qe-2]=arguments[Qe];return E.prototype[w].apply(A,R)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(v,E,T){T||(T=0);const A=Array(16);if(typeof E=="string")for(var w=0;w<16;++w)A[w]=E.charCodeAt(T++)|E.charCodeAt(T++)<<8|E.charCodeAt(T++)<<16|E.charCodeAt(T++)<<24;else for(w=0;w<16;++w)A[w]=E[T++]|E[T++]<<8|E[T++]<<16|E[T++]<<24;E=v.g[0],T=v.g[1],w=v.g[2];let O=v.g[3],R;R=E+(O^T&(w^O))+A[0]+3614090360&4294967295,E=T+(R<<7&4294967295|R>>>25),R=O+(w^E&(T^w))+A[1]+3905402710&4294967295,O=E+(R<<12&4294967295|R>>>20),R=w+(T^O&(E^T))+A[2]+606105819&4294967295,w=O+(R<<17&4294967295|R>>>15),R=T+(E^w&(O^E))+A[3]+3250441966&4294967295,T=w+(R<<22&4294967295|R>>>10),R=E+(O^T&(w^O))+A[4]+4118548399&4294967295,E=T+(R<<7&4294967295|R>>>25),R=O+(w^E&(T^w))+A[5]+1200080426&4294967295,O=E+(R<<12&4294967295|R>>>20),R=w+(T^O&(E^T))+A[6]+2821735955&4294967295,w=O+(R<<17&4294967295|R>>>15),R=T+(E^w&(O^E))+A[7]+4249261313&4294967295,T=w+(R<<22&4294967295|R>>>10),R=E+(O^T&(w^O))+A[8]+1770035416&4294967295,E=T+(R<<7&4294967295|R>>>25),R=O+(w^E&(T^w))+A[9]+2336552879&4294967295,O=E+(R<<12&4294967295|R>>>20),R=w+(T^O&(E^T))+A[10]+4294925233&4294967295,w=O+(R<<17&4294967295|R>>>15),R=T+(E^w&(O^E))+A[11]+2304563134&4294967295,T=w+(R<<22&4294967295|R>>>10),R=E+(O^T&(w^O))+A[12]+1804603682&4294967295,E=T+(R<<7&4294967295|R>>>25),R=O+(w^E&(T^w))+A[13]+4254626195&4294967295,O=E+(R<<12&4294967295|R>>>20),R=w+(T^O&(E^T))+A[14]+2792965006&4294967295,w=O+(R<<17&4294967295|R>>>15),R=T+(E^w&(O^E))+A[15]+1236535329&4294967295,T=w+(R<<22&4294967295|R>>>10),R=E+(w^O&(T^w))+A[1]+4129170786&4294967295,E=T+(R<<5&4294967295|R>>>27),R=O+(T^w&(E^T))+A[6]+3225465664&4294967295,O=E+(R<<9&4294967295|R>>>23),R=w+(E^T&(O^E))+A[11]+643717713&4294967295,w=O+(R<<14&4294967295|R>>>18),R=T+(O^E&(w^O))+A[0]+3921069994&4294967295,T=w+(R<<20&4294967295|R>>>12),R=E+(w^O&(T^w))+A[5]+3593408605&4294967295,E=T+(R<<5&4294967295|R>>>27),R=O+(T^w&(E^T))+A[10]+38016083&4294967295,O=E+(R<<9&4294967295|R>>>23),R=w+(E^T&(O^E))+A[15]+3634488961&4294967295,w=O+(R<<14&4294967295|R>>>18),R=T+(O^E&(w^O))+A[4]+3889429448&4294967295,T=w+(R<<20&4294967295|R>>>12),R=E+(w^O&(T^w))+A[9]+568446438&4294967295,E=T+(R<<5&4294967295|R>>>27),R=O+(T^w&(E^T))+A[14]+3275163606&4294967295,O=E+(R<<9&4294967295|R>>>23),R=w+(E^T&(O^E))+A[3]+4107603335&4294967295,w=O+(R<<14&4294967295|R>>>18),R=T+(O^E&(w^O))+A[8]+1163531501&4294967295,T=w+(R<<20&4294967295|R>>>12),R=E+(w^O&(T^w))+A[13]+2850285829&4294967295,E=T+(R<<5&4294967295|R>>>27),R=O+(T^w&(E^T))+A[2]+4243563512&4294967295,O=E+(R<<9&4294967295|R>>>23),R=w+(E^T&(O^E))+A[7]+1735328473&4294967295,w=O+(R<<14&4294967295|R>>>18),R=T+(O^E&(w^O))+A[12]+2368359562&4294967295,T=w+(R<<20&4294967295|R>>>12),R=E+(T^w^O)+A[5]+4294588738&4294967295,E=T+(R<<4&4294967295|R>>>28),R=O+(E^T^w)+A[8]+2272392833&4294967295,O=E+(R<<11&4294967295|R>>>21),R=w+(O^E^T)+A[11]+1839030562&4294967295,w=O+(R<<16&4294967295|R>>>16),R=T+(w^O^E)+A[14]+4259657740&4294967295,T=w+(R<<23&4294967295|R>>>9),R=E+(T^w^O)+A[1]+2763975236&4294967295,E=T+(R<<4&4294967295|R>>>28),R=O+(E^T^w)+A[4]+1272893353&4294967295,O=E+(R<<11&4294967295|R>>>21),R=w+(O^E^T)+A[7]+4139469664&4294967295,w=O+(R<<16&4294967295|R>>>16),R=T+(w^O^E)+A[10]+3200236656&4294967295,T=w+(R<<23&4294967295|R>>>9),R=E+(T^w^O)+A[13]+681279174&4294967295,E=T+(R<<4&4294967295|R>>>28),R=O+(E^T^w)+A[0]+3936430074&4294967295,O=E+(R<<11&4294967295|R>>>21),R=w+(O^E^T)+A[3]+3572445317&4294967295,w=O+(R<<16&4294967295|R>>>16),R=T+(w^O^E)+A[6]+76029189&4294967295,T=w+(R<<23&4294967295|R>>>9),R=E+(T^w^O)+A[9]+3654602809&4294967295,E=T+(R<<4&4294967295|R>>>28),R=O+(E^T^w)+A[12]+3873151461&4294967295,O=E+(R<<11&4294967295|R>>>21),R=w+(O^E^T)+A[15]+530742520&4294967295,w=O+(R<<16&4294967295|R>>>16),R=T+(w^O^E)+A[2]+3299628645&4294967295,T=w+(R<<23&4294967295|R>>>9),R=E+(w^(T|~O))+A[0]+4096336452&4294967295,E=T+(R<<6&4294967295|R>>>26),R=O+(T^(E|~w))+A[7]+1126891415&4294967295,O=E+(R<<10&4294967295|R>>>22),R=w+(E^(O|~T))+A[14]+2878612391&4294967295,w=O+(R<<15&4294967295|R>>>17),R=T+(O^(w|~E))+A[5]+4237533241&4294967295,T=w+(R<<21&4294967295|R>>>11),R=E+(w^(T|~O))+A[12]+1700485571&4294967295,E=T+(R<<6&4294967295|R>>>26),R=O+(T^(E|~w))+A[3]+2399980690&4294967295,O=E+(R<<10&4294967295|R>>>22),R=w+(E^(O|~T))+A[10]+4293915773&4294967295,w=O+(R<<15&4294967295|R>>>17),R=T+(O^(w|~E))+A[1]+2240044497&4294967295,T=w+(R<<21&4294967295|R>>>11),R=E+(w^(T|~O))+A[8]+1873313359&4294967295,E=T+(R<<6&4294967295|R>>>26),R=O+(T^(E|~w))+A[15]+4264355552&4294967295,O=E+(R<<10&4294967295|R>>>22),R=w+(E^(O|~T))+A[6]+2734768916&4294967295,w=O+(R<<15&4294967295|R>>>17),R=T+(O^(w|~E))+A[13]+1309151649&4294967295,T=w+(R<<21&4294967295|R>>>11),R=E+(w^(T|~O))+A[4]+4149444226&4294967295,E=T+(R<<6&4294967295|R>>>26),R=O+(T^(E|~w))+A[11]+3174756917&4294967295,O=E+(R<<10&4294967295|R>>>22),R=w+(E^(O|~T))+A[2]+718787259&4294967295,w=O+(R<<15&4294967295|R>>>17),R=T+(O^(w|~E))+A[9]+3951481745&4294967295,v.g[0]=v.g[0]+E&4294967295,v.g[1]=v.g[1]+(w+(R<<21&4294967295|R>>>11))&4294967295,v.g[2]=v.g[2]+w&4294967295,v.g[3]=v.g[3]+O&4294967295}s.prototype.v=function(v,E){E===void 0&&(E=v.length);const T=E-this.blockSize,A=this.C;let w=this.h,O=0;for(;O<E;){if(w==0)for(;O<=T;)i(this,v,O),O+=this.blockSize;if(typeof v=="string"){for(;O<E;)if(A[w++]=v.charCodeAt(O++),w==this.blockSize){i(this,A),w=0;break}}else for(;O<E;)if(A[w++]=v[O++],w==this.blockSize){i(this,A),w=0;break}}this.h=w,this.o+=E},s.prototype.A=function(){var v=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);v[0]=128;for(var E=1;E<v.length-8;++E)v[E]=0;E=this.o*8;for(var T=v.length-8;T<v.length;++T)v[T]=E&255,E/=256;for(this.v(v),v=Array(16),E=0,T=0;T<4;++T)for(let A=0;A<32;A+=8)v[E++]=this.g[T]>>>A&255;return v};function r(v,E){var T=l;return Object.prototype.hasOwnProperty.call(T,v)?T[v]:T[v]=E(v)}function a(v,E){this.h=E;const T=[];let A=!0;for(let w=v.length-1;w>=0;w--){const O=v[w]|0;A&&O==E||(T[w]=O,A=!1)}this.g=T}var l={};function u(v){return-128<=v&&v<128?r(v,function(E){return new a([E|0],E<0?-1:0)}):new a([v|0],v<0?-1:0)}function c(v){if(isNaN(v)||!isFinite(v))return m;if(v<0)return x(c(-v));const E=[];let T=1;for(let A=0;v>=T;A++)E[A]=v/T|0,T*=4294967296;return new a(E,0)}function d(v,E){if(v.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(v.charAt(0)=="-")return x(d(v.substring(1),E));if(v.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=c(Math.pow(E,8));let A=m;for(let O=0;O<v.length;O+=8){var w=Math.min(8,v.length-O);const R=parseInt(v.substring(O,O+w),E);w<8?(w=c(Math.pow(E,w)),A=A.j(w).add(c(R))):(A=A.j(T),A=A.add(c(R)))}return A}var m=u(0),g=u(1),p=u(16777216);t=a.prototype,t.m=function(){if(N(this))return-x(this).m();let v=0,E=1;for(let T=0;T<this.g.length;T++){const A=this.i(T);v+=(A>=0?A:4294967296+A)*E,E*=4294967296}return v},t.toString=function(v){if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(C(this))return"0";if(N(this))return"-"+x(this).toString(v);const E=c(Math.pow(v,6));var T=this;let A="";for(;;){const w=I(T,E).g;T=S(T,w.j(E));let O=((T.g.length>0?T.g[0]:T.h)>>>0).toString(v);if(T=w,C(T))return O+A;for(;O.length<6;)O="0"+O;A=O+A}},t.i=function(v){return v<0?0:v<this.g.length?this.g[v]:this.h};function C(v){if(v.h!=0)return!1;for(let E=0;E<v.g.length;E++)if(v.g[E]!=0)return!1;return!0}function N(v){return v.h==-1}t.l=function(v){return v=S(this,v),N(v)?-1:C(v)?0:1};function x(v){const E=v.g.length,T=[];for(let A=0;A<E;A++)T[A]=~v.g[A];return new a(T,~v.h).add(g)}t.abs=function(){return N(this)?x(this):this},t.add=function(v){const E=Math.max(this.g.length,v.g.length),T=[];let A=0;for(let w=0;w<=E;w++){let O=A+(this.i(w)&65535)+(v.i(w)&65535),R=(O>>>16)+(this.i(w)>>>16)+(v.i(w)>>>16);A=R>>>16,O&=65535,R&=65535,T[w]=R<<16|O}return new a(T,T[T.length-1]&-2147483648?-1:0)};function S(v,E){return v.add(x(E))}t.j=function(v){if(C(this)||C(v))return m;if(N(this))return N(v)?x(this).j(x(v)):x(x(this).j(v));if(N(v))return x(this.j(x(v)));if(this.l(p)<0&&v.l(p)<0)return c(this.m()*v.m());const E=this.g.length+v.g.length,T=[];for(var A=0;A<2*E;A++)T[A]=0;for(A=0;A<this.g.length;A++)for(let w=0;w<v.g.length;w++){const O=this.i(A)>>>16,R=this.i(A)&65535,Qe=v.i(w)>>>16,It=v.i(w)&65535;T[2*A+2*w]+=R*It,y(T,2*A+2*w),T[2*A+2*w+1]+=O*It,y(T,2*A+2*w+1),T[2*A+2*w+1]+=R*Qe,y(T,2*A+2*w+1),T[2*A+2*w+2]+=O*Qe,y(T,2*A+2*w+2)}for(v=0;v<E;v++)T[v]=T[2*v+1]<<16|T[2*v];for(v=E;v<2*E;v++)T[v]=0;return new a(T,0)};function y(v,E){for(;(v[E]&65535)!=v[E];)v[E+1]+=v[E]>>>16,v[E]&=65535,E++}function b(v,E){this.g=v,this.h=E}function I(v,E){if(C(E))throw Error("division by zero");if(C(v))return new b(m,m);if(N(v))return E=I(x(v),E),new b(x(E.g),x(E.h));if(N(E))return E=I(v,x(E)),new b(x(E.g),E.h);if(v.g.length>30){if(N(v)||N(E))throw Error("slowDivide_ only works with positive integers.");for(var T=g,A=E;A.l(v)<=0;)T=B(T),A=B(A);var w=j(T,1),O=j(A,1);for(A=j(A,2),T=j(T,2);!C(A);){var R=O.add(A);R.l(v)<=0&&(w=w.add(T),O=R),A=j(A,1),T=j(T,1)}return E=S(v,w.j(E)),new b(w,E)}for(w=m;v.l(E)>=0;){for(T=Math.max(1,Math.floor(v.m()/E.m())),A=Math.ceil(Math.log(T)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),O=c(T),R=O.j(E);N(R)||R.l(v)>0;)T-=A,O=c(T),R=O.j(E);C(O)&&(O=g),w=w.add(O),v=S(v,R)}return new b(w,v)}t.B=function(v){return I(this,v).h},t.and=function(v){const E=Math.max(this.g.length,v.g.length),T=[];for(let A=0;A<E;A++)T[A]=this.i(A)&v.i(A);return new a(T,this.h&v.h)},t.or=function(v){const E=Math.max(this.g.length,v.g.length),T=[];for(let A=0;A<E;A++)T[A]=this.i(A)|v.i(A);return new a(T,this.h|v.h)},t.xor=function(v){const E=Math.max(this.g.length,v.g.length),T=[];for(let A=0;A<E;A++)T[A]=this.i(A)^v.i(A);return new a(T,this.h^v.h)};function B(v){const E=v.g.length+1,T=[];for(let A=0;A<E;A++)T[A]=v.i(A)<<1|v.i(A-1)>>>31;return new a(T,v.h)}function j(v,E){const T=E>>5;E%=32;const A=v.g.length-T,w=[];for(let O=0;O<A;O++)w[O]=E>0?v.i(O+T)>>>E|v.i(O+T+1)<<32-E:v.i(O+T);return new a(w,v.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,tR=s,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=d,di=a}).apply(typeof OT<"u"?OT:typeof self<"u"?self:typeof window<"u"?window:{});var Fu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nR,xo,sR,bc,Tg,iR,rR,aR;(function(){var t,e=Object.defineProperty;function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fu=="object"&&Fu];for(var h=0;h<o.length;++h){var f=o[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var s=n(this);function i(o,h){if(h)e:{var f=s;o=o.split(".");for(var _=0;_<o.length-1;_++){var D=o[_];if(!(D in f))break e;f=f[D]}o=o[o.length-1],_=f[o],h=h(_),h!=_&&h!=null&&e(f,o,{configurable:!0,writable:!0,value:h})}}i("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(o){return o||function(h){var f=[],_;for(_ in h)Object.prototype.hasOwnProperty.call(h,_)&&f.push([_,h[_]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var r=r||{},a=this||self;function l(o){var h=typeof o;return h=="object"&&o!=null||h=="function"}function u(o,h,f){return o.call.apply(o.bind,arguments)}function c(o,h,f){return c=u,c.apply(null,arguments)}function d(o,h){var f=Array.prototype.slice.call(arguments,1);return function(){var _=f.slice();return _.push.apply(_,arguments),o.apply(this,_)}}function m(o,h){function f(){}f.prototype=h.prototype,o.Z=h.prototype,o.prototype=new f,o.prototype.constructor=o,o.Ob=function(_,D,V){for(var q=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)q[ue-2]=arguments[ue];return h.prototype[D].apply(_,q)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function p(o){const h=o.length;if(h>0){const f=Array(h);for(let _=0;_<h;_++)f[_]=o[_];return f}return[]}function C(o,h){for(let _=1;_<arguments.length;_++){const D=arguments[_];var f=typeof D;if(f=f!="object"?f:D?Array.isArray(D)?"array":f:"null",f=="array"||f=="object"&&typeof D.length=="number"){f=o.length||0;const V=D.length||0;o.length=f+V;for(let q=0;q<V;q++)o[f+q]=D[q]}else o.push(D)}}class N{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function x(o){a.setTimeout(()=>{throw o},0)}function S(){var o=v;let h=null;return o.g&&(h=o.g,o.g=o.g.next,o.g||(o.h=null),h.next=null),h}class y{constructor(){this.h=this.g=null}add(h,f){const _=b.get();_.set(h,f),this.h?this.h.next=_:this.g=_,this.h=_}}var b=new N(()=>new I,o=>o.reset());class I{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let B,j=!1,v=new y,E=()=>{const o=Promise.resolve(void 0);B=()=>{o.then(T)}};function T(){for(var o;o=S();){try{o.h.call(o.g)}catch(f){x(f)}var h=b;h.j(o),h.h<100&&(h.h++,o.next=h.g,h.g=o)}j=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function w(o,h){this.type=o,this.g=this.target=h,this.defaultPrevented=!1}w.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,h=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};a.addEventListener("test",f,h),a.removeEventListener("test",f,h)}catch{}return o}();function R(o){return/^[\s\xa0]*$/.test(o)}function Qe(o,h){w.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,h)}m(Qe,w),Qe.prototype.init=function(o,h){const f=this.type=o.type,_=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=h,h=o.relatedTarget,h||(f=="mouseover"?h=o.fromElement:f=="mouseout"&&(h=o.toElement)),this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&Qe.Z.h.call(this)},Qe.prototype.h=function(){Qe.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var It="closure_listenable_"+(Math.random()*1e6|0),H=0;function oe(o,h,f,_,D){this.listener=o,this.proxy=null,this.src=h,this.type=f,this.capture=!!_,this.ha=D,this.key=++H,this.da=this.fa=!1}function te(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Ae(o,h,f){for(const _ in o)h.call(f,o[_],_,o)}function Be(o,h){for(const f in o)h.call(void 0,o[f],f,o)}function zt(o){const h={};for(const f in o)h[f]=o[f];return h}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(o,h){let f,_;for(let D=1;D<arguments.length;D++){_=arguments[D];for(f in _)o[f]=_[f];for(let V=0;V<G.length;V++)f=G[V],Object.prototype.hasOwnProperty.call(_,f)&&(o[f]=_[f])}}function be(o){this.src=o,this.g={},this.h=0}be.prototype.add=function(o,h,f,_,D){const V=o.toString();o=this.g[V],o||(o=this.g[V]=[],this.h++);const q=Wn(o,h,_,D);return q>-1?(h=o[q],f||(h.fa=!1)):(h=new oe(h,this.src,V,!!_,D),h.fa=f,o.push(h)),h};function Ye(o,h){const f=h.type;if(f in o.g){var _=o.g[f],D=Array.prototype.indexOf.call(_,h,void 0),V;(V=D>=0)&&Array.prototype.splice.call(_,D,1),V&&(te(h),o.g[f].length==0&&(delete o.g[f],o.h--))}}function Wn(o,h,f,_){for(let D=0;D<o.length;++D){const V=o[D];if(!V.da&&V.listener==h&&V.capture==!!f&&V.ha==_)return D}return-1}var Fa="closure_lm_"+(Math.random()*1e6|0),If={};function ey(o,h,f,_,D){if(Array.isArray(h)){for(let V=0;V<h.length;V++)ey(o,h[V],f,_,D);return null}return f=sy(f),o&&o[It]?o.J(h,f,l(_)?!!_.capture:!1,D):OI(o,h,f,!1,_,D)}function OI(o,h,f,_,D,V){if(!h)throw Error("Invalid event type");const q=l(D)?!!D.capture:!!D;let ue=Of(o);if(ue||(o[Fa]=ue=new be(o)),f=ue.add(h,f,_,q,V),f.proxy)return f;if(_=NI(),f.proxy=_,_.src=o,_.listener=f,o.addEventListener)O||(D=q),D===void 0&&(D=!1),o.addEventListener(h.toString(),_,D);else if(o.attachEvent)o.attachEvent(ny(h.toString()),_);else if(o.addListener&&o.removeListener)o.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return f}function NI(){function o(f){return h.call(o.src,o.listener,f)}const h=DI;return o}function ty(o,h,f,_,D){if(Array.isArray(h))for(var V=0;V<h.length;V++)ty(o,h[V],f,_,D);else _=l(_)?!!_.capture:!!_,f=sy(f),o&&o[It]?(o=o.i,V=String(h).toString(),V in o.g&&(h=o.g[V],f=Wn(h,f,_,D),f>-1&&(te(h[f]),Array.prototype.splice.call(h,f,1),h.length==0&&(delete o.g[V],o.h--)))):o&&(o=Of(o))&&(h=o.g[h.toString()],o=-1,h&&(o=Wn(h,f,_,D)),(f=o>-1?h[o]:null)&&Cf(f))}function Cf(o){if(typeof o!="number"&&o&&!o.da){var h=o.src;if(h&&h[It])Ye(h.i,o);else{var f=o.type,_=o.proxy;h.removeEventListener?h.removeEventListener(f,_,o.capture):h.detachEvent?h.detachEvent(ny(f),_):h.addListener&&h.removeListener&&h.removeListener(_),(f=Of(h))?(Ye(f,o),f.h==0&&(f.src=null,h[Fa]=null)):te(o)}}}function ny(o){return o in If?If[o]:If[o]="on"+o}function DI(o,h){if(o.da)o=!0;else{h=new Qe(h,this);const f=o.listener,_=o.ha||o.src;o.fa&&Cf(o),o=f.call(_,h)}return o}function Of(o){return o=o[Fa],o instanceof be?o:null}var Nf="__closure_events_fn_"+(Math.random()*1e9>>>0);function sy(o){return typeof o=="function"?o:(o[Nf]||(o[Nf]=function(h){return o.handleEvent(h)}),o[Nf])}function Ct(){A.call(this),this.i=new be(this),this.M=this,this.G=null}m(Ct,A),Ct.prototype[It]=!0,Ct.prototype.removeEventListener=function(o,h,f,_){ty(this,o,h,f,_)};function xt(o,h){var f,_=o.G;if(_)for(f=[];_;_=_.G)f.push(_);if(o=o.M,_=h.type||h,typeof h=="string")h=new w(h,o);else if(h instanceof w)h.target=h.target||o;else{var D=h;h=new w(_,o),re(h,D)}D=!0;let V,q;if(f)for(q=f.length-1;q>=0;q--)V=h.g=f[q],D=lu(V,_,!0,h)&&D;if(V=h.g=o,D=lu(V,_,!0,h)&&D,D=lu(V,_,!1,h)&&D,f)for(q=0;q<f.length;q++)V=h.g=f[q],D=lu(V,_,!1,h)&&D}Ct.prototype.N=function(){if(Ct.Z.N.call(this),this.i){var o=this.i;for(const h in o.g){const f=o.g[h];for(let _=0;_<f.length;_++)te(f[_]);delete o.g[h],o.h--}}this.G=null},Ct.prototype.J=function(o,h,f,_){return this.i.add(String(o),h,!1,f,_)},Ct.prototype.K=function(o,h,f,_){return this.i.add(String(o),h,!0,f,_)};function lu(o,h,f,_){if(h=o.i.g[String(h)],!h)return!0;h=h.concat();let D=!0;for(let V=0;V<h.length;++V){const q=h[V];if(q&&!q.da&&q.capture==f){const ue=q.listener,nt=q.ha||q.src;q.fa&&Ye(o.i,q),D=ue.call(nt,_)!==!1&&D}}return D&&!_.defaultPrevented}function MI(o,h){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=c(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:a.setTimeout(o,h||0)}function iy(o){o.g=MI(()=>{o.g=null,o.i&&(o.i=!1,iy(o))},o.l);const h=o.h;o.h=null,o.m.apply(null,h)}class xI extends A{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:iy(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $a(o){A.call(this),this.h=o,this.g={}}m($a,A);var ry=[];function ay(o){Ae(o.g,function(h,f){this.g.hasOwnProperty(f)&&Cf(h)},o),o.g={}}$a.prototype.N=function(){$a.Z.N.call(this),ay(this)},$a.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Df=a.JSON.stringify,VI=a.JSON.parse,kI=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function oy(){}function ly(){}var Ga={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Mf(){w.call(this,"d")}m(Mf,w);function xf(){w.call(this,"c")}m(xf,w);var Ni={},uy=null;function uu(){return uy=uy||new Ct}Ni.Ia="serverreachability";function cy(o){w.call(this,Ni.Ia,o)}m(cy,w);function Ka(o){const h=uu();xt(h,new cy(h))}Ni.STAT_EVENT="statevent";function hy(o,h){w.call(this,Ni.STAT_EVENT,o),this.stat=h}m(hy,w);function Vt(o){const h=uu();xt(h,new hy(h,o))}Ni.Ja="timingevent";function fy(o,h){w.call(this,Ni.Ja,o),this.size=h}m(fy,w);function Qa(o,h){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},h)}function Ya(){this.g=!0}Ya.prototype.ua=function(){this.g=!1};function PI(o,h,f,_,D,V){o.info(function(){if(o.g)if(V){var q="",ue=V.split("&");for(let Ie=0;Ie<ue.length;Ie++){var nt=ue[Ie].split("=");if(nt.length>1){const ut=nt[0];nt=nt[1];const kn=ut.split("_");q=kn.length>=2&&kn[1]=="type"?q+(ut+"="+nt+"&"):q+(ut+"=redacted&")}}}else q=null;else q=V;return"XMLHTTP REQ ("+_+") [attempt "+D+"]: "+h+`
`+f+`
`+q})}function LI(o,h,f,_,D,V,q){o.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+D+"]: "+h+`
`+f+`
`+V+" "+q})}function Er(o,h,f,_){o.info(function(){return"XMLHTTP TEXT ("+h+"): "+zI(o,f)+(_?" "+_:"")})}function UI(o,h){o.info(function(){return"TIMEOUT: "+h})}Ya.prototype.info=function(){};function zI(o,h){if(!o.g)return h;if(!h)return null;try{const V=JSON.parse(h);if(V){for(o=0;o<V.length;o++)if(Array.isArray(V[o])){var f=V[o];if(!(f.length<2)){var _=f[1];if(Array.isArray(_)&&!(_.length<1)){var D=_[0];if(D!="noop"&&D!="stop"&&D!="close")for(let q=1;q<_.length;q++)_[q]=""}}}}return Df(V)}catch{return h}}var cu={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},dy={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},my;function Vf(){}m(Vf,oy),Vf.prototype.g=function(){return new XMLHttpRequest},my=new Vf;function Xa(o){return encodeURIComponent(String(o))}function BI(o){var h=1;o=o.split(":");const f=[];for(;h>0&&o.length;)f.push(o.shift()),h--;return o.length&&f.push(o.join(":")),f}function Ns(o,h,f,_){this.j=o,this.i=h,this.l=f,this.S=_||1,this.V=new $a(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new gy}function gy(){this.i=null,this.g="",this.h=!1}var py={},kf={};function Pf(o,h,f){o.M=1,o.A=fu(Vn(h)),o.u=f,o.R=!0,_y(o,null)}function _y(o,h){o.F=Date.now(),hu(o),o.B=Vn(o.A);var f=o.B,_=o.S;Array.isArray(_)||(_=[String(_)]),Ny(f.i,"t",_),o.C=0,f=o.j.L,o.h=new gy,o.g=Qy(o.j,f?h:null,!o.u),o.P>0&&(o.O=new xI(c(o.Y,o,o.g),o.P)),h=o.V,f=o.g,_=o.ba;var D="readystatechange";Array.isArray(D)||(D&&(ry[0]=D.toString()),D=ry);for(let V=0;V<D.length;V++){const q=ey(f,D[V],_||h.handleEvent,!1,h.h||h);if(!q)break;h.g[q.key]=q}h=o.J?zt(o.J):{},o.u?(o.v||(o.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,h)):(o.v="GET",o.g.ea(o.B,o.v,null,h)),Ka(),PI(o.i,o.v,o.B,o.l,o.S,o.u)}Ns.prototype.ba=function(o){o=o.target;const h=this.O;h&&xs(o)==3?h.j():this.Y(o)},Ns.prototype.Y=function(o){try{if(o==this.g)e:{const ue=xs(this.g),nt=this.g.ya(),Ie=this.g.ca();if(!(ue<3)&&(ue!=3||this.g&&(this.h.h||this.g.la()||Ly(this.g)))){this.K||ue!=4||nt==7||(nt==8||Ie<=0?Ka(3):Ka(2)),Lf(this);var h=this.g.ca();this.X=h;var f=jI(this);if(this.o=h==200,LI(this.i,this.v,this.B,this.l,this.S,ue,h),this.o){if(this.U&&!this.L){t:{if(this.g){var _,D=this.g;if((_=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(_)){var V=_;break t}}V=null}if(o=V)Er(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Uf(this,o);else{this.o=!1,this.m=3,Vt(12),Di(this),Ja(this);break e}}if(this.R){o=!0;let ut;for(;!this.K&&this.C<f.length;)if(ut=qI(this,f),ut==kf){ue==4&&(this.m=4,Vt(14),o=!1),Er(this.i,this.l,null,"[Incomplete Response]");break}else if(ut==py){this.m=4,Vt(15),Er(this.i,this.l,f,"[Invalid Chunk]"),o=!1;break}else Er(this.i,this.l,ut,null),Uf(this,ut);if(yy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ue!=4||f.length!=0||this.h.h||(this.m=1,Vt(16),o=!1),this.o=this.o&&o,!o)Er(this.i,this.l,f,"[Invalid Chunked Response]"),Di(this),Ja(this);else if(f.length>0&&!this.W){this.W=!0;var q=this.j;q.g==this&&q.aa&&!q.P&&(q.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),Gf(q),q.P=!0,Vt(11))}}else Er(this.i,this.l,f,null),Uf(this,f);ue==4&&Di(this),this.o&&!this.K&&(ue==4?Fy(this.j,this):(this.o=!1,hu(this)))}else nC(this.g),h==400&&f.indexOf("Unknown SID")>0?(this.m=3,Vt(12)):(this.m=0,Vt(13)),Di(this),Ja(this)}}}catch{}finally{}};function jI(o){if(!yy(o))return o.g.la();const h=Ly(o.g);if(h==="")return"";let f="";const _=h.length,D=xs(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return Di(o),Ja(o),"";o.h.i=new a.TextDecoder}for(let V=0;V<_;V++)o.h.h=!0,f+=o.h.i.decode(h[V],{stream:!(D&&V==_-1)});return h.length=0,o.h.g+=f,o.C=0,o.h.g}function yy(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function qI(o,h){var f=o.C,_=h.indexOf(`
`,f);return _==-1?kf:(f=Number(h.substring(f,_)),isNaN(f)?py:(_+=1,_+f>h.length?kf:(h=h.slice(_,_+f),o.C=_+f,h)))}Ns.prototype.cancel=function(){this.K=!0,Di(this)};function hu(o){o.T=Date.now()+o.H,vy(o,o.H)}function vy(o,h){if(o.D!=null)throw Error("WatchDog timer not null");o.D=Qa(c(o.aa,o),h)}function Lf(o){o.D&&(a.clearTimeout(o.D),o.D=null)}Ns.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(UI(this.i,this.B),this.M!=2&&(Ka(),Vt(17)),Di(this),this.m=2,Ja(this)):vy(this,this.T-o)};function Ja(o){o.j.I==0||o.K||Fy(o.j,o)}function Di(o){Lf(o);var h=o.O;h&&typeof h.dispose=="function"&&h.dispose(),o.O=null,ay(o.V),o.g&&(h=o.g,o.g=null,h.abort(),h.dispose())}function Uf(o,h){try{var f=o.j;if(f.I!=0&&(f.g==o||zf(f.h,o))){if(!o.L&&zf(f.h,o)&&f.I==3){try{var _=f.Ba.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var D=_;if(D[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<o.F)_u(f),gu(f);else break e;$f(f),Vt(18)}}else f.xa=D[1],0<f.xa-f.K&&D[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=Qa(c(f.Va,f),6e3));Sy(f.h)<=1&&f.ta&&(f.ta=void 0)}else xi(f,11)}else if((o.L||f.g==o)&&_u(f),!R(h))for(D=f.Ba.g.parse(h),h=0;h<D.length;h++){let Ie=D[h];const ut=Ie[0];if(!(ut<=f.K))if(f.K=ut,Ie=Ie[1],f.I==2)if(Ie[0]=="c"){f.M=Ie[1],f.ba=Ie[2];const kn=Ie[3];kn!=null&&(f.ka=kn,f.j.info("VER="+f.ka));const Vi=Ie[4];Vi!=null&&(f.za=Vi,f.j.info("SVER="+f.za));const Vs=Ie[5];Vs!=null&&typeof Vs=="number"&&Vs>0&&(_=1.5*Vs,f.O=_,f.j.info("backChannelRequestTimeoutMs_="+_)),_=f;const ks=o.g;if(ks){const vu=ks.g?ks.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vu){var V=_.h;V.g||vu.indexOf("spdy")==-1&&vu.indexOf("quic")==-1&&vu.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Bf(V,V.h),V.h=null))}if(_.G){const Kf=ks.g?ks.g.getResponseHeader("X-HTTP-Session-Id"):null;Kf&&(_.wa=Kf,Ne(_.J,_.G,Kf))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-o.F,f.j.info("Handshake RTT: "+f.T+"ms")),_=f;var q=o;if(_.na=Ky(_,_.L?_.ba:null,_.W),q.L){Ay(_.h,q);var ue=q,nt=_.O;nt&&(ue.H=nt),ue.D&&(Lf(ue),hu(ue)),_.g=q}else qy(_);f.i.length>0&&pu(f)}else Ie[0]!="stop"&&Ie[0]!="close"||xi(f,7);else f.I==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?xi(f,7):Ff(f):Ie[0]!="noop"&&f.l&&f.l.qa(Ie),f.A=0)}}Ka(4)}catch{}}var HI=class{constructor(o,h){this.g=o,this.map=h}};function Ey(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ty(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Sy(o){return o.h?1:o.g?o.g.size:0}function zf(o,h){return o.h?o.h==h:o.g?o.g.has(h):!1}function Bf(o,h){o.g?o.g.add(h):o.h=h}function Ay(o,h){o.h&&o.h==h?o.h=null:o.g&&o.g.has(h)&&o.g.delete(h)}Ey.prototype.cancel=function(){if(this.i=by(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function by(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let h=o.i;for(const f of o.g.values())h=h.concat(f.G);return h}return p(o.i)}var wy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function FI(o,h){if(o){o=o.split("&");for(let f=0;f<o.length;f++){const _=o[f].indexOf("=");let D,V=null;_>=0?(D=o[f].substring(0,_),V=o[f].substring(_+1)):D=o[f],h(D,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Ds(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;o instanceof Ds?(this.l=o.l,Wa(this,o.j),this.o=o.o,this.g=o.g,Za(this,o.u),this.h=o.h,jf(this,Dy(o.i)),this.m=o.m):o&&(h=String(o).match(wy))?(this.l=!1,Wa(this,h[1]||"",!0),this.o=eo(h[2]||""),this.g=eo(h[3]||"",!0),Za(this,h[4]),this.h=eo(h[5]||"",!0),jf(this,h[6]||"",!0),this.m=eo(h[7]||"")):(this.l=!1,this.i=new no(null,this.l))}Ds.prototype.toString=function(){const o=[];var h=this.j;h&&o.push(to(h,Ry,!0),":");var f=this.g;return(f||h=="file")&&(o.push("//"),(h=this.o)&&o.push(to(h,Ry,!0),"@"),o.push(Xa(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&o.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(to(f,f.charAt(0)=="/"?KI:GI,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",to(f,YI)),o.join("")},Ds.prototype.resolve=function(o){const h=Vn(this);let f=!!o.j;f?Wa(h,o.j):f=!!o.o,f?h.o=o.o:f=!!o.g,f?h.g=o.g:f=o.u!=null;var _=o.h;if(f)Za(h,o.u);else if(f=!!o.h){if(_.charAt(0)!="/")if(this.g&&!this.h)_="/"+_;else{var D=h.h.lastIndexOf("/");D!=-1&&(_=h.h.slice(0,D+1)+_)}if(D=_,D==".."||D==".")_="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){_=D.lastIndexOf("/",0)==0,D=D.split("/");const V=[];for(let q=0;q<D.length;){const ue=D[q++];ue=="."?_&&q==D.length&&V.push(""):ue==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),_&&q==D.length&&V.push("")):(V.push(ue),_=!0)}_=V.join("/")}else _=D}return f?h.h=_:f=o.i.toString()!=="",f?jf(h,Dy(o.i)):f=!!o.m,f&&(h.m=o.m),h};function Vn(o){return new Ds(o)}function Wa(o,h,f){o.j=f?eo(h,!0):h,o.j&&(o.j=o.j.replace(/:$/,""))}function Za(o,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);o.u=h}else o.u=null}function jf(o,h,f){h instanceof no?(o.i=h,XI(o.i,o.l)):(f||(h=to(h,QI)),o.i=new no(h,o.l))}function Ne(o,h,f){o.i.set(h,f)}function fu(o){return Ne(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function eo(o,h){return o?h?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function to(o,h,f){return typeof o=="string"?(o=encodeURI(o).replace(h,$I),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function $I(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Ry=/[#\/\?@]/g,GI=/[#\?:]/g,KI=/[#\?]/g,QI=/[#\?@]/g,YI=/#/g;function no(o,h){this.h=this.g=null,this.i=o||null,this.j=!!h}function Mi(o){o.g||(o.g=new Map,o.h=0,o.i&&FI(o.i,function(h,f){o.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=no.prototype,t.add=function(o,h){Mi(this),this.i=null,o=Tr(this,o);let f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(h),this.h+=1,this};function Iy(o,h){Mi(o),h=Tr(o,h),o.g.has(h)&&(o.i=null,o.h-=o.g.get(h).length,o.g.delete(h))}function Cy(o,h){return Mi(o),h=Tr(o,h),o.g.has(h)}t.forEach=function(o,h){Mi(this),this.g.forEach(function(f,_){f.forEach(function(D){o.call(h,D,_,this)},this)},this)};function Oy(o,h){Mi(o);let f=[];if(typeof h=="string")Cy(o,h)&&(f=f.concat(o.g.get(Tr(o,h))));else for(o=Array.from(o.g.values()),h=0;h<o.length;h++)f=f.concat(o[h]);return f}t.set=function(o,h){return Mi(this),this.i=null,o=Tr(this,o),Cy(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[h]),this.h+=1,this},t.get=function(o,h){return o?(o=Oy(this,o),o.length>0?String(o[0]):h):h};function Ny(o,h,f){Iy(o,h),f.length>0&&(o.i=null,o.g.set(Tr(o,h),p(f)),o.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],h=Array.from(this.g.keys());for(let _=0;_<h.length;_++){var f=h[_];const D=Xa(f);f=Oy(this,f);for(let V=0;V<f.length;V++){let q=D;f[V]!==""&&(q+="="+Xa(f[V])),o.push(q)}}return this.i=o.join("&")};function Dy(o){const h=new no;return h.i=o.i,o.g&&(h.g=new Map(o.g),h.h=o.h),h}function Tr(o,h){return h=String(h),o.j&&(h=h.toLowerCase()),h}function XI(o,h){h&&!o.j&&(Mi(o),o.i=null,o.g.forEach(function(f,_){const D=_.toLowerCase();_!=D&&(Iy(this,_),Ny(this,D,f))},o)),o.j=h}function JI(o,h){const f=new Ya;if(a.Image){const _=new Image;_.onload=d(Ms,f,"TestLoadImage: loaded",!0,h,_),_.onerror=d(Ms,f,"TestLoadImage: error",!1,h,_),_.onabort=d(Ms,f,"TestLoadImage: abort",!1,h,_),_.ontimeout=d(Ms,f,"TestLoadImage: timeout",!1,h,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=o}else h(!1)}function WI(o,h){const f=new Ya,_=new AbortController,D=setTimeout(()=>{_.abort(),Ms(f,"TestPingServer: timeout",!1,h)},1e4);fetch(o,{signal:_.signal}).then(V=>{clearTimeout(D),V.ok?Ms(f,"TestPingServer: ok",!0,h):Ms(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),Ms(f,"TestPingServer: error",!1,h)})}function Ms(o,h,f,_,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),_(f)}catch{}}function ZI(){this.g=new kI}function qf(o){this.i=o.Sb||null,this.h=o.ab||!1}m(qf,oy),qf.prototype.g=function(){return new du(this.i,this.h)};function du(o,h){Ct.call(this),this.H=o,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(du,Ct),t=du.prototype,t.open=function(o,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=h,this.readyState=1,io(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(h.body=o),(this.H||a).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,so(this)),this.readyState=0},t.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,io(this)),this.g&&(this.readyState=3,io(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;My(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function My(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}t.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var h=o.value?o.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!o.done}))&&(this.response=this.responseText+=h)}o.done?so(this):io(this),this.readyState==3&&My(this)}},t.Oa=function(o){this.g&&(this.response=this.responseText=o,so(this))},t.Na=function(o){this.g&&(this.response=o,so(this))},t.ga=function(){this.g&&so(this)};function so(o){o.readyState=4,o.l=null,o.j=null,o.B=null,io(o)}t.setRequestHeader=function(o,h){this.A.append(o,h)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=h.next();return o.join(`\r
`)};function io(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(du.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function xy(o){let h="";return Ae(o,function(f,_){h+=_,h+=":",h+=f,h+=`\r
`}),h}function Hf(o,h,f){e:{for(_ in f){var _=!1;break e}_=!0}_||(f=xy(f),typeof o=="string"?f!=null&&Xa(f):Ne(o,h,f))}function je(o){Ct.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(je,Ct);var eC=/^https?$/i,tC=["POST","PUT"];t=je.prototype,t.Fa=function(o){this.H=o},t.ea=function(o,h,f,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);h=h?h.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():my.g(),this.g.onreadystatechange=g(c(this.Ca,this));try{this.B=!0,this.g.open(h,String(o),!0),this.B=!1}catch(V){Vy(this,V);return}if(o=f||"",f=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var D in _)f.set(D,_[D]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const V of _.keys())f.set(V,_.get(V));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(f.keys()).find(V=>V.toLowerCase()=="content-type"),D=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(tC,h,void 0)>=0)||_||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,q]of f)this.g.setRequestHeader(V,q);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(V){Vy(this,V)}};function Vy(o,h){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=h,o.o=5,ky(o),mu(o)}function ky(o){o.A||(o.A=!0,xt(o,"complete"),xt(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,xt(this,"complete"),xt(this,"abort"),mu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mu(this,!0)),je.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Py(this):this.Xa())},t.Xa=function(){Py(this)};function Py(o){if(o.h&&typeof r<"u"){if(o.v&&xs(o)==4)setTimeout(o.Ca.bind(o),0);else if(xt(o,"readystatechange"),xs(o)==4){o.h=!1;try{const V=o.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var _;if(_=V===0){let q=String(o.D).match(wy)[1]||null;!q&&a.self&&a.self.location&&(q=a.self.location.protocol.slice(0,-1)),_=!eC.test(q?q.toLowerCase():"")}f=_}if(f)xt(o,"complete"),xt(o,"success");else{o.o=6;try{var D=xs(o)>2?o.g.statusText:""}catch{D=""}o.l=D+" ["+o.ca()+"]",ky(o)}}finally{mu(o)}}}}function mu(o,h){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const f=o.g;o.g=null,h||xt(o,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function xs(o){return o.g?o.g.readyState:0}t.ca=function(){try{return xs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(o){if(this.g){var h=this.g.responseText;return o&&h.indexOf(o)==0&&(h=h.substring(o.length)),VI(h)}};function Ly(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function nC(o){const h={};o=(o.g&&xs(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<o.length;_++){if(R(o[_]))continue;var f=BI(o[_]);const D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const V=h[D]||[];h[D]=V,V.push(f)}Be(h,function(_){return _.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ro(o,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||h}function Uy(o){this.za=0,this.i=[],this.j=new Ya,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ro("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ro("baseRetryDelayMs",5e3,o),this.Za=ro("retryDelaySeedMs",1e4,o),this.Ta=ro("forwardChannelMaxRetries",2,o),this.va=ro("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new Ey(o&&o.concurrentRequestLimit),this.Ba=new ZI,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Uy.prototype,t.ka=8,t.I=1,t.connect=function(o,h,f,_){Vt(0),this.W=o,this.H=h||{},f&&_!==void 0&&(this.H.OSID=f,this.H.OAID=_),this.F=this.X,this.J=Ky(this,null,this.W),pu(this)};function Ff(o){if(zy(o),o.I==3){var h=o.V++,f=Vn(o.J);if(Ne(f,"SID",o.M),Ne(f,"RID",h),Ne(f,"TYPE","terminate"),ao(o,f),h=new Ns(o,o.j,h),h.M=2,h.A=fu(Vn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(h.A.toString(),"")}catch{}!f&&a.Image&&(new Image().src=h.A,f=!0),f||(h.g=Qy(h.j,null),h.g.ea(h.A)),h.F=Date.now(),hu(h)}Gy(o)}function gu(o){o.g&&(Gf(o),o.g.cancel(),o.g=null)}function zy(o){gu(o),o.v&&(a.clearTimeout(o.v),o.v=null),_u(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function pu(o){if(!Ty(o.h)&&!o.m){o.m=!0;var h=o.Ea;B||E(),j||(B(),j=!0),v.add(h,o),o.D=0}}function sC(o,h){return Sy(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=h.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=Qa(c(o.Ea,o,h),$y(o,o.D)),o.D++,!0)}t.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const D=new Ns(this,this.j,o);let V=this.o;if(this.U&&(V?(V=zt(V),re(V,this.U)):V=this.U),this.u!==null||this.R||(D.J=V,V=null),this.S)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var _=this.i[f];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,h>4096){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=jy(this,D,h),f=Vn(this.J),Ne(f,"RID",o),Ne(f,"CVER",22),this.G&&Ne(f,"X-HTTP-Session-Id",this.G),ao(this,f),V&&(this.R?h="headers="+Xa(xy(V))+"&"+h:this.u&&Hf(f,this.u,V)),Bf(this.h,D),this.Ra&&Ne(f,"TYPE","init"),this.S?(Ne(f,"$req",h),Ne(f,"SID","null"),D.U=!0,Pf(D,f,null)):Pf(D,f,h),this.I=2}}else this.I==3&&(o?By(this,o):this.i.length==0||Ty(this.h)||By(this))};function By(o,h){var f;h?f=h.l:f=o.V++;const _=Vn(o.J);Ne(_,"SID",o.M),Ne(_,"RID",f),Ne(_,"AID",o.K),ao(o,_),o.u&&o.o&&Hf(_,o.u,o.o),f=new Ns(o,o.j,f,o.D+1),o.u===null&&(f.J=o.o),h&&(o.i=h.G.concat(o.i)),h=jy(o,f,1e3),f.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),Bf(o.h,f),Pf(f,_,h)}function ao(o,h){o.H&&Ae(o.H,function(f,_){Ne(h,_,f)}),o.l&&Ae({},function(f,_){Ne(h,_,f)})}function jy(o,h,f){f=Math.min(o.i.length,f);const _=o.l?c(o.l.Ka,o.l,o):null;e:{var D=o.i;let ue=-1;for(;;){const nt=["count="+f];ue==-1?f>0?(ue=D[0].g,nt.push("ofs="+ue)):ue=0:nt.push("ofs="+ue);let Ie=!0;for(let ut=0;ut<f;ut++){var V=D[ut].g;const kn=D[ut].map;if(V-=ue,V<0)ue=Math.max(0,D[ut].g-100),Ie=!1;else try{V="req"+V+"_"||"";try{var q=kn instanceof Map?kn:Object.entries(kn);for(const[Vi,Vs]of q){let ks=Vs;l(Vs)&&(ks=Df(Vs)),nt.push(V+Vi+"="+encodeURIComponent(ks))}}catch(Vi){throw nt.push(V+"type="+encodeURIComponent("_badmap")),Vi}}catch{_&&_(kn)}}if(Ie){q=nt.join("&");break e}}q=void 0}return o=o.i.splice(0,f),h.G=o,q}function qy(o){if(!o.g&&!o.v){o.Y=1;var h=o.Da;B||E(),j||(B(),j=!0),v.add(h,o),o.A=0}}function $f(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=Qa(c(o.Da,o),$y(o,o.A)),o.A++,!0)}t.Da=function(){if(this.v=null,Hy(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=Qa(c(this.Wa,this),o)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Vt(10),gu(this),Hy(this))};function Gf(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function Hy(o){o.g=new Ns(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var h=Vn(o.na);Ne(h,"RID","rpc"),Ne(h,"SID",o.M),Ne(h,"AID",o.K),Ne(h,"CI",o.F?"0":"1"),!o.F&&o.ia&&Ne(h,"TO",o.ia),Ne(h,"TYPE","xmlhttp"),ao(o,h),o.u&&o.o&&Hf(h,o.u,o.o),o.O&&(o.g.H=o.O);var f=o.g;o=o.ba,f.M=1,f.A=fu(Vn(h)),f.u=null,f.R=!0,_y(f,o)}t.Va=function(){this.C!=null&&(this.C=null,gu(this),$f(this),Vt(19))};function _u(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function Fy(o,h){var f=null;if(o.g==h){_u(o),Gf(o),o.g=null;var _=2}else if(zf(o.h,h))f=h.G,Ay(o.h,h),_=1;else return;if(o.I!=0){if(h.o)if(_==1){f=h.u?h.u.length:0,h=Date.now()-h.F;var D=o.D;_=uu(),xt(_,new fy(_,f)),pu(o)}else qy(o);else if(D=h.m,D==3||D==0&&h.X>0||!(_==1&&sC(o,h)||_==2&&$f(o)))switch(f&&f.length>0&&(h=o.h,h.i=h.i.concat(f)),D){case 1:xi(o,5);break;case 4:xi(o,10);break;case 3:xi(o,6);break;default:xi(o,2)}}}function $y(o,h){let f=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(f*=2),f*h}function xi(o,h){if(o.j.info("Error code "+h),h==2){var f=c(o.bb,o),_=o.Ua;const D=!_;_=new Ds(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Wa(_,"https"),fu(_),D?JI(_.toString(),f):WI(_.toString(),f)}else Vt(2);o.I=0,o.l&&o.l.pa(h),Gy(o),zy(o)}t.bb=function(o){o?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function Gy(o){if(o.I=0,o.ja=[],o.l){const h=by(o.h);(h.length!=0||o.i.length!=0)&&(C(o.ja,h),C(o.ja,o.i),o.h.i.length=0,p(o.i),o.i.length=0),o.l.oa()}}function Ky(o,h,f){var _=f instanceof Ds?Vn(f):new Ds(f);if(_.g!="")h&&(_.g=h+"."+_.g),Za(_,_.u);else{var D=a.location;_=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;const V=new Ds(null);_&&Wa(V,_),h&&(V.g=h),D&&Za(V,D),f&&(V.h=f),_=V}return f=o.G,h=o.wa,f&&h&&Ne(_,f,h),Ne(_,"VER",o.ka),ao(o,_),_}function Qy(o,h,f){if(h&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=o.Aa&&!o.ma?new je(new qf({ab:f})):new je(o.ma),h.Fa(o.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yy(){}t=Yy.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function yu(){}yu.prototype.g=function(o,h){return new Yt(o,h)};function Yt(o,h){Ct.call(this),this.g=new Uy(h),this.l=o,this.h=h&&h.messageUrlParams||null,o=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(o?o["X-WebChannel-Content-Type"]=h.messageContentType:o={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(o?o["X-WebChannel-Client-Profile"]=h.sa:o={"X-WebChannel-Client-Profile":h.sa}),this.g.U=o,(o=h&&h.Qb)&&!R(o)&&(this.g.u=o),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!R(h)&&(this.g.G=h,o=this.h,o!==null&&h in o&&(o=this.h,h in o&&delete o[h])),this.j=new Sr(this)}m(Yt,Ct),Yt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Yt.prototype.close=function(){Ff(this.g)},Yt.prototype.o=function(o){var h=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.v&&(f={},f.__data__=Df(o),o=f);h.i.push(new HI(h.Ya++,o)),h.I==3&&pu(h)},Yt.prototype.N=function(){this.g.l=null,delete this.j,Ff(this.g),delete this.g,Yt.Z.N.call(this)};function Xy(o){Mf.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var h=o.__sm__;if(h){e:{for(const f in h){o=f;break e}o=void 0}(this.i=o)&&(o=this.i,h=h!==null&&o in h?h[o]:void 0),this.data=h}else this.data=o}m(Xy,Mf);function Jy(){xf.call(this),this.status=1}m(Jy,xf);function Sr(o){this.g=o}m(Sr,Yy),Sr.prototype.ra=function(){xt(this.g,"a")},Sr.prototype.qa=function(o){xt(this.g,new Xy(o))},Sr.prototype.pa=function(o){xt(this.g,new Jy)},Sr.prototype.oa=function(){xt(this.g,"b")},yu.prototype.createWebChannel=yu.prototype.g,Yt.prototype.send=Yt.prototype.o,Yt.prototype.open=Yt.prototype.m,Yt.prototype.close=Yt.prototype.close,aR=function(){return new yu},rR=function(){return uu()},iR=Ni,Tg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},cu.NO_ERROR=0,cu.TIMEOUT=8,cu.HTTP_ERROR=6,bc=cu,dy.COMPLETE="complete",sR=dy,ly.EventType=Ga,Ga.OPEN="a",Ga.CLOSE="b",Ga.ERROR="c",Ga.MESSAGE="d",Ct.prototype.listen=Ct.prototype.J,xo=ly,je.prototype.listenOnce=je.prototype.K,je.prototype.getLastError=je.prototype.Ha,je.prototype.getLastErrorCode=je.prototype.ya,je.prototype.getStatus=je.prototype.ca,je.prototype.getResponseJson=je.prototype.La,je.prototype.getResponseText=je.prototype.la,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Fa,nR=je}).apply(typeof Fu<"u"?Fu:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nt.UNAUTHENTICATED=new Nt(null),Nt.GOOGLE_CREDENTIALS=new Nt("google-credentials-uid"),Nt.FIRST_PARTY=new Nt("first-party-uid"),Nt.MOCK_USER=new Nt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ba="12.9.0";function o4(t){Ba=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr=new l_("@firebase/firestore");function Vr(){return lr.logLevel}function F(t,...e){if(lr.logLevel<=fe.DEBUG){const n=e.map(T_);lr.debug(`Firestore (${Ba}): ${t}`,...n)}}function Rs(t,...e){if(lr.logLevel<=fe.ERROR){const n=e.map(T_);lr.error(`Firestore (${Ba}): ${t}`,...n)}}function ur(t,...e){if(lr.logLevel<=fe.WARN){const n=e.map(T_);lr.warn(`Firestore (${Ba}): ${t}`,...n)}}function T_(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,oR(t,s,n)}function oR(t,e,n){let s=`FIRESTORE (${Ba}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Rs(s),new Error(s)}function Ee(t,e,n,s){let i="Unexpected state";typeof n=="string"?i=n:s=n,t||oR(e,i,s)}function se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends Os{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class l4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Nt.UNAUTHENTICATED))}shutdown(){}}class u4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class c4{constructor(e){this.t=e,this.currentUser=Nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ee(this.o===void 0,42304);let s=this.i;const i=u=>this.i!==s?(s=this.i,n(u)):Promise.resolve();let r=new mi;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new mi,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const u=r;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new mi)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ee(typeof s.accessToken=="string",31837,{l:s}),new lR(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string",2055,{h:e}),new Nt(e)}}class h4{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Nt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class f4{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new h4(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class NT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class d4{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ee(this.o===void 0,3512);const s=r=>{r.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.m;return this.m=r.token,F("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>s(r))};const i=r=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>i(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?i(r):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new NT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ee(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new NT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=m4(40);for(let r=0;r<i.length;++r)s.length<20&&i[r]<n&&(s+=e.charAt(i[r]%62))}return s}}function de(t,e){return t<e?-1:t>e?1:0}function Sg(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const i=t.charAt(s),r=e.charAt(s);if(i!==r)return Kd(i)===Kd(r)?de(i,r):Kd(i)?1:-1}return de(t.length,e.length)}const g4=55296,p4=57343;function Kd(t){const e=t.charCodeAt(0);return e>=g4&&e<=p4}function Sa(t,e,n){return t.length===e.length&&t.every((s,i)=>n(s,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="__name__";class Un{constructor(e,n,s){n===void 0?n=0:n>e.length&&W(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&W(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Un.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Un?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let i=0;i<s;i++){const r=Un.compareSegments(e.get(i),n.get(i));if(r!==0)return r}return de(e.length,n.length)}static compareSegments(e,n){const s=Un.isNumericId(e),i=Un.isNumericId(n);return s&&!i?-1:!s&&i?1:s&&i?Un.extractNumericId(e).compare(Un.extractNumericId(n)):Sg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return di.fromString(e.substring(4,e.length-2))}}class Ue extends Un{construct(e,n,s){return new Ue(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Q(z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(i=>i.length>0))}return new Ue(n)}static emptyPath(){return new Ue([])}}const _4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends Un{construct(e,n,s){return new St(e,n,s)}static isValidIdentifier(e){return _4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===DT}static keyField(){return new St([DT])}static fromServerFormat(e){const n=[];let s="",i=0;const r=()=>{if(s.length===0)throw new Q(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Q(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Q(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=u,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(s+=l,i++):(r(),i++)}if(r(),a)throw new Q(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new St(n)}static emptyPath(){return new St([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(Ue.fromString(e))}static fromName(e){return new X(Ue.fromString(e).popFirst(5))}static empty(){return new X(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new Ue(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(t,e,n){if(!n)throw new Q(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function v4(t,e,n,s){if(e===!0&&s===!0)throw new Q(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function MT(t){if(!X.isDocumentKey(t))throw new Q(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function uR(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function A_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":W(12329,{type:typeof t})}function Il(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=A_(t);throw new Q(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(t,e){const n={typeString:t};return e&&(n.value=e),n}function su(t,e){if(!uR(t))throw new Q(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const i=e[s].typeString,r="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const a=t[s];if(i&&typeof a!==i){n=`JSON field '${s}' must be a ${i}.`;break}if(r!==void 0&&a!==r.value){n=`Expected '${s}' field to equal '${r.value}'`;break}}if(n)throw new Q(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT=-62135596800,VT=1e6;class xe{static now(){return xe.fromMillis(Date.now())}static fromDate(e){return xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*VT);return new xe(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<xT)throw new Q(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/VT}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(su(e,xe._jsonSchema))return new xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xe._jsonSchemaVersion="firestore/timestamp/1.0",xe._jsonSchema={type:tt("string",xe._jsonSchemaVersion),seconds:tt("number"),nanoseconds:tt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{static fromTimestamp(e){return new ne(e)}static min(){return new ne(new xe(0,0))}static max(){return new ne(new xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl=-1;function E4(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(s===1e9?new xe(n+1,0):new xe(n,s));return new vi(i,X.empty(),e)}function T4(t){return new vi(t.readTime,t.key,Cl)}class vi{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new vi(ne.min(),X.empty(),Cl)}static max(){return new vi(ne.max(),X.empty(),Cl)}}function S4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class b4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ja(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==A4)throw t;F("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&W(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new P((s,i)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(s,i)},this.catchCallback=r=>{this.wrapFailure(n,r).next(s,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):P.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):P.reject(n)}static resolve(e){return new P((n,s)=>{n(e)})}static reject(e){return new P((n,s)=>{s(e)})}static waitFor(e){return new P((n,s)=>{let i=0,r=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++r,a&&r===i&&n()},u=>s(u))}),a=!0,r===i&&n()})}static or(e){let n=P.resolve(!1);for(const s of e)n=n.next(i=>i?P.resolve(i):s());return n}static forEach(e,n){const s=[];return e.forEach((i,r)=>{s.push(n.call(this,i,r))}),this.waitFor(s)}static mapArray(e,n){return new P((s,i)=>{const r=e.length,a=new Array(r);let l=0;for(let u=0;u<r;u++){const c=u;n(e[c]).next(d=>{a[c]=d,++l,l===r&&s(a)},d=>i(d))}})}static doWhile(e,n){return new P((s,i)=>{const r=()=>{e()===!0?n().next(()=>{r()},i):s()};r()})}}function w4(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function qa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}gf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_=-1;function pf(t){return t==null}function Ah(t){return t===0&&1/t==-1/0}function R4(t){return typeof t=="number"&&Number.isInteger(t)&&!Ah(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="";function I4(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=kT(e)),e=C4(t.get(n),e);return kT(e)}function C4(t,e){let n=e;const s=t.length;for(let i=0;i<s;i++){const r=t.charAt(i);switch(r){case"\0":n+="";break;case cR:n+="";break;default:n+=r}}return n}function kT(t){return t+cR+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function pr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function hR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){this.comparator=e,this.root=n||vt.EMPTY}insert(e,n){return new ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vt.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $u(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $u(this.root,e,this.comparator,!1)}getReverseIterator(){return new $u(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $u(this.root,e,this.comparator,!0)}}class $u{constructor(e,n,s,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?s(e.key,n):1,n&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vt{constructor(e,n,s,i,r){this.key=e,this.value=n,this.color=s??vt.RED,this.left=i??vt.EMPTY,this.right=r??vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,i,r){return new vt(e??this.key,n??this.value,s??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let i=this;const r=s(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,n,s),null):r===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return vt.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw W(43730,{key:this.key,value:this.value});if(this.right.isRed())throw W(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw W(27949);return e+(this.isRed()?0:1)}}vt.EMPTY=null,vt.RED=!0,vt.BLACK=!1;vt.EMPTY=new class{constructor(){this.size=0}get key(){throw W(57766)}get value(){throw W(16141)}get color(){throw W(16727)}get left(){throw W(29726)}get right(){throw W(36894)}copy(e,n,s,i,r){return this}insert(e,n,s){return new vt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new LT(this.data.getIterator())}getIteratorFrom(e){return new LT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof ot)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ot(this.comparator);return n.data=e,n}}class LT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new Nn([])}unionWith(e){let n=new ot(St.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Nn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Sa(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new fR("Invalid base64 string: "+r):r}}(e);return new Rt(n)}static fromUint8Array(e){const n=function(i){let r="";for(let a=0;a<i.length;++a)r+=String.fromCharCode(i[a]);return r}(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const O4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ei(t){if(Ee(!!t,39018),typeof t=="string"){let e=0;const n=O4.exec(t);if(Ee(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:$e(t.seconds),nanos:$e(t.nanos)}}function $e(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ti(t){return typeof t=="string"?Rt.fromBase64String(t):Rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="server_timestamp",mR="__type__",gR="__previous_value__",pR="__local_write_time__";function w_(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[mR])==null?void 0:s.stringValue)===dR}function _f(t){const e=t.mapValue.fields[gR];return w_(e)?_f(e):e}function Ol(t){const e=Ei(t.mapValue.fields[pR].timestampValue);return new xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e,n,s,i,r,a,l,u,c,d,m){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=d,this.apiKey=m}}const bh="(default)";class Nl{constructor(e,n){this.projectId=e,this.database=n||bh}static empty(){return new Nl("","")}get isDefaultDatabase(){return this.database===bh}isEqual(e){return e instanceof Nl&&e.projectId===this.projectId&&e.database===this.database}}function D4(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Q(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nl(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R="__type__",M4="__max__",Gu={mapValue:{}},yR="__vector__",wh="value";function Si(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?w_(t)?4:V4(t)?9007199254740991:x4(t)?10:11:W(28295,{value:t})}function Qn(t,e){if(t===e)return!0;const n=Si(t);if(n!==Si(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ol(t).isEqual(Ol(e));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const a=Ei(i.timestampValue),l=Ei(r.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,r){return Ti(i.bytesValue).isEqual(Ti(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,r){return $e(i.geoPointValue.latitude)===$e(r.geoPointValue.latitude)&&$e(i.geoPointValue.longitude)===$e(r.geoPointValue.longitude)}(t,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return $e(i.integerValue)===$e(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const a=$e(i.doubleValue),l=$e(r.doubleValue);return a===l?Ah(a)===Ah(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Sa(t.arrayValue.values||[],e.arrayValue.values||[],Qn);case 10:case 11:return function(i,r){const a=i.mapValue.fields||{},l=r.mapValue.fields||{};if(PT(a)!==PT(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Qn(a[u],l[u])))return!1;return!0}(t,e);default:return W(52216,{left:t})}}function Dl(t,e){return(t.values||[]).find(n=>Qn(n,e))!==void 0}function Aa(t,e){if(t===e)return 0;const n=Si(t),s=Si(e);if(n!==s)return de(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return function(r,a){const l=$e(r.integerValue||r.doubleValue),u=$e(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return UT(t.timestampValue,e.timestampValue);case 4:return UT(Ol(t),Ol(e));case 5:return Sg(t.stringValue,e.stringValue);case 6:return function(r,a){const l=Ti(r),u=Ti(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(r,a){const l=r.split("/"),u=a.split("/");for(let c=0;c<l.length&&c<u.length;c++){const d=de(l[c],u[c]);if(d!==0)return d}return de(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,a){const l=de($e(r.latitude),$e(a.latitude));return l!==0?l:de($e(r.longitude),$e(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return zT(t.arrayValue,e.arrayValue);case 10:return function(r,a){var g,p,C,N;const l=r.fields||{},u=a.fields||{},c=(g=l[wh])==null?void 0:g.arrayValue,d=(p=u[wh])==null?void 0:p.arrayValue,m=de(((C=c==null?void 0:c.values)==null?void 0:C.length)||0,((N=d==null?void 0:d.values)==null?void 0:N.length)||0);return m!==0?m:zT(c,d)}(t.mapValue,e.mapValue);case 11:return function(r,a){if(r===Gu.mapValue&&a===Gu.mapValue)return 0;if(r===Gu.mapValue)return 1;if(a===Gu.mapValue)return-1;const l=r.fields||{},u=Object.keys(l),c=a.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let m=0;m<u.length&&m<d.length;++m){const g=Sg(u[m],d[m]);if(g!==0)return g;const p=Aa(l[u[m]],c[d[m]]);if(p!==0)return p}return de(u.length,d.length)}(t.mapValue,e.mapValue);default:throw W(23264,{he:n})}}function UT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);const n=Ei(t),s=Ei(e),i=de(n.seconds,s.seconds);return i!==0?i:de(n.nanos,s.nanos)}function zT(t,e){const n=t.values||[],s=e.values||[];for(let i=0;i<n.length&&i<s.length;++i){const r=Aa(n[i],s[i]);if(r)return r}return de(n.length,s.length)}function ba(t){return Ag(t)}function Ag(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=Ei(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ti(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",i=!0;for(const r of n.values||[])i?i=!1:s+=",",s+=Ag(r);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let i="{",r=!0;for(const a of s)r?r=!1:i+=",",i+=`${a}:${Ag(n.fields[a])}`;return i+"}"}(t.mapValue):W(61005,{value:t})}function wc(t){switch(Si(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_f(t);return e?16+wc(e):16;case 5:return 2*t.stringValue.length;case 6:return Ti(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((i,r)=>i+wc(r),0)}(t.arrayValue);case 10:case 11:return function(s){let i=0;return pr(s.fields,(r,a)=>{i+=r.length+wc(a)}),i}(t.mapValue);default:throw W(13486,{value:t})}}function bg(t){return!!t&&"integerValue"in t}function R_(t){return!!t&&"arrayValue"in t}function BT(t){return!!t&&"nullValue"in t}function jT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Rc(t){return!!t&&"mapValue"in t}function x4(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[_R])==null?void 0:s.stringValue)===yR}function nl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return pr(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=nl(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nl(t.arrayValue.values[n]);return e}return{...t}}function V4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===M4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Rc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nl(n)}setAll(e){let n=St.emptyPath(),s={},i=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,s,i),s={},i=[],n=l.popLast()}a?s[l.lastSegment()]=nl(a):i.push(l.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,s,i)}delete(e){const n=this.field(e.popLast());Rc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=n.mapValue.fields[e.get(s)];Rc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,s){pr(n,(i,r)=>e[i]=r);for(const i of s)delete e[i]}clone(){return new vn(nl(this.value))}}function vR(t){const e=[];return pr(t.fields,(n,s)=>{const i=new St([n]);if(Rc(s)){const r=vR(s.mapValue).fields;if(r.length===0)e.push(i);else for(const a of r)e.push(i.child(a))}else e.push(i)}),new Nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n,s,i,r,a,l){this.key=e,this.documentType=n,this.version=s,this.readTime=i,this.createTime=r,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Dt(e,0,ne.min(),ne.min(),ne.min(),vn.empty(),0)}static newFoundDocument(e,n,s,i){return new Dt(e,1,n,ne.min(),s,i,0)}static newNoDocument(e,n){return new Dt(e,2,n,ne.min(),ne.min(),vn.empty(),0)}static newUnknownDocument(e,n){return new Dt(e,3,n,ne.min(),ne.min(),vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){this.position=e,this.inclusive=n}}function qT(t,e,n){let s=0;for(let i=0;i<t.position.length;i++){const r=e[i],a=t.position[i];if(r.field.isKeyField()?s=X.comparator(X.fromName(a.referenceValue),n.key):s=Aa(a,n.data.field(r.field)),r.dir==="desc"&&(s*=-1),s!==0)break}return s}function HT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n="asc"){this.field=e,this.dir=n}}function k4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{}class at extends ER{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new L4(e,n,s):n==="array-contains"?new B4(e,s):n==="in"?new j4(e,s):n==="not-in"?new q4(e,s):n==="array-contains-any"?new H4(e,s):new at(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new U4(e,s):new z4(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Aa(n,this.value)):n!==null&&Si(this.value)===Si(n)&&this.matchesComparison(Aa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return W(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yn extends ER{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Yn(e,n)}matches(e){return TR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function TR(t){return t.op==="and"}function SR(t){return P4(t)&&TR(t)}function P4(t){for(const e of t.filters)if(e instanceof Yn)return!1;return!0}function wg(t){if(t instanceof at)return t.field.canonicalString()+t.op.toString()+ba(t.value);if(SR(t))return t.filters.map(e=>wg(e)).join(",");{const e=t.filters.map(n=>wg(n)).join(",");return`${t.op}(${e})`}}function AR(t,e){return t instanceof at?function(s,i){return i instanceof at&&s.op===i.op&&s.field.isEqual(i.field)&&Qn(s.value,i.value)}(t,e):t instanceof Yn?function(s,i){return i instanceof Yn&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((r,a,l)=>r&&AR(a,i.filters[l]),!0):!1}(t,e):void W(19439)}function bR(t){return t instanceof at?function(n){return`${n.field.canonicalString()} ${n.op} ${ba(n.value)}`}(t):t instanceof Yn?function(n){return n.op.toString()+" {"+n.getFilters().map(bR).join(" ,")+"}"}(t):"Filter"}class L4 extends at{constructor(e,n,s){super(e,n,s),this.key=X.fromName(s.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class U4 extends at{constructor(e,n){super(e,"in",n),this.keys=wR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class z4 extends at{constructor(e,n){super(e,"not-in",n),this.keys=wR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function wR(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(s=>X.fromName(s.referenceValue))}class B4 extends at{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return R_(n)&&Dl(n.arrayValue,this.value)}}class j4 extends at{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Dl(this.value.arrayValue,n)}}class q4 extends at{constructor(e,n){super(e,"not-in",n)}matches(e){if(Dl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Dl(this.value.arrayValue,n)}}class H4 extends at{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!R_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Dl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e,n=null,s=[],i=[],r=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=r,this.startAt=a,this.endAt=l,this.Te=null}}function FT(t,e=null,n=[],s=[],i=null,r=null,a=null){return new F4(t,e,n,s,i,r,a)}function I_(t){const e=se(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>wg(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),pf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>ba(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>ba(s)).join(",")),e.Te=n}return e.Te}function C_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!k4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!AR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!HT(t.startAt,e.startAt)&&HT(t.endAt,e.endAt)}function Rg(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,n=null,s=[],i=[],r=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=r,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function $4(t,e,n,s,i,r,a,l){return new yf(t,e,n,s,i,r,a,l)}function O_(t){return new yf(t)}function $T(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function G4(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function K4(t){return t.collectionGroup!==null}function sl(t){const e=se(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),n.add(r.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new ot(St.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new Ih(r,s))}),n.has(St.keyField().canonicalString())||e.Ie.push(new Ih(St.keyField(),s))}return e.Ie}function $n(t){const e=se(t);return e.Ee||(e.Ee=Q4(e,sl(t))),e.Ee}function Q4(t,e){if(t.limitType==="F")return FT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const r=i.dir==="desc"?"asc":"desc";return new Ih(i.field,r)});const n=t.endAt?new Rh(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Rh(t.startAt.position,t.startAt.inclusive):null;return FT(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Ig(t,e,n){return new yf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vf(t,e){return C_($n(t),$n(e))&&t.limitType===e.limitType}function RR(t){return`${I_($n(t))}|lt:${t.limitType}`}function kr(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(i=>bR(i)).join(", ")}]`),pf(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(i=>ba(i)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(i=>ba(i)).join(",")),`Target(${s})`}($n(t))}; limitType=${t.limitType})`}function Ef(t,e){return e.isFoundDocument()&&function(s,i){const r=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(r):X.isDocumentKey(s.path)?s.path.isEqual(r):s.path.isImmediateParentOf(r)}(t,e)&&function(s,i){for(const r of sl(s))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(t,e)&&function(s,i){for(const r of s.filters)if(!r.matches(i))return!1;return!0}(t,e)&&function(s,i){return!(s.startAt&&!function(a,l,u){const c=qT(a,l,u);return a.inclusive?c<=0:c<0}(s.startAt,sl(s),i)||s.endAt&&!function(a,l,u){const c=qT(a,l,u);return a.inclusive?c>=0:c>0}(s.endAt,sl(s),i))}(t,e)}function Y4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function IR(t){return(e,n)=>{let s=!1;for(const i of sl(t)){const r=X4(i,e,n);if(r!==0)return r;s=s||i.field.isKeyField()}return 0}}function X4(t,e,n){const s=t.field.isKeyField()?X.comparator(e.key,n.key):function(r,a,l){const u=a.data.field(r),c=l.data.field(r);return u!==null&&c!==null?Aa(u,c):W(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return W(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[i,r]of s)if(this.equalsFn(i,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pr(this.inner,(n,s)=>{for(const[i,r]of s)e(i,r)})}isEmpty(){return hR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=new ze(X.comparator);function Is(){return J4}const CR=new ze(X.comparator);function Vo(...t){let e=CR;for(const n of t)e=e.insert(n.key,n);return e}function OR(t){let e=CR;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Gi(){return il()}function NR(){return il()}function il(){return new _r(t=>t.toString(),(t,e)=>t.isEqual(e))}const W4=new ze(X.comparator),Z4=new ot(X.comparator);function me(...t){let e=Z4;for(const n of t)e=e.add(n);return e}const ek=new ot(de);function tk(){return ek}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ah(e)?"-0":e}}function DR(t){return{integerValue:""+t}}function MR(t,e){return R4(e)?DR(e):N_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(){this._=void 0}}function nk(t,e,n){return t instanceof Ch?function(i,r){const a={fields:{[mR]:{stringValue:dR},[pR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&w_(r)&&(r=_f(r)),r&&(a.fields[gR]=r),{mapValue:a}}(n,e):t instanceof Ml?VR(t,e):t instanceof xl?kR(t,e):function(i,r){const a=xR(i,r),l=GT(a)+GT(i.Ae);return bg(a)&&bg(i.Ae)?DR(l):N_(i.serializer,l)}(t,e)}function sk(t,e,n){return t instanceof Ml?VR(t,e):t instanceof xl?kR(t,e):n}function xR(t,e){return t instanceof Vl?function(s){return bg(s)||function(r){return!!r&&"doubleValue"in r}(s)}(e)?e:{integerValue:0}:null}class Ch extends Tf{}class Ml extends Tf{constructor(e){super(),this.elements=e}}function VR(t,e){const n=PR(e);for(const s of t.elements)n.some(i=>Qn(i,s))||n.push(s);return{arrayValue:{values:n}}}class xl extends Tf{constructor(e){super(),this.elements=e}}function kR(t,e){let n=PR(e);for(const s of t.elements)n=n.filter(i=>!Qn(i,s));return{arrayValue:{values:n}}}class Vl extends Tf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function GT(t){return $e(t.integerValue||t.doubleValue)}function PR(t){return R_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,n){this.field=e,this.transform=n}}function rk(t,e){return t.field.isEqual(e.field)&&function(s,i){return s instanceof Ml&&i instanceof Ml||s instanceof xl&&i instanceof xl?Sa(s.elements,i.elements,Qn):s instanceof Vl&&i instanceof Vl?Qn(s.Ae,i.Ae):s instanceof Ch&&i instanceof Ch}(t.transform,e.transform)}class ak{constructor(e,n){this.version=e,this.transformResults=n}}class ys{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ys}static exists(e){return new ys(void 0,e)}static updateTime(e){return new ys(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ic(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Sf{}function LR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new zR(t.key,ys.none()):new iu(t.key,t.data,ys.none());{const n=t.data,s=vn.empty();let i=new ot(St.comparator);for(let r of e.fields)if(!i.has(r)){let a=n.field(r);a===null&&r.length>1&&(r=r.popLast(),a=n.field(r)),a===null?s.delete(r):s.set(r,a),i=i.add(r)}return new yr(t.key,s,new Nn(i.toArray()),ys.none())}}function ok(t,e,n){t instanceof iu?function(i,r,a){const l=i.value.clone(),u=QT(i.fieldTransforms,r,a.transformResults);l.setAll(u),r.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof yr?function(i,r,a){if(!Ic(i.precondition,r))return void r.convertToUnknownDocument(a.version);const l=QT(i.fieldTransforms,r,a.transformResults),u=r.data;u.setAll(UR(i)),u.setAll(l),r.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(i,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function rl(t,e,n,s){return t instanceof iu?function(r,a,l,u){if(!Ic(r.precondition,a))return l;const c=r.value.clone(),d=YT(r.fieldTransforms,u,a);return c.setAll(d),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,n,s):t instanceof yr?function(r,a,l,u){if(!Ic(r.precondition,a))return l;const c=YT(r.fieldTransforms,u,a),d=a.data;return d.setAll(UR(r)),d.setAll(c),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(m=>m.field))}(t,e,n,s):function(r,a,l){return Ic(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function lk(t,e){let n=null;for(const s of t.fieldTransforms){const i=e.data.field(s.field),r=xR(s.transform,i||null);r!=null&&(n===null&&(n=vn.empty()),n.set(s.field,r))}return n||null}function KT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&Sa(s,i,(r,a)=>rk(r,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class iu extends Sf{constructor(e,n,s,i=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class yr extends Sf{constructor(e,n,s,i,r=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function UR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function QT(t,e,n){const s=new Map;Ee(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const r=t[i],a=r.transform,l=e.data.field(r.field);s.set(r.field,sk(a,l,n[i]))}return s}function YT(t,e,n){const s=new Map;for(const i of t){const r=i.transform,a=n.data.field(i.field);s.set(i.field,nk(r,a,e))}return s}class zR extends Sf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uk extends Sf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,n,s,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(e.key)&&ok(r,e,s[i])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=rl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=rl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=NR();return this.mutations.forEach(i=>{const r=e.get(i.key),a=r.overlayedDocument;let l=this.applyToLocalView(a,r.mutatedFields);l=n.has(i.key)?null:l;const u=LR(a,l);u!==null&&s.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(ne.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&Sa(this.mutations,e.mutations,(n,s)=>KT(n,s))&&Sa(this.baseMutations,e.baseMutations,(n,s)=>KT(n,s))}}class D_{constructor(e,n,s,i){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(e,n,s){Ee(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let i=function(){return W4}();const r=e.mutations;for(let a=0;a<r.length;a++)i=i.insert(r[a].key,s[a].version);return new D_(e,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe,_e;function dk(t){switch(t){case z.OK:return W(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return W(15467,{code:t})}}function BR(t){if(t===void 0)return Rs("GRPC error has no .code"),z.UNKNOWN;switch(t){case Xe.OK:return z.OK;case Xe.CANCELLED:return z.CANCELLED;case Xe.UNKNOWN:return z.UNKNOWN;case Xe.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case Xe.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case Xe.INTERNAL:return z.INTERNAL;case Xe.UNAVAILABLE:return z.UNAVAILABLE;case Xe.UNAUTHENTICATED:return z.UNAUTHENTICATED;case Xe.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case Xe.NOT_FOUND:return z.NOT_FOUND;case Xe.ALREADY_EXISTS:return z.ALREADY_EXISTS;case Xe.PERMISSION_DENIED:return z.PERMISSION_DENIED;case Xe.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case Xe.ABORTED:return z.ABORTED;case Xe.OUT_OF_RANGE:return z.OUT_OF_RANGE;case Xe.UNIMPLEMENTED:return z.UNIMPLEMENTED;case Xe.DATA_LOSS:return z.DATA_LOSS;default:return W(39323,{code:t})}}(_e=Xe||(Xe={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=new di([4294967295,4294967295],0);function XT(t){const e=mk().encode(t),n=new tR;return n.update(e),new Uint8Array(n.digest())}function JT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new di([n,s],0),new di([i,r],0)]}class M_{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new ko(`Invalid padding: ${n}`);if(s<0)throw new ko(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ko(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new ko(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=di.fromNumber(this.ge)}ye(e,n,s){let i=e.add(n.multiply(di.fromNumber(s)));return i.compare(gk)===1&&(i=new di([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=XT(e),[s,i]=JT(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(s,i,r);if(!this.we(a))return!1}return!0}static create(e,n,s){const i=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),a=new M_(r,i,n);return s.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=XT(e),[s,i]=JT(n);for(let r=0;r<this.hashCount;r++){const a=this.ye(s,i,r);this.be(a)}}be(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class ko extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,n,s,i,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const i=new Map;return i.set(e,ru.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Af(ne.min(),i,new ze(de),Is(),me())}}class ru{constructor(e,n,s,i,r){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new ru(s,n,me(),me(),me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,n,s,i){this.Se=e,this.removedTargetIds=n,this.key=s,this.De=i}}class jR{constructor(e,n){this.targetId=e,this.Ce=n}}class qR{constructor(e,n,s=Rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=i}}class WT{constructor(){this.ve=0,this.Fe=ZT(),this.Me=Rt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=me(),n=me(),s=me();return this.Fe.forEach((i,r)=>{switch(r){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:W(38017,{changeType:r})}}),new ru(this.Me,this.xe,e,n,s)}Ke(){this.Oe=!1,this.Fe=ZT()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ee(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class pk{constructor(e){this.Ge=e,this.ze=new Map,this.je=Is(),this.He=Ku(),this.Je=Ku(),this.Ze=new ze(de)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:W(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,s=e.Ce.count,i=this.ot(n);if(i){const r=i.target;if(Rg(r))if(s===0){const a=new X(r.path);this.et(n,a,Dt.newNoDocument(a,ne.min()))}else Ee(s===1,20013,{expectedCount:s});else{const a=this._t(n);if(a!==s){const l=this.ut(e),u=l?this.ct(l,e,a):1;if(u!==0){this.it(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:r=0}=n;let a,l;try{a=Ti(s).toUint8Array()}catch(u){if(u instanceof fR)return ur("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new M_(a,i,r)}catch(u){return ur(u instanceof ko?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let i=0;return s.forEach(r=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;e.mightContain(l)||(this.et(n,r,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((r,a)=>{const l=this.ot(a);if(l){if(r.current&&Rg(l.target)){const u=new X(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,Dt.newNoDocument(u,e))}r.Be&&(n.set(a,r.ke()),r.Ke())}});let s=me();this.Je.forEach((r,a)=>{let l=!0;a.forEachWhile(u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(r))}),this.je.forEach((r,a)=>a.setReadTime(e));const i=new Af(e,n,this.Ze,this.je,s);return this.je=Is(),this.He=Ku(),this.Je=Ku(),this.Ze=new ze(de),i}Ye(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,s),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new WT,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new ot(de),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new ot(de),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new WT),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ku(){return new ze(X.comparator)}function ZT(){return new ze(X.comparator)}const _k={asc:"ASCENDING",desc:"DESCENDING"},yk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vk={and:"AND",or:"OR"};class Ek{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Cg(t,e){return t.useProto3Json||pf(e)?e:{value:e}}function Oh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Tk(t,e){return Oh(t,e.toTimestamp())}function Gn(t){return Ee(!!t,49232),ne.fromTimestamp(function(n){const s=Ei(n);return new xe(s.seconds,s.nanos)}(t))}function x_(t,e){return Og(t,e).canonicalString()}function Og(t,e){const n=function(i){return new Ue(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function FR(t){const e=Ue.fromString(t);return Ee(YR(e),10190,{key:e.toString()}),e}function Ng(t,e){return x_(t.databaseId,e.path)}function Qd(t,e){const n=FR(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(GR(n))}function $R(t,e){return x_(t.databaseId,e)}function Sk(t){const e=FR(t);return e.length===4?Ue.emptyPath():GR(e)}function Dg(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function GR(t){return Ee(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function e0(t,e,n){return{name:Ng(t,e),fields:n.value.mapValue.fields}}function Ak(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:W(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],r=function(c,d){return c.useProto3Json?(Ee(d===void 0||typeof d=="string",58123),Rt.fromBase64String(d||"")):(Ee(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Rt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(c){const d=c.code===void 0?z.UNKNOWN:BR(c.code);return new Q(d,c.message||"")}(a);n=new qR(s,i,r,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=Qd(t,s.document.name),r=Gn(s.document.updateTime),a=s.document.createTime?Gn(s.document.createTime):ne.min(),l=new vn({mapValue:{fields:s.document.fields}}),u=Dt.newFoundDocument(i,r,a,l),c=s.targetIds||[],d=s.removedTargetIds||[];n=new Cc(c,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=Qd(t,s.document),r=s.readTime?Gn(s.readTime):ne.min(),a=Dt.newNoDocument(i,r),l=s.removedTargetIds||[];n=new Cc([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=Qd(t,s.document),r=s.removedTargetIds||[];n=new Cc([],r,i,null)}else{if(!("filter"in e))return W(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:r}=s,a=new fk(i,r),l=s.targetId;n=new jR(l,a)}}return n}function bk(t,e){let n;if(e instanceof iu)n={update:e0(t,e.key,e.value)};else if(e instanceof zR)n={delete:Ng(t,e.key)};else if(e instanceof yr)n={update:e0(t,e.key,e.data),updateMask:xk(e.fieldMask)};else{if(!(e instanceof uk))return W(16599,{dt:e.type});n={verify:Ng(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(r,a){const l=a.transform;if(l instanceof Ch)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ml)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof xl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Vl)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw W(20930,{transform:a.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:Tk(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:W(27497)}(t,e.precondition)),n}function wk(t,e){return t&&t.length>0?(Ee(e!==void 0,14353),t.map(n=>function(i,r){let a=i.updateTime?Gn(i.updateTime):Gn(r);return a.isEqual(ne.min())&&(a=Gn(r)),new ak(a,i.transformResults||[])}(n,e))):[]}function Rk(t,e){return{documents:[$R(t,e.path)]}}function Ik(t,e){const n={structuredQuery:{}},s=e.path;let i;e.collectionGroup!==null?(i=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=$R(t,i);const r=function(c){if(c.length!==0)return QR(Yn.create(c,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const a=function(c){if(c.length!==0)return c.map(d=>function(g){return{field:Pr(g.field),direction:Nk(g.dir)}}(d))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Cg(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:i}}function Ck(t){let e=Sk(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){Ee(s===1,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let r=[];n.where&&(r=function(m){const g=KR(m);return g instanceof Yn&&SR(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(g=>function(C){return new Ih(Lr(C.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,pf(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,p=m.values||[];return new Rh(p,g)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const g=!m.before,p=m.values||[];return new Rh(p,g)}(n.endAt)),$4(e,i,a,r,l,"F",u,c)}function Ok(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function KR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Lr(n.unaryFilter.field);return at.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=Lr(n.unaryFilter.field);return at.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Lr(n.unaryFilter.field);return at.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Lr(n.unaryFilter.field);return at.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return W(61313);default:return W(60726)}}(t):t.fieldFilter!==void 0?function(n){return at.create(Lr(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return W(58110);default:return W(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Yn.create(n.compositeFilter.filters.map(s=>KR(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return W(1026)}}(n.compositeFilter.op))}(t):W(30097,{filter:t})}function Nk(t){return _k[t]}function Dk(t){return yk[t]}function Mk(t){return vk[t]}function Pr(t){return{fieldPath:t.canonicalString()}}function Lr(t){return St.fromServerFormat(t.fieldPath)}function QR(t){return t instanceof at?function(n){if(n.op==="=="){if(jT(n.value))return{unaryFilter:{field:Pr(n.field),op:"IS_NAN"}};if(BT(n.value))return{unaryFilter:{field:Pr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(jT(n.value))return{unaryFilter:{field:Pr(n.field),op:"IS_NOT_NAN"}};if(BT(n.value))return{unaryFilter:{field:Pr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pr(n.field),op:Dk(n.op),value:n.value}}}(t):t instanceof Yn?function(n){const s=n.getFilters().map(i=>QR(i));return s.length===1?s[0]:{compositeFilter:{op:Mk(n.op),filters:s}}}(t):W(54877,{filter:t})}function xk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function YR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function XR(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n,s,i,r=ne.min(),a=ne.min(),l=Rt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new ei(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e){this.yt=e}}function kk(t){const e=Ck({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ig(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(){this.Sn=new Lk}addToCollectionParentIndex(e,n){return this.Sn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(vi.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(vi.min())}updateCollectionGroup(e,n,s){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}}class Lk{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n]||new ot(Ue.comparator),r=!i.has(s);return this.index[n]=i.add(s),r}has(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(e){return(this.index[e]||new ot(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},JR=41943040;class Ft{static withCacheSize(e){return new Ft(e,Ft.DEFAULT_COLLECTION_PERCENTILE,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ft.DEFAULT_COLLECTION_PERCENTILE=10,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ft.DEFAULT=new Ft(JR,Ft.DEFAULT_COLLECTION_PERCENTILE,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ft.DISABLED=new Ft(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new wa(0)}static ar(){return new wa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="LruGarbageCollector",Uk=1048576;function s0([t,e],[n,s]){const i=de(t,n);return i===0?de(e,s):i}class zk{constructor(e){this.Pr=e,this.buffer=new ot(s0),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();s0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Bk{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){F(n0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){qa(n)?F(n0,"Ignoring IndexedDB error during garbage collection: ",n):await ja(n)}await this.Ar(3e5)})}}class jk{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return P.resolve(gf.ce);const s=new zk(n);return this.Vr.forEachTarget(e,i=>s.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>s.Er(i))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.Vr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(t0)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),t0):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let s,i,r,a,l,u,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,a=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(s=m,l=Date.now(),this.removeTargets(e,s,n))).next(m=>(r=m,u=Date.now(),this.removeOrphanedDocuments(e,s))).next(m=>(c=Date.now(),Vr()<=fe.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${i} in `+(l-a)+`ms
	Removed ${r} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(c-u)+`ms
Total Duration: ${c-d}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:m})))}}function qk(t,e){return new jk(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(){this.changes=new _r(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?P.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,n,s,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(s=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(s!==null&&rl(s.mutation,i,Nn.empty(),xe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,me()).next(()=>s))}getLocalViewOfDocuments(e,n,s=me()){const i=Gi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,s).next(r=>{let a=Vo();return r.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const s=Gi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,me()))}populateOverlays(e,n,s){const i=[];return s.forEach(r=>{n.has(r)||i.push(r)}),this.documentOverlayCache.getOverlays(e,i).next(r=>{r.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,s,i){let r=Is();const a=il(),l=function(){return il()}();return n.forEach((u,c)=>{const d=s.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof yr)?r=r.insert(c.key,c):d!==void 0?(a.set(c.key,d.mutation.getFieldMask()),rl(d.mutation,c,d.mutation.getFieldMask(),xe.now())):a.set(c.key,Nn.empty())}),this.recalculateAndSaveOverlays(e,r).next(u=>(u.forEach((c,d)=>a.set(c,d)),n.forEach((c,d)=>l.set(c,new Fk(d,a.get(c)??null))),l))}recalculateAndSaveOverlays(e,n){const s=il();let i=new ze((a,l)=>a-l),r=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let d=s.get(u)||Nn.empty();d=l.applyToLocalView(c,d),s.set(u,d);const m=(i.get(l.batchId)||me()).add(u);i=i.insert(l.batchId,m)})}).next(()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,d=u.value,m=NR();d.forEach(g=>{if(!r.has(g)){const p=LR(n.get(g),s.get(g));p!==null&&m.set(g,p),r=r.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,m))}return P.waitFor(a)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,i){return G4(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):K4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,i):this.getDocumentsMatchingCollectionQuery(e,n,s,i)}getNextDocuments(e,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,i).next(r=>{const a=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,i-r.size):P.resolve(Gi());let l=Cl,u=r;return a.next(c=>P.forEach(c,(d,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),r.get(d)?P.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{u=u.insert(d,g)}))).next(()=>this.populateOverlays(e,c,r)).next(()=>this.computeViews(e,u,c,me())).next(d=>({batchId:l,changes:OR(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(s=>{let i=Vo();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,s,i){const r=n.collectionGroup;let a=Vo();return this.indexManager.getCollectionParents(e,r).next(l=>P.forEach(l,u=>{const c=function(m,g){return new yf(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(r));return this.getDocumentsMatchingCollectionQuery(e,c,s,i).next(d=>{d.forEach((m,g)=>{a=a.insert(m,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,s,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,r,i))).next(a=>{r.forEach((u,c)=>{const d=c.getKey();a.get(d)===null&&(a=a.insert(d,Dt.newInvalidDocument(d)))});let l=Vo();return a.forEach((u,c)=>{const d=r.get(u);d!==void 0&&rl(d.mutation,c,Nn.empty(),xe.now()),Ef(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return P.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Gn(i.createTime)}}(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(i){return{name:i.name,query:kk(i.bundledQuery),readTime:Gn(i.readTime)}}(n)),P.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(){this.overlays=new ze(X.comparator),this.Lr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Gi();return P.forEach(n,i=>this.getOverlay(e,i).next(r=>{r!==null&&s.set(i,r)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((i,r)=>{this.bt(e,n,r)}),P.resolve()}removeOverlaysForBatchId(e,n,s){const i=this.Lr.get(s);return i!==void 0&&(i.forEach(r=>this.overlays=this.overlays.remove(r)),this.Lr.delete(s)),P.resolve()}getOverlaysForCollection(e,n,s){const i=Gi(),r=n.length+1,a=new X(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===r&&u.largestBatchId>s&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,s,i){let r=new ze((c,d)=>c-d);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>s){let d=r.get(c.largestBatchId);d===null&&(d=Gi(),r=r.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const l=Gi(),u=r.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>l.set(c,d)),!(l.size()>=i)););return P.resolve(l)}bt(e,n,s){const i=this.overlays.get(s.key);if(i!==null){const a=this.Lr.get(i.largestBatchId).delete(s.key);this.Lr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(s.key,new hk(n,s));let r=this.Lr.get(n);r===void 0&&(r=me(),this.Lr.set(n,r)),this.Lr.set(n,r.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(){this.kr=new ot(ht.Kr),this.qr=new ot(ht.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const s=new ht(e,n);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Wr(new ht(e,n))}Qr(e,n){e.forEach(s=>this.removeReference(s,n))}Gr(e){const n=new X(new Ue([])),s=new ht(n,e),i=new ht(n,e+1),r=[];return this.qr.forEachInRange([s,i],a=>{this.Wr(a),r.push(a.key)}),r}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new X(new Ue([])),s=new ht(n,e),i=new ht(n,e+1);let r=me();return this.qr.forEachInRange([s,i],a=>{r=r.add(a.key)}),r}containsKey(e){const n=new ht(e,0),s=this.kr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class ht{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return X.comparator(e.key,n.key)||de(e.Hr,n.Hr)}static Ur(e,n){return de(e.Hr,n.Hr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new ot(ht.Kr)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,i){const r=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new ck(r,n,s,i);this.mutationQueue.push(a);for(const l of i)this.Jr=this.Jr.add(new ht(l.key,r)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return P.resolve(a)}lookupMutationBatch(e,n){return P.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,i=this.Xr(s),r=i<0?0:i;return P.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?b_:this.Yn-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new ht(n,0),i=new ht(n,Number.POSITIVE_INFINITY),r=[];return this.Jr.forEachInRange([s,i],a=>{const l=this.Zr(a.Hr);r.push(l)}),P.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new ot(de);return n.forEach(i=>{const r=new ht(i,0),a=new ht(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([r,a],l=>{s=s.add(l.Hr)})}),P.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,i=s.length+1;let r=s;X.isDocumentKey(r)||(r=r.child(""));const a=new ht(new X(r),0);let l=new ot(de);return this.Jr.forEachWhile(u=>{const c=u.key.path;return!!s.isPrefixOf(c)&&(c.length===i&&(l=l.add(u.Hr)),!0)},a),P.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach(s=>{const i=this.Zr(s);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ee(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return P.forEach(n.mutations,i=>{const r=new ht(i.key,n.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=s})}nr(e){}containsKey(e,n){const s=new ht(n,0),i=this.Jr.firstAfterOrEqual(s);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e){this.ti=e,this.docs=function(){return new ze(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,i=this.docs.get(s),r=i?i.size:0,a=this.ti(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return P.resolve(s?s.document.mutableCopy():Dt.newInvalidDocument(n))}getEntries(e,n){let s=Is();return n.forEach(i=>{const r=this.docs.get(i);s=s.insert(i,r?r.document.mutableCopy():Dt.newInvalidDocument(i))}),P.resolve(s)}getDocumentsMatchingQuery(e,n,s,i){let r=Is();const a=n.path,l=new X(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||S4(T4(d),s)<=0||(i.has(d.key)||Ef(n,d))&&(r=r.insert(d.key,d.mutableCopy()))}return P.resolve(r)}getAllFromCollectionGroup(e,n,s,i){W(9500)}ni(e,n){return P.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new Jk(this)}getSize(e){return P.resolve(this.size)}}class Jk extends Hk{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(s)}),P.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e){this.persistence=e,this.ri=new _r(n=>I_(n),C_),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.ii=0,this.si=new V_,this.targetCount=0,this.oi=wa._r()}forEachTarget(e,n){return this.ri.forEach((s,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.ii&&(this.ii=n),P.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new wa(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.lr(n),P.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,s){let i=0;const r=[];return this.ri.forEach((a,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.ri.delete(a),r.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),P.waitFor(r).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){const s=this.ri.get(n)||null;return P.resolve(s)}addMatchingKeys(e,n,s){return this.si.$r(n,s),P.resolve()}removeMatchingKeys(e,n,s){this.si.Qr(n,s);const i=this.persistence.referenceDelegate,r=[];return i&&n.forEach(a=>{r.push(i.markPotentiallyOrphaned(e,a))}),P.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),P.resolve()}getMatchingKeysForTargetId(e,n){const s=this.si.jr(n);return P.resolve(s)}containsKey(e,n){return P.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,n){this._i={},this.overlays={},this.ai=new gf(0),this.ui=!1,this.ui=!0,this.ci=new Qk,this.referenceDelegate=e(this),this.li=new Wk(this),this.indexManager=new Pk,this.remoteDocumentCache=function(i){return new Xk(i)}(s=>this.referenceDelegate.hi(s)),this.serializer=new Vk(n),this.Pi=new Gk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Kk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this._i[e.toKey()];return s||(s=new Yk(n,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,s){F("MemoryPersistence","Starting transaction:",e);const i=new Zk(this.ai.next());return this.referenceDelegate.Ti(),s(i).next(r=>this.referenceDelegate.Ii(i).next(()=>r)).toPromise().then(r=>(i.raiseOnCommittedEvent(),r))}Ei(e,n){return P.or(Object.values(this._i).map(s=>()=>s.containsKey(e,n)))}}class Zk extends b4{constructor(e){super(),this.currentSequenceNumber=e}}class k_{constructor(e){this.persistence=e,this.Ri=new V_,this.Ai=null}static Vi(e){return new k_(e)}get di(){if(this.Ai)return this.Ai;throw W(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.di.delete(s.toString()),P.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.di.add(s.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),P.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(i=>this.di.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(r=>this.di.add(r.toString()))}).next(()=>s.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.di,s=>{const i=X.fromPath(s);return this.mi(e,i).next(r=>{r||n.removeEntry(i,ne.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(s=>{s?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return P.or([()=>P.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Nh{constructor(e,n){this.persistence=e,this.fi=new _r(s=>I4(s.path),(s,i)=>s.isEqual(i)),this.garbageCollector=qk(this,n)}static Vi(e,n){return new Nh(e,n)}Ti(){}Ii(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(i=>s+i))}pr(e){let n=0;return this.mr(e,s=>{n++}).next(()=>n)}mr(e,n){return P.forEach(this.fi,(s,i)=>this.wr(e,s,i).next(r=>r?P.resolve():n(i)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.ni(e,a=>this.wr(e,a,n).next(l=>{l||(s++,r.removeEntry(a,ne.min()))})).next(()=>r.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),P.resolve()}removeReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),P.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=wc(e.data.value)),n}wr(e,n,s){return P.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return P.resolve(i!==void 0&&i>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,n,s,i){this.targetId=e,this.fromCache=n,this.Ts=s,this.Is=i}static Es(e,n){let s=me(),i=me();for(const r of n.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new P_(e,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return wD()?8:w4(Mt())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,i){const r={result:null};return this.gs(e,n).next(a=>{r.result=a}).next(()=>{if(!r.result)return this.ps(e,n,i,s).next(a=>{r.result=a})}).next(()=>{if(r.result)return;const a=new eP;return this.ys(e,n,a).next(l=>{if(r.result=l,this.As)return this.ws(e,n,a,l.size)})}).next(()=>r.result)}ws(e,n,s,i){return s.documentReadCount<this.Vs?(Vr()<=fe.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",kr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),P.resolve()):(Vr()<=fe.DEBUG&&F("QueryEngine","Query:",kr(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.ds*i?(Vr()<=fe.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",kr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$n(n))):P.resolve())}gs(e,n){if($T(n))return P.resolve(null);let s=$n(n);return this.indexManager.getIndexType(e,s).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Ig(n,null,"F"),s=$n(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(r=>{const a=me(...r);return this.fs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,s).next(u=>{const c=this.bs(n,l);return this.Ss(n,c,a,u.readTime)?this.gs(e,Ig(n,null,"F")):this.Ds(e,c,n,u)}))})))}ps(e,n,s,i){return $T(n)||i.isEqual(ne.min())?P.resolve(null):this.fs.getDocuments(e,s).next(r=>{const a=this.bs(n,r);return this.Ss(n,a,s,i)?P.resolve(null):(Vr()<=fe.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),kr(n)),this.Ds(e,a,n,E4(i,Cl)).next(l=>l))})}bs(e,n){let s=new ot(IR(e));return n.forEach((i,r)=>{Ef(e,r)&&(s=s.add(r))}),s}Ss(e,n,s,i){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}ys(e,n,s){return Vr()<=fe.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",kr(n)),this.fs.getDocumentsMatchingQuery(e,n,vi.min(),s)}Ds(e,n,s,i){return this.fs.getDocumentsMatchingQuery(e,s,i).next(r=>(n.forEach(a=>{r=r.insert(a.key,a)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="LocalStore",nP=3e8;class sP{constructor(e,n,s,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new ze(de),this.Fs=new _r(r=>I_(r),C_),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $k(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function iP(t,e,n,s){return new sP(t,e,n,s)}async function ZR(t,e){const n=se(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next(r=>(i=r,n.Os(e),n.mutationQueue.getAllMutationBatches(s))).next(r=>{const a=[],l=[];let u=me();for(const c of i){a.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of r){l.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(s,u).next(c=>({Ns:c,removedBatchIds:a,addedBatchIds:l}))})})}function rP(t,e){const n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=e.batch.keys(),r=n.xs.newChangeBuffer({trackRemovals:!0});return function(l,u,c,d){const m=c.batch,g=m.keys();let p=P.resolve();return g.forEach(C=>{p=p.next(()=>d.getEntry(u,C)).next(N=>{const x=c.docVersions.get(C);Ee(x!==null,48541),N.version.compareTo(x)<0&&(m.applyToRemoteDocument(N,c),N.isValidDocument()&&(N.setReadTime(c.commitVersion),d.addEntry(N)))})}),p.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,s,e,r).next(()=>r.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let u=me();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(s,i))})}function eI(t){const e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function aP(t,e){const n=se(t),s=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const a=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const l=[];e.targetChanges.forEach((d,m)=>{const g=i.get(m);if(!g)return;l.push(n.li.removeMatchingKeys(r,d.removedDocuments,m).next(()=>n.li.addMatchingKeys(r,d.addedDocuments,m)));let p=g.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(m)!==null?p=p.withResumeToken(Rt.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,s)),i=i.insert(m,p),function(N,x,S){return N.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=nP?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(g,p,d)&&l.push(n.li.updateTargetData(r,p))});let u=Is(),c=me();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(r,d))}),l.push(oP(r,a,e.documentUpdates).next(d=>{u=d.Bs,c=d.Ls})),!s.isEqual(ne.min())){const d=n.li.getLastRemoteSnapshotVersion(r).next(m=>n.li.setTargetsMetadata(r,r.currentSequenceNumber,s));l.push(d)}return P.waitFor(l).next(()=>a.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,u,c)).next(()=>u)}).then(r=>(n.vs=i,r))}function oP(t,e,n){let s=me(),i=me();return n.forEach(r=>s=s.add(r)),e.getEntries(t,s).next(r=>{let a=Is();return n.forEach((l,u)=>{const c=r.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):F(L_,"Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Bs:a,Ls:i}})}function lP(t,e){const n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=b_),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function uP(t,e){const n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return n.li.getTargetData(s,e).next(r=>r?(i=r,P.resolve(i)):n.li.allocateTargetId(s).next(a=>(i=new ei(e,a,"TargetPurposeListen",s.currentSequenceNumber),n.li.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=n.vs.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(s.targetId,s),n.Fs.set(e,s.targetId)),s})}async function Mg(t,e,n){const s=se(t),i=s.vs.get(e),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,a=>s.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!qa(a))throw a;F(L_,`Failed to update sequence numbers for target ${e}: ${a}`)}s.vs=s.vs.remove(e),s.Fs.delete(i.target)}function i0(t,e,n){const s=se(t);let i=ne.min(),r=me();return s.persistence.runTransaction("Execute query","readwrite",a=>function(u,c,d){const m=se(u),g=m.Fs.get(d);return g!==void 0?P.resolve(m.vs.get(g)):m.li.getTargetData(c,d)}(s,a,$n(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(a,l.targetId).next(u=>{r=u})}).next(()=>s.Cs.getDocumentsMatchingQuery(a,e,n?i:ne.min(),n?r:me())).next(l=>(cP(s,Y4(e),l),{documents:l,ks:r})))}function cP(t,e,n){let s=t.Ms.get(e)||ne.min();n.forEach((i,r)=>{r.readTime.compareTo(s)>0&&(s=r.readTime)}),t.Ms.set(e,s)}class r0{constructor(){this.activeTargetIds=tk()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hP{constructor(){this.vo=new r0,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,s){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new r0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="ConnectivityMonitor";class o0{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){F(a0,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){F(a0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qu=null;function xg(){return Qu===null?Qu=function(){return 268435456+Math.round(2147483648*Math.random())}():Qu++,"0x"+Qu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd="RestConnection",dP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class mP{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${s}/databases/${i}`,this.$o=this.databaseId.database===bh?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Wo(e,n,s,i,r){const a=xg(),l=this.Qo(e,n.toUriEncodedString());F(Yd,`Sending RPC '${e}' ${a}:`,l,s);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,i,r);const{host:c}=new URL(l),d=La(c);return this.zo(e,l,u,s,d).then(m=>(F(Yd,`Received RPC '${e}' ${a}: `,m),m),m=>{throw ur(Yd,`RPC '${e}' ${a} failed with error: `,m,"url: ",l,"request:",s),m})}jo(e,n,s,i,r,a){return this.Wo(e,n,s,i,r)}Go(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ba}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,r)=>e[r]=i),s&&s.headers.forEach((i,r)=>e[r]=i)}Qo(e,n){const s=dP[e];let i=`${this.qo}/v1/${n}:${s}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot="WebChannelConnection",po=(t,e,n)=>{t.listen(e,s=>{try{n(s)}catch(i){setTimeout(()=>{throw i},0)}})};class oa extends mP{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!oa.c_){const e=rR();po(e,iR.STAT_EVENT,n=>{n.stat===Tg.PROXY?F(Ot,"STAT_EVENT: detected buffering proxy"):n.stat===Tg.NOPROXY&&F(Ot,"STAT_EVENT: detected no buffering proxy")}),oa.c_=!0}}zo(e,n,s,i,r){const a=xg();return new Promise((l,u)=>{const c=new nR;c.setWithCredentials(!0),c.listenOnce(sR.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case bc.NO_ERROR:const m=c.getResponseJson();F(Ot,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),l(m);break;case bc.TIMEOUT:F(Ot,`RPC '${e}' ${a} timed out`),u(new Q(z.DEADLINE_EXCEEDED,"Request time out"));break;case bc.HTTP_ERROR:const g=c.getStatus();if(F(Ot,`RPC '${e}' ${a} failed with status:`,g,"response text:",c.getResponseText()),g>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const C=p==null?void 0:p.error;if(C&&C.status&&C.message){const N=function(S){const y=S.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(y)>=0?y:z.UNKNOWN}(C.status);u(new Q(N,C.message))}else u(new Q(z.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new Q(z.UNAVAILABLE,"Connection failed."));break;default:W(9055,{l_:e,streamId:a,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{F(Ot,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(i);F(Ot,`RPC '${e}' ${a} sending request:`,i),c.send(n,"POST",d,s,15)})}T_(e,n,s){const i=xg(),r=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const c=r.join("");F(Ot,`Creating RPC '${e}' stream ${i}: ${c}`,l);const d=a.createWebChannel(c,l);this.I_(d);let m=!1,g=!1;const p=new gP({Ho:C=>{g?F(Ot,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(m||(F(Ot,`Opening RPC '${e}' stream ${i} transport.`),d.open(),m=!0),F(Ot,`RPC '${e}' stream ${i} sending:`,C),d.send(C))},Jo:()=>d.close()});return po(d,xo.EventType.OPEN,()=>{g||(F(Ot,`RPC '${e}' stream ${i} transport opened.`),p.i_())}),po(d,xo.EventType.CLOSE,()=>{g||(g=!0,F(Ot,`RPC '${e}' stream ${i} transport closed`),p.o_(),this.E_(d))}),po(d,xo.EventType.ERROR,C=>{g||(g=!0,ur(Ot,`RPC '${e}' stream ${i} transport errored. Name:`,C.name,"Message:",C.message),p.o_(new Q(z.UNAVAILABLE,"The operation could not be completed")))}),po(d,xo.EventType.MESSAGE,C=>{var N;if(!g){const x=C.data[0];Ee(!!x,16349);const S=x,y=(S==null?void 0:S.error)||((N=S[0])==null?void 0:N.error);if(y){F(Ot,`RPC '${e}' stream ${i} received error:`,y);const b=y.status;let I=function(v){const E=Xe[v];if(E!==void 0)return BR(E)}(b),B=y.message;b==="NOT_FOUND"&&B.includes("database")&&B.includes("does not exist")&&B.includes(this.databaseId.database)&&ur(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),I===void 0&&(I=z.INTERNAL,B="Unknown error status: "+b+" with message "+y.message),g=!0,p.o_(new Q(I,B)),d.close()}else F(Ot,`RPC '${e}' stream ${i} received:`,x),p.__(x)}}),oa.u_(),setTimeout(()=>{p.s_()},0),p}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,s){super.Go(e,n,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return aR()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(t){return new oa(t)}function Xd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(t){return new Ek(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */oa.c_=!1;class tI{constructor(e,n,s=1e3,i=1.5,r=6e4){this.Ci=e,this.timerId=n,this.R_=s,this.A_=i,this.V_=r,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-s);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="PersistentStream";class nI{constructor(e,n,s,i,r,a,l,u){this.Ci=e,this.b_=s,this.S_=i,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new tI(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Rs(n.toString()),Rs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.D_===n&&this.G_(s,i)},s=>{e(()=>{const i=new Q(z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(i)})})}G_(e,n){const s=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{s(()=>this.listener.Zo())}),this.stream.Yo(()=>{s(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{s(()=>this.z_(i))}),this.stream.onMessage(i=>{s(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return F(l0,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(F(l0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _P extends nI{constructor(e,n,s,i,r,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,a),this.serializer=r}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Ak(this.serializer,e),s=function(r){if(!("targetChange"in r))return ne.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?ne.min():a.readTime?Gn(a.readTime):ne.min()}(e);return this.listener.J_(n,s)}Z_(e){const n={};n.database=Dg(this.serializer),n.addTarget=function(r,a){let l;const u=a.target;if(l=Rg(u)?{documents:Rk(r,u)}:{query:Ik(r,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=HR(r,a.resumeToken);const c=Cg(r,a.expectedCount);c!==null&&(l.expectedCount=c)}else if(a.snapshotVersion.compareTo(ne.min())>0){l.readTime=Oh(r,a.snapshotVersion.toTimestamp());const c=Cg(r,a.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const s=Ok(this.serializer,e);s&&(n.labels=s),this.K_(n)}X_(e){const n={};n.database=Dg(this.serializer),n.removeTarget=e,this.K_(n)}}class yP extends nI{constructor(e,n,s,i,r,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,a),this.serializer=r}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=wk(e.writeResults,e.commitTime),s=Gn(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Dg(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>bk(this.serializer,s))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{}class EP extends vP{constructor(e,n,s,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Q(z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.Wo(e,Og(n,s),i,r,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Q(z.UNKNOWN,r.toString())})}jo(e,n,s,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.jo(e,Og(n,s),i,a,l,r)).catch(a=>{throw a.name==="FirebaseError"?(a.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Q(z.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function TP(t,e,n,s){return new EP(t,e,n,s)}class SP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Rs(n),this.aa=!1):F("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr="RemoteStore";class AP{constructor(e,n,s,i,r){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=r,this.Aa.Mo(a=>{s.enqueueAndForget(async()=>{vr(this)&&(F(cr,"Restarting streams for network reachability change."),await async function(u){const c=se(u);c.Ea.add(4),await au(c),c.Va.set("Unknown"),c.Ea.delete(4),await wf(c)}(this))})}),this.Va=new SP(s,i)}}async function wf(t){if(vr(t))for(const e of t.Ra)await e(!0)}async function au(t){for(const e of t.Ra)await e(!1)}function sI(t,e){const n=se(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),j_(n)?B_(n):Ha(n).O_()&&z_(n,e))}function U_(t,e){const n=se(t),s=Ha(n);n.Ia.delete(e),s.O_()&&iI(n,e),n.Ia.size===0&&(s.O_()?s.L_():vr(n)&&n.Va.set("Unknown"))}function z_(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ha(t).Z_(e)}function iI(t,e){t.da.$e(e),Ha(t).X_(e)}function B_(t){t.da=new pk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ha(t).start(),t.Va.ua()}function j_(t){return vr(t)&&!Ha(t).x_()&&t.Ia.size>0}function vr(t){return se(t).Ea.size===0}function rI(t){t.da=void 0}async function bP(t){t.Va.set("Online")}async function wP(t){t.Ia.forEach((e,n)=>{z_(t,e)})}async function RP(t,e){rI(t),j_(t)?(t.Va.ha(e),B_(t)):t.Va.set("Unknown")}async function IP(t,e,n){if(t.Va.set("Online"),e instanceof qR&&e.state===2&&e.cause)try{await async function(i,r){const a=r.cause;for(const l of r.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.Ia.delete(l),i.da.removeTarget(l))}(t,e)}catch(s){F(cr,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Dh(t,s)}else if(e instanceof Cc?t.da.Xe(e):e instanceof jR?t.da.st(e):t.da.tt(e),!n.isEqual(ne.min()))try{const s=await eI(t.localStore);n.compareTo(s)>=0&&await function(r,a){const l=r.da.Tt(a);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=r.Ia.get(c);d&&r.Ia.set(c,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,c)=>{const d=r.Ia.get(u);if(!d)return;r.Ia.set(u,d.withResumeToken(Rt.EMPTY_BYTE_STRING,d.snapshotVersion)),iI(r,u);const m=new ei(d.target,u,c,d.sequenceNumber);z_(r,m)}),r.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(s){F(cr,"Failed to raise snapshot:",s),await Dh(t,s)}}async function Dh(t,e,n){if(!qa(e))throw e;t.Ea.add(1),await au(t),t.Va.set("Offline"),n||(n=()=>eI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{F(cr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await wf(t)})}function aI(t,e){return e().catch(n=>Dh(t,n,e))}async function Rf(t){const e=se(t),n=Ai(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:b_;for(;CP(e);)try{const i=await lP(e.localStore,s);if(i===null){e.Ta.length===0&&n.L_();break}s=i.batchId,OP(e,i)}catch(i){await Dh(e,i)}oI(e)&&lI(e)}function CP(t){return vr(t)&&t.Ta.length<10}function OP(t,e){t.Ta.push(e);const n=Ai(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function oI(t){return vr(t)&&!Ai(t).x_()&&t.Ta.length>0}function lI(t){Ai(t).start()}async function NP(t){Ai(t).ra()}async function DP(t){const e=Ai(t);for(const n of t.Ta)e.ea(n.mutations)}async function MP(t,e,n){const s=t.Ta.shift(),i=D_.from(s,e,n);await aI(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Rf(t)}async function xP(t,e){e&&Ai(t).Y_&&await async function(s,i){if(function(a){return dk(a)&&a!==z.ABORTED}(i.code)){const r=s.Ta.shift();Ai(s).B_(),await aI(s,()=>s.remoteSyncer.rejectFailedWrite(r.batchId,i)),await Rf(s)}}(t,e),oI(t)&&lI(t)}async function u0(t,e){const n=se(t);n.asyncQueue.verifyOperationInProgress(),F(cr,"RemoteStore received new credentials");const s=vr(n);n.Ea.add(3),await au(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await wf(n)}async function VP(t,e){const n=se(t);e?(n.Ea.delete(2),await wf(n)):e||(n.Ea.add(2),await au(n),n.Va.set("Unknown"))}function Ha(t){return t.ma||(t.ma=function(n,s,i){const r=se(n);return r.sa(),new _P(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{Zo:bP.bind(null,t),Yo:wP.bind(null,t),t_:RP.bind(null,t),J_:IP.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),j_(t)?B_(t):t.Va.set("Unknown")):(await t.ma.stop(),rI(t))})),t.ma}function Ai(t){return t.fa||(t.fa=function(n,s,i){const r=se(n);return r.sa(),new yP(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:NP.bind(null,t),t_:xP.bind(null,t),ta:DP.bind(null,t),na:MP.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await Rf(t)):(await t.fa.stop(),t.Ta.length>0&&(F(cr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e,n,s,i,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=r,this.deferred=new mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,i,r){const a=Date.now()+s,l=new q_(e,n,a,i,r);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function H_(t,e){if(Rs("AsyncQueue",`${e}: ${t}`),qa(t))return new Q(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{static emptySet(e){return new la(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||X.comparator(n.key,s.key):(n,s)=>X.comparator(n.key,s.key),this.keyedMap=Vo(),this.sortedSet=new ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof la)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new la;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(){this.ga=new ze(X.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):W(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class Ra{constructor(e,n,s,i,r,a,l,u,c){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,s,i,r){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Ra(e,n,la.emptySet(n),a,s,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class PP{constructor(){this.queries=h0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const i=se(n),r=i.queries;i.queries=h0(),r.forEach((a,l)=>{for(const u of l.ba)u.onError(s)})})(this,new Q(z.ABORTED,"Firestore shutting down"))}}function h0(){return new _r(t=>RR(t),vf)}async function LP(t,e){const n=se(t);let s=3;const i=e.query;let r=n.queries.get(i);r?!r.Sa()&&e.Da()&&(s=2):(r=new kP,s=e.Da()?0:1);try{switch(s){case 0:r.wa=await n.onListen(i,!0);break;case 1:r.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const l=H_(a,`Initialization of query '${kr(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,r),r.ba.push(e),e.va(n.onlineState),r.wa&&e.Fa(r.wa)&&F_(n)}async function UP(t,e){const n=se(t),s=e.query;let i=3;const r=n.queries.get(s);if(r){const a=r.ba.indexOf(e);a>=0&&(r.ba.splice(a,1),r.ba.length===0?i=e.Da()?0:1:!r.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function zP(t,e){const n=se(t);let s=!1;for(const i of e){const r=i.query,a=n.queries.get(r);if(a){for(const l of a.ba)l.Fa(i)&&(s=!0);a.wa=i}}s&&F_(n)}function BP(t,e,n){const s=se(t),i=s.queries.get(e);if(i)for(const r of i.ba)r.onError(n);s.queries.delete(e)}function F_(t){t.Ca.forEach(e=>{e.next()})}var Vg,f0;(f0=Vg||(Vg={})).Ma="default",f0.Cache="cache";class jP{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new Ra(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ra.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Vg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e){this.key=e}}class cI{constructor(e){this.key=e}}class qP{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=me(),this.mutatedKeys=me(),this.eu=IR(e),this.tu=new la(this.eu)}get nu(){return this.Za}ru(e,n){const s=n?n.iu:new c0,i=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,a=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,m)=>{const g=i.get(d),p=Ef(this.query,m)?m:null,C=!!g&&this.mutatedKeys.has(g.key),N=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let x=!1;g&&p?g.data.isEqual(p.data)?C!==N&&(s.track({type:3,doc:p}),x=!0):this.su(g,p)||(s.track({type:2,doc:p}),x=!0,(u&&this.eu(p,u)>0||c&&this.eu(p,c)<0)&&(l=!0)):!g&&p?(s.track({type:0,doc:p}),x=!0):g&&!p&&(s.track({type:1,doc:g}),x=!0,(u||c)&&(l=!0)),x&&(p?(a=a.add(p),r=N?r.add(d):r.delete(d)):(a=a.delete(d),r=r.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),r=r.delete(d.key),s.track({type:1,doc:d})}return{tu:a,iu:s,Ss:l,mutatedKeys:r}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,i){const r=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((d,m)=>function(p,C){const N=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W(20277,{Vt:x})}};return N(p)-N(C)}(d.type,m.type)||this.eu(d.doc,m.doc)),this.ou(s),i=i??!1;const l=n&&!i?this._u():[],u=this.Ya.size===0&&this.current&&!i?1:0,c=u!==this.Xa;return this.Xa=u,a.length!==0||c?{snapshot:new Ra(this.query,e.tu,r,a,e.mutatedKeys,u===0,c,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new c0,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=me(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))});const n=[];return e.forEach(s=>{this.Ya.has(s)||n.push(new cI(s))}),this.Ya.forEach(s=>{e.has(s)||n.push(new uI(s))}),n}cu(e){this.Za=e.ks,this.Ya=me();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ra.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const $_="SyncEngine";class HP{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class FP{constructor(e){this.key=e,this.hu=!1}}class $P{constructor(e,n,s,i,r,a){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new _r(l=>RR(l),vf),this.Iu=new Map,this.Eu=new Set,this.Ru=new ze(X.comparator),this.Au=new Map,this.Vu=new V_,this.du={},this.mu=new Map,this.fu=wa.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function GP(t,e,n=!0){const s=pI(t);let i;const r=s.Tu.get(e);return r?(s.sharedClientState.addLocalQueryTarget(r.targetId),i=r.view.lu()):i=await hI(s,e,n,!0),i}async function KP(t,e){const n=pI(t);await hI(n,e,!0,!1)}async function hI(t,e,n,s){const i=await uP(t.localStore,$n(e)),r=i.targetId,a=t.sharedClientState.addLocalQueryTarget(r,n);let l;return s&&(l=await QP(t,e,r,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&sI(t.remoteStore,i),l}async function QP(t,e,n,s,i){t.pu=(m,g,p)=>async function(N,x,S,y){let b=x.view.ru(S);b.Ss&&(b=await i0(N.localStore,x.query,!1).then(({documents:v})=>x.view.ru(v,b)));const I=y&&y.targetChanges.get(x.targetId),B=y&&y.targetMismatches.get(x.targetId)!=null,j=x.view.applyChanges(b,N.isPrimaryClient,I,B);return m0(N,x.targetId,j.au),j.snapshot}(t,m,g,p);const r=await i0(t.localStore,e,!0),a=new qP(e,r.ks),l=a.ru(r.documents),u=ru.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",i),c=a.applyChanges(l,t.isPrimaryClient,u);m0(t,n,c.au);const d=new HP(e,n,a);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function YP(t,e,n){const s=se(t),i=s.Tu.get(e),r=s.Iu.get(i.targetId);if(r.length>1)return s.Iu.set(i.targetId,r.filter(a=>!vf(a,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await Mg(s.localStore,i.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(i.targetId),n&&U_(s.remoteStore,i.targetId),kg(s,i.targetId)}).catch(ja)):(kg(s,i.targetId),await Mg(s.localStore,i.targetId,!0))}async function XP(t,e){const n=se(t),s=n.Tu.get(e),i=n.Iu.get(s.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),U_(n.remoteStore,s.targetId))}async function JP(t,e,n){const s=i6(t);try{const i=await function(a,l){const u=se(a),c=xe.now(),d=l.reduce((p,C)=>p.add(C.key),me());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",p=>{let C=Is(),N=me();return u.xs.getEntries(p,d).next(x=>{C=x,C.forEach((S,y)=>{y.isValidDocument()||(N=N.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(p,C)).next(x=>{m=x;const S=[];for(const y of l){const b=lk(y,m.get(y.key).overlayedDocument);b!=null&&S.push(new yr(y.key,b,vR(b.value.mapValue),ys.exists(!0)))}return u.mutationQueue.addMutationBatch(p,c,S,l)}).next(x=>{g=x;const S=x.applyToLocalDocumentSet(m,N);return u.documentOverlayCache.saveOverlays(p,x.batchId,S)})}).then(()=>({batchId:g.batchId,changes:OR(m)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),function(a,l,u){let c=a.du[a.currentUser.toKey()];c||(c=new ze(de)),c=c.insert(l,u),a.du[a.currentUser.toKey()]=c}(s,i.batchId,n),await ou(s,i.changes),await Rf(s.remoteStore)}catch(i){const r=H_(i,"Failed to persist write");n.reject(r)}}async function fI(t,e){const n=se(t);try{const s=await aP(n.localStore,e);e.targetChanges.forEach((i,r)=>{const a=n.Au.get(r);a&&(Ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?Ee(a.hu,14607):i.removedDocuments.size>0&&(Ee(a.hu,42227),a.hu=!1))}),await ou(n,s,e)}catch(s){await ja(s)}}function d0(t,e,n){const s=se(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.Tu.forEach((r,a)=>{const l=a.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(a,l){const u=se(a);u.onlineState=l;let c=!1;u.queries.forEach((d,m)=>{for(const g of m.ba)g.va(l)&&(c=!0)}),c&&F_(u)}(s.eventManager,e),i.length&&s.Pu.J_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function WP(t,e,n){const s=se(t);s.sharedClientState.updateQueryState(e,"rejected",n);const i=s.Au.get(e),r=i&&i.key;if(r){let a=new ze(X.comparator);a=a.insert(r,Dt.newNoDocument(r,ne.min()));const l=me().add(r),u=new Af(ne.min(),new Map,new ze(de),a,l);await fI(s,u),s.Ru=s.Ru.remove(r),s.Au.delete(e),G_(s)}else await Mg(s.localStore,e,!1).then(()=>kg(s,e,n)).catch(ja)}async function ZP(t,e){const n=se(t),s=e.batch.batchId;try{const i=await rP(n.localStore,e);mI(n,s,null),dI(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await ou(n,i)}catch(i){await ja(i)}}async function e6(t,e,n){const s=se(t);try{const i=await function(a,l){const u=se(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,l).next(m=>(Ee(m!==null,37113),d=m.keys(),u.mutationQueue.removeMutationBatch(c,m))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(s.localStore,e);mI(s,e,n),dI(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await ou(s,i)}catch(i){await ja(i)}}function dI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function mI(t,e,n){const s=se(t);let i=s.du[s.currentUser.toKey()];if(i){const r=i.get(e);r&&(n?r.reject(n):r.resolve(),i=i.remove(e)),s.du[s.currentUser.toKey()]=i}}function kg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(s=>{t.Vu.containsKey(s)||gI(t,s)})}function gI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(U_(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),G_(t))}function m0(t,e,n){for(const s of n)s instanceof uI?(t.Vu.addReference(s.key,e),t6(t,s)):s instanceof cI?(F($_,"Document no longer in limbo: "+s.key),t.Vu.removeReference(s.key,e),t.Vu.containsKey(s.key)||gI(t,s.key)):W(19791,{wu:s})}function t6(t,e){const n=e.key,s=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(s)||(F($_,"New document in limbo: "+n),t.Eu.add(s),G_(t))}function G_(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new X(Ue.fromString(e)),s=t.fu.next();t.Au.set(s,new FP(n)),t.Ru=t.Ru.insert(n,s),sI(t.remoteStore,new ei($n(O_(n.path)),s,"TargetPurposeLimboResolution",gf.ce))}}async function ou(t,e,n){const s=se(t),i=[],r=[],a=[];s.Tu.isEmpty()||(s.Tu.forEach((l,u)=>{a.push(s.pu(u,e,n).then(c=>{var d;if((c||n)&&s.isPrimaryClient){const m=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;s.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(c){i.push(c);const m=P_.Es(u.targetId,c);r.push(m)}}))}),await Promise.all(a),s.Pu.J_(i),await async function(u,c){const d=se(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>P.forEach(c,g=>P.forEach(g.Ts,p=>d.persistence.referenceDelegate.addReference(m,g.targetId,p)).next(()=>P.forEach(g.Is,p=>d.persistence.referenceDelegate.removeReference(m,g.targetId,p)))))}catch(m){if(!qa(m))throw m;F(L_,"Failed to update sequence numbers: "+m)}for(const m of c){const g=m.targetId;if(!m.fromCache){const p=d.vs.get(g),C=p.snapshotVersion,N=p.withLastLimboFreeSnapshotVersion(C);d.vs=d.vs.insert(g,N)}}}(s.localStore,r))}async function n6(t,e){const n=se(t);if(!n.currentUser.isEqual(e)){F($_,"User change. New user:",e.toKey());const s=await ZR(n.localStore,e);n.currentUser=e,function(r,a){r.mu.forEach(l=>{l.forEach(u=>{u.reject(new Q(z.CANCELLED,a))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ou(n,s.Ns)}}function s6(t,e){const n=se(t),s=n.Au.get(e);if(s&&s.hu)return me().add(s.key);{let i=me();const r=n.Iu.get(e);if(!r)return i;for(const a of r){const l=n.Tu.get(a);i=i.unionWith(l.view.nu)}return i}}function pI(t){const e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=s6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WP.bind(null,e),e.Pu.J_=zP.bind(null,e.eventManager),e.Pu.yu=BP.bind(null,e.eventManager),e}function i6(t){const e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=e6.bind(null,e),e}class Mh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return iP(this.persistence,new tP,e.initialUser,this.serializer)}Cu(e){return new WR(k_.Vi,this.serializer)}Du(e){return new hP}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mh.provider={build:()=>new Mh};class r6 extends Mh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ee(this.persistence.referenceDelegate instanceof Nh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new Bk(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ft.withCacheSize(this.cacheSizeBytes):Ft.DEFAULT;return new WR(s=>Nh.Vi(s,n),this.serializer)}}class Pg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>d0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=n6.bind(null,this.syncEngine),await VP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new PP}()}createDatastore(e){const n=bf(e.databaseInfo.databaseId),s=pP(e.databaseInfo);return TP(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,i,r,a,l){return new AP(s,i,r,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>d0(this.syncEngine,n,0),function(){return o0.v()?new o0:new fP}())}createSyncEngine(e,n){return function(i,r,a,l,u,c,d){const m=new $P(i,r,a,l,u,c);return d&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const r=se(i);F(cr,"RemoteStore shutting down."),r.Ea.add(5),await au(r),r.Aa.shutdown(),r.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Pg.provider={build:()=>new Pg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Rs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi="FirestoreClient";class o6{constructor(e,n,s,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this._databaseInfo=i,this.user=Nt.UNAUTHENTICATED,this.clientId=S_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(s,async a=>{F(bi,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(s,a=>(F(bi,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=H_(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Jd(t,e){t.asyncQueue.verifyOperationInProgress(),F(bi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async i=>{s.isEqual(i)||(await ZR(e.localStore,i),s=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function g0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await l6(t);F(bi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>u0(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>u0(e.remoteStore,i)),t._onlineComponents=e}async function l6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F(bi,"Using user provided OfflineComponentProvider");try{await Jd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ur("Error using user provided cache. Falling back to memory cache: "+n),await Jd(t,new Mh)}}else F(bi,"Using default OfflineComponentProvider"),await Jd(t,new r6(void 0));return t._offlineComponents}async function _I(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(F(bi,"Using user provided OnlineComponentProvider"),await g0(t,t._uninitializedComponentsProvider._online)):(F(bi,"Using default OnlineComponentProvider"),await g0(t,new Pg))),t._onlineComponents}function u6(t){return _I(t).then(e=>e.syncEngine)}async function c6(t){const e=await _I(t),n=e.eventManager;return n.onListen=GP.bind(null,e.syncEngine),n.onUnlisten=YP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=KP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=XP.bind(null,e.syncEngine),n}function h6(t,e,n={}){const s=new mi;return t.asyncQueue.enqueueAndForget(async()=>function(r,a,l,u,c){const d=new a6({next:g=>{d.Nu(),a.enqueueAndForget(()=>UP(r,m));const p=g.docs.has(l);!p&&g.fromCache?c.reject(new Q(z.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&g.fromCache&&u&&u.source==="server"?c.reject(new Q(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new jP(O_(l.path),d,{includeMetadataChanges:!0,Ka:!0});return LP(r,m)}(await c6(t),t.asyncQueue,e,n,s)),s.promise}function f6(t,e){const n=new mi;return t.asyncQueue.enqueueAndForget(async()=>JP(await u6(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d6="ComponentProvider",p0=new Map;function m6(t,e,n,s,i){return new N4(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,yI(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI="firestore.googleapis.com",_0=!0;class y0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Q(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vI,this.ssl=_0}else this.host=e.host,this.ssl=e.ssl??_0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=JR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Uk)throw new Q(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}v4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yI(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Q(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Q(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Q(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class K_{constructor(e,n,s,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new y0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new y0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new l4;switch(s.type){case"firstParty":return new f4(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Q(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=p0.get(n);s&&(F(d6,"Removing Datastore"),p0.delete(n),s.terminate())}(this),Promise.resolve()}}function g6(t,e,n,s={}){var c;t=Il(t,K_);const i=La(e),r=t._getSettings(),a={...r,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(m1(`https://${l}`),g1("Firestore",!0)),r.host!==vI&&r.host!==l&&ur("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...r,host:l,ssl:i,emulatorOptions:s};if(!ir(u,a)&&(t._setSettings(u),s.mockUserToken)){let d,m;if(typeof s.mockUserToken=="string")d=s.mockUserToken,m=Nt.MOCK_USER;else{d=pD(s.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const g=s.mockUserToken.sub||s.mockUserToken.user_id;if(!g)throw new Q(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Nt(g)}t._authCredentials=new u4(new lR(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Q_(this.firestore,e,this._query)}}class mt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mt(this.firestore,e,this._key)}toJSON(){return{type:mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(su(n,mt._jsonSchema))return new mt(e,s||null,new X(Ue.fromString(n.referencePath)))}}mt._jsonSchemaVersion="firestore/documentReference/1.0",mt._jsonSchema={type:tt("string",mt._jsonSchemaVersion),referencePath:tt("string")};class kl extends Q_{constructor(e,n,s){super(e,n,O_(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new X(e))}withConverter(e){return new kl(this.firestore,e,this._path)}}function Wd(t,e,...n){if(t=hn(t),arguments.length===1&&(e=S_.newId()),y4("doc","path",e),t instanceof K_){const s=Ue.fromString(e,...n);return MT(s),new mt(t,null,new X(s))}{if(!(t instanceof mt||t instanceof kl))throw new Q(z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ue.fromString(e,...n));return MT(s),new mt(t.firestore,t instanceof kl?t.converter:null,new X(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0="AsyncQueue";class E0{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new tI(this,"async_queue_retry"),this._c=()=>{const s=Xd();s&&F(v0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Xd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Xd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new mi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!qa(e))throw e;F(v0,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,Rs("INTERNAL UNHANDLED ERROR: ",T0(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=q_.createAndSchedule(this,e,n,s,r=>this.hc(r));return this.tc.push(i),i}uc(){this.nc&&W(47125,{Pc:T0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function T0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Y_ extends K_{constructor(e,n,s,i){super(e,n,s,i),this.type="firestore",this._queue=new E0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new E0(e),this._firestoreClient=void 0,await e}}}function p6(t,e){const n=typeof t=="object"?t:v1(),s=typeof t=="string"?t:bh,i=c_(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const r=mD("firestore");r&&g6(i,...r)}return i}function EI(t){if(t._terminated)throw new Q(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||_6(t),t._firestoreClient}function _6(t){var s,i,r,a;const e=t._freezeSettings(),n=m6(t._databaseId,((s=t._app)==null?void 0:s.options.appId)||"",t._persistenceKey,(i=t._app)==null?void 0:i.options.apiKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new o6(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this._byteString=e}static fromBase64String(e){try{return new En(Rt.fromBase64String(e))}catch(n){throw new Q(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new En(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:En._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(su(e,En._jsonSchema))return En.fromBase64String(e.bytes)}}En._jsonSchemaVersion="firestore/bytes/1.0",En._jsonSchema={type:tt("string",En._jsonSchemaVersion),bytes:tt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Kn._jsonSchemaVersion}}static fromJSON(e){if(su(e,Kn._jsonSchema))return new Kn(e.latitude,e.longitude)}}Kn._jsonSchemaVersion="firestore/geoPoint/1.0",Kn._jsonSchema={type:tt("string",Kn._jsonSchemaVersion),latitude:tt("number"),longitude:tt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,i){if(s.length!==i.length)return!1;for(let r=0;r<s.length;++r)if(s[r]!==i[r])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Mn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(su(e,Mn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Mn(e.vectorValues);throw new Q(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Mn._jsonSchemaVersion="firestore/vectorValue/1.0",Mn._jsonSchema={type:tt("string",Mn._jsonSchemaVersion),vectorValues:tt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=/^__.*__$/;class v6{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new yr(e,this.data,this.fieldMask,n,this.fieldTransforms):new iu(e,this.data,n,this.fieldTransforms)}}function SI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W(40011,{dataSource:t})}}class J_{constructor(e,n,s,i,r,a){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,r===void 0&&this.validatePath(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new J_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var i;const n=(i=this.path)==null?void 0:i.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){var i;const n=(i=this.path)==null?void 0:i.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return xh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(SI(this.dataSource)&&y6.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class E6{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||bf(e)}createContext(e,n,s,i=!1){return new J_({dataSource:e,methodName:n,targetDoc:s,path:St.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function T6(t){const e=t._freezeSettings(),n=bf(t._databaseId);return new E6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function S6(t,e,n,s,i,r={}){const a=t.createContext(r.merge||r.mergeFields?2:0,e,n,i);RI("Data must be an object, but it was:",a,s);const l=bI(s,a);let u,c;if(r.merge)u=new Nn(a.fieldMask),c=a.fieldTransforms;else if(r.mergeFields){const d=[];for(const m of r.mergeFields){const g=Z_(e,m,n);if(!a.contains(g))throw new Q(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);w6(d,g)||d.push(g)}u=new Nn(d),c=a.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,c=a.fieldTransforms;return new v6(new vn(l),u,c)}class W_ extends X_{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new Vl(e.serializer,MR(e.serializer,this.Vc));return new ik(e.path,n)}isEqual(e){return e instanceof W_&&this.Vc===e.Vc}}function AI(t,e){if(wI(t=hn(t)))return RI("Unsupported field value:",e,t),bI(t,e);if(t instanceof X_)return function(s,i){if(!SI(i.dataSource))throw i.createError(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${s._methodName}() is not currently supported inside arrays`);const r=s._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(s,i){const r=[];let a=0;for(const l of s){let u=AI(l,i.childContextForArray(a));u==null&&(u={nullValue:"NULL_VALUE"}),r.push(u),a++}return{arrayValue:{values:r}}}(t,e)}return function(s,i){if((s=hn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return MR(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const r=xe.fromDate(s);return{timestampValue:Oh(i.serializer,r)}}if(s instanceof xe){const r=new xe(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Oh(i.serializer,r)}}if(s instanceof Kn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof En)return{bytesValue:HR(i.serializer,s._byteString)};if(s instanceof mt){const r=i.databaseId,a=s.firestore._databaseId;if(!a.isEqual(r))throw i.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:x_(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof Mn)return function(a,l){const u=a instanceof Mn?a.toArray():a;return{mapValue:{fields:{[_R]:{stringValue:yR},[wh]:{arrayValue:{values:u.map(d=>{if(typeof d!="number")throw l.createError("VectorValues must only contain numeric values.");return N_(l.serializer,d)})}}}}}}(s,i);if(XR(s))return s._toProto(i.serializer);throw i.createError(`Unsupported field value: ${A_(s)}`)}(t,e)}function bI(t,e){const n={};return hR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pr(t,(s,i)=>{const r=AI(i,e.childContextForField(s));r!=null&&(n[s]=r)}),{mapValue:{fields:n}}}function wI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof xe||t instanceof Kn||t instanceof En||t instanceof mt||t instanceof X_||t instanceof Mn||XR(t))}function RI(t,e,n){if(!wI(n)||!uR(n)){const s=A_(n);throw s==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+s)}}function Z_(t,e,n){if((e=hn(e))instanceof TI)return e._internalPath;if(typeof e=="string")return b6(t,e);throw xh("Field path arguments must be of type string or ",t,!1,void 0,n)}const A6=new RegExp("[~\\*/\\[\\]]");function b6(t,e,n){if(e.search(A6)>=0)throw xh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new TI(...e.split("."))._internalPath}catch{throw xh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function xh(t,e,n,s,i){const r=s&&!s.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(r||a)&&(u+=" (found",r&&(u+=` in field ${s}`),a&&(u+=` in document ${i}`),u+=")"),new Q(z.INVALID_ARGUMENT,l+t+u)}function w6(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{convertValue(e,n="none"){switch(Si(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw W(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return pr(e,(i,r)=>{s[i]=this.convertValue(r,n)}),s}convertVectorValue(e){var s,i,r;const n=(r=(i=(s=e.fields)==null?void 0:s[wh].arrayValue)==null?void 0:i.values)==null?void 0:r.map(a=>$e(a.doubleValue));return new Mn(n)}convertGeoPoint(e){return new Kn($e(e.latitude),$e(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=_f(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Ol(e));default:return null}}convertTimestamp(e){const n=Ei(e);return new xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Ue.fromString(e);Ee(YR(s),9688,{name:e});const i=new Nl(s.get(1),s.get(3)),r=new X(s.popFirst(5));return i.isEqual(n)||Rs(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6 extends R6{constructor(e){super(),this.firestore=e}convertBytes(e){return new En(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,n)}}function C6(t){return new W_("increment",t)}const S0="@firebase/firestore",A0="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,n,s,i,r){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new O6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(Z_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class O6 extends II{data(){return super.data()}}function N6(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class Po{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wi extends II{constructor(e,n,s,i,r,a){super(e,n,s,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Oc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Z_("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Wi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Wi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wi._jsonSchema={type:tt("string",Wi._jsonSchemaVersion),bundleSource:tt("string","DocumentSnapshot"),bundleName:tt("string"),bundle:tt("string")};class Oc extends Wi{data(e={}){return super.data(e)}}class al{constructor(e,n,s,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Po(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Oc(this._firestore,this._userDataWriter,s.key,s,new Po(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(l=>{const u=new Oc(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Po(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>r||l.type!==3).map(l=>{const u=new Oc(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Po(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return l.type!==0&&(c=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:D6(l.type),doc:u,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=al._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=S_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],i=[];return this.docs.forEach(r=>{r._document!==null&&(n.push(r._document),s.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),i.push(r.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function D6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */al._jsonSchemaVersion="firestore/querySnapshot/1.0",al._jsonSchema={type:tt("string",al._jsonSchemaVersion),bundleSource:tt("string","QuerySnapshot"),bundleName:tt("string"),bundle:tt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M6(t){t=Il(t,mt);const e=Il(t.firestore,Y_),n=EI(e);return h6(n,t._key).then(s=>V6(e,t,s))}function Zd(t,e,n){t=Il(t,mt);const s=Il(t.firestore,Y_),i=N6(t.converter,e,n),r=T6(s);return x6(s,[S6(r,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ys.none())])}function x6(t,e){const n=EI(t);return f6(n,e)}function V6(t,e,n){const s=n.docs.get(e._key),i=new I6(t);return new Wi(t,i,e._key,s,new Po(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){o4(Ua),Ta(new rr("firestore",(s,{instanceIdentifier:i,options:r})=>{const a=s.getProvider("app").getImmediate(),l=new Y_(new c4(s.getProvider("auth-internal")),new d4(a,s.getProvider("app-check-internal")),D4(a,i),a);return r={useFetchStreams:n,...r},l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),fi(S0,A0,e),fi(S0,A0,"esm2020")})();const k6={apiKey:"AIzaSyCo9JCoN0BRb2dB6a5Wm6itU3Fsr0G3fd0",authDomain:"my-react-app-90516368-4aea3.firebaseapp.com",projectId:"my-react-app-90516368-4aea3",storageBucket:"my-react-app-90516368-4aea3.firebasestorage.app",messagingSenderId:"1055850855092",appId:"1:1055850855092:web:4c429dcf291ab5df7ab5e1"},CI=y1(k6),ol=r4(CI),em=p6(CI),P6="your_api_key_here";let Nc=null;Nc=new le({apiKey:P6,dangerouslyAllowBrowser:!0});function L6(t){const e=t;return typeof e=="object"&&e!==null&&(e.image===null||typeof e.image=="string")&&typeof e.diagnosis=="string"&&typeof e.date=="string"}const Yu=5,tm=20,b0=20,U6=(t,e)=>new Promise((n,s)=>{const i=new FileReader;i.onload=r=>{var l;const a=new Image;a.onload=()=>{const u=document.createElement("canvas"),c=e/a.width;u.width=e,u.height=a.height*c;const d=u.getContext("2d");d?(d.drawImage(a,0,0,u.width,u.height),n(u.toDataURL("image/jpeg",.8))):s("Failed to get canvas context")},a.onerror=s,a.src=(l=r.target)==null?void 0:l.result},i.onerror=s,i.readAsDataURL(t)}),w0=t=>{try{localStorage.setItem("diagnosisHistory",JSON.stringify(t))}catch(e){console.error("Could not save history to localStorage:",e),e instanceof DOMException&&(e.name==="QuotaExceededError"||e.name==="NS_ERROR_DOM_QUOTA_REACHED")&&alert("       .       .")}};function z6(){return L.jsx("div",{className:"container",children:L.jsxs("div",{className:"api-key-missing content-card",children:[L.jsx("h2",{children:"OpenAI API  "}),L.jsx("p",{children:"       ."}),L.jsx("p",{children:"     :"}),L.jsxs("p",{children:[L.jsx("strong",{children:":"})," ",L.jsx("code",{children:"VITE_OPENAI_API_KEY"})]}),L.jsxs("p",{children:[L.jsx("strong",{children:":"})," ",L.jsx("code",{children:"sk-..."}),"  OpenAI API "]})]})})}function B6({onLoginSuccess:t}){const[e,n]=Le.useState(""),[s,i]=Le.useState(""),[r,a]=Le.useState(!1),[l,u]=Le.useState(null),c=async()=>{const g=new ls;try{await mV(ol,g),t()}catch(p){d(p)}},d=g=>{switch(console.error("Authentication error:",g),g.code){case"auth/user-not-found":u("  .");break;case"auth/wrong-password":u(" .");break;case"auth/email-already-in-use":u("   .");break;case"auth/weak-password":u(" 6  .");break;case"auth/popup-closed-by-user":u("  .  .");break;default:u("   .  .");break}},m=async g=>{g.preventDefault(),u(null);try{r?await Hx(ol,e,s):await Fx(ol,e,s),t()}catch(p){d(p)}};return L.jsx("div",{className:"auth-screen",children:L.jsxs("div",{className:"auth-container",children:[L.jsx("h1",{children:"AI  "}),L.jsx("p",{children:"    ."}),L.jsxs("div",{className:"auth-card",children:[L.jsx("h2",{children:r?"":""}),L.jsxs("form",{onSubmit:m,children:[L.jsxs("div",{className:"input-group",children:[L.jsx("label",{htmlFor:"email",children:""}),L.jsx("input",{type:"email",id:"email",value:e,onChange:g=>n(g.target.value),placeholder:"you@example.com",required:!0})]}),L.jsxs("div",{className:"input-group",children:[L.jsx("label",{htmlFor:"password",children:""}),L.jsx("input",{type:"password",id:"password",value:s,onChange:g=>i(g.target.value),placeholder:"6 ",required:!0})]}),l&&L.jsx("p",{className:"auth-error",children:l}),L.jsx("button",{type:"submit",className:"auth-button main-auth-button",children:r?"":""})]}),L.jsx("div",{className:"auth-separator",children:L.jsx("span",{children:""})}),L.jsx("button",{onClick:c,className:"auth-button google-auth-button",children:"Google  "}),L.jsxs("p",{className:"auth-toggle",children:[r?"  ?":" ?",L.jsx("button",{onClick:()=>{a(!r),u(null)},children:r?"":""})]})]})]})})}function j6(){const[t,e]=Le.useState(null),[n,s]=Le.useState(""),[i,r]=Le.useState(!1),[a,l]=Le.useState([]),u=Le.useRef(null),[c,d]=Le.useState(!1),[m,g]=Le.useState(null),[p,C]=Le.useState(null),[N,x]=Le.useState(0),[S,y]=Le.useState(Yu),[b,I]=Le.useState(()=>localStorage.getItem("theme")||"light"),[B,j]=Le.useState(!1),v=Le.useCallback(async G=>{if(G){const re=Wd(em,"users",G.uid),be=await M6(re);if(be.exists()){const Ye=be.data();x(Ye.diagnosisCount||0),Ye.hasPaid?y(1/0):y(Ye.diagnosisLimit||tm)}else await Zd(re,{email:G.email,displayName:G.displayName,diagnosisCount:0,diagnosisLimit:tm,hasPaid:!1,createdAt:new Date}),x(0),y(tm)}else{const re=parseInt(localStorage.getItem("guestDiagnosisCount")||"0",10);x(re),y(Yu)}},[]);Le.useEffect(()=>{const G=Kx(ol,re=>{C(re),v(re),j(!0)});return()=>G()},[v]),Le.useEffect(()=>{document.body.setAttribute("data-theme",b),localStorage.setItem("theme",b)},[b]),Le.useEffect(()=>{const G=localStorage.getItem("diagnosisHistory");if(G)try{const re=JSON.parse(G);if(Array.isArray(re)){const be=re.filter(L6).map((Ye,Wn)=>({...Ye,id:Ye.id||Date.now()+Wn}));l(be.slice(0,b0))}}catch(re){console.error("Error parsing history, clearing it.",re),localStorage.removeItem("diagnosisHistory")}},[]);const E=()=>{I(G=>G==="light"?"dark":"light")},T=()=>{};if(!Nc)return L.jsx(z6,{});if(!B)return L.jsx("div",{className:"loading-screen",children:" ..."});if(!p)return L.jsx(B6,{onLoginSuccess:T});const A=async()=>{try{await Qx(ol)}catch(G){console.error("Logout error:",G)}},w=async G=>{if(G&&G.type.startsWith("image/"))try{const re=await U6(G,400);e(re),s("")}catch(re){console.error("Image resizing failed:",re);const be=new FileReader;be.onloadend=()=>{e(be.result)},be.readAsDataURL(G)}},O=()=>{e(null),s(""),u.current&&(u.current.value="")},R=G=>{var be;const re=(be=G.target.files)==null?void 0:be[0];re&&w(re)},Qe=G=>{G.preventDefault(),G.stopPropagation(),d(!0)},It=G=>{G.preventDefault(),G.stopPropagation(),d(!1)},H=G=>{G.preventDefault(),G.stopPropagation()},oe=G=>{G.preventDefault(),G.stopPropagation(),d(!1);const re=G.dataTransfer.files[0];re&&w(re)},te=async()=>{if(!(!t||!Nc)){if(N>=S){const G=p?"   .    .":`   ${Yu}  .     .`;alert(G);return}r(!0),s("");try{const re=(await Nc.chat.completions.create({model:"gpt-4o",messages:[{role:"user",content:[{type:"text",text:"   ,      .   ,        ,    .    ,    ."},{type:"image_url",image_url:{url:t}}]}]})).choices[0].message.content||"    .";if(s(re),p&&S!==1/0){const Wn=Wd(em,"users",p.uid);await Zd(Wn,{diagnosisCount:C6(1)},{merge:!0}),x(Fa=>Fa+1)}else p||(localStorage.setItem("guestDiagnosisCount",(N+1).toString()),x(Wn=>Wn+1));const Ye=[{id:Date.now(),image:t,diagnosis:re,date:new Date().toLocaleString()},...a].slice(0,b0);l(Ye),w0(Ye)}catch(G){let re="    .";G instanceof Error&&(re=G.message),s(` : ${re}`)}finally{r(!1)}}},Ae=(G,re)=>{if(G.stopPropagation(),window.confirm("    ?")){const be=a.filter(Ye=>Ye.id!==re);l(be),w0(be),(m==null?void 0:m.id)===re&&g(null)}},Be=async()=>{if(!p)return;const G=Wd(em,"users",p.uid);try{await Zd(G,{hasPaid:!0,diagnosisLimit:1/0},{merge:!0}),await v(p),alert(" !     .")}catch(re){console.error("Payment simulation failed:",re),alert("    .")}},zt=N>=S;return L.jsxs(L.Fragment,{children:[L.jsxs("header",{className:"hero-section",children:[L.jsxs("div",{className:"header-controls",children:[L.jsx("div",{className:"theme-toggle-container",children:L.jsx("button",{onClick:E,className:"theme-toggle-button",children:b==="light"?" ":" "})}),L.jsxs("div",{className:"auth-controls",children:[p&&L.jsxs("div",{className:"user-info",children:[p.photoURL&&L.jsx("img",{src:p.photoURL,alt:p.displayName||"User",className:"user-avatar"}),L.jsx("span",{children:p.displayName||p.email}),L.jsx("button",{onClick:A,className:"auth-button",children:""})]}),L.jsx("a",{href:"https://polar.sh/nmdong-hue",className:"polar-button","data-polar-button-after":"Sponsor",children:L.jsx("img",{src:"https://polar.sh/embed/avatars/nmdong-hue.svg",alt:"nmdong-hue Polar profile"})})]})]}),L.jsxs("div",{className:"container",children:[L.jsx("h1",{children:"AI  "}),L.jsx("p",{children:"       ."}),L.jsxs("div",{className:"usage-info",children:["  : ",S===1/0?"":`${Math.max(0,S-N)} / ${S}`,p&&S!==1/0&&L.jsx("button",{onClick:Be,className:"simulate-payment-button",children:"   ()"})]})]})]}),L.jsxs("div",{className:"container",children:[L.jsxs("div",{className:"main-content",children:[L.jsxs("div",{className:"content-card upload-section",children:[L.jsx("h2",{children:"1.  "}),L.jsx("div",{className:`image-placeholder ${c?"dragging":""}`,onClick:()=>{var G;return!zt&&((G=u.current)==null?void 0:G.click())},onDragEnter:Qe,onDragLeave:It,onDragOver:H,onDrop:oe,style:{backgroundImage:t?`url(${t})`:"none",cursor:zt?"not-allowed":"pointer"},children:!t&&L.jsxs("div",{className:"placeholder-content",children:[L.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[L.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),L.jsx("polyline",{points:"17 8 12 3 7 8"}),L.jsx("line",{x1:"12",x2:"12",y1:"3",y2:"15"})]}),L.jsx("span",{children:"     "})]})}),L.jsx("input",{type:"file",accept:"image/*",onChange:R,ref:u,style:{display:"none"},disabled:zt}),L.jsxs("div",{className:"upload-actions",children:[L.jsx("button",{onClick:te,disabled:!t||i||zt,className:"action-button",children:i?L.jsxs(L.Fragment,{children:[L.jsx("div",{className:"spinner"}),L.jsx("span",{children:" ..."})]}):zt?" ":""}),t&&!i&&L.jsx("button",{onClick:O,className:"clear-button\\",children:""})]}),zt&&L.jsx("div",{className:"limit-message",children:p?"   .     !":`   ${Yu}  .     !`})]}),L.jsxs("div",{className:"content-card results-section",children:[L.jsxs("div",{className:"card-header",children:[L.jsx("h2",{children:"2.  "}),(n||i)&&L.jsx("button",{onClick:O,className:"reset-button-header\\",children:""})]}),i||n?L.jsxs(L.Fragment,{children:[i&&!n&&L.jsx("div",{className:"spinner-large\\"}),n&&t&&L.jsx("img",{src:t,alt:" ",className:"result-image"}),L.jsx("pre",{className:"diagnosis-output",children:n})]}):L.jsx("div",{className:"placeholder-content",style:{height:"100%",justifyContent:"center"},children:L.jsx("p",{children:"       ."})})]})]}),a.length>0&&L.jsxs("div",{className:"content-card history-section",children:[L.jsx("h2",{children:"  "}),L.jsxs("ul",{children:[a.map(G=>L.jsxs("li",{onClick:()=>g(G),children:[G.image?L.jsx("img",{src:G.image,alt:" "}):L.jsx("div",{className:"history-image-placeholder\\"}),L.jsxs("div",{className:"history-info",children:[L.jsxs("div",{className:"history-text",children:[L.jsxs("p",{children:[G.diagnosis.substring(0,80),"..."]}),L.jsx("span",{children:G.date})]}),L.jsx("button",{className:"history-delete-button",onClick:re=>Ae(re,G.id),children:""})]})]},G.id)),"\\"]})]})]}),m&&L.jsx("div",{className:"modal-backdrop",onClick:()=>g(null),children:L.jsxs("div",{className:"modal-content",onClick:G=>G.stopPropagation(),children:[L.jsx("button",{className:"modal-close-button",onClick:()=>g(null),children:""}),m.image?L.jsx("img",{src:m.image,alt:" ",className:"modal-image"}):L.jsx("div",{className:"modal-image-placeholder\\"}),"\\",L.jsxs("div",{className:"modal-diagnosis",children:[L.jsx("h2",{children:"  "}),L.jsx("pre",{children:m.diagnosis}),L.jsxs("span",{children:[" : ",m.date]})]})]})}),L.jsx("footer",{children:L.jsx("div",{className:"container",children:L.jsxs("p",{children:[" ",new Date().getFullYear()," AI  .   ."]})})})]})}eN.createRoot(document.getElementById("root")).render(L.jsx(Le.StrictMode,{children:L.jsx(j6,{})}));
